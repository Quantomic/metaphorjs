'use strict';(function(){function z(e){return"function"==typeof e}function u(e){return"string"==typeof e||e===""+e}function pa(e){if(null===e||"object"!=typeof e)return!1;e=K(e);return 2<e||-1==e}function qa(e,b,a,c){setTimeout(function(){e.apply(b,a||[])},c||0)}function W(e){var b=e.stack||Error().stack;if("undefined"!=typeof console&&console.log)qa(function(){console.log(e);b&&console.log(b)});else throw e;}function N(){}function ia(e){return"object"==typeof e&&3===K(e)&&!e.nodeType&&e.constructor===
Object}function za(e){return!0===e||!1===e}function Ja(e){return null===e}function O(e){return"object"==typeof e&&5===K(e)}function Ka(e){return e===window||e&&e.document&&e.location&&e.alert&&e.setInterval}function ja(e){e=K(e);return 3>e&&-1<e}function ka(){return!1}function X(e){if(e&&void 0!=!e.length&&e!==""+e){for(var b=[],a=-1,c=e.length>>>0;++a!==c;b[a]=e[a]);return b}return e?[e]:[]}function T(e){if(!e||!e.then)return!1;var b,a;return"object"!=(a=typeof e)&&"function"!=a?!1:z(b=e.then)?b:
!1}function mb(e){var b={},a,c,d=e.attributes;e=0;for(a=d.length;e<a;e++)c=d[e],b[c.name]=c.value;return b}function la(e){var b=document.createDocumentFragment();if(u(e)){var a=document.createElement("div");a.innerHTML=e;e=a.childNodes}if(e.nodeType)b.appendChild(e);else for(var a=-1,c=e.length>>>0;++a!==c;b.appendChild(e[0]));return b}function da(e,b){b&&(e.className=e.className.replace(ta("(?:^|\\s)"+b+"(?!\\S)"),""))}function La(e,b){return b?ta("(?:^|\\s)"+b+"(?!\\S)").test(e.className):!1}function ma(e,
b){b&&!La(e,b)&&(e.className+=" "+b)}function w(e,b,a){e.attachEvent?e.attachEvent("on"+b,a):e.addEventListener(b,a,!1)}function na(e,b,a){e.detachEvent?e.detachEvent("on"+b,a):e.removeEventListener(b,a,!1)}function Xa(e,b){var a,c;if(!e||!u(e))return null;try{c=new DOMParser,a=c.parseFromString(e,b||"text/xml")}catch(d){a=void 0}if(!a||a.getElementsByTagName("parsererror").length)throw"Invalid XML: "+e;return a}function ua(e,b,a,c,d){var f=!1!==b;b=b||{};d=d||[];a=a||b.scope;c=c||b.node;b.scope=
b.scope||a;b.node=b.node||c;var g=u(e)?Aa(e):e;if(!g)throw"Component "+e+" not found";a&&g.$isolateScope&&(b.scope=a=a.$newIsolated());var h,k=[];e=g.template||b.template||null;var n=g.templateUrl||b.templateUrl||null,v=a?a.$app:null,y=Ya.global(),t=v?v.inject:y.inject,s=v?v:y,q=c?c.getAttribute("mjs-cloak"):null,m={$node:c||null,$scope:a||null,$config:b||null,$args:d||null};if(g.resolve)for(h in g.resolve)(function(f){var n=new E,e;k.push(n.done(function(a){m[f]=a;b[f]=a;d.push(a)}));e=g.resolve[h];
z(e)?n.resolve(e(a,c)):u(e)?n.resolve(t.resolve(e)):n.resolve(t.call(s,e,null,l({},m,b,!1,!1)))})(h);f&&(e||n)&&(b.template=new ra({scope:a,node:c,deferRendering:!0,ownRenderer:!0,tpl:e,url:n}),k.push(b.template.initPromise),c&&c.firstChild&&L(c,"mjs-transclude",la(c.childNodes)));f&&d.unshift(b);var p;k.length?(p=new E,E.all(k).done(function(){p.resolve(t.call(s,g,null,l({},m,b,!1,!1),d))})):p=E.resolve(t.call(s,g,null,l({},m,b,!1,!1),d));c&&p.isPending()&&null!==q&&(q?ma(c,q):c.style.visibility=
"hidden",p.then(function(){q?da(c,q):c.style.visibility=""}));c&&p.then(function(){da(c,"mjs-cloak")});return p}function Ba(){return!0}function nb(e){return e.replace(ob,function(b){return b.charAt(1).toUpperCase()})}function ea(e,b,a){var c=L(e,"config"),d;if(c)return c;c={};if(a||null!==(a=e.getAttribute("mjs-config")))for(d in e.removeAttribute("mjs-config"),b=a?Ca(a)(b||{}):{},b)c[d]=b[d];b=pb(e);for(d in b)a=b[d],c[d]=""===a?!0:a;L(e,"config",c);return c}function Da(e){var b={top:0,left:0};if(!va(e)||
e===window)return b;e.getBoundingClientRect&&(b=e.getBoundingClientRect());return{top:b.top+Ea()-ca.clientTop,left:b.left+Fa()-ca.clientLeft}}function $a(e,b){var a,c,d={top:0,left:0};if(e===window||e===ca)return d;if("fixed"==fa(e,"position"))c=e.getBoundingClientRect();else{if(b)return d=Da(e),a=Da(b),d={left:d.left-a.left,top:d.top-a.top},0>d.left&&(d.left=0),0>d.top&&(d.top=0),d;for(a=e.offsetParent||ca;a&&a!=ca&&"static"==fa(a,"position");)a=a.offsetParent;a=a||ca;c=Da(e);a!==ca&&(d=Da(a));d.top+=
fa(a,"borderTopWidth",!0);d.left+=fa(a,"borderLeftWidth",!0)}return{top:c.top-d.top-fa(e,"marginTop",!0),left:c.left-d.left-fa(e,"marginLeft",!0)}}function ab(e){var b;a:{for(var a=e,c;a;){c=L(a,"mjs-transclude");if(void 0!==c){b=c;break a}a=a.parentNode}b=void 0}if(b){e.firstChild&&L(e,"mjs-transclude",la(e.childNodes));a=e.parentNode;c=e.nextSibling;b=Ma(b);var d=X(b.childNodes);a.removeChild(e);a.insertBefore(b,c);return d}return null}function qb(e,b,a){a||(a="asc");e=e.slice();e.sort(function(a,
d){var f=typeof a,g=a,h=d;if(f!=typeof d)return 0;"object"==f&&(z(b)?(g=b(a),h=b(d)):(g=a[b],h=d[b]));if("number"==typeof g)return g-h;g=(""+g).toLowerCase();h=(""+h).toLowerCase();return g===h?0:g>h?1:-1});return"desc"==a?e.reverse():e}function rb(e){var b=!1,a=!0,c=window,d=c.document,f=d.documentElement,g=function(a){if("readystatechange"!=a.type||"complete"==d.readyState)na("load"==a.type?c:d,a.type,g),!b&&(b=!0)&&e.call(c,a.type||a)},h=function(){try{f.doScroll("left")}catch(a){setTimeout(h,
50);return}g("poll")};if("complete"==d.readyState)e.call(c,"lazy");else{if(d.createEventObject&&f.doScroll){try{a=!c.frameElement}catch(k){}a&&h()}w(d,"DOMContentLoaded",g);w(d,"readystatechange",g);w(c,"load",g)}}function sb(e,b,a,c){e.removeAttribute("mjs-app");try{var d=ua(b||"MetaphorJs.cmp.App",!1,a,e,[e,a]);return!1!==c?d.done(function(a){a.run();return a}):d}catch(f){return W(f),E.reject(f)}}var Na={lib:{},cmp:{},view:{}},tb=Object.prototype.toString,K=function(){var e={"[object String]":0,
"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var a=e[tb.call(b)];return void 0===a?-1:1==a&&isNaN(b)?8:a}}(),ga=function(e,b){var a={};e||(e="undefined"!=typeof global?global:window);this.register=function(c,d){var f;f=c;var g=f.split("."),h,k=g.pop();h=g.join(".");var n=g.length,v,y=e;if(a[h])f=[a[h],k,f];else{if(0<n)for(h=0;h<n;h++){v=
g[h];if(b&&0==h)if(v==b){y=e;continue}else f=b+"."+f;void 0===y[v]&&(y[v]={});y=y[v]}else b&&(f=b+"."+f);f=[y,k,f]}g=f[0];k=f[1];pa(g)&&void 0===g[k]&&(g[k]=d,a[f[2]]=d);return d};this.exists=function(b){return void 0!==a[b]};this.get=function(c,d){if(void 0!==a[c])return a[c];if(b&&void 0!==a[b+"."+c])return a[b+"."+c];if(!d){var f=c.split("."),g,h=f.length,k,n=e;for(g=0;g<h;g++)if(k=f[g],b&&0==g&&k==b)n=e;else{if(void 0===n[k])return;n=n[k]}n&&(a[c]=n);return n}};this.add=function(c,d){b&&0!==c.indexOf(b)&&
(c=b+"."+c);void 0===a[c]&&(a[c]=d);return d};this.remove=function(b){delete a[b]};this.normalize=function(a){return a&&b&&0!==a.indexOf(b)?b+"."+a:a}};ga.prototype.register=null;ga.prototype.exists=null;ga.prototype.get=null;ga.prototype.add=null;ga.prototype.remove=null;ga.prototype.normalize=null;var aa=Array.prototype.slice,ub=function(e,b){var a=function(){},c;a.prototype=e.prototype;a=new a;c=e.apply(a,b);return pa(c)||!1===c?c:a},vb=function(){var e=function(){this.supr&&this.supr!==N&&this.supr.apply(this,
arguments)},b=function(a,b,c){var d=a.prototype[b]||("$construct"==b?a:N)||N;return function(){var a,b=this.supr;this.supr=d;a=c.apply(this,arguments);this.supr=b;return a}},a=function(a,c,d){for(var k in c)c.hasOwnProperty(k)&&(a[k]=!z(c[k])||!z(d.prototype[k])&&d.prototype[k]?c[k]:b(d,k,c[k]))},c=function(){return function(){if(!this)throw"Must instantiate via new";this.$construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)}},d=function(b){b||(b=new ga);var d=function(){};
d.prototype={$class:null,$extends:null,$construct:function(){},$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$override:function(){},destroy:function(){for(var a in this)this.hasOwnProperty(a)&&(this[a]=null)}};d.$self=d;d.$instantiate=function(){var a=arguments;switch(a.length){case 0:return new this;case 1:return new this(a[0]);case 2:return new this(a[0],a[1]);case 3:return new this(a[0],a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:return k(this,
a)}};d.$extend=function(a,b,c){return h(a,b,c,this)};var h=function(h,k,y,t){z(h)||(y=k,k=h,h=null);k=k||{};var s=k.$class,q=t||k.$extends,m,p;t=q&&u(q)?b.get(q):d;q?u(q)?t=b.get(q):(t=q,q=t.$class||""):(t=d,q="");if(q&&!t)throw Error(q+" not found");s&&(s=b.normalize(s));k.$class=s;k.$extends=q;p=function(){};p.prototype=t.prototype;q=new p;p=null;k.$construct=h||e;a(q,k,t);h=c();q.constructor=h;h.prototype=q;for(m in d)"prototype"!=m&&d.hasOwnProperty(m)&&(h[m]=d[m]);for(m in t)"prototype"!=m&&
t.hasOwnProperty(m)&&(h[m]=t[m]);if(y)for(m in y)"prototype"!=m&&y.hasOwnProperty(m)&&(h[m]=y[m]);h.$parent=t;h.$self=h;s&&b.register(s,h);return h},k=function(a){var c=b.get(a),d=aa.call(arguments,1);if(!c)throw Error(a+" not found");return c.$instantiate.apply(c,d)};this.factory=k;this.isSubclassOf=function(a,c){var d=a,h=b.get;c=u(c)?b.normalize(c):c.prototype.$class;for(u(a)&&(d=h(b.normalize(a)));d&&d.prototype;){if(d.prototype.$class==c)return!0;d=d.$parent}return!1};this.isInstanceOf=function(a,
c){var d=u(c)?b.get(c):c;return d?a instanceof d:!1};this.define=h;this.BaseClass=d};d.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null};return d}(),V=new ga(Na,"MetaphorJs"),B=(new vb(V)).define,r=Function.prototype.bind?function(e,b){return e.bind(b)}:function(e,b){return function(){return e.apply(b,arguments)}},l=function(){return function b(){var a=!1,c=!1,d=aa.call(arguments),f=d.shift(),g,h,k;za(d[d.length-1])&&(a=d.pop());za(d[d.length-1])&&(c=a,a=d.pop());for(;d.length;)if(g=
d.shift())for(h in g)if(g.hasOwnProperty(h)&&void 0!==(k=g[h]))if(c)if(f[h]&&ia(f[h])&&ia(k))b(f[h],k,a,c);else{if(!0===a||void 0==f[h])ia(k)?(f[h]={},b(f[h],k,a,!0)):f[h]=k}else if(!0===a||void 0==f[h])f[h]=k;return f}}(),Q=function(){var e=["0","0","0"];return function(){for(var b=e.length,a;b;){b--;a=e[b].charCodeAt(0);if(57==a)return e[b]="A",e.join("");if(90==a)e[b]="0";else return e[b]=String.fromCharCode(a+1),e.join("")}e.unshift("0");return e.join("")}}(),Y=function(){this.events={}};l(Y.prototype,
{createEvent:function(e,b){e=e.toLowerCase();var a=this.events;a[e]||(a[e]=new Oa(e,b));return a[e]},getEvent:function(e){e=e.toLowerCase();return this.events[e]},on:function(e,b,a,c){e=e.toLowerCase();var d=this.events;d[e]||(d[e]=new Oa(e));return d[e].on(b,a,c)},once:function(e,b,a,c){c=c||{};c.limit=1;return this.on(e,b,a,c)},un:function(e,b,a){e=e.toLowerCase();var c=this.events;c[e]&&c[e].un(b,a)},hasListener:function(e,b,a){e=e.toLowerCase();var c=this.events;return c[e]?c[e].hasListener(b,
a):!1},removeAllListeners:function(e){var b=this.events;b[e]&&b[e].removeAllListeners()},trigger:function(){var e=arguments[0],b=this.events,e=e.toLowerCase();if(!b[e])return null;e=b[e];return e.trigger.apply(e,aa.call(arguments,1))},suspendEvent:function(e){e=e.toLowerCase();var b=this.events;b[e]&&b[e].suspend()},suspendAllEvents:function(){var e=this.events,b;for(b in e)e[b].suspend()},resumeEvent:function(e){e=e.toLowerCase();var b=this.events;b[e]&&b[e].resume()},resumeAllEvents:function(){var e=
this.events,b;for(b in e)e[b].resume()},destroyEvent:function(e){var b=this.events;b[e]&&(b[e].removeAllListeners(),b[e].destroy(),delete b[e])},destroy:function(e){var b=this.events;if(e)e=e.toLowerCase(),b[e]&&(b[e].destroy(),delete b[e]);else{for(var a in b)b[a].destroy();this.events={}}},getApi:function(){if(!this.api){for(var e="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},a,c=-1,
d=e.length;++c<d;a=e[c],b[a]=r(this[a],this));this.api=b}return this.api}},!0,!1);var Oa=function(e,b){this.name=e;this.listeners=[];this.map={};this.hash=Q();this.uni="$$"+e+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===b?null:b};l(Oa.prototype,{getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(e,b,a){if(!e)return null;b=b||null;a=a||{};var c=this.uni,d=b||e;if(d[c]&&!a.allowDupes)return null;var f=++this.lid,g=a.first||!1;d[c]=
f;e={fn:e,context:b,uniContext:d,id:f,called:0,limit:a.limit||0,start:a.start||1,count:0,append:a.append,prepend:a.prepend};g?this.listeners.unshift(e):this.listeners.push(e);this.map[f]=e;return f},once:function(e,b,a){a=a||{};a.once=!0;return this.on(e,b,a)},un:function(e,b){var a=-1,c=this.uni,d=this.listeners,f;f=e==parseInt(e)?e:(b||e)[c];if(!f)return!1;for(var g=0,h=d.length;g<h;g++)if(d[g].id==f){a=g;delete d[g].uniContext[c];break}if(-1==a)return!1;d.splice(a,1);delete this.map[f];return!0},
hasListener:function(e,b){var a=this.listeners,c;if(e){b=b||e;c=z(e)?b[this.uni]:e;if(!c)return!1;for(var d=0,f=a.length;d<f;d++)if(a[d].id==c)return!0;return!1}return 0<a.length},removeAllListeners:function(){var e=this.listeners,b=this.uni,a,c;a=0;for(c=e.length;a<c;a++)delete e[a].uniContext[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(e,b){var a;e.append||e.prepend?(a=aa.call(b),e.prepend&&(a=e.prepend.concat(a)),
e.append&&(a=a.concat(e.append))):a=b;return a},trigger:function(){var e=this.listeners,b=this.returnResult;if(this.suspended||0==e.length)return null;for(var a="all"==b?[]:null,c,d,e="first"==b?[e[0]]:aa.call(e);c=e.shift();)if(c&&this.map[c.id]&&(c.count++,!(c.count<c.start))){d=c.fn.apply(c.context,this._prepareArgs(c,arguments));c.called++;c.called==c.limit&&this.un(c.id);"all"==b&&a.push(d);if("first"==b)return d;"last"==b&&(a=d);if(!1==b&&!1===d)break}if(b)return a}},!0,!1);var x=function(){return String.prototype.trim?
function(e){return u(e)?e.trim():e}:function(e){return u(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}(),bb=function(){return function b(a,c){if(a===c)return!0;if(null===a||null===c)return!1;if(a!==a&&c!==c)return!0;var d=typeof a,f;if(d==typeof c&&"object"==d)if(O(a)){if(!O(c))return!1;if((d=a.length)==c.length){for(f=0;f<d;f++)if(!b(a[f],c[f]))return!1;return!0}}else{if(10===K(a))return 10===K(c)&&a.getTime()==c.getTime();if(9===K(a)&&9===K(c))return a.toString()==c.toString();if(Ka(a)||Ka(c)||
O(c))return!1;d={};for(f in a)if("$"!=f.charAt(0)&&!z(a[f])){if(!b(a[f],c[f]))return!1;d[f]=!0}for(f in c)if(!d.hasOwnProperty(f)&&"$"!=f.charAt(0)&&void 0!==c[f]&&!z(c[f]))return!1;return!0}return!1}}(),cb=function(){return function b(a,c){if(Ka(a))throw Error("Cannot copy window object");if(c){if(a===c)throw Error("Objects are identical");if(O(a))for(var d=c.length=0,f=a.length;d<f;d++)c.push(b(a[d]));else{for(d in c)delete c[d];for(d in a)a.hasOwnProperty(d)&&("$"==d.charAt(0)||z(a[d])?c[d]=a[d]:
c[d]=b(a[d]))}}else(c=a)&&(O(a)?c=b(a,[]):10===K(a)?c=new Date(a.getTime()):9===K(a)?c=new RegExp(a.source):ia(a)&&(c=b(a,{})));return c}}(),wb=function(){var e=Object.prototype.toString,b=Function.prototype.toString,a=/^\[object .+?Constructor\]$/,c=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(d){var f=typeof d;return"function"==f?!("prototype"in d)||c.test(b.call(d)):d&&"object"==f&&a.test(e.call(d))||
!1}}(),Pa=function(){var e=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,b=Function,a=function(a,b){return function(c){var d=aa.call(arguments),h;d.push(null);d.push(a);if(b){for(h=a.apply(null,d);(void 0===h||"number"==typeof h&&isNaN(h))&&!c.$isRoot;)c=c.$parent,d[0]=c,h=a.apply(null,d);return h}return a.apply(null,d)}},c={},d=0,f={},g=0,h={},k=0,n=function(){1E3<=d&&(c={});1E3<=g&&(f={});1E3<=k&&(h={})};return{createGetter:function(h){try{return c[h]?c[h]:(d++,c[h]=a(new b("____","$$interceptor","$$itself",
"".concat("try {","return ",h.replace(e,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(k){return W(k),N}},createSetter:function(c){try{if(!f[c]){g++;var d=c.replace(e,"$1____.$3");return f[c]=a(new b("____","$$$$","$$interceptor","$$itself","".concat("try {",d," = $$$$",";} catch (thrownError) { return undefined; }")))}return f[c]}catch(h){return W(h),N}},createFunc:function(c){try{return h[c]?h[c]:(k++,h[c]=a(new b("____","$$interceptor","$$itself","".concat("try {",c.replace(e,
"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(d){return W(d),N}},resetCache:n,enableResetCacheInterval:function(){setTimeout(n,1E4)}}}(),Ca=Pa.createGetter,xb=Pa.createSetter,Qa=function(){var e=Object.observe&&wb(Object.observe),b=function(a){if(!u(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},a,c=function(c,d,e,g,y,t){a||(a=new Y);var s=Q(),q;t&&(this.namespace=t,this.nsGet=t.get);this.origCode=d;u(d)||(g=e,e=d,
d=null,q="object");u(c)&&(g=e,e=d,d=c,c=null);d&&c&&(q=c.hasOwnProperty(d)?"attr":"expr");d&&!c&&(q="expr");if(e)a.on(s,e,g||this,{append:[y],allowDupes:!0});if("expr"==q){d=this._processInputPipes(d,c);d=this._processPipes(d,c);if(this.inputPipes||this.pipes)d=f(c,d),q=c.hasOwnProperty(d)?"attr":"expr";if(this.staticValue=b(d))q="static"}this.userData=y;this.code=d;this.id=s;this.type=q;this.obj=c;"expr"==q&&(this.getterFn=Ca(d));"static"!=q||this.pipes?(this.curr=this.curr||this._getValue(),this.currCopy=
ja(this.curr)?this.curr:cb(this.curr)):(this.check=ka,this.curr=this.prev=this.staticValue)};l(c.prototype,{namespace:null,nsGet:null,staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,currCopy:null,prev:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,obsrvDelegate:null,_indexArrayItems:function(a){var b="$$"+this.id,c,d,f;if(a)for(c=0,d=a.length;c<d;c++)f=a[c],!f||ja(f)||f[b]||(f[b]=Q())},_processInputPipes:function(a,
b){if(-1==a.indexOf(">>"))return a;for(var c=0,d=a.length,f=[],e,g,q,m=a;c<d&&-1!=(e=a.indexOf(">>",c));)g=a.charAt(e-1),q=a.charAt(e+2),"\\"!=g&&"'"!=g&&'"'!=g&&"'"!=q&&'"'!=q&&(c=x(a.substring(c,e)).split(":"),m=a.substr(e+2),this._addPipe(f,c,b,this.onInputParamChange)),c=e+2;f.length&&(this.inputPipes=f);return x(m)},_addPipe:function(a,b,c,f){var e=b.shift(),g=null,s=[],q;this.nsGet&&(g=this.nsGet("filter."+e,!0));g||(g=window[e]||c[e]);if(z(g)){e=-1;for(q=b.length;++e<q;s.push(d(c,b[e],f,this,
null,this.namespace)));a.push([g,b,s])}},_processPipes:function(a,b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,f=[],e,g,q,m=!1,p=a;c<d;)if(-1!=(e=a.indexOf("|",c)))g=a.charAt(e-1),q=a.charAt(e+1),"|"!=g&&"'"!=g&&'"'!=g&&"|"!=q&&"'"!=q&&'"'!=q&&(m?(c=x(a.substring(c,e)).split(":"),this._addPipe(f,c,b)):(m=!0,p=x(a.substring(0,e)))),c=e+1;else{m&&(c=x(a.substr(c)).split(":"),this._addPipe(f,c,b,this.onPipeParamChange));break}f.length&&(this.pipes=f);return p},_getValue:function(){var a;
switch(this.type){case "static":a=this.staticValue;break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);break;case "object":a=this.obj}O(a)&&(this.inputPipes||this._indexArrayItems(a),a=a.slice());this.unfiltered=a;return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,f,e=b.length,s=this.obj,q,m;for(c=0;c<e;c++){f=b[c][1];d=[];q=-1;for(m=f.length;++q<m;d.push(g(f[q],s)));d.unshift(s);d.unshift(a);a=b[c][0].apply(null,d)}}return a},
subscribe:function(b,c,d){a.on(this.id,b,c,d)},unsubscribe:function(b,c){return a.un(this.id,b,c)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||this.curr},getPrevValue:function(){return this.prev},getPrescription:function(a,b){var c;b=b||this._getValue();var d=a||[],f=b||[],e=d.length,g=f.length,q=Array(e+1);c=Array(e+1);var m,p,C,H=0;if(e==g&&
0==e)c=[];else{for(m=0;m<=e;m++)q[m]=Array(g+1),c[m]=Array(g+1),q[m][0]=m,c[m][0]="D";for(m=0;m<=g;m++)q[0][m]=m,c[0][m]="I";for(m=1;m<=e;m++)for(p=1;p<=g;p++)C=bb(d[m-1],f[p-1])?0:1,q[m][p-1]<q[m-1][p]&&q[m][p-1]<q[m-1][p-1]+C?(q[m][p]=q[m][p-1]+1,c[m][p]="I"):q[m-1][p]<q[m-1][p-1]+C?(q[m][p]=q[m-1][p]+1,c[m][p]="D"):(q[m][p]=q[m-1][p-1]+C,c[m][p]=1==C?"R":"-");d=[];m=e;p=g;do e=c[m][p],d.push(e),"-"!=e&&H++,"R"==e||"-"==e?(m--,p--):"D"==e?m--:p--;while(0!=m||0!=p);c=d.reverse()}return c},getMovePrescription:function(a,
b,c){c=c||this._getValue();var d=a||[],f=c||[];a=this.getPrescription(a||[],c||[]);c=[];var e,g,q,m={},p,C;e=0;for(g=d.length;e<g;e++)(q=b(d[e]))&&(m[q]=e);p=0;var H={};e=0;for(g=a.length;e<g;e++)d=a[e],"D"!=d&&(q=b(f[p]),void 0!=q&&!0!==H[q]&&void 0!==(C=m[q])?(c.push(C),H[q]=!0):c.push(d),p++);return c},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);"attr"==b?this.obj[this.code]=a:"expr"==b?(this.setterFn||(this.setterFn=xb(this.code)),this.setterFn(this.obj,
a)):"object"==b&&(this.obj=a)},onInputParamChange:function(a,b,c){this.setValue(this.lastSetValue);c&&this.checkAll()},onPipeParamChange:function(a,b,c){this.check()},_check:function(b){var c=this._getValue(),d=this.currCopy;return bb(d,c)?!1:(this.curr=c,this.prev=d,this.currCopy=ja(c)?c:cb(c),a.trigger(this.id,c,d,b),!0)},check:function(a){return this._check(a)},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;
b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(b,c){var d=this.id;b&&a.un(d,b,c);return a.hasListener(d)?!1:(this.destroy(),!0)},destroy:function(){var b=this.pipes,c=this.inputPipes,d,e,f,g,s;this.itv&&this.clearInterval();if(b)for(d=-1,e=b.length;++d<e;)for(s=b[d][2],f=-1,g=s.length;++f<g;)s[f].unsubscribeAndDestroy(this.check,this);if(c)for(d=-1,e=c.length;++d<e;)for(s=
c[d][2],f=-1,g=s.length;++f<g;)s[f].unsubscribeAndDestroy(this.onInputParamChange,this);this.obsrvDelegate&&Object.unobserve(this.obj,this.obsrvDelegate);this.obj&&delete this.obj.$$watchers.$codes[this.origCode];a.destroyEvent(this.id);for(d in this)this.hasOwnProperty(d)&&(this[d]=null)}},!0,!1);var d=function(a,b,d,e,g,t){b=f(a,x(b));return a?(a.$$watchers||(a.$$watchers={$codes:{},$checkAll:function(){var a=this.$codes,b,c=0;for(b in a)a[b].check()&&c++;return c},$destroyAll:function(){var a=
this.$codes,b;for(b in a)a[b].destroy(),delete a[b]}}),a.$$watchers.$codes[b]?a.$$watchers.$codes[b].subscribe(d,e,{append:[g],allowDupes:!0}):a.$$watchers.$codes[b]=new c(a,b,d,e,g,t),a.$$watchers.$codes[b]):new c(a,b,d,e,g,t)},f=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},g=function(a,c){var d;return(d=b(a))?d:Ca(a)(c)};c.create=d;c.unsubscribeAndDestroy=function(a,b,c,d){b=x(b);(a=a.$$watchers?a.$$watchers.$codes:
null)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};c.normalizeExpr=f;c.eval=g;c.usesNativeObserver=function(){return e};return c}(),ba=function(e){this.$$observable=new Y;this.$$historyWatchers={};l(this,e,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};l(ba.prototype,{$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$historyWatchers:null,$$checking:!1,
$$destroyed:!1,$new:function(){return new ba({$parent:this,$root:this.$root,$app:this.$app})},$newIsolated:function(){return new ba({$app:this.$app})},$on:function(e,b,a){return this.$$observable.on(e,b,a)},$un:function(e,b,a){return this.$$observable.un(e,b,a)},$watch:function(e,b,a){return Qa.create(this,e,b,a,null)},$unwatch:function(e,b,a){return Qa.unsubscribeAndDestroy(this,e,b,a)},$watchHistory:function(e,b){this.$$historyWatchers[b]||(this.$$historyWatchers[b]=e,Na.history.on("change-"+b,
this.$$onHistoryChange,this))},$unwatchHistory:function(e){this.$$historyWatchers[e]||(delete this.$$historyWatchers[e],Na.history.un("change-"+e,this.$$onHistoryChange,this))},$get:function(e){for(var b=this;b;){if(void 0!==b[e])return b[e];b=b.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$$onHistoryChange:function(e,b,a){this.$$historyWatchers[a]&&(b=this.$$historyWatchers[a],this[b]=e,this.$check())},$check:function(){var e;this.$$checking||
(this.$$checking=!0,this.$$watchers&&(e=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",e),0<e&&this.$check())},$destroy:function(){var e;this.$$observable.trigger("destroy");this.$$observable.destroy();this.$parent=this.$root=this.$app=this.$$observable=null;this.$$watchers&&(this.$$watchers.$destroyAll(),this.$$watchers=null);for(e in this.$$historyWatchers)this.$unwatchHistory(e);this.$$historyWatchers=null;this.$$destroyed=!0}},!0,!1);var Aa=
V.get,Ga=function(){var e=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,a=/ *, */,c=/(\([^)]*)\+/,d=/(\[[^\]]+)~/,f=/(~|>|\+)/,g=/ +/,h=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,k=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,n=/\D/,v=/[^(]*\(([^)]*)\)/,y=/\(.*/,t=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,s=document,q=!!s.getElementsByClassName,m=!!s.querySelectorAll,p={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==
a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.firstChild;c++;do if(1==f.nodeType&&(f.nodeIndex=++c)&&a===f&&(c+d)%e)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=
a.parentNode.lastChild;c++;do if(1==f.nodeType&&(f.nodeLastIndex=c++)&&a===f&&(c+d)%e)return 0;while(f=f.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&s.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},
C={},H=function(a){return C[a]||(C[a]=new RegExp("(^| +)"+a+"($| +)"))},r={"":function(a,b){return null!==a.getAttribute(b)},"=":function(a,b,c){var d;return(d=a.getAttribute(b))&&d===c},"&=":function(a,b,c){var d;return(d=a.getAttribute(b))&&H(c).test(d)},"^=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&!d.indexOf(c)},"$=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&d.indexOf(c)==d.length-c.length},"*=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&-1!=d.indexOf(c)},"|=":function(a,
b,c){var d;return(d=a.getAttribute(b)+"")&&(d===c||!!d.indexOf(c+"-"))},"!=":function(a,b,c){var d;return!(d=a.getAttribute(b))||!H(c).test(d)}},l=function(R,U){U=U||s;var A=[],I=null,J,C,H,l,z,u,w;if(m)try{A=X(U.querySelectorAll(R.replace(b,'="$1"')))}catch(E){I=!0}if(!m||I)if(e.test(R))switch(I=0,R.charAt(0)){case "#":I=R.slice(1);A=s.getElementById(I);A.id!==I&&(A=s.all[I]);A=A?[A]:[];break;case ".":J=R.slice(1);if(q)A=X((A=U.getElementsByClassName(J)).length?A:[]);else{J=" "+J+" ";C=U.getElementsByTagName("*");
for(H=0;l=C[H++];)-1!=(" "+l.className+" ").indexOf(J)&&(A[I++]=l);A=I?A:[]}break;case ":":C=U.getElementsByTagName("*");H=0;z=R.replace(v,"$1");for(u=R.replace(y,"");l=C[H++];)p[u]&&!p[u](l,z)&&(A[I++]=l);A=I?A:[];break;case "[":C=U.getElementsByTagName("*");H=0;l=t.exec(R);J=l[1];w=l[2]||"";for(z=l[3];l=C[H++];)r[w]&&(r[w](l,J,z)||"class"===J&&r[w](l,"className",z))&&(A[I++]=l);A=I?A:[];break;default:A=X((A=U.getElementsByTagName(R)).length?A:[])}else{for(var Za=R.split(a),L=Za.length-1,M=!!L,N,
P,F,O,B,x,G,K,T,D,Q,S;I=Za[L--];){P=(N=I.replace(c,"$1%").replace(d,"$1&").replace(f," $1 ").split(g)).length;H=0;O=" ";for(C=[U];F=N[H++];)if(" "!==F&&">"!==F&&"~"!==F&&"+"!==F&&C){F=F.match(h);B=F[1]||"*";x=F[2];G=F[3]?" "+F[3]+" ":"";J=F[4];w=F[5]||"";u=F[7];z="nth-child"===u||"nth-last-child"===u?k.exec("even"===F[8]&&"2n"||"odd"===F[8]&&"2n%1"||!n.test(F[8])&&"0n%"+F[8]||F[8]):F[8];K=[];I=T=0;for(Q=H==P;D=C[T++];)switch(O){case " ":S=D.getElementsByTagName(B);for(D=0;l=S[D++];)x&&l.id!==x||G&&
-1==(" "+l.className+" ").indexOf(G)||!(!J||r[w]&&(r[w](l,J,F[6])||"class"===J&&r[w](l,"className",F[6])))||l.yeasss||(p[u]?p[u](l,z):u)||(Q&&(l.yeasss=1),K[I++]=l);break;case "~":for(B=B.toLowerCase();(D=D.nextSibling)&&!D.yeasss;)1!=D.nodeType||"*"!==B&&D.nodeName.toLowerCase()!==B||x&&D.id!==x||G&&-1==(" "+D.className+" ").indexOf(G)||!(!J||r[w]&&(r[w](l,J,F[6])||"class"===J&&r[w](l,"className",F[6])))||D.yeasss||(p[u]?p[u](D,z):u)||(Q&&(D.yeasss=1),K[I++]=D);break;case "+":for(;(D=D.nextSibling)&&
1!=D.nodeType;);!D||D.nodeName.toLowerCase()!==B.toLowerCase()&&"*"!==B||x&&D.id!==x||G&&-1==(" "+l.className+" ").indexOf(G)||!(!J||r[w]&&(r[w](l,J,F[6])||"class"===J&&r[w](l,"className",F[6])))||D.yeasss||(p[u]?p[u](D,z):u)||(Q&&(D.yeasss=1),K[I++]=D);break;case ">":for(S=D.getElementsByTagName(B),H=0;l=S[H++];)l.parentNode!==D||x&&l.id!==x||G&&-1==(" "+l.className+" ").indexOf(G)||!(!J||r[w]&&(r[w](l,J,F[6])||"class"===J&&r[w](l,"className",F[6])))||l.yeasss||(p[u]?p[u](l,z):u)||(Q&&(l.yeasss=
1),K[I++]=l)}C=K}else O=F;if(M){if(!C.concat){K=[];for(D=0;l=C[D];)K[D++]=l;C=K}A=C.concat(1==A.length?A[0]:A)}else A=C}for(I=A.length;I--;)A[I].yeasss=A[I].nodeIndex=A[I].nodeIndexLast=null}return A};l.is=function(a,b){var c=l(b,a.parentNode),d,f;d=-1;for(f=c.length;++d<f;)if(c[d]===a)return!0;return!1};return l}(),db=function(){var e=document.createTextNode("");return u(e.textContent)?"textContent":"nodeValue"}(),oa=Qa.create,eb=function(){var e=/\\{/g,b=new Y,a=function(a,b,e,h,k){return!b||!b.indexOf||
-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new c(a,b,e,h,k)},c=function(a,b,c,e,k){this.id=Q();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=e;this.lang=a.$app?a.$app.lang:null;if(!0===k||!1===k)this.recursive=k;this.watchers=[];this.children=[];this.dataChangeDelegate=r(this.doDataChange,this);this.processed=this.processText(b);this.render()};l(c.prototype,{id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,
dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(a,c){return b.on(this.id,a,c)},unsubscribe:function(a,c){return b.un(this.id,a,c)},getString:function(){null===this.text&&this.render();var a=this.text;return-1!=a.indexOf("\\{")?a.replace(e,"{"):a},render:function(){var a=this.processed,b,e,h;this.children.length||this.createChildren();h=this.children;b=-1;for(e=h.length;++b<e;a=a.replace("---"+b+"---",h[b]instanceof c?h[b].getString():h[b]));return this.text=a},processText:function(a){for(var b=
0,c=a.length,e,k,n="";b<c;)if(-1!=(e=a.indexOf("{{",b))&&-1!=(k=a.indexOf("}}",e+2))&&"\\"!=a.substr(e-1,1))n+=a.substring(b,e),k!=e+2&&(n+=this.watcherMatch(a.substring(e+2,k))),b=k+2;else{b!==c&&(n+=a.substring(b));break}b=0;a=n;c=a.length;for(n="";b<c;)if(-1!=(e=a.indexOf("{[",b))&&-1!=(k=a.indexOf("]}",e+2))&&"\\"!=a.substr(e-1,1))n+=a.substring(b,e),k!=e+2&&(n+=this.watcherMatch(a.substring(e+2,k),!0)),b=k+2;else{b!==c&&(n+=a.substring(b));break}return n},watcherMatch:function(a,b){var c=this.watchers;
if(b){a=x(a);var e=a.split("|"),k=x(e[0]);"."!=k.substr(0,1)&&(e[0]="'"+k+"'");1==e.length&&e.push("l");a=e.join(" | ")}c.push(oa(this.scope,a,this.onDataChange,this,null,V));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?b.trigger(this.id,this,this.data):this.parent.triggerChange()},
createChildren:function(){var b=this.watchers,c=this.children,e=this.scope,h=this.recursive,k,n,v;k=-1;for(n=b.length;++k<n;)v=b[k].getLastResult(),c.push(h&&a(e,v,this,null,!0)||v)},destroyChildren:function(){var a=this.children,b,e;b=-1;for(e=a.length;++b<e;)a[b]instanceof c&&a[b].destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){var a;this.destroyChildren();
this.destroyWatchers();b.destroyEvent(this.id);this.changeTmt&&clearTimeout(this.changeTmt);for(a in this)this.hasOwnProperty(a)&&(this[a]=null)}},!0,!1);c.create=a;return c}(),L=function(){var e={};return function(b,a,c){b=b._mjsid||(b._mjsid=Q());var d=e[b];return void 0!==c?(d||(d=e[b]={}),d[a]=c):d?d[a]:void 0}}(),E=function(){var e=[],b=!1,a="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},c=function(){b=!0;var d=e.shift();a(function(){d[0].apply(d[1],d[2]);e.length?
c():b=!1},0)},d=function(a,d,f){f=f||[];e.push([a,d,f]);b||c()},f=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},g=function(a,b){if(a instanceof g)return a;if(!(this instanceof g))return new g(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=T(a))a instanceof g?a.then(r(this.resolve,this),r(this.reject,this)):(new g(c,a)).then(r(this.resolve,this),r(this.reject,this));else if(z(a))try{a.call(b,r(this.resolve,this),
r(this.reject,this))}catch(d){this.reject(d)}else this.resolve(a)};l(g.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){this._fails=this._dones=this._rejects=this._fulfills=null},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));
else{try{if(c=T(a)){a instanceof g?a.then(r(this._processResolveValue,this),r(this._processRejectReason,this)):(new g(c,a)).then(r(this._processResolveValue,this),r(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)d(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)d(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new g,e=this._state;0==e||0!=this._wait?(a&&z(a)?this._fulfills.push([f(a,c),null]):this._fulfills.push([c.resolve,c]),b&&z(b)?this._rejects.push([f(b,c),null]):this._rejects.push([c.reject,c])):1==e?a&&z(a)?d(f(a,c),null,[this._value]):c.resolve(this._value):2==e&&(b&&z(b)?d(f(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,
this._value)}catch(c){W(c)}},done:function(a,b){var c=this._state;if(1==c&&0==this._wait)try{a.call(b||null,this._value)}catch(d){W(d)}else 0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){W(c)}},fail:function(a,b){var c=this._state;if(2==c&&0==this._wait)try{a.call(b||null,this._reason)}catch(d){W(d)}else 0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},
promise:function(){return{then:r(this.then,this),done:r(this.done,this),fail:r(this.fail,this),always:r(this.always,this)}},after:function(a){var b=this;if(T(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};z(a.done)?a.done(c):a.then(c)}return b}},!0,!1);g.fcall=function(a,b,c){return g.resolve(a.apply(b,c||[]))};g.resolve=function(a){var b=new g;b.resolve(a);return b};g.reject=function(a){var b=new g;b.reject(a);return b};
g.all=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=Array(c),e=c,f,s,q=function(a,c){d[c]=a;e--;0==e&&b.resolve(d)};for(f=0;f<c;f++)(function(c){s=a[f];s instanceof g?s.done(function(a){q(a,c)}).fail(b.reject,b):T(s)||z(s)?(new g(s)).done(function(a){q(a,c)}).fail(b.reject,b):q(s,c)})(f);return b};g.when=function(){return g.all(arguments)};g.allResolved=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=[],e=c,f,s,q=function(a){d.push(a);m()},m=function(){e--;
0==e&&b.resolve(d)};for(f=0;f<c;f++)s=a[f],s instanceof g?s.done(q).fail(m):T(s)||z(s)?(new g(s)).done(q).fail(m):q(s);return b};g.race=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d,e;for(d=0;d<c&&(e=a[d],e instanceof g?e.done(b.resolve,b).fail(b.reject,b):T(e)||z(e)?(new g(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};g.waterfall=function(a){if(!a.length)return g.resolve(null);for(var b=a.shift(),b=z(b)?g.fcall(b):g.resolve(c),c;c=a.shift();)T(c)?
b=b.then(function(a){return function(){return a}}(c)):z(c)?b=b.then(c):b.resolve(c);return b};g.counter=function(a){var b=new g;b.countdown=function(){a--;0==a&&b.resolve()};return b};return g}(),G=V.add,Ra=function(){var e=[],b=[],a=!1,c=!1,d=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return{registerAttributeHandler:function(b,c,d){Aa("attr."+b,!0)||(e.push({priority:c,name:b,handler:G("attr."+b,d)}),a=!1)},getAttributeHandlers:function(){a||(e.sort(d),a=!0);return e},
registerTagHandler:function(a,d,e){Aa("tag."+a,!0)||(b.push({priority:d,name:a,handler:G("tag."+a,e)}),c=!1)},getTagHandlers:function(){c||(b.sort(d),c=!0);return b}}}(),yb=Ra.getAttributeHandlers,Ha=Array.prototype.indexOf;Ha||(Ha=Array.prototype.indexOf=function(e,b){var a;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),d=c.length>>>0;if(0===d)return-1;a=+b||0;Infinity===Math.abs(a)&&(a=0);if(a>=d)return-1;for(a=Math.max(0<=a?a:d-Math.abs(a),0);a<d;){if(a in
c&&c[a]===e)return a;a++}return-1});var Sa=function(){var e=null,b=eb.create,a=function(a,b,c,d,e,g){var h=[];if(a&&!0!==a){if(a.nodeType){g.countdown+=1;f(a,c,d,e,g);return}h=aa.call(a)}h.length||(h=X(b.childNodes));b=h.length;g.countdown+=b;for(a=-1;++a<b;f(h[a],c,d,e,g));},c=function(a,b){if(b)if(b.nodeType)a.push(b);else if(O(b))for(var d=-1,e=b.length;++d<e;c(a,b[d]));},d={script:!0,template:!0,"mjs-template":!0,style:!0},f=function(b,c,e,f,g){if(b){var h;h=b.nodeName;g||(g={countdown:1});if(!h||
!d[h.toLowerCase()])if(h=c.call(e,b),!1!==h){if(T(h)){h.done(function(d){!1!==d&&a(d,b,c,e,f,g);0==--g.countdown&&f&&f.call(e)});return}a(h,b,c,e,f,g)}0==--g.countdown&&f&&f.call(e)}},g=new Y,h=function(a,b,c){this.id=Q();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof ba&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)};l(h.prototype,{id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,_observable:null,on:function(a,b,c){return g.on(a+"-"+this.id,
b,c)},once:function(a,b,c){return g.once(a+"-"+this.id,b,c)},un:function(a,b,c){return g.un(a+"-"+this.id,b,c)},createChild:function(a){return new h(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b,f=b.$app;c=f.inject(a,null,{$scope:e,$node:c,$attrValue:d,$renderer:this},[e,c,d,this]);f&&a.$registerBy&&c&&(T(c)?c.done(function(c){f.registerCmp(c,b,a.$registerBy)}):f.registerCmp(c,b,a.$registerBy));return a.$stopRenderer?
!1:c},processNode:function(a){var d=a.nodeType,f=this.texts,g=this.scope,h,s;if(3==d){if(h=null!==a.parentNode.getAttribute("mjs-recursive"),d=b(g,a[db],null,f.length,h))d.subscribe(this.onTextChange,this),f.push({node:a,tr:d}),this.renderText(f.length-1)}else if(1==d){e||(e=yb());var d=[],q=[],m,p,l;s="tag."+a.tagName.toLowerCase();if(s=Aa(s,!0)){p=this.runHandler(s,g,a);if(!1===p)return!1;T(p)?d.push(p):c(q,p)}m=mb(a);s=0;for(h=e.length;s<h;s++)if(l=e[s].name,void 0!==(p=m[l])){a.removeAttribute(l);
p=this.runHandler(e[s].handler,g,a,p);delete m[l];if(!1===p)return!1;T(p)?d.push(p):c(q,p)}if(d.length){var r=new E;E.all(d).done(function(a){c(q,a);r.resolve(q)});return r}h=void 0!==m["mjs-recursive"];delete m["mjs-recursive"];for(s in m)if(d=b(g,m[s],null,f.length,h))a.removeAttribute(s),d.subscribe(this.onTextChange,this),f.push({node:a,attr:s,tr:d}),this.renderText(f.length-1);return q.length?q:!0}return!0},process:function(){f(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},
onProcessingFinished:function(){g.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?("value"==c?a.node.value=b:"class"==c?a.node.className=b:"src"==c&&(a.node.src=b),a.node.setAttribute(c,b)):a.node[db]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&this.parent.un("destroy",this.destroy,this);this.parent=
this.scope=this.el=this.texts=null;g.trigger("destroy-"+this.id)}}},!0,!1);return h}(),Ya=function(){var e,b=function(){this.store={}};l(b.prototype,{store:null,getApi:function(){return{value:r(this.value,this),constant:r(this.constant,this),factory:r(this.factory,this),service:r(this.service,this),provider:r(this.provider,this),resolve:r(this.resolve,this),inject:r(this.inject,this)}},instantiate:function(a,b,d,e){return a.$instantiate?a.$instantiate.apply(a,d):e?ub(a,d):a.apply(b,d)},inject:function(a,
b,d,e,g){d=d||{};e=e||[];var h=this;if(z(a))if(a.inject)e=aa.call(a.inject),e.push(a),a=e;else return h.instantiate(a,b,e,g);a=aa.call(a);e=[];var k=a.pop(),n,v;n=-1;for(v=a.length;++n<v;e.push(h.resolve(a[n],d)));return E.all(e).then(function(a){return h.instantiate(k,b,a,g)})},value:function(a,b){this.store[a]={type:1,value:b}},constant:function(a,b){var d=this.store;d[a]||(d[a]={type:2,value:b})},factory:function(a,b,d,e){za(d)&&(e=d,d=null);this.store[a]={type:3,singleton:e,fn:b,context:d}},service:function(a,
b,d){this.store[a]={type:4,singleton:d,fn:b}},provider:function(a,b){this.store[a+"Provider"]={name:a,type:5,fn:b,instance:null}},resolve:function(a,b){var d=this.store,f,g,h;if(void 0!==b[a])return b[a];if(g=d[a]){f=g.type;if(1==f||2==f)return g.value;if(3==f)h=this.inject(g.fn,g.context,b);else if(4==f)h=this.inject(g.fn,null,b,null,!0);else if(5==f)return g.instance||(g.instance=E.resolve(this.inject(g.fn,null,b)).done(function(a){g.instance=a;d[g.name]={type:3,fn:a.$get,context:a}})),g.instance;
g.singleton&&(g.type=1,g.value=h,3==f&&T(h)&&h.done(function(a){g.value=a}));return b[a]=h}if(d[a+"Provider"])return this.resolve(a+"Provider",b),this.resolve(a,b);if(this===e)throw"Could not provide value for "+a;return e.resolve(a)},destroy:function(){this.scope=this.store=null}},!0,!1);b.global=function(){return e};e=new b;return b}(),zb=function(){var e=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;
case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},b=function(a){this.store={};a&&(this.locale=a)};l(b.prototype,{store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var e=this.store;void 0===e[a]&&(e[a]=b)},load:function(a){l(this.store,a,!1,!1)},get:function(b){return this.store[b]||(this===a?"-- "+b+" --":a.get(b))},plural:function(a,b){var f=this.get(a),g=e(b,this.locale);return O(f)?f[g]:ia(f)?f[b]?f[b]:1==b&&void 0!=f.one?f.one:0>b&&void 0!=f.negative?f.negative:f.other:f}},!0,!1);var a=new b;b.global=function(){return a};return b}();B({$class:"MetaphorJs.cmp.Base",destroyed:!1,_observable:null,initialize:function(e){e=e||{};this.$$observable=
new Y;l(this,this.$$observable.getApi(),!0,!1);if(e.callback){var b=e.callback,a=b.scope||this;delete b.scope;for(var c in b)if(b.hasOwnProperty(c))this.on(c,b[c],a);delete e.callback}l(this,e,!0,!1)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null;this.supr()}},onDestroy:N});B({$class:"MetaphorJs.cmp.App",$extends:"MetaphorJs.cmp.Base",lang:null,
scope:null,renderer:null,cmpListeners:null,components:null,initialize:function(e,b){var a=b instanceof ba?b:new ba(b),c,d;a.$app=this;this.supr();c=new Ya;d=new Y;this.lang=new zb;l(this,c.getApi(),!0,!1);this.destroyProvider=r(c.destroy,c);l(this,d.getApi(),!0,!1);this.destroyObservable=r(d.destroy,d);this.scope=a;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",a.$root);this.value("$lang",this.lang);
this.renderer=new Sa(e,a);c=aa.call(arguments);c[1]=a;this.initApp.apply(this,c)},initApp:N,run:function(){this.renderer.process()},getParentCmp:function(e){e=e.parentNode;for(var b;e;){if(b=e.getAttribute("cmp-id"))return this.getCmp(b);e=e.parentNode}return null},onAvailable:function(e,b,a){var c=this.cmpListeners,d=this.components;c[e]||(c[e]=new E);b&&c[e].done(b,a);d[e]&&c[e].resolve(d[e]);return c[e]},getCmp:function(e){return this.components[e]||null},registerCmp:function(e,b,a){var c=this,
d=e[a];a=function(){delete c.cmpListeners[d];delete c.components[d]};c.components[d]=e;c.cmpListeners[d]&&c.cmpListeners[d].resolve(e);if(e.on)e.on("destroy",a);b.$on("$destroy",a)},destroy:function(){var e;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(e in this)this.hasOwnProperty(e)&&(this[e]=null);this.supr()}});var ca=document.documentElement,va=function(){return function b(a){return a===window?!0:3==a.nodeType?a.parentElement?b(a.parentElement):
!0:a===ca?!0:ca.contains(a)}}(),Ma=function b(a){var c,d,f;if(O(a)){f=[];c=0;for(d=a.length;c<d;c++)f.push(b(a[c]));return f}if(a)switch(a.nodeType){case 1:return a.cloneNode(!0);case 3:return document.createTextNode(a.innerText||a.textContent);case 11:return a.cloneNode(!0)}return null},fb=function(){var b=["Moz","Webkit","ms","O","Khtml"],a="animationDelay",c="animationDuration",d="transitionDelay",f="transitionDuration",g="transform",h=null,k=null;(function(){var k=document.createElement("div"),
v=!1,y,t,s;if(void 0!==k.style.animationName)v=!0;else for(t=0,s=b.length;t<s;t++)if(y=b[t],void 0!==k.style[y+"AnimationName"]){v=!0;a=y+"AnimationDelay";c=y+"AnimationDuration";d=y+"TransitionDelay";f=y+"TransitionDuration";g=y+"Transform";break}v&&("ontransitionend"in window?h="transitionend":"onwebkittransitionend"in window&&(h="webkitTransitionEnd"));return v})()&&(k={animationDelay:a,animationDuration:c,transitionDelay:d,transitionDuration:f,transform:g,transitionend:h});return function(){return k}}(),
Ab=function(){var b=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},a=function(a,c,d){var f,g,h=c.length;for(f=0;f<h;f++)g=b(c[f])+b(d[f]),a=Math.max(g,a);return a},c=fb(),d=c?c.animationDuration:null,f=c?c.animationDelay:null,g=c?c.transitionDuration:null,h=c?c.transitionDelay:null;return function(b){if(!c)return 0;var n=window.getComputedStyle?window.getComputedStyle(b,null):b.style;b=0;var v=(n[d]||"").split(","),y=(n[f]||"").split(","),t=(n[g]||"").split(","),
n=(n[h]||"").split(",");b=Math.max(b,a(b,v,y));return b=Math.max(b,a(b,t,n))}}(),ta=function(){var b={};return function(a){return b[a]||(b[a]=new RegExp(a))}}(),wa=function(b){var a=L(b,"mjsAnimationQueue"),c,d;if(O(a)&&a.length){if(a=a[0])a.stages&&(c=a.position,d=a.stages,da(b,d[c]),da(b,d[c]+"-active")),a.deferred&&a.deferred.reject(a.el)}else z(a)?a(b):"stop"==a&&$(b).stop(!0,!0);L(b,"mjsAnimationQueue",null)},Z=function(){var b,a;if("undefined"!=typeof window){var c=window;b=c.requestAnimationFrame||
c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame;a=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelRequestAnimationFrame;if(b)return function(c){var f=b(c);return function(){a(f)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),P=function(){var b={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},a=0,c=fb(),d=!!c,f=function(a,b,c){var d=function(){(new Date).getTime()-
b>=c?a():Z(d)};Z(d)},g=function n(a,b,c,d,h,m,p,l){var r=function(){var b=L(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==p?!1:(h.reject(a),!0)},u=function(){if(!r()){var d=c;c++;if(c==b.length){h.resolve(a);L(a,"mjsAnimationQueue").shift();var f=L(a,"mjsAnimationQueue");f.length?(f=f[0],g(f.el,f.stages,0,f.start,f.deferred,!1,f.id,f.step)):L(a,"mjsAnimationQueue",null)}else L(a,"mjsAnimationQueue")[0].position=c,n(a,b,c,null,h,!1,p,l);da(a,b[d]);da(a,b[d]+"-active")}},w=function(){r()||(ma(a,
b[c]+"-active"),E.resolve(l&&l(a,c,"active")).done(function(){if(!r()){var b=Ab(a);b?f(u,(new Date).getTime(),b):Z(u)}}))},R=function(){r()||(ma(a,b[c]),E.waterfall([l&&l(a,c,"start"),function(){return d?d(a):null}]).done(function(){!r()&&Z(w)}))};m?Z(R):R()},h=function(c,f,h,t,s,q){var m=new E,p=L(c,"mjsAnimationQueue")||[],r=++a,w=c.getAttribute("mjs-animate"),B,x,R,U,A,I,J;f=f||w;t&&null===w&&(f=null);if(f){u(f)?"["==f.substr(0,1)?B=(new Function("","return "+f))():(B=b[f],f=s&&s.get("animate."+
f,!0)):z(f)?x=f:O(f)&&(u(f[0])?B=f:(R=f[0],U=f[1]));ia(f)&&(B=f.stages,x=f.fn,R=f.before,U=f.after,A=f.options?l({},f.options):{},I=f.context||null,J=f.duration||null,h=h||A.start);if(d&&B)return p.push({el:c,stages:B,start:h,step:q,deferred:m,position:0,id:r}),L(c,"mjsAnimationQueue",p),1==p.length&&g(c,B,0,h,m,!0,r,q),m;A=A||{};h&&(A.start=function(){h(c)});A.complete=function(){m.resolve(c)};J&&(A.duration=J);if(x&&z(x))return R&&l(c.style,R,!0,!1),h&&h(c),L(c,"mjsAnimationQueue",x.call(I,c,function(){m.resolve(c)})),
m;if(window.jQuery){f=$(c);R&&f.css(R);L(c,"mjsAnimationQueue","stop");if(x&&u(x))return f[x](A),m;if(U)return f.animate(U,A),m}}h?(x=h(c),T(x)?x.done(function(){m.resolve(c)}):m.resolve(c)):m.resolve(c);return m};h.addAnimationType=function(a,c){b[a]=c};h.stop=wa;h.prefixes=c;h.cssAnimations=d;return h}(),Bb=function(){return"undefined"!=typeof JSON?function(b){return JSON.parse(b)}:function(b){return(new Function("return "+b))()}}(),Cb=function(){var b=/#.*$/,a=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
f=/^(?:GET|HEAD)$/i,g=function(a,b,c){var d,f;if(ja(a)&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(""+a));else if(O(a)&&c)for(d=0,f=a.length;d<f;d++)g(a[d],b,c+"["+d+"]");else if(pa(a))for(d in a)a.hasOwnProperty(d)&&g(a[d],b,c?c+"["+d+"]":d)},h=function(d,h){d.replace(b,"");if(!1===h.cache){var k=(new Date).getTime();return a.test(d)?d.replace(a,"$1_="+k):d+(c.test(d)?"&":"?")+"_="+k}!h.data||window.FormData&&h.data instanceof window.FormData||(u(h.data)?k=h.data:(k=[],g(h.data,k,null),
k=k.join("&").replace(/%20/g,"+")),h.data=k,f.test(h.method)&&(d+=(c.test(d)?"&":"?")+h.data,h.data=null));return d},k={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},n={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,
transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},v={},y=new Y,t=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},s=function(a,b,c){var d,f;if(!pa(a)&&!z(a)&&c)d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",a),b.appendChild(d);
else if(O(a)&&c)for(d=0,f=a.length;d<f;d++)s(a[d],b,c+"["+d+"]");else if(pa(a))for(d in a)a.hasOwnProperty(d)&&s(a[d],b,c?c+"["+d+"]":d)},q=function(a){for(var b,c,d="",f=0;f<a.elements.length;f++)if(b=a.elements[f],null!==b.getAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+
"="+encodeURIComponent(b.value);return d},m=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!u(a))return a;c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=Xa(x(a)),b?Ga(b,a):a;if("html"===d)return a=Xa(a,"text/html"),b?Ga(b,a):a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return Bb(x(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&
t(a);return a+""},p=function(a){var b=d.exec((window?window.location.href:"").toLowerCase())||[],c=d.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443"))));b=new E;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?
new FormData(a.form):q(a.form));a.url=h(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new G(a,b,this):new H(a,b,this):new B(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){y.trigger("success",a)});b.fail(function(a){y.trigger("error",a)});b.always(function(){y.trigger("end")});y.trigger("start");a.timeout&&(this._timeout=setTimeout(r(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===y.trigger("beforeSend",a,c)&&(this._promise=E.reject());
a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=E.reject());this._promise||(qa(c.send,c),b.abort=r(this.abort,this),b.always(this.destroy,this),this._promise=b)};l(p.prototype,{_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=
document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);s(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+Q();a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=r(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=r(this.jsonpCallback,this));return d},jsonpCallback:function(a){var b;
try{b=this.processResponseData(a)}catch(c){this._deferred?this._deferred.reject(c):W(c)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,b){var c=this._opt;a=m(a,c,b);y.hasListener("processResponse")&&(a=y.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred,d;if(this._opt.jsonp)if(a){try{t(a)}catch(f){c.reject(f)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");
else{try{d=this.processResponseData(a,b)}catch(g){c.reject(g)}c.resolve(d)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();this._form=this._timeout=this._promise=this._deferred=this._opt=this._transport=null;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0,!1);var C=
function(a,b){b=b||{};a&&!u(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";l(b,v,!1,!0);l(b,n,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new p(b)).promise()};C.setup=function(a){l(v,a,!0,!0)};C.on=function(){y.on.apply(y,arguments)};C.un=function(){y.un.apply(y,arguments)};C.get=function(a,b){b=b||{};b.method="GET";return C(a,b)};C.post=function(a,b){b=b||{};b.method=
"POST";return C(a,b)};C.load=function(a,b,c){c=c||{};u(b)||(c=b);c.dataType="fragment";return C(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};C.loadScript=function(a){return C(a,{transport:"script"})};C.submit=function(a,b){b=b||{};b.form=a;return C(null,b)};var H=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";
this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&w(d,"progress",r(a.progress,a.callbackScope));a.uploadProgress&&d.upload&&w(d.upload,"progress",r(a.uploadProgress,a.callbackScope));d.onreadystatechange=r(this.onReadyStateChange,this)};l(H.prototype,{_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,c;if(a.xhrFields)for(c in a.xhrFields)b[c]=a.xhrFields[c];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&k[a.dataType]?k[a.dataType]+", */*; q=0.01":k._default);for(c in a.headers)b.setRequestHeader(c,a.headers[c])},onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=N,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=N;var c;a:{try{c=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(u(a.responseText)?
a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=N;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){this._ajax=this._opt=this._deferred=this._xhr=null}},!0,!1);var B=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};l(B.prototype,{_opt:null,_deferred:null,_ajax:null,
_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);w(a,"load",r(this.onLoad,this));w(a,"error",r(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&
this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);var G=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};l(G.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+Q(),c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);w(a,"load",r(this.onLoad,
this));w(a,"error",r(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=
this._el=null}},!0,!1);return C}(),ra=function(){var b=new Y,a={},c=function(b){if(!a[b]){var c=document.getElementById(b),d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),d.innerHTML=c.innerHTML,a[b]=la(d.childNodes)):a[b]="content"in c?c.content:la(c.childNodes))}return a[b]},d=function(b){return a[b]?a[b]:a[b]=Cb(b,{dataType:"fragment"}).then(function(c){return a[b]=c})},f=function(a){l(this,a,!0,!1);this.id=Q();this.tpl&&(this.tpl=x(this.tpl));this.url&&(this.url=x(this.url));
a=this.node;var b=this.tpl||this.url;a&&a.removeAttribute("mjs-include");a||(this.deferRendering=!0);if(b){if(a&&a.firstChild&&L(a,"mjs-transclude",la(a.childNodes)),"."!=b.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=oa(this.scope,b,this.onChange,this,null,V)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",
this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof ba&&this.scope.$on("destroy",this.onScopeDestroy,this)};l(f.prototype,{_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,doRender:function(){this._renderer||(this._renderer=new Sa(this.node,this.scope),this._renderer.on("rendered",this.onRendered,
this),this._renderer.process())},onRendered:function(){b.trigger("rendered-"+this.id,this)},on:function(a,c,d){return b.on(a+"-"+this.id,c,d)},un:function(a,c,d){return b.un(a+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=
a.url,f=a._watcher?a._watcher.getLastResult():a.tpl||b,n=new E;(new E(function(a){b?a(c(f)||d(b)):a(c(f)||la(f))})).done(function(b){a._fragment=b;n.resolve(a.ownRenderer?!1:a.node)}).fail(n.reject,n);return n},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(Ma(this._fragment),a):a.appendChild(Ma(this._fragment));
this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new E;this._initial?(this.doApplyTemplate(),b.resolve()):(P(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),P(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();this._renderer=null},onScopeDestroy:function(){this.destroy();this._renderer=null},destroy:function(){var a;this._watcher&&this._watcher.unsubscribeAndDestroy(this.onChange,
this);for(a in this)this.hasOwnProperty(a)&&(this[a]=null)}},!0,!1);f.getTemplate=c;f.loadTemplate=d;return f}();B({$class:"MetaphorJs.cmp.Component",$extends:"MetaphorJs.cmp.Base",id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(b){this.supr(b);this.scope||(this.scope=new ba);b.as&&(this.scope[b.as]=this);this.node&&(this.id=this.node.getAttribute("id"))&&(this.originalId=
!0);this.id=this.id||"cmp-"+Q();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this,this.scope,"id");var a=this.template,c=this.templateUrl;a&&a instanceof ra?a instanceof ra&&(this.template.node=this.node):this.template=a=new ra({scope:this.scope,node:this.node,deferRendering:!a,ownRenderer:!0,tpl:a,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&
(a.initPromise?a.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var b=this.node;b.setAttribute("id",this.id);b.setAttribute("cmp-id",this.id);this.hidden&&(b.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):
va(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},
isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:N,afterRender:N,onShow:N,onHide:N,onParentRendererDestroy:function(){this.destroy()},destroy:function(){this.template&&this.template.destroy();this.destroyEl?va(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();this.supr()}});
var sa=function(b){if(b instanceof sa)return b;if(!(this instanceof sa))return new sa(b);for(var a in b)if(!this[a])try{this[a]=b[a]}catch(c){}this.originalEvent=b;this.type=b.type;!this.target&&b.srcElement&&(this.target=b.srcElement);var d,f=b.button;void 0===this.pageX&&null!==b.clientX&&(d=this.target?this.target.ownerDocument||document:document,a=d.documentElement,d=d.body,this.pageX=b.clientX+(a&&a.scrollLeft||d&&d.scrollLeft||0)-(a&&a.clientLeft||d&&d.clientLeft||0),this.pageY=b.clientY+(a&&
a.scrollTop||d&&d.scrollTop||0)-(a&&a.clientTop||d&&d.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?Ba:ka;this.timeStamp=b&&b.timeStamp||(new Date).getTime()};l(sa.prototype,{isDefaultPrevented:ka,isPropagationStopped:ka,isImmediatePropagationStopped:ka,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=Ba;b.returnValue=!1;b&&b.preventDefault&&b.preventDefault()},
stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=Ba;b&&b.stopPropagation&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=Ba;b&&b.stopImmediatePropagation&&b.stopImmediatePropagation();this.stopPropagation()}},!0,!1);var Ia=function(){var b=window,a=b.history,c=b.location,d=new Y,f={},g={},h={locationChange:[],beforeLocationChange:[]},k=!1,n=/(?:(\w+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,
v=!!a.pushState,y="onhashchange"in b,t=v&&(navigator.vendor||"").match(/Opera/);l(f,d.getApi());var s=function(a){var b=c.protocol+"//"+c.hostname;c.port&&(b+=":"+c.port);a=a.replace(b,"");v||(a=encodeURIComponent(a));"?"==a.substr(0,1)&&(a=c.pathname+a);t&&(a=a.replace("?","#"));return a},q=function(a){a=(""+a).match(n);var b,c;if(!v||t)c=a[6],"!"==c.substr(0,1)&&(b=c.substr(1));b||(b=a[4],a[5]&&(b+=a[5]));return b},m=function(a){c.hash=a?"!"+a:""},p=function(){var a;v?a=c.pathname+c.search+c.hash:
(a=c.hash.substr(1))?("!"==a.substr(0,1)&&(a=a.substr(1)),a=decodeURIComponent(a)):a=c.pathname+c.search;return a},r=function(a,b){var c=g[a].extractor;return z(c)?c(b,a):(c=b.match(c))?c.pop():null},H=function(){var a=p();x("locationChange",!1,a);var b,c,d;for(b in g)c=g[b].value,d=r(b,a),g[b].value=d,d!=c&&f.trigger("change-"+b,d,c,b,a)},x=function(a,b,c){c=c||p();for(var d,g=-1,k=h[a].length;++g<k;)if(d=h[a][g].call(null,c),b&&!1===d)return!1;return f.trigger(a,c)},B=function(){if(v)a.origPushState=
a.pushState,a.origReplaceState=a.replaceState,w(b,"popstate",H),a.pushState=function(b,c,d){if(!1===x("beforeLocationChange",!0,d))return!1;a.origPushState(b,c,s(d));H()},a.replaceState=function(b,c,d){if(!1===x("beforeLocationChange",!0,d))return!1;a.origReplaceState(b,c,s(d));H()};else if(y)a.replaceState=a.pushState=function(a,b,c){if(!1===x("beforeLocationChange",!0,c))return!1;qa(m,null,[s(c)])},w(b,"hashchange",H);else{var d=null,g=!1;b.onIframeHistoryChange=function(a){g||qa(function(){m(a);
H()})};var h=function(a){var b=d.contentWindow.document;b.open();b.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');b.close()};a.pushState=function(a,b,c){if(!1===x("beforeLocationChange",!0,c))return!1;h(s(c))};a.replaceState=function(a,b,c){if(!1===x("beforeLocationChange",!0,c))return!1;a=s(c);d.contentWindow.hashValue=a};var p=function(){d=document.createElement("iframe");
d.src="about:blank";d.style.display="none";document.body.appendChild(d);g=!0;h(s(c.hash.substr(1)));g=!1};k?p():w(b,"load",p)}w(document.documentElement,"click",function(d){d=new sa(d||b.event);for(var f=d.target,g;f&&"a"!=f.nodeName.toLowerCase();)f=f.parentNode;if(f){if(f=(g=f.getAttribute("href"))&&"#"!=g.substr(0,1)&&!f.getAttribute("target"))f=g.match(n),f=f[1]&&c.protocol!=f[1]||f[2]&&c.hostname!=f[2]?!1:f[2]||f[3]?c.port==f[3]:!0;if(f&&q(g)!=q(c))return a.pushState(null,null,q(g)),d.preventDefault(),
d.stopPropagation(),!1}return null});a.initPushState=N;f.initPushState=N};w(b,"load",function(){k=!0});a.initPushState=B;a.onBeforeChange=function(a){h.beforeLocationChange.push(a)};a.onChange=function(a){h.locationChange.push(a)};f.pushUrl=function(b){a.pushState(null,null,b)};f.replaceUrl=function(b){a.replaceState(null,null,b)};f.currentUrl=function(){return p()};f.initPushState=function(){return B()};f.getParam=function(a){return g[a]?g[a].value:null};f.addParam=function(a,b){g[a]||(b?z(b)||(b=
u(b)?ta(b):b):b=ta(a+"=([^&]+)"),g[a]={name:a,value:null,extractor:b},g[a].value=r(a,p()))};return f}(),Db=Ia.currentUrl,ob=/-./g,pb=function(){return document.documentElement.dataset?function(b){return b.dataset}:function(b){var a;if(void 0!==(a=L(b,"data")))return a;a=b.attributes;var c={},d,f,g;d=0;for(f=a.length;d<f;d++)g=a[d].name,0===g.indexOf("data-")&&(c[nb(g.substr(5))]=a[d].value);a=c;L(b,"data",a);return a}}();B({$class:"MetaphorJs.cmp.View",route:null,node:null,scope:null,cmp:null,id:null,
currentComponent:null,watchable:null,defaultCmp:null,initialize:function(b){l(this,b,!0,!1);b=this.node;var a=ea(b,this.scope);l(this,a,!0,!1);b&&b.firstChild&&L(b,"mjs-transclude",la(b.childNodes));this.id||(this.id=Q());this.scope.$app.registerCmp(this,this.scope,"id");this.route?(Ia.initPushState(),Ia.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=oa(this.scope,this.cmp,this.onCmpChange,this,null,V),this.onCmpChange())},onCmpChange:function(){var b=
this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();b&&this.setComponent(b)},onLocationChange:function(){var b=Db(),a=this.route,c,d,f,g,h;d=0;for(f=a.length;d<f;d++){g=a[d];if(g.reg&&(h=b.match(g.reg))){this.changeRouteComponent(g,h);return}g["default"]&&!c&&(c=g)}this.clearComponent();c?this.setRouteComponent(c,[]):this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(b,a){wa(this.node);this.clearComponent();this.setRouteComponent(b,a)},clearComponent:function(){var b=
this,a=b.node;b.currentComponent&&P(a,"leave",null,!0).done(function(){b.currentComponent.destroy();for(b.currentComponent=null;a.firstChild;)a.removeChild(a.firstChild)})},setRouteComponent:function(b,a){var c=this,d=c.node,f=b.params;P(d,"enter",function(){var g=a||[],h={destroyEl:!1,node:d,scope:b.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,n;b.as&&(h.as=b.as);b.template&&(h.template=b.template);g.shift();if(f)for(k=-1,n=f.length;++k<n;h[f[k]]=g[k]);return ua(b.cmp||"MetaphorJs.cmp.Component",
h,h.scope,d,null,g).done(function(a){c.currentComponent=a})},!0)},setComponent:function(b){var a=this,c=a.node;P(c,"enter",function(){var d=pa(b)?b:{},f=(u(b)?b:null)||"MetaphorJs.cmp.Component",g=d.scope||a.scope.$new();d.destroyEl=!1;return ua(f,d,g,c).done(function(b){a.currentComponent=b})},!0)},destroy:function(){this.clearComponent();this.route&&(Ia.un("locationchange",this.onLocationChange,this),this.route=null);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),this.watchable=
null);this.currentComponent=this.scope=null;this.supr()}});var M=Ra.registerAttributeHandler;M("mjs-app",100,ka);var xa=function(){var b=/\r/,a={option:function(a){var b=a.getAttribute("value")||a.value;return void 0!=b?b:x(a.innerText||a.textContent)},select:function(a){for(var b,f=a.options,g=a.selectedIndex,h=(a="select-one"===a.type||0>g)?null:[],k=a?g+1:f.length,n,v=0>g?k:a?g:0;v<k;v++)if(b=f[v],n=b.disabled||b.parentNode.disabled,(b.selected||v===g)&&!n){b=xa(b);if(a)return b;h.push(b)}return h},
radio:function(a){return Ja(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return Ja(a.getAttribute("value"))?"on":a.value}};return function(c){var d,f;if((d=a[c.type]||a[c.nodeName.toLowerCase()])&&void 0!==(f=d(c,"value")))return f;f=c.value;return u(f)?f.replace(b,""):null==f?"":f}}(),Ta=function(){var b={select:function(a,b){for(var d,f,g=a.options,h=X(b),k=g.length,n,v=-1;k--;)f=g[k],(n=h?-1!=Ha.call(h,f.value):!1)?(f.setAttribute("selected","selected"),d=!0):f.removeAttribute("selected"),
n||Ja(f.getAttribute("mjs-default-option"))||(v=k);d||(a.selectedIndex=v);return h}};b.radio=b.checkbox=function(a,b){if(O(b)){var d;d=xa(a);d=b?-1!=Ha.call(b,d):!1;return a.checked=d}};return function(a,c){if(1===a.nodeType){null===c?c="":1===K(c)&&(c+="");var d=b[a.type]||b[a.nodeName.toLowerCase()];d&&void 0!==d(a,c,"value")||(a.value=c)}}}(),Eb=function(){var b=document.createElement("div");return u(b.textContent)?"textContent":"innerText"}(),ha=B({$class:"MetaphorJs.view.AttributeHandler",watcher:null,
scope:null,node:null,expr:null,autoOnChange:!0,initialize:function(b,a,c){var d;c=x(c);this.node=a;this.expr=c;this.scope=b;this.watcher=oa(b,c,this.onChange,this,null,V);if(this.autoOnChange&&void 0!=(d=this.watcher.getLastResult()))this.onChange(d,void 0);b.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.destroy()},onChange:function(){},destroy:function(){this.scope=this.node=null;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),this.watcher=null);this.supr()}}),
Ua=navigator.userAgent.toLowerCase(),Fb=function(){var b=parseInt((/android (\d+)/.exec(Ua)||[])[1],10)||!1;return function(){return b}}(),Va=function(){var b=parseInt((/msie (\d+)/.exec(Ua)||[])[1],10);isNaN(b)&&(b=parseInt((/trident\/.*; rv:(\d+)/.exec(Ua)||[])[1],10)||!1);return function(){return b}}(),gb=function(){var b={};return function(a){if(void 0===b[a]){if("input"==a&&9==Va())return b[a]=!1;var c=document.createElement("div");b[a]=!!("on"+a in c)}return b[a]}}(),ya=function(b,a,c,d){var f=
ea(b);this.el=b;this.cb=a;this.scb=d;this.cbContext=c;this.inputType=a=f.type||b.type.toLowerCase();this.listeners=[];c=b.type?b.type.toLowerCase():"";this.submittable="input"==b.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==a?this.initRadioInput():"checkbox"==a?this.initCheckboxInput():this.initTextInput()};l(ya.prototype,{el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var b=this.inputType,a=this.listeners,c=this.radio,
d=this.el,f,g,h,k;f=0;for(g=a.length;f<g;f++)if("radio"==b)for(h=0,k=c.length;h<k;h++)na(c[h],a[f][0],a[f][1]);else na(d,a[f][0],a[f][1]);for(f in this)this.hasOwnProperty(f)&&(this[f]=null)},initRadioInput:function(){var b,a,c;this.radio=b=Ga("input[name="+this.el.name+"]");this.onRadioInputChangeDelegate=r(this.onRadioInputChange,this);this.listeners.push(["click",this.onRadioInputChangeDelegate]);a=0;for(c=b.length;a<c;a++)w(b[a],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=
r(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);w(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var b=!1,a=this,c=a.el,d=a.listeners,f;if(!Fb()){var g=function(){b=!0},h=function(){b=!1;k()};d.push(["compositionstart",g]);d.push(["compositionend",h]);w(c,"compositionstart",g);w(c,"compositionend",h)}var k=a.onTextInputChangeDelegate=function(){if(!b)a.onTextInputChange()};if(gb("input"))d.push(["input",k]),w(c,"input",
k);else{var n=function(a){f||(f=window.setTimeout(function(){k(a);f=null},0))},g=function(b){b=b||window.event;var c=b.keyCode;if(13==c&&a.submittable&&a.scb)return a.scb.call(a.cbContext,b);91===c||15<c&&19>c||37<=c&&40>=c||n(b)};d.push(["keydown",g]);w(c,"keydown",g);gb("paste")&&(d.push(["paste",n]),d.push(["cut",n]),w(c,"paste",n),w(c,"cut",n))}d.push(["change",k]);w(c,"change",k)},processValue:function(b){switch(this.inputType){case "number":b=parseInt(b,10),isNaN(b)&&(b=0)}return b},onTextInputChange:function(){var b=
this.getValue();this.cb&&this.cb.call(this.cbContext,b)},onCheckboxInputChange:function(){var b=this.el;this.cb&&this.cb.call(this.cbContext,b.checked?b.getAttribute("value")||!0:!1)},onRadioInputChange:function(b){b=b||window.event;b=b.target||b.srcElement;this.cb&&this.cb.call(this.cbContext,b.value)},setValue:function(b){var a=this.inputType,c,d;if("radio"==a)for(a=this.radio,c=0,d=a.length;c<d;c++)a[c].checked=a[c].value==b;else"checkbox"==a?(a=this.el,a.checked=!0===b||b==a.value):Ta(this.el,
b)},getValue:function(){var b=this.inputType,a,c;if("radio"==b){b=this.radio;a=0;for(c=b.length;a<c;a++)if(b[a].checked)return b[a].value;return null}return"checkbox"==b?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(xa(this.el))}},!0,!1);ya.getValue=xa;ya.setValue=Ta;M("mjs-bind",1E3,B({$extends:ha,isInput:!1,input:null,lockInput:null,recursive:!1,textRenderer:null,initialize:function(b,a,c){var d=a.nodeName.toLowerCase(),f=a.type;this.isInput="input"!=d&&"textarea"!=d&&"select"!=
d||"submit"==f||"reset"==f||"button"==f?!1:!0;this.recursive=null!==a.getAttribute("mjs-recursive");this.lockInput=null!==a.getAttribute("mjs-lock-input");a.removeAttribute("mjs-recursive");a.removeAttribute("mjs-lock-input");this.isInput&&(this.input=new ya(a,this.onInputChange,this));this.recursive?(this.scope=b,this.node=a,this.textRenderer=new eb(b,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),b instanceof ba&&b.$on("destroy",
this.onScopeDestroy,this)):this.supr(b,a,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var b=this.watcher.getLastResult();this.updateElement(b)},updateElement:function(b){this.isInput?this.input.setValue(b):this.node[Eb]=b},destroy:function(){this.textRenderer&&(this.textRenderer.destroy(),this.textRenderer=null);this.input&&(this.input.destroy(),this.input=null);this.supr()}}));
M("mjs-bind-html",1E3,B({$extends:"attr.mjs-bind",updateElement:function(b){this.node.innerHTML=b}}));(function(){var b=function(a,b,d,f){if(null!==d){if(d==La(a,b))return;d=!d}else d=La(a,b);d?f?P(a,[b+"-remove"],null,!0).done(function(){da(a,b)}):da(a,b):f?P(a,[b+"-add"],null,!0).done(function(){ma(a,b)}):ma(a,b)};M("mjs-class",1E3,B({$extends:ha,initial:!0,onChange:function(){var a=this.node,c=this.watcher.getLastResult(),d=this.watcher.getPrevValue(),f;wa(a);if(u(c))d&&b(a,d,!1,!1),b(a,c,null,
!this.initial);else if(O(c))for(f=-1,d=c.length;++f<d;b(a,c[f],!0,!this.initial));else for(f in c)b(a,f,c[f]?!0:!1,!this.initial);this.initial=!1}}))})();M("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(b,a,c){b&&(b[c]=a)}]);(function(){var b=function(a,b,d,f){var g,h,k,n,v,y=ea(b,a);d=d.split(" ");k=0;for(n=d.length;k<n;k++)v=d[k],""!=v&&"as"!=v&&(g?h=v:g=v);f=l({scope:a,node:b,as:h,parentRenderer:f,destroyScope:!0},y,!1,!1);ua(g,f,a,b);return!1};b.$breakScope=!0;M("mjs-cmp",200,
b)})();M("mjs-config",50,function(b,a,c){ea(a,b,c)});var S=function(b){b=b||{};this._queue=[];this._map={};this.id="$$"+Q();for(var a in b)this[a]=b[a]};S.REPLACE=1;S.ONCE=2;S.MULTIPLE=3;S.ONCE_EVER=3;l(S.prototype,{_queue:null,_map:null,_nextRequested:!1,_running:!1,length:0,id:null,async:!0,auto:!0,thenable:!1,stack:!1,context:null,mode:S.MULTIPLE,add:function(b,a,c,d,f,g){var h=this.id,k=b[h]||Q();a={id:k,fn:b,context:a,args:c,async:g};d=d||this.mode;if(d==S.ONCE_EVER&&b[h])return b[h];b[h]=k;
if(this._map[k])if(d==S.REPLACE)this.remove(k);else if(d==S.ONCE)return k;this._queue[f?"unshift":"push"](a);this._map[k]=a;this.length=this._queue.length;this.auto&&this.next();return k},append:function(b,a,c,d,f){return this.add(b,a,c,d,!1,f)},prepend:function(b,a,c,d,f){return this.add(b,a,c,d,!0,f)},remove:function(b){var a=this._queue,c,d;c=0;for(d=a.length;c<d;c++)if(a[c].id==b){a.splice(c,1);break}delete this._map[b]},next:function(){var b=this,a;if(b._running)b._nextRequested=!0;else if(b._nextRequested=
!1,a=b._queue[b.stack?"pop":"shift"](),b.length=b._queue.length,a)if(b._running=!0,delete b._map[a.id],b.async||a.async){var c=0;1===K(a.async)?c=a.async:1===K(b.async)&&(c=b.async);qa(function(){try{b._processResult(a.fn.apply(a.context||b.context,a.args||[]))}catch(c){throw W(c),b._finish(),c;}},null,null,c)}else try{b._processResult(a.fn.apply(a.context||b.context,a.args||[]))}catch(d){throw W(d),b._finish(),d;}},_processResult:function(b){var a=this;a.thenable&&T(b)?b.then(function(){a._finish()},
function(){a._finish()}):a._finish();return b},_finish:function(){this._running=!1;(this.auto||this._nextRequested)&&this.next()},destroy:function(){this.context=this._map=this._queue=null;this._running=this._nextRequested=!1;this.next=N}},!0,!1);var fa=function(){return window.getComputedStyle?function(b,a,c){if(b===window)return a?c?0:null:{};b=getComputedStyle(b,null);a=a?b[a]:b;return c?parseFloat(a)||0:a}:function(b,a,c){b=b.currentStyle||b.style||{};a=a?b[a]:b;return c?parseFloat(a)||0:a}}(),
Wa=function(){var b=/(auto|scroll)/,a,c=function(a){a=fa(a);return a.overflow+a.overflowY+a.overflowY};return function(d){a||(a=document.body);for(;d&&d!==a;){if(b.test(c(d)))return d;d=d.parentNode}return window}}(),hb=function(b){var a,c=b?"pageYOffset":"pageXOffset",d=b?"scrollTop":"scrollLeft";b=document;var f=b.body,g=b.documentElement;a=void 0!==window[c]?function(){return window[c]}:g.clientHeight?function(){return g[d]}:function(){return f[d]};return function(b){return b&&b!==window?b&&1==
b.nodeType&&b!==f&&b!==g?b[d]:a():a()}},Ea=hb(!0),Fa=hb(!1),Gb=B(function(b,a,c){this.commonInit(b,a,c);this.init(b,a,c);this.queue.add(this.render,this,[X(this.watcher.getLastResult())])},{id:null,observable:null,model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,animate:!1,trackByFn:null,griDelegate:null,queue:null,buffered:!1,itemSize:null,itemsOffsite:1,bufferState:null,scrollOffset:0,horizontal:!1,bufferEventDelegate:null,
topStub:null,botStub:null,commonInit:function(b,a,c){a.removeAttribute("mjs-include");this.parseExpr(c);this.tpl=a;this.renderers=[];this.prevEl=a.previousSibling;this.nextEl=a.nextSibling;this.parentEl=a.parentNode;this.node=a;this.scope=b;this.queue=new S({async:!1,auto:!0,thenable:!0,stack:!1,context:this,mode:S.ONCE});b=ea(a,b);this.animateMove=!b.buffered&&b.animateMove&&P.cssAnimations;this.animate=!b.buffered&&(null!==a.getAttribute("mjs-animate")||b.animate);a.removeAttribute("mjs-animate");
this.id=b.id||Q();b.observable&&(this.observable=new Y,l(this,this.observable.getApi(),!0,!1));this.parentEl.removeChild(a);b.buffered&&this.initBuffering(b)},init:function(b,a){var c=L(a,"config")||{};this.watcher=oa(b,this.model,this.onChange,this,null,V);(this.trackBy=c.trackBy)&&"$"!=this.trackBy?this.trackByWatcher=oa(b,this.trackBy,this.onChangeTrackBy,this,null,V):"$"==this.trackBy||this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);this.griDelegate=r(this.scopeGetRawIndex,this)},
triggerIf:function(){this.observable&&this.trigger.apply(null,arguments)},render:function(b){var a=this.renderers,c=this.tpl,d=this.parentEl,f=this.nextEl,g=this.buffered,h=document.createDocumentFragment(),k,n,v;n=0;for(v=b.length;n<v;n++)k=c.cloneNode(!0),a.push(this.createItem(k,b,n)),g||(h.appendChild(k),a[n].attached=!0);g?(this.getScrollOffset(),this.updateScrollBuffer()):(this.doUpdate(),d.insertBefore(h,f));this.triggerIf("render",this)},doUpdate:function(b,a,c,d){var f=this.renderers;b=b||
0;var g=f.length;a=a||g-1;var h=this.watcher.getLastResult(),k=this.getTrackByFunction();for(a>g-1&&(a=g-1);b<=a;b++)c&&f[b].action!=c||this.renderItem(b,f,h,k,d)},renderItem:function(b,a,c,d,f){c=c||this.watcher.getLastResult();a=a||this.renderers;d=d||this.getTrackByFunction();var g=a[b],h=g.scope;a=a.length-1;var k=!(b%2);f&&g.rendered||(h.$index=b,h.$first=0===b,h.$last=b===a,h.$even=k,h.$odd=!k,h.$trackId=d(c[b]),h.$getRawIndex=this.griDelegate,g.renderer?h.$check():(g.renderer=new Sa(g.el,h),
g.renderer.process(),g.rendered=!0))},createItem:function(b,a,c){var d=this.itemName,f=this.scope.$new();f[d]=this.getListItem(a,c);return{index:c,action:"enter",el:b,scope:f,attached:!1,rendered:!1}},onChange:function(b,a){this.queue.prepend(this.applyChanges,this,[a],S.REPLACE)},applyChanges:function(b){var a=this,c=a.renderers,d=a.tpl,f=0,g=X(a.watcher.getLastResult()),h=null,k=a.animateMove,n=a.animate,v=[],l=a.itemName,t=c.slice(),s=!1,q,m,p,r,u,w;b=a.watcher.getMovePrescription(b,a.getTrackByFunction(),
g);p=0;for(r=b.length;p<r;p++)q=b[p],1===K(q)?(m=q,q=c[m],m!=f&&null===h&&(h=p),q.action="move",q.scope[l]=a.getListItem(g,p),s=k,v.push(q),c[m]=null,f++):(null===h&&(h=p),u=a.createItem(d.cloneNode(!0),g,p),v.push(u));a.renderers=v;if(n){a.doUpdate(h,null,"enter");s&&(w=a.calculateTranslates(v,t,c));var d=[],x=new E,z=new E,B=new E,A=E.counter(v.length),f=function(){A.countdown();return x};p=0;for(r=c.length;p<r;p++)if(u=c[p])u.scope.$destroy(),wa(u.el),d.push(P(u.el,"leave",null,!1,V).done(function(a){a.style.visibility=
"hidden"}));p=0;for(r=v.length;p<r;p++)u=v[p],wa(u.el),"enter"==u.action?d.push(P(u.el,"enter",f,!1,V)):d.push(a.moveAnimation(u.el,s?w[p][0]:null,s?w[p][1]:null,f,z));A.done(function(){Z(function(){z.resolve();a.applyDomPositions(c);s||a.doUpdate(h,null,"move");Z(function(){x.resolve()});a.triggerIf("change",a)})});E.all(d).always(function(){Z(function(){a.doUpdate(h||0);a.removeOldElements(c);if(s)for(a.doUpdate(h,null,"move"),p=0,r=v.length;p<r;p++)u=v[p],u.el.style[P.prefixes.transform]=null,
u.el.style[P.prefixes.transform]="";B.resolve()})});return B}a.buffered?(a.getScrollOffset(),a.removeOldElements(c),a.queue.append(a.updateScrollBuffer,a,[!0])):(a.applyDomPositions(),a.doUpdate(h||0),a.removeOldElements(c));a.triggerIf("change",a)},removeOldElements:function(b){var a,c,d,f=this.parentEl;a=0;for(c=b.length;a<c;a++)(d=b[a])&&d.attached&&(d.attached=!1,f.removeChild(d.el))},applyDomPositions:function(b){var a=this.renderers,c=this.parentEl,d=this.prevEl,d=d?d.nextSibling:c.firstChild,
f,g,h,k,n;g=0;for(h=a.length;g<h;g++)n=a[g],k=n.el,(f=b&&b[g]?b[g].el.nextSibling:0<g?a[g-1].el.nextSibling||d:d)&&k.nextSibling!==f?c.insertBefore(k,f):f||c.appendChild(k),n.attached=!0},getListItem:function(b,a){return b[a]},onChangeTrackBy:function(b){this.trackByFn=null;this.trackBy=b},getTrackByFunction:function(){var b;this.trackByFn||((b=this.trackBy)&&"$"!=b?z(b)?this.trackByFn=b:this.trackByFn=function(a){return a&&!ja(a)?a[b]:void 0}:this.trackByFn=function(a){return ja(a)?a:void 0});return this.trackByFn},
scopeGetRawIndex:function(b){if(void 0===b)return-1;var a=this.watcher.getUnfilteredValue(),c=this.getTrackByFunction(),d,f;d=0;for(f=a.length;d<f;d++)if(c(a[d])===b)return d;return-1},getNodePositions:function(b,a,c){for(var d=[],f,g,h,k={};b.firstChild;)b.removeChild(b.firstChild);f=0;for(g=a.length;f<g;f++)c&&c[f]&&(h=c[f].el.cloneNode(!0),b.appendChild(h)),h=a[f].el.cloneNode(!0),b.appendChild(h),d.push(h);f=0;for(g=d.length;f<g;f++)b=d[f],(c=a[f].renderer)&&(k[c.id]={left:b.offsetLeft,top:b.offsetTop});
return k},calculateTranslates:function(b,a,c){var d=this.parentEl,f=d.parentNode,g=d.cloneNode(!0),h=d.offsetWidth,k=[],n=0,v=0,l;l=g.style;l.position="absolute";l.left="-10000px";l.visibility="hidden";l.width=h+"px";f.insertBefore(g,d);l.width=h-(g.offsetWidth-h)+"px";a=this.getNodePositions(g,a);c=this.getNodePositions(g,b,c);d=this.getNodePositions(g,b);f.removeChild(g);f=0;for(g=b.length;f<g;f++)h=b[f].el,l=b[f].renderer,l=l.id,0==f&&(n=h.offsetLeft,v=h.offsetTop),k.push([{left:d[l].left-n-(c[l].left-
n),top:d[l].top-v-(c[l].top-v)},a[l]?{left:a[l].left-n-(c[l].left-n),top:a[l].top-v-(c[l].top-v)}:null]);return k},moveAnimation:function(b,a,c,d,f){var g=b.style;f.done(function(){c&&(g[P.prefixes.transform]="translateX("+c.left+"px) translateY("+c.top+"px)")});return P(b,"move",d,!1,V,function(b,c,d){0==c&&"start"!=d&&a&&(g[P.prefixes.transform]="translateX("+a.left+"px) translateY("+a.top+"px)")})},initScrollParent:function(b){this.scrollEl=Wa(this.parentEl)},initScrollStubs:function(b){var a=
this.parentEl,c=this.prevEl,d,f,g={fontSize:0,lineHeight:0,padding:0,paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,margin:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0};this.topStub=d=document.createElement(b.stub||"div");this.botStub=b=document.createElement(b.stub||"div");ma(d,"mjs-buffer-top");ma(b,"mjs-buffer-bottom");for(f in g)d.style[f]=g[f],b.style[f]=g[f];a.insertBefore(d,c?c.nextSibling:a.firstChild);a.insertBefore(b,this.nextEl);this.prevEl=d;this.nextEl=b},initBuffering:function(b){this.buffered=
!0;this.itemSize=b.itemSize;this.itemsOffsite=b.itemsOffsite||5;this.horizontal=b.horizontal||!1;this.initScrollParent(b);this.initScrollStubs(b);this.bufferEventDelegate=r(this.bufferUpdateEvent,this);w(this.scrollEl,"scroll",this.bufferEventDelegate);w(window,"resize",this.bufferEventDelegate)},getScrollOffset:function(){var b=$a(this.topStub,this.scrollEl);return this.scrollOffset=this.horizontal?b.left:b.top},getBufferState:function(b){var a=this.scrollEl,c=this.horizontal,d=document.documentElement,
d=a===window?window[c?"innerWidth":"innerHeight"]||d[c?"clientWidth":"clientHeight"]:a[c?"offsetWidth":"offsetHeight"],f=c?Fa(a):Ea(a),a=this.itemSize,c=this.itemsOffsite,g=b?this.getScrollOffset():this.scrollOffset;b=this.renderers.length;var h,f=Math.max(0,f+g),g=Math.ceil(f/a);0>g&&(g=0);f=g;h=d=g+Math.ceil(d/a);g=g>c?g-c:0;h+=c;h>b-1&&(h=b-1);return g>h?this.bufferState:this.bufferState={first:g,last:h,viewFirst:f,viewLast:d,ot:g*a,ob:(b-h-1)*a}},updateStubs:function(b){var a=this.horizontal;
this.topStub.style[a?"width":"height"]=b.ot+"px";this.botStub.style[a?"width":"height"]=b.ob+"px"},bufferUpdateEvent:function(){this.queue.add(this.updateScrollBuffer,this)},updateScrollBuffer:function(b){var a=this,c=a.bufferState,d=a.parentEl,f=a.renderers,g=a.botStub,h=a.getBufferState(!1),k=new E,n,l,r,t;if(!h)return null;c&&h.first==c.first&&h.last==c.last||a.triggerIf("bufferchange",a,h,c);Z(function(){if(b||!c||h.last<c.first||h.first>c.last){if(c)for(l=c.first,r=c.last;l<=r;l++)(t=f[l])&&
t.attached&&(d.removeChild(t.el),t.attached=!1);n=document.createDocumentFragment();l=h.first;for(r=h.last;l<=r;l++)if(t=f[l])t.rendered||a.renderItem(l),n.appendChild(t.el),t.attached=!0;d.insertBefore(n,g)}else{if(c.first<h.first)for(l=c.first,r=h.first;l<r;l++)(t=f[l])&&t.attached&&(d.removeChild(t.el),t.attached=!1);else if(c.first>h.first){n=document.createDocumentFragment();l=h.first;for(r=c.first;l<r;l++)if(t=f[l])t.rendered||a.renderItem(l),n.appendChild(t.el),t.attached=!0;d.insertBefore(n,
f[c.first].el)}if(c.last<h.last){n=document.createDocumentFragment();l=c.last+1;for(r=h.last;l<=r;l++)if(t=f[l])t.rendered||a.renderItem(l),n.appendChild(t.el),t.attached=!0;d.insertBefore(n,g)}else if(c.last>h.last)for(l=h.last+1,r=c.last;l<=r;l++)(t=f[l])&&t.attached&&(d.removeChild(t.el),t.attached=!1)}a.updateStubs(h);a.triggerIf("bufferupdate",a);a.onBufferStateChange(h,c);k.resolve()});return k},scrollTo:function(b){var a=this.itemSize,c=this.scrollEl||Wa(this.parentEl),d=this.horizontal,f=
d?"scrollLeft":"scrollTop",g=new E,h;this.buffered&&this.queue.append(function(){Z(function(){h=a*b;c===window?window.scrollTo(d?h:Fa(),d?Ea():h):c[f]=h;g.resolve()});return g});return g},onBufferStateChange:function(b,a){},parseExpr:function(b){b=b.split(" ");var a,c,d,f,g;a=0;for(c=b.length;a<c;a++)if(g=b[a],""!=g&&"in"!=g)if(f){d=b.slice(a).join(" ");break}else f=g;this.model=d;this.itemName=f||"item"},destroy:function(){var b=this.renderers,a=this.parentEl,c,d;c=0;for(d=b.length;c<d;c++)b[c].renderer.destroy();
this.trackByWatcher&&this.trackByWatcher.unsubscribeAndDestroy();this.buffered&&(a.removeChild(this.topStub),a.removeChild(this.botStub),na(this.scrollEl,"scroll",this.bufferEventDelegate),na(window,"resize",this.bufferEventDelegate));this.queue.destroy();this.watcher.unsubscribeAndDestroy(this.onChange,this);this.observable&&(this.trigger("destroy",this),this.observable.destroy());for(c in this)this.hasOwnProperty(c)&&(this[c]=null)}},{$stopRenderer:!0,$registerBy:"id"});M("mjs-each",100,Gb);var ib=
Pa.createFunc;(function(){var b="click dblclick mousedown mouseup mouseover mouseout mousemove keydown keyup keypress submit focus blur copy cut paste enter".split(" "),a,c;a=0;for(c=b.length;a<c;a++)(function(a){var b=a;"enter"==b&&(b="keyup");M("mjs-"+a,1E3,function(c,h,k){var l=ib(k);h.removeAttribute("mjs-"+a);w(h,b,function(b){b=new sa(b||window.event);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;l(c);delete c.$event;c.$root.$check();b.preventDefault();return!1})})})(b[a])})();M("mjs-show",
500,B({$extends:ha,initial:!0,display:"",initialize:function(b,a,c){this.display=ea(a,b).display||"";this.supr(b,a,c)},runAnimation:function(b){var a=this,c=a.node.style,d=function(){c.display=b?a.display:"none"};a.initial?d():P(a.node,b?"show":"hide",function(){b&&(c.display=a.display)},!0).done(d)},onChange:function(){var b=this.watcher.getLastResult();this.runAnimation(b);this.initial=!1}}));M("mjs-hide",500,B({$extends:"attr.mjs-show",onChange:function(){var b=this.watcher.getLastResult();this.runAnimation(!b);
this.initial=!1}}));M("mjs-if",500,B({$extends:ha,parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(b,a,c){this.parentEl=a.parentNode;this.prevEl=a.previousSibling;this.supr(b,a,c)},onScopeDestroy:function(){this.parentEl=this.prevEl=null;this.supr()},onChange:function(){var b=this,a=b.watcher.getLastResult(),c=b.parentEl,d=b.node,f=function(){b.prevEl?c.insertBefore(d,b.prevEl?b.prevEl.nextSibling:null):c.appendChild(d)},g=function(){c.removeChild(d)};a?va(d)||(b.initial?f():P(d,"enter",
f,!0)):va(d)&&(b.initial?g():P(d,"leave",null,!0).done(g));b.initial=!1}}));M("mjs-ignore",0,ka);M("mjs-include",900,function(b,a,c,d){b=new ra({scope:b,node:a,url:c,parentRenderer:d});return b.ownRenderer?!1:b.initPromise});M("mjs-init",250,function(b,a,c){a.removeAttribute("mjs-init");ib(c)(b)});M("mjs-model",1E3,B({$extends:ha,inProg:!1,input:null,binding:null,autoOnChange:!1,initialize:function(b,a,c){var d=ea(a,b);this.node=a;this.input=new ya(a,this.onInputChange,this);this.binding=d.binding||
"both";this.supr(b,a,c);b=this.input.getValue();a=this.watcher.getLastResult();if(a!=b)if("input"!=this.binding&&void 0!=a)this.onChange(a);else if("scope"!=this.binding&&void 0!=b)this.onInputChange(b)},onInputChange:function(b){var a=this.scope;"scope"!=this.binding&&(b&&u(b)&&-1!=b.indexOf("\\{")&&(b=b.replace(/\\{/g,"{")),this.watcher.getLastResult()!=b&&(this.watcher.setValue(b),this.inProg=!0,a instanceof ba?a.$root.$check():this.watcher.checkAll(),this.inProg=!1))},destroy:function(){this.input.destroy();
this.input=null;this.supr()},onChange:function(){var b=this.watcher.getLastResult(),a;"input"==this.binding||this.inProg||((a=Va())&&8>a?qa(this.input.setValue,this.input,[b]):this.input.setValue(b))}}));M("mjs-options",100,B({$extends:ha,model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,fragment:null,initialize:function(b,a,c){this.parseExpr(c);this.node=a;this.scope=b;for(this.defOption=a.options.length?a.options[0]:null;a.firstChild;)a.removeChild(a.firstChild);this.defOption&&
this.defOption.setAttribute("mjs-default-option","");try{this.watcher=oa(b,this.model,this.onChange,this,null,V)}catch(d){W(d)}this.render(X(this.watcher.getValue()))},onChange:function(){this.render(X(this.watcher.getValue()))},renderOption:function(b,a,c){var d=this.groupEl||this.fragment,f=Va();c.item=b;c.$index=a;b=this.getterFn(c);void 0!=b.group&&(b.group=""+b.group);b.group!==this.prevGroup&&(b.group?(this.groupEl=d=document.createElement("optgroup"),d.setAttribute("label",b.group),b.disabledGroup&&
d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=b.group;a=document.createElement("option");a.setAttribute("value",b.value);a.text=b.name;f&&9>f&&(a.innerHTML=b.name);b.disabled&&a.setAttribute("disabled","disabled");d.appendChild(a)},render:function(b){var a=this.node,c=xa(a),d=this.defOption,f=this.scope.$new(),g,h;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;a.firstChild;)a.removeChild(a.firstChild);
g=0;for(h=b.length;g<h;g++)this.renderOption(b[g],g,f);d&&a.insertBefore(d,a.firstChild);f.$destroy();a.appendChild(this.fragment);this.fragment=null;Ta(a,c)},parseExpr:function(b){var a=b.indexOf(" in "),c;-1==a?(c=b,b="{name: .item, value: .$index}"):(c=b.substr(a+4),b=b.substr(0,a));this.model=c;this.getterFn=Ca(b)}}));(function(){var b="selected checked disabled readonly open required".split(" "),a,c;a=0;for(c=b.length;a<c;a++)(function(a){M("mjs-"+a,1E3,B({$extends:ha,onChange:function(b){b?
this.node.setAttribute(a,a):this.node.removeAttribute(a)}}))})(b[a])})();var Hb=function(){var b={},a=0;return function(c){if(b[c])return E.resolve(c);1E3<a&&(b={},a=0);var d=document.createElement("img"),f=d.style,g=new E;w(d,"load",function(){b[c]=!0;a++;document.body.removeChild(d);g.resolve(c)});f.position="absolute";f.visibility="hidden";f.left="-10000px";f.top="0";d.src=c;document.body.appendChild(d);return g}}(),jb=document.body,Ib=function(){var b;return function(){if(void 0===b){var a=document.createElement("div"),
c=document.createElement("div");c.style&&window.getComputedStyle?(a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",c.innerHTML="",jb.appendChild(a),c="4px"===window.getComputedStyle(c,null).width,jb.removeChild(a),b=c):b=!1}return b}}(),kb=function(b,a){var c=
/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,d=["Top","Right","Bottom","Left"],f=b?"inner"==b?"padding":"":"content";return function(b,h){if(b===window)return b.document.documentElement["client"+a];if(9===b.nodeType){var k=b.documentElement;return Math.max(b.body["scroll"+a],k["scroll"+a],b.body["offset"+a],k["offset"+a],k["client"+a])}a:{var l=a.toLowerCase(),r=f||(!0===h?"margin":"border"),k=fa(b),u=!0,t="width"===l?b.offsetWidth:b.offsetHeight,s="border-box"===k.boxSizing;if(0>=t||null==
t){t=b.style[l];if(c.test(t)){k=t;break a}u=s&&(Ib()||t===b.style[l]);t=parseFloat(t)||0}r=r||(s?"border":"content");l=r===(u?"border":"content")?4:"width"===l?1:0;for(s=0;4>l;l+=2)"margin"===r&&(s+=parseFloat(k[r+d[l]])),u?("content"===r&&(s-=parseFloat(k["padding"+d[l]])),"margin"!==r&&(s-=parseFloat(k["border"+d[l]+"Width"]))):(s+=parseFloat(k["padding"+d[l]]),"padding"!==r&&(s+=parseFloat(k["border"+d[l]+"Width"])));k=t+s}return k}},Jb=kb("","Width"),Kb=kb("","Height");M("mjs-src",1E3,B({$extends:ha,
scrollEl:null,scrollDelegate:null,resizeDelegate:null,position:null,sw:null,sh:null,queue:null,checkVisibility:!0,usePreload:!0,initialize:function(b,a,c){var d=ea(a,b);d.deferred?(this.scrollEl=Wa(a),this.scrollDelegate=r(this.onScroll,this),this.resizeDelegate=r(this.onResize,this),w(this.scrollEl,"scroll",this.scrollDelegate),w(window,"resize",this.resizeDelegate)):this.checkVisibility=!1;d.noPreload&&(this.usePreload=!1);this.queue=new S({auto:!0,async:!0,mode:S.ONCE});this.supr(b,a,c)},isVisible:function(){if(!this.checkVisibility)return!0;
var b=this.scrollEl,a=Ea(b),c=Fa(b),d=this.sw,f=this.sh,g;this.position||(this.position=$a(this.node,b));d||(d=this.sw=Jb(b),f=this.sh=Kb(b));b=this.position.top;g=this.position.left;return b>a&&b<a+f&&g>c&&g<c+d},onScroll:function(){this.queue.add(this.changeIfVisible,this)},onResize:function(){this.sw=this.position=null;this.queue.add(this.changeIfVisible,this)},onChange:function(){this.queue.add(this.changeIfVisible,this)},changeIfVisible:function(){var b=this;if(b.isVisible()){var a=b.watcher.getLastResult();
b.stopWatching();b.usePreload?Hb(a).done(function(){b&&b.node&&Z(function(){b.node.src=a;b.node.setAttribute("src",a)})}):(b.node.src=a,b.node.setAttribute("src",a))}},stopWatching:function(){this.scrollEl&&(na(this.scrollEl,"scroll",this.scrollDelegate),na(window,"resize",this.resizeDelegate),this.scrollEl=this.resizeDelegate=this.scrollDelegate=null,this.queue.destroy(),this.queue=null,this.checkVisibility=!1)},destroy:function(){this.stopWatching();this.supr()}}));M("mjs-transclude",1E3,function(b,
a){return ab(a)});M("mjs-view",200,function(b,a,c){a.removeAttribute("mjs-view");ua(c||"MetaphorJs.cmp.View",{scope:b,node:a},b,a);return!1});var lb=Ra.registerTagHandler;lb("mjs-include",900,function(b,a,c,d){return(new ra({scope:b,node:a,tpl:a.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});lb("mjs-transclude",900,function(b,a){return ab(a)});var Lb=function(){var b=function(a,b,c){if(z(b))return b(a,c);if(""===b||void 0===b)return!0;if(void 0!==a){if(za(a))return a===b;if(b instanceof
RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},a=function(a,c,g){if(ja(a))return void 0===c.$?!0:b(a,c.$,g);var h,k;for(h in c)if("$"==h)for(k in a){if(b(a[k],c.$,g))return!0}else if(b(a[h],c[h],g))return!0;return!1},c=function(b,c,g){ia(c)||(c={$:c});var h=[],k,l;k=-1;for(l=b.length;++k<l;)a(b[k],c,g)&&h.push(b[k]);return h};c.compare=a;return c}();G("filter.filter",function(b,a,c,
d){return Lb(b,c,d)});G("filter.join",function(b,a,c){c=c||", ";return b&&b.length?(O(b)||(b=X(b)),b.join(c)):""});G("filter.l",function(b,a){return a.$app.lang.get(b)});G("filter.limitTo",function(b,a,c){a=u(b);if(!O(b)&&!a)return b;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if(a)return c?0<=c?b.slice(0,c):b.slice(c,b.length):"";a=[];var d;c>b.length?c=b.length:c<-b.length&&(c=-b.length);0<c?d=0:(d=b.length+c,c=b.length);for(;d<c;d++)a.push(b[d]);return a});G("filter.linkify",function(b,
a,c){return b?b.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});G("filter.lowercase",function(b){return b.toLowerCase()});var Mb={};G("filter.moment",function(b,a,c){c=Mb[c]||c;return moment(b).format(c)});var Nb={};G("filter.numeral",function(b,a,c){c=Nb[c]||c;return numeral(b).format(c)});G("filter.p",function(b,a,c){return a.$app.lang.plural(b,parseInt(c,10)||0)});G("filter.sortBy",function(b,a,c,d){return qb(b,
c,d)});G("filter.split",function(b,a,c,d){d=d||void 0;c=c||"/\\n|,/";if(!b)return[];b=""+b;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=ta(c.substring(1,c.length-1)));b=b.split(c,d);a=-1;for(c=b.length;++a<c;b[a]=x(b[a]));return b});G("filter.toArray",function(b){return X(b)});G("filter.ucfirst",function(b){return b.substr(0,1).toUpperCase()+b.substr(1)});G("filter.uppercase",function(b){return b.toUpperCase()});(function(){rb(function(){var b=Ga("[mjs-app]"),a,c,d;a=-1;for(c=b.length;++a<c;)d=
b[a],sb(d,d.getAttribute("mjs-app"),null,!0)})})()})();
