(function(){"undefined"==typeof window&&(global.window=global);window.document&&!document.querySelectorAll&&(document.querySelectorAll=function(f){var l=document,a=l.documentElement.firstChild,b=l.createElement("STYLE");a.appendChild(b);l.__qsaels=[];b.sheet?b.sheet.insertRule(f+"{x:expression(document.__qsaels.push(this))}",0):b.styleSheet&&(b.styleSheet.cssText=f+"{x:expression(document.__qsaels.push(this))}");window.scrollBy(0,0);return l.__qsaels});var k={}.undefined,p=Function.prototype.bind?
function(f,l){return f.bind(l)}:function(f,l){return function(){f.apply(l,arguments)}},q={},c=Array.prototype.slice,g=function(){var f=!1,l=c.call(arguments),a=l.shift(),b,d;for("boolean"==typeof l[l.length-1]&&(f=l.pop());b=l.shift();)for(d in b)if(b.hasOwnProperty(d))if(a[d]&&"object"==typeof a[d]&&"object"==typeof b[d])g(a[d],b[d],f);else if(!0===f||"undefined"==typeof a[d]||null===a[d])a[d]=b[d];return a},r=["0","0","0"],s=function(){for(var f=r.length,l;f;){f--;l=r[f].charCodeAt(0);if(57==l)return r[f]=
"A",r.join("");if(90==l)r[f]="0";else return r[f]=String.fromCharCode(l+1),r.join("")}r.unshift("0");return r.join("")},m=function(f){var l=document.createDocumentFragment();if(f.nodeType)l.appendChild(f);else for(var a=-1,b=f.length>>>0;++a!==b;l.appendChild(f[0]));return l},e={},h=function(f){return f._mjsId||(f._mjsId=s())},n=[],a=[],b=!1,d=!1,v=function(f,l){return f.priority<l.priority?-1:f.priority>l.priority?1:0},y,x=function(){return String.prototype.trim?function(f){return"string"==typeof f?
f.trim():f}:function(f){return"string"==typeof f?f.replace(/^\s\s*/,"").replace(/\s\s*$/,""):f}}(),u=Array.prototype.indexOf,z=Object.prototype.toString,L=Object.prototype.hasOwnProperty,E=function(f){return f&&"object"==typeof f&&"number"==typeof f.length&&"[object Array]"==z.call(f)||!1},B=function(f){var l,a,b;if(E(f)){b=[];l=0;for(a=f.length;l<a;l++)b.push(B(f[l]));return b}switch(f.nodeType){case 1:return f.cloneNode(!0);case 3:return document.createTextNode(f.innerText||f.textContent);case 11:return f.cloneNode(!0);
default:return null}},G=function(f,l,a){f.attachEvent?f.attachEvent("on"+l,a):f.addEventListener(l,a,!1)},M=function(f,l,a){f.detachEvent?f.detachEvent("on"+l,a):f.removeEventListener(l,a,!1)},H={},J=function(f){return H[f]||(H[f]=new RegExp("(?:^|\\s)"+f+"(?!\\S)",""))},I=function(f,l){return J(l).test(f.className)},F=function(f,l,a){setTimeout(function(){f.apply(l,a||[])},0)},C,A,K=function(f,l,a){if(""===l||"undefined"==typeof l)return!0;if("undefined"!=typeof f){if("boolean"==typeof f)return f===
l;if(a instanceof RegExp)return l.test(""+f);if("strict"==a)return""+f===""+l;if(!0===a||null===a||"undefined"==typeof a)return-1!=""+f.indexOf(l);if(!1===a)return-1==""+f.indexOf(l)}return!1},t=function(f,l,a){if("object"!=typeof f)return"undefined"==typeof l.$?!0:K(f,l.$,a);var b,d;for(b in l)if("$"==b)for(d in f){if(K(f[d],l.$,a))return!0}else if(K(f[b],l[b],a))return!0;return!1},p={VERSION:"0.2",registerAttributeHandler:function(f,l,a){y||(y=MetaphorJs.add);n.push({priority:l,name:f,handler:y("attr."+
f,a)});b=!1},registerTagHandler:function(f,l,w){y||(y=MetaphorJs.add);a.push({priority:l,name:f,handler:y("tag."+f,w)});d=!1},getAttributeHandlers:function(){b||(n.sort(v),b=!0);return n},getTagHandlers:function(){d||(a.sort(v),d=!0);return a},apply:g,nextUid:s,getTemplate:function(f){if(!e[f]){var l=document.getElementById(f),a;if(l)a=l.tagName.toLowerCase(),"script"==a?(a=document.createElement("div"),a.innerHTML=l.innerHTML,e[f]=m(a.childNodes)):e[f]="content"in l?l.content:m(l.childNodes);else return e[f]=
MetaphorJs.ajax(f,{dataType:"fragment"}).then(function(l){return e[f]=l})}return e[f]},numberFormats:{},dateFormats:{},getNodeId:h,data:function(f,l,a){f=h(f);var b=q[f];return"undefined"!=typeof a?(b||(b=q[f]={}),b[l]=a):b?b[l]:k},emptyFn:function(){},trim:x,bind:p,inArray:function(f,l){return l?u.call(l,f):-1},isArray:E,isPlainObject:function(f){if("[object Object]"!==z.call(f)||f.nodeType)return!1;try{if(f.constructor&&!L.call(f.constructor.prototype,"isPrototypeOf"))return!1}catch(l){return!1}return!0},
clone:B,addListener:G,removeListener:M,hasClass:I,addClass:function(f,l){I(f,l)||(f.className+=" "+l)},removeClass:function(f,l){var a=J(l);f.className=f.className.replace(a,"")},isVisible:function(f){return!(0>=f.offsetWidth||0>=f.offsetHeight)},isThenable:function(f){var l;return f&&"function"==typeof(l=f.then)?l:!1},async:F,asyncError:function(f){F(function(){throw f;})},onReady:function(f){var l=!1,a=!0,b=window,d=b.document,F=d.documentElement,t=function(a){if("readystatechange"!=a.type||"complete"==
d.readyState)M("load"==a.type?b:d,a.type,t),!l&&(l=!0)&&f.call(b,a.type||a)},v=function(){try{F.doScroll("left")}catch(l){setTimeout(v,50);return}t("poll")};if("complete"==d.readyState)f.call(b,"lazy");else{if(d.createEventObject&&F.doScroll){try{a=!b.frameElement}catch(y){}a&&v()}G(d,"DOMContentLoaded",t);G(d,"readystatechange",t);G(b,"load",t)}},toFragment:m,toArray:function(a){for(var l=[],w=-1,b=a.length>>>0;++w!==b;l[w]=a[w]);return l},app:function(a,l){C||(C=MetaphorJs.view.Scope,A=MetaphorJs.view.Renderer);
l?l instanceof C||(l=new C(l)):l=new C;var w=new A(a,l);w.render();return w},filterArray:function(a,l,w){"object"!=typeof l&&(l={$:l});var b=[],d,F;d=-1;for(F=a.length;++d<F;)t(a[d],l,w)&&b.push(a[d]);return b}};window.MetaphorJs?g(window.MetaphorJs,p,!0):window.MetaphorJs=p})();
(function(){var k="undefined"!=typeof window?window:global,p={},q=function(c,g){if(p[c]||g)return p[c];var m=c.split("."),e,h=m.length,n,a=k;for(e=0;e<h;e++){n=m[e];if(!a[n])return null;a=a[n]}return a},c=function(c,g){var m;m=c.split(".");var e,h=m.pop();e=m.join(".");var n=m.length,a,b=k;if(p[e])m=[p[e],h];else{for(e=0;e<n;e++)a=m[e],b[a]||(b[a]={}),b=b[a];m=[b,h]}m[0][m[1]]=g;return p[c]=g},g=function(c,g){return p[c]=g};c("MetaphorJs.ns",{register:c,exists:function(c){return p[c]?!0:!1},get:q,
add:g,remove:function(c){delete p[c]}});MetaphorJs.r=c;MetaphorJs.g=q;MetaphorJs.add=g;"undefined"!=typeof module&&(module.exports=MetaphorJs.ns)})();
(function(){var k;if("undefined"!=typeof global)try{k=require("metaphorjs-namespace")}catch(p){k=global.MetaphorJs.ns}else k=window.MetaphorJs.ns;var q={}.undefined,c=Array.prototype.slice,g=function(a,b){return m(function(){},a,b)},r=function(a,b,y){return function(){var c=q,u=this.supr;this.supr=a.prototype[b]||function(){};try{c=y.apply(this,arguments)}catch(e){}this.supr=u;return c}},s=function(a,b,y){for(var c in b)b.hasOwnProperty(c)&&(a[c]="function"===typeof b[c]&&y.prototype&&"function"===
typeof y.prototype[c]?r(y,c,b[c]):b[c])},m=function(a,b,c){var e=function(){};e.prototype=a.prototype;e=new e;c=c||function(){this.initialize&&this.initialize.apply(this,arguments)};s(e,b,a);c.prototype=e;c.prototype.constructor=c;c.prototype.getClass=function(){return this.__proto__.constructor.__class};c.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};c.__instantiate=function(a){return function(){var b=function(){},d;b.prototype=a.prototype;b=new b;d=a.prototype.constructor.apply(b,
arguments);return"object"==typeof d?d:b}}(c);return c},e=function(a,b,c,e,u,h){null===a&&(a="");"function"==typeof a?(u=c,"string"==typeof b?(u=e,e=c):(e=b,c=a,b=null),a=null):"string"!=typeof a&&(u=b,e=a,a=c=b=null);"string"!=typeof b&&"function"!=typeof b&&(u=e,e=c,c=b,b=null);"function"!=typeof c&&(u=e,e=c,c=null);e=e||{};var n=b&&"string"==typeof b?k.get(b):b;if(b&&!n)throw Error(b+" not found");b=n?m(n,e,c):g(e,c);b.__isMetaphorClass=!0;b.__parent=n;b.__parentClass=n?n.__class:null;b.__class=
a;if(u)for(var r in u)u.hasOwnProperty(r)&&(b[r]=u[r]);a&&(h?k.add(a,b):k.register(a,b));u&&u.alias&&k.add(u.alias,b);return b},h=function(a,b,c,h,u){return e(a,b,c,h,u,!0)},n=function(a){var b=k.get(a),e=c.call(arguments,1);if(!b)throw Error(a+" not found");return b.__instantiate.apply(this,e)},a=function(a,b){var c="string"==typeof b?k.get(b):b;return c?a instanceof c:!1},b=function(a,b){var c=a,e=k.get;"string"!=typeof b&&(b=b.getClass?b.getClass():b.prototype.constructor.__class);for("string"==
typeof a&&(c=e(a));c;){if(c.prototype.constructor.__class==b)return!0;c&&(c=c.getParentClass?e(c.getParentClass()):c.__parent)}return!1};"undefined"!=typeof global?module.exports={define:e,d:e,defineCache:h,dc:h,create:n,c:n,is:a,isSubclass:b}:(MetaphorJs.define=MetaphorJs.d=e,MetaphorJs.defineCache=MetaphorJs.dc=h,MetaphorJs.create=MetaphorJs.c=n,MetaphorJs.is=a,MetaphorJs.isSubclass=MetaphorJs.iss=b)})();
(function(){var k="undefined"!=typeof window?window.setTimeout:global.setTimeout,p=function(a){var b;return!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof(b=a.then)?!1:b},q=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){a.apply(b,arguments)}},c=[],g=!1,r="undefined"!=typeof process?process.nextTick:function(a){k(a,0)},s=function(){g=!0;var a=c.shift();r(function(){a[0].apply(a[1],a[2]);c.length?s():g=!1},0)},m=function(a,b,d){d=d||[];c.push([a,
b,d]);g||s()},e=function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])},h=function(a,b){return function(d){try{b.resolve(a(d))}catch(c){b.reject(c)}}},n=function(a,b){if(a instanceof n)return a;if(!(this instanceof n))return new n(a,b);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(a)if(p(a))this.resolve(a);else if("function"==typeof a)try{a.call(b,q(this.resolve,this),q(this.reject,this))}catch(d){this.reject(d)}else throw"Cannot construct Promise with given value";};
e(n.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var d;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(d=
p(a)){a instanceof n?a.then(q(this._processResolveValue,this),q(this._processRejectReason,this)):(new n(d,a)).then(q(this._processResolveValue,this),q(this._processRejectReason,this));return}}catch(c){0==this._state&&this._doReject(c);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)m(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)m(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var d=new n,c=this._state;0==c||0!=this._wait?(a&&"function"==typeof a?this._fulfills.push([h(a,d),null]):this._fulfills.push([d.resolve,d]),b&&"function"==typeof b?this._rejects.push([h(b,d),null]):this._rejects.push([d.reject,d])):1==c?a&&"function"==typeof a?m(h(a,d),null,[this._value]):d.resolve(this._value):2==c&&(b&&"function"==typeof b?m(h(b,d),null,[this._reason]):d.reject(this._reason));return d},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=
this._dones,b;b=a.shift();)b[0].call(b[1]||null,this._value)},done:function(a,b){var d=this._state;1==d&&0==this._wait?a.call(b||null,this._value):0==d&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)b[0].call(b[1]||null,this._reason)},fail:function(a,b){var d=this._state;2==d&&0==this._wait?a.call(b||null,this._reason):0==d&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:q(this.then,
this),done:q(this.done,this),fail:q(this.fail,this),always:q(this.always,this)}},after:function(a){var b=this;if(p(a)){b._wait++;var d=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};"function"==typeof a.done?a.done(d):a.then(d)}return b}});e(n,{resolve:function(a){if(p(a)||"function"==typeof a)return new n(a);var b=new n;b.resolve(a);return b},reject:function(a){var b=new n;b.reject(a);return b},all:function(a){if(!a.length)return n.resolve(null);
var b=new n,d=a.length,c=[],e=d,h,u,g=function(a){c.push(a);e--;0==e&&b.resolve(c)};for(h=0;h<d;h++)u=a[h],u instanceof n?u.done(g).fail(b.reject,b):p(u)||"function"==typeof u?(new n(u)).done(g).fail(b.reject,b):g(u);return b},when:function(){return n.all(arguments)},allResolved:function(a){if(!a.length)return n.resolve(null);var b=new n,d=a.length,c=[],e=d,h,u,g=function(a){c.push(a);m()},m=function(){e--;0==e&&b.resolve(c)};for(h=0;h<d;h++)u=a[h],u instanceof n?u.done(g).fail(m):p(u)||"function"==
typeof u?(new n(u)).done(g).fail(m):g(u);return b},race:function(a){if(!a.length)return n.resolve(null);var b=new n,d=a.length,c,e;for(c=0;c<d&&(e=a[c],e instanceof n?e.done(b.resolve,b).fail(b.reject,b):p(e)||"function"==typeof e?(new n(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());c++);return b}});"undefined"==typeof global?(window.Promise||(window.Promise=n),window.MetaphorJs&&window.MetaphorJs.r("MetaphorJs.lib.Promise",n)):"undefined"!=typeof module&&(module.exports=n)})();
(function(){"undefined"==typeof window&&(global.window=global);if(window.Promise)k=window.Promise;else{var k;if("undefined"!=typeof global)try{k=require("metaphorjs-promise")}catch(p){global.Promise&&(k=global.Promise)}else window.MetaphorJs&&MetaphorJs.lib&&MetaphorJs.lib.Promise&&(k=MetaphorJs.lib.Promise)}var q=window.MetaphorJs&&MetaphorJs.nextUid?MetaphorJs.nextUid:function(){return Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10)},c=function(a,b){for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d])},g=Array.prototype.slice,r="undefined"!=typeof process?process.nextTick:function(a){window.setTimeout(a,0)},s=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){a.apply(b,arguments)}},m=function(){this.events={}};c(m.prototype,{createEvent:function(a,b){a=a.toLowerCase();var d=this.events;d[a]||(d[a]=new e(a,b));return d[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,d,c){a=a.toLowerCase();var h=this.events;h[a]||
(h[a]=new e(a));return h[a].on(b,d,c)},once:function(a,b,d,c){c=c||{};c.limit=1;return this.on(a,b,d,c)},un:function(a,b,d){a=a.toLowerCase();var c=this.events;c[a]&&c[a].un(b,d)},hasListener:function(a,b,d){a=a.toLowerCase();var c=this.events;return c[a]?c[a].hasListener(b,d):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},triggerAsync:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return[];a=b[a];return a.triggerAsync.apply(a,g.call(arguments,
1))},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,g.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;
b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners triggerAsync trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,e=-1,h=a.length;++e<h;c=a[e],b[c]=s(this[c],this));this.api=b}return this.api}});
var e=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=q();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=b||!1};c(e.prototype,{getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var e=this.uni,h=b||a;if(h[e]&&!c.allowDupes)return null;var g=++this.lid,u=c.first||!1;h[e]=g;a={fn:a,scope:b,uniScope:h,id:g,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,
prepend:c.prepend};u?this.listeners.unshift(a):this.listeners.push(a);this.map[g]=a;return g},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,e=this.uni,h=this.listeners,g;g=a==parseInt(a)?a:(b||a)[e];if(!g)return!1;for(var u=0,n=h.length;u<n;u++)if(h[u].id==g){c=u;delete h[u].uniScope[e];break}if(-1==c)return!1;h.splice(c,1);delete this.map[g];return!0},hasListener:function(a,b){var c=this.listeners,e;if(a){b=b||a;e=a==parseInt(a)?a:b[this.uni];if(!e)return!1;
for(var h=0,g=c.length;h<g;h++)if(c[h].id==e)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,e;c=0;for(e=a.length;c<e;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=g.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},triggerAsync:function(){if("undefined"==typeof k)throw Error("Promises are not defined");
var a=this,b=a.listeners,c=a.returnResult,e=g.call(arguments),h=[],n=[],u,m,s;if(a.suspended||0==b.length)return k.resolve(null);m=0;for(s=b.length;m<s;m++)h.push(b[m]);for(m=function(b){u=a._prepareArgs(b,e);return new k(function(c,d){r(function(){try{c(b.fn.apply(b.scope,u))}catch(e){d(e)}b.called++;b.called==b.limit&&a.un(b.id)},0)})};(b=h.shift())&&(!b||!a.map[b.id]||(b.count++,b.count<b.start||(n.push(m(b)),"first"!=c))););return"last"==c?[n.pop()]:n},trigger:function(){var a=this.listeners,
b=this.returnResult;if(this.suspended||0==a.length)return null;var c="all"==b?[]:null,e=[],h,g;if("first"==b)e.push(a[0]);else for(h=0,g=a.length;h<g;h++)e.push(a[h]);for(;a=e.shift();)if(a&&this.map[a.id]&&(a.count++,!(a.count<a.start))){h=a.fn.apply(a.scope,this._prepareArgs(a,arguments));a.called++;a.called==a.limit&&this.un(a.id);"all"==b&&c.push(h);if("first"==b)return h;"last"==b&&(c=h);if(!1==b&&!1===h)break}if(b)return c}});var h=window.MetaphorJs;if(h&&h.VERSION){var n=new m;c(MetaphorJs,
n.getApi())}h&&h.r?h.r("MetaphorJs.lib.Observable",m):(window.MetaphorJs=window.MetaphorJs||{},MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Observable=m);"undefined"!=typeof global&&(module.exports=m)})();
(function(){"undefined"==typeof window&&(global.window=global);var k;if("undefined"!=typeof global)try{k=require("metaphorjs-observable")}catch(p){global.Observable&&(k=global.Observable)}else window.MetaphorJs&&MetaphorJs.lib&&MetaphorJs.lib.Observable&&(k=MetaphorJs.lib.Observable);var q=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,c={},g=window.MetaphorJs&&MetaphorJs.nextUid?MetaphorJs.nextUid:function(){var a;a=Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10);return c[a]?
g():c[a]=a},r=Object.prototype.toString,s=function(a){return"[object Array]"===r.call(a)},m=function(a){return"[object Date]"===r.call(a)},e=function(a){return"[object RegExp]"===r.call(a)},h=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},n=function(a,b){if(h(a))throw Error("Cannot copy window object");if(b){if(a===b)throw Error("Objects are identical");if(s(a))for(var c=b.length=0;c<a.length;c++)b.push(n(a[c]));else{for(c in b)delete b[c];for(c in a)b[c]=n(a[c])}}else(b=a)&&
(s(a)?b=n(a,[]):m(a)?b=new Date(a.getTime()):e(a)?b=new RegExp(a.source):null!=a&&"object"===typeof a&&(b=n(a,{})));return b},a=function(b,c){if(b===c)return!0;if(null===b||null===c)return!1;if(b!==b&&c!==c)return!0;var d=typeof b,g;if(d==typeof c&&"object"==d)if(s(b)){if(!s(c))return!1;if((d=b.length)==c.length){for(g=0;g<d;g++)if(!a(b[g],c[g]))return!1;return!0}}else{if(m(b))return m(c)&&b.getTime()==c.getTime();if(e(b)&&e(c))return b.toString()==c.toString();if(h(b)||h(c)||s(c))return!1;d={};for(g in b)if(("$"!==
g.charAt(0)||"object"!=typeof b[g])&&"function"!==typeof b[g]){if(!a(b[g],c[g]))return!1;d[g]=!0}for(g in c)if(!d.hasOwnProperty(g)&&"$"!==g.charAt(0)&&void 0!==c[g]&&"function"!==typeof c[g])return!1;return!0}return!1},b=function(b,c){var d=b.length,e=c.length,t=Array(d+1),f=Array(d+1),l,w,D,h,g=0;if(d==e&&0==d)return{changes:0,distance:0,prescription:[]};for(l=0;l<=d;l++)t[l]=Array(e+1),f[l]=Array(e+1),t[l][0]=l,f[l][0]="D";for(l=0;l<=e;l++)t[0][l]=l,f[0][l]="I";for(l=1;l<=d;l++)for(w=1;w<=e;w++)D=
a(b[l-1],c[w-1])?0:1,t[l][w-1]<t[l-1][w]&&t[l][w-1]<t[l-1][w-1]+D?(t[l][w]=t[l][w-1]+1,f[l][w]="I"):t[l-1][w]<t[l-1][w-1]+D?(t[l][w]=t[l-1][w]+1,f[l][w]="D"):(t[l][w]=t[l-1][w-1]+D,f[l][w]=1==D?"R":"-");h=[];l=d;w=e;do D=f[l][w],h.push(D),"-"!=D&&g++,"R"==D||"-"==D?(l--,w--):"D"==D?l--:w--;while(0!=l||0!=w);return{changes:g/h.length,distance:t[d][e],prescription:h.reverse()}},d=window.MetaphorJs?MetaphorJs.trim:function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():
a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),v,y=window.MetaphorJs?MetaphorJs.ns.get:null,x=function(a,b,c,d,t){v||(v=new k);var f=g(),l;s(a)&&null===b?l="array":("string"!=typeof b&&(d=c,c=b,b=null,l="object"),"string"==typeof a&&(d=c,c=b,b=a,a=null),b&&a&&(l=a.hasOwnProperty(b)?"attr":"expr"),b&&!a&&(l="expr"));if(c)v.on(f,c,d||this,{append:[t],allowDupes:!0});this.code=b=this._processPipes(b,a);this.getterFn="expr"==l?B(b):null;this.id=f;this.type=l;
this.obj=a;this.itv=null;this.curr=this._getValue()};(function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(x.prototype,{code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,arraySlice:!1,pipes:null,_addPipe:function(a,b,c){var d=b.shift(),t=null,f=[],l;y&&(t=y("filter."+d,!0));t||(t=window[d]||c[d]);if("function"==typeof t){d=-1;for(l=b.length;++d<l;f.push(u(c,b[d],self.check,self)));a.push([t,b,f])}},_processPipes:function(a,b){for(var c=0,e=a.length,t=[],
f,l,w,D=!1,h=a;c<e;)if(-1!=(f=a.indexOf("|",c)))l=a.charAt(f-1),w=a.charAt(f+1),"|"!=l&&"'"!=l&&'"'!=l&&"|"!=w&&"'"!=w&&'"'!=w&&(D?(c=d(a.substring(c,f)).split(":"),this._addPipe(t,c,b)):(D=!0,h=d(a.substring(0,f)))),c=f+1;else{D&&(c=d(a.substr(c)).split(":"),this._addPipe(t,c,b));break}t.length&&(this.pipes=t);return h},_checkCode:function(){var a=this._getValue(),c=!1,d=this.curr;if(s(d)&&s(a))return c=b(d,a),c.changes?(this.curr=a.slice(),v.trigger(this.id,c,a,d),!0):!1;a!==d&&(this.curr=a,v.trigger(this.id,
a,d),c=!0);return c},_checkObject:function(){var b=this.obj,c=this.curr;return a(c,b)?!1:(this.curr=n(b),v.trigger(this.id,b,c),!0)},_checkArray:function(){var a=this.curr,c=this.obj,d=b(a,c);return d.changes?(this.curr=c.slice(),v.trigger(this.id,d,c,a),!0):!1},_getValue:function(){var a;switch(this.type){case "attr":a=this.obj[this.code];break;case "expr":try{a=this.getterFn(this.obj)}catch(b){if(window.MetaphorJs)MetaphorJs.asyncError(b);else throw b;}"undefined"==typeof a&&(a="");break;case "object":a=
n(this.obj);break;case "array":a=this.obj}s(a)&&(a=a.slice());var c=this.pipes;if(c){var d,t,f,l=c.length,w=this.obj,e,h;for(d=0;d<l;d++){f=c[d][1];t=[];e=-1;for(h=f.length;++e<h;t.push(J(f[e],w)));t.unshift(a);t.push(w);a=c[d][0].apply(null,t)}}return a},addListener:function(a,b,c){return v.on(this.id,a,b,c)},removeListener:function(a,b){return v.un(this.id,a,b)},getValue:function(){return this._getValue()},setValue:function(a){var b=this.type;if("attr"==b)this.obj[this.code]=a;else if("expr"==b)this.setterFn||
(this.setterFn=M(this.code)),this.setterFn(this.obj,a);else if("array"==b)this.obj=a;else throw"Cannot set value";},check:function(){switch(this.type){case "expr":case "attr":return this._checkCode();case "object":return this._checkObject();case "array":return this._checkArray()}return!1},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&
(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,b){var c=this.id;v.un(c,a,b);return v.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b,c,d,t,f;this.itv&&this.clearInterval();if(a)for(b=-1,c=a.length;++b<c;)for(f=a[b][2],d=-1,t=f.length;++d<t;)f[d].unsubscribeAndDestroy(this.check,this);this.pipes=this.obj=this.curr=null;v.destroyEvent(this.id);this.obj&&delete this.obj.$$watchers[this.code]}});var u=function(a,b,c,e,t){b=z(a,d(b));return a?(a.$$watchers||
(a.$$watchers={$checkAll:function(){var a,l=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?l++:"$"==a.charAt(0)&&this[a]instanceof x&&this[a].check()&&l++;return l},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof x)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].addListener(c,e,{append:[t],allowDupes:!0}):a.$$watchers[b]=new x(a,b,c,e,t),a.$$watchers[b]):new x(a,b,c,e,t)},z=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==
b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},L=Function,E={},B=function(a){return E[a]?E[a]:E[a]=new L("____","return ".concat(a.replace(q,"$1____.$3")))},G={},M=function(a){if(!G[a]){var b=a.replace(q,"$1____.$3");return G[a]=new L("____","$$$$",b.concat(" = $$$$"))}return G[a]},H={},J=function(a,b){return B(a)(b)},I=function(a){if("string"!=typeof a)return!1;a=a.substr(0,1);return!('"'==a||"'"==a||"."==a)};x.create=u;x.unsubscribeAndDestroy=function(a,b,c,e){b=d(b);(a=a.$$watchers)&&
a[b]&&a[b].unsubscribeAndDestroy(c,e)&&delete a[b]};x.normalizeExpr=z;x.prepareCode=function(a){return a.replace(q,"$1____.$3")};x.createGetter=B;x.createSetter=M;x.createFunc=function(a){return H[a]?H[a]:H[a]=new L("____",a.replace(q,"$1____.$3"))};x.eval=J;x.isExpression=function(a){var b=a.substr(0,1);return('"'==b||"'"==b)&&a.substr(a.length-1)==b||""+parseInt(a,10)===a?!1:!0};x.isNativeString=I;x.toExpression=function(a){return I(a)?"'"+a+"'":a};window.MetaphorJs&&MetaphorJs.r&&MetaphorJs.r("MetaphorJs.lib.Watchable",
x);"undefined"!=typeof global&&(module.exports=x)})();
(function(){var k,p;if("undefined"!=typeof global)try{k=require("metaphorjs-promise"),p=require("metaphorjs-observable")}catch(q){k=global.MetaphorJs.lib.Promise,p=global.MetaphorJs.lib.Observable}else k=window.MetaphorJs.lib.Promise,p=window.MetaphorJs.lib.Observable;var c=function(a,b,c){for(var f in b)!b.hasOwnProperty(f)||void 0!=typeof a[f]&&!1===c||(a[f]=b[f])},g=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){a.apply(b,arguments)}},r;"undefined"!=typeof window&&
(r=document.querySelectorAll||function(a){var b=document,c=b.documentElement.firstChild,f=b.createElement("STYLE");c.appendChild(f);b.__qsaels=[];f.sheet?f.sheet.insertRule(a+"{x:expression(document.__qsaels.push(this))}",0):f.styleSheet&&(f.styleSheet.cssText=a+"{x:expression(document.__qsaels.push(this))}");window.scrollBy(0,0);return b.__qsaels});var s=/#.*$/,m=/([?&])_=[^&]*/,e=/\?/,h=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,n=/^(?:GET|HEAD)$/i,a=0,b=function(a,b){setTimeout(function(){a.call(b)},
0)},d=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},v=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),y=function(a,b){var c,f;if(!a||"string"!==typeof a)return null;try{f=new DOMParser,c=f.parseFromString(a,b||"text/xml")}catch(d){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},x=function(a,
b,c){var f,d;if("string"==typeof a&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a));else if(M(a)&&c)for(f=0,d=a.length;f<d;f++)x(a[f],b,c+"["+f+"]");else if("object"==typeof a)for(f in a)a.hasOwnProperty(f)&&x(a[f],b,c?c+"["+f+"]":f)},u=function(a,b){a.replace(s,"");if(!1===b.cache){var c=(new Date).getTime();return m.test(a)?a.replace(m,"$1_="+c):a+(e.test(a)?"&":"?")+"_="+c}!b.data||window.FormData&&b.data instanceof window.FormData||("string"!=typeof b.data?(c=[],x(b.data,c,null),c=c.join("&").replace(/%20/g,
"+")):c=b.data,b.data=c,n.test(b.method)&&(a+=(e.test(a)?"&":"?")+b.data,b.data=null));return a},z={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},L={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,
replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},E={},B=new p,G=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},M=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&"[object Array]"==Object.prototype.toString.call(a)||!1},H=function(a,b,c){var f,d;if("object"!=typeof a&&"function"!=typeof a&&
c)f=document.createElement("input"),f.setAttribute("type","hidden"),f.setAttribute("name",c),f.setAttribute("value",a),b.appendChild(f);else if(M(a)&&c)for(f=0,d=a.length;f<d;f++)H(a[f],b,c+"["+f+"]");else if("object"==typeof a)for(f in a)a.hasOwnProperty(f)&&H(a[f],b,c?c+"["+f+"]":f)},J=function(a){for(var b,c,f="",d=0;d<a.elements.length;d++)if(b=a.elements[d],b.hasAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;f+=
"&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)f+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return f},I=function(){},F=function(a,b,c){var f=b?b.dataType:null;b=b?b.selector:null;if("string"!=typeof a)return a;c=c||"";if("xml"===f||!f&&0<=c.indexOf("xml"))return a=y(v(a)),b?r.call(a,b):a;if("html"===f)return a=y(a,"text/html"),b?r.call(a,b):a;if("fragment"==f){c=document.createDocumentFragment();f=document.createElement("div");
for(f.innerHTML=a;f.firstChild;)c.appendChild(f.firstChild);return c}if("json"===f||!f&&0<=c.indexOf("json"))return a=v(a),JSON.parse(a);("script"===f||!f&&0<=c.indexOf("javascript"))&&G(a);return a+""},C=function(a){var c=h.exec(("undefined"!=typeof window?window.location.href:"").toLowerCase())||[],d=h.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!d||d[1]===c[1]&&d[2]===c[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(c[3]||("http:"===c[1]?"80":"443")));c=new k;"iframe"!=a.transport||a.form?
a.form&&(this._form=a.form,"POST"!=a.method||"undefined"!=typeof window&&window.FormData||"iframe"==a.transport||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):J(a.form));a.url=u(a.url,a);d=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new f(a,c,this):new K(a,c,this):new t(a,c,this);this._deferred=c;this._transport=d;c.done(function(a){B.trigger("success",a)});c.fail(function(a){B.trigger("error",
a)});c.always(function(){B.trigger("end")});B.trigger("start");a.timeout&&(this._timeout=setTimeout(g(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===B.trigger("beforeSend",a,d)&&(this._promise=k.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,d)&&(this._promise=k.reject());this._promise||(b(d.send,d),a=c.promise(),a.abort=g(this.abort,this),c.always(this.destroy,this),this._promise=a)};c(C.prototype,{_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,
_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);H(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var b=this._opt,c=b.jsonpParam||"callback",f=b.jsonpCallback||"jsonp_"+
++a;b.url+=(e.test(b.url)?"&":"?")+c+"="+f;this._jsonpName=f;"undefined"!=typeof window&&(window[f]=g(this.jsonpCallback,this));"undefined"!=typeof global&&(global[f]=g(this.jsonpCallback,this));return f},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},processResponseData:function(a,b){var c=this._opt;a=F(a,c,b);B.hasListener("processResponse")&&(a=B.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,
a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred;if(this._opt.jsonp)if(a){try{G(a)}catch(f){c.reject(f)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else try{c.resolve(this.processResponseData(a,b))}catch(d){c.reject(d)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;
delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0);var A=function(a,b){b=b||{};a&&"string"!=typeof a?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";c(b,E,!1);c(b,L,!1);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||
"GET":"GET";return(new C(b)).promise()};A.setup=function(a){c(E,a,!0)};A.on=function(){B.on.apply(B,arguments)};A.un=function(){B.un.apply(B,arguments)};A.get=function(a,b){b=b||{};b.method="GET";return A(a,b)};A.post=function(a,b){b=b||{};b.method="POST";return A(a,b)};A.load=function(a,b,c){c=c||{};"string"!=typeof b&&(c=b);c.dataType="fragment";return A(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};A.loadScript=function(a){return A(a,{transport:"script"})};
A.submit=function(a,b){b=b||{};b.form=a;return A(null,b)};var K=function(a,b,c){var f;if(!(window.XMLHttpRequest&&(f=new XMLHttpRequest)||(f=new ActiveXObject("Msxml2.XMLHTTP"))||(f=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=f;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&d(f,"progress",g(a.progress,a.callbackScope));a.uploadProgress&&f.upload&&d(f.upload,"progress",g(a.uploadProgress,a.callbackScope));try{var t;if(a.xhrFields)for(t in a.xhrFields)f[t]=
a.xhrFields[t];a.data&&a.contentType&&f.setRequestHeader("Content-Type",a.contentType);f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.setRequestHeader("Accept",a.dataType&&z[a.dataType]?z[a.dataType]+", */*; q=0.01":z._default);for(t in a.headers)f.setRequestHeader(t,a.headers[t])}catch(e){}f.onreadystatechange=g(this.onReadyStateChange,this)};c(K.prototype,{_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=
I,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=I;var c;a:{try{c=!a.status&&"undefined"!=typeof location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(f){}c=!1}c?this._ajax.processResponse("string"==typeof a.responseText?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=I;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,
!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}},!0);var t=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};c(t.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);d(a,"load",g(this.onLoad,this));d(a,
"error",g(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}},!0);var f=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};c(f.prototype,{_opt:null,
_deferred:null,_ajax:null,_el:null,send:function(){var b=document.createElement("iframe"),c="frame-"+ ++a,f=this._opt.form;b.setAttribute("id",c);b.setAttribute("name",c);b.style.display="none";document.body.appendChild(b);f.setAttribute("action",this._opt.url);f.setAttribute("target",c);d(b,"load",g(this.onLoad,this));d(b,"error",g(this.onError,this));this._el=b;try{f.submit()}catch(t){this._deferred.reject(t)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||
a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}},!0);"undefined"!=typeof global?module.exports=A:window.MetaphorJs?MetaphorJs.ajax=A:window.MetaphorJs={ajax:A}})();
(function(){var k=[],p=!1,q=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,c=function(c,e,a){c.attachEvent?c.attachEvent("on"+e,a):c.addEventListener(e,a,!1)},g=!!history.pushState,r="onhashchange"in window,s=function(c){var e=location.protocol+"//"+location.hostname;location.port&&(e+=":"+location.port);c=c.replace(e,"");g||(c=encodeURIComponent(c));return c},m=function(){var c;g?c=location.pathname+location.search:(c=location.hash.substr(1))?("!"==
c.substr(0,1)&&(c=c.substr(1)),c=decodeURIComponent(c)):c=location.pathname+location.search;return c},e=function(){var c=m();if(k.length)for(var e=-1,a=k.length;++e<a;k[e].call(null,c));window.MetaphorJs&&MetaphorJs.triggerAsync("locationchange",c)};c(window,"load",function(){p=!0});history.initPushState=function(){if(g)history.origPushState=history.pushState,history.origReplaceState=history.replaceState,c(window,"popstate",e),history.pushState=function(a,b,c){history.origPushState(a,b,s(c));e()},
history.replaceState=function(a,b,c){history.origReplaceState(a,b,s(c));e()};else if(r)history.replaceState=history.pushState=function(a,b,c){a=s(c);location.hash=a?"!"+a:""},c(window,"hashchange",e);else{var h=null,m=!1;window.onIframeHistoryChange=function(a){m||(location.hash=a?"!"+a:"",e())};var a=function(a){var b=h.contentWindow.document;b.open();b.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');
b.close()};history.pushState=function(b,c,e){a(s(e))};history.replaceState=function(a,b,c){a=s(c);h.contentWindow.hashValue=a};var b=function(){h=document.createElement("iframe");h.src="about:blank";h.style.display="none";document.body.appendChild(h);m=!0;a(s(location.hash.substr(1)));m=!1};p?b():c(window,"load",b)}c(document.documentElement,"click",function(a){a=a||window.event;for(var b=a.target||a.srcElement,c;b&&"a"!=b.nodeName.toLowerCase();)b=b.parentNode;if(b){c=b.getAttribute("href");var e;
if(e=c&&"#"!=c.substr(0,1))c=c.match(q),e=c[1]&&location.protocol!=c[1]||c[2]&&location.hostname!=c[2]?!1:c[2]||c[3]?location.port!=c[3]?!1:!0:!0;if(e&&!b.getAttribute("target"))return history.pushState(null,null,b.getAttribute("href")),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}});history.initPushState=function(){}};window.MetaphorJs?(MetaphorJs.pushUrl=function(c){history.pushState(null,null,c)},MetaphorJs.replaceUrl=function(c){history.replaceState(null,null,
c)},MetaphorJs.currentUrl=function(){return m()}):history.onchange=function(c){k.push(c)}})();
(function(){var k=/\r/g,p=function(c){var g,r;if((g=q[c.type]||q[c.nodeName.toLowerCase()])&&"get"in g&&void 0!==(r=g.get(c,"value")))return r;r=c.value;return"string"===typeof r?r.replace(k,""):null==r?"":r},q={option:{get:function(c){var g=c.getAttribute("value");return null!=g?g:MetaphorJs.trim(c.innerText||c.textContent)}},select:{get:function(c){for(var g,k=c.options,s=c.selectedIndex,m=(c="select-one"===c.type||0>s)?null:[],e=c?s+1:k.length,h,n=0>s?e:c?s:0;n<e;n++)if(g=k[n],h=g.disabled||null!==
g.getAttribute("disabled")||k.parentNode.disabled,(g.selected||n===s)&&!h){g=p(g);if(c)return g;m.push(g)}return m},set:function(c,g){for(var k,s,m=c.options,e=MetaphorJs.toArray(g),h=m.length;h--;)if(s=m[h],s.selected=MetaphorJs.inArray(s.value,e))k=!0;k||(c.selectedIndex=-1);return e}}};q.radio=q.checkbox={set:function(c,g){if(MetaphorJs.isArray(g))return c.checked=0<=MetaphorJs.inArray(p(c),g)},get:function(c){return null===c.getAttribute("value")?"on":c.value}};MetaphorJs.getValue=p;MetaphorJs.setValue=
function(c,g){if(1===c.nodeType){null==g?g="":"number"===typeof g&&(g+="");var k=q[c.type]||q[c.nodeName.toLowerCase()];k&&"set"in k&&void 0!==k.set(this,g,"value")||(c.value=g)}}})();
(function(){var k=function(){return!1},p=function(){return!0},q=function(c){if(!(this instanceof q))return new q(c);for(var g in c)c.hasOwnProperty&&c.hasOwnProperty(g)||this[g]||(this[g]=c[g]);this.originalEvent=c;this.type=c.type;!this.target&&c.srcElement&&(this.target=c.srcElement);this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?p:k;this.timeStamp=c&&c.timeStamp||(new Date).getTime()};q.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,
preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=p;c&&c.preventDefault&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=p;c&&c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=p;c&&c.stopImmediatePropagation&&c.stopImmediatePropagation();this.stopPropagation()}};MetaphorJs.normalizeEvent=function(c){return new q(c)}})();
(function(){var k=MetaphorJs.lib.Observable,p=MetaphorJs.apply;MetaphorJs.d("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(q){q=q||{};this._observable=new k;p(this,this._observable.getApi());if(q.callback){var c=q.callback,g=c.scope||this;delete c.scope;for(var r in c)if(c.hasOwnProperty(r))this.on(r,c[r],g);delete q.callback}p(this,q,!0)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",
this);this._observable.destroy();delete this._observable}},onDestroy:MetaphorJs.emptyFn})})();
(function(){var k={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},p=["Moz","Webkit","ms","O","Khtml"],q="animationDelay",c="animationDuration",g="transitionDelay",r="transitionDuration",s=0,m=function(){var a=document.createElement("div"),b=!1,d,e,h;if(void 0!==a.style.animationName)b=!0;else for(e=0,h=p.length;e<h;e++)if(d=p[e],void 0!==a.style[d+"AnimationName"]){b=!0;q=d+"AnimationDelay";c=d+"AnimationDuration";g=d+"TransitionDelay";r=d+"TransitionDuration";
break}return b}(),e=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},h=MetaphorJs.g,n=MetaphorJs.lib.Promise,a=MetaphorJs.data,b=MetaphorJs.isThenable,d=function(a,b,c){var d=function(){(new Date).getTime()-b>=c?a():e(d)};e(d)},v=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},y=function(a,b,c){var d,e,g=b.length;for(d=0;d<g;d++)e=v(b[d])+v(c[d]),a=Math.max(e,a);return a},x=function E(h,m,n,k,s,v,p){var C=function(){var b=
a(h,"mjsAnimationQueue");return b&&b.length&&b[0].id==p?!1:(s.reject(h),!0)},A=function(){if(!C()){var b=n;n++;if(n==m.length){s.resolve(h);a(h,"mjsAnimationQueue").shift();var c=a(h,"mjsAnimationQueue");c.length?(c=c[0],x(c.el,c.stages,0,c.start,c.deferred,!1,c.id)):a(h,"mjsAnimationQueue",null)}else a(h,"mjsAnimationQueue")[0].position=n,E(h,m,n,null,s);z(h,m[b]);z(h,m[b]+"-active")}},K=function(){if(!C()){u(h,m[n]+"-active");var a,b=window.getComputedStyle?window.getComputedStyle(h):h.style;a=
0;var e=(b[c]||"").split(","),t=(b[q]||"").split(","),k=(b[r]||"").split(","),b=(b[g]||"").split(",");a=Math.max(a,y(a,e,t));(a=Math.max(a,y(a,k,b)))?d(A,(new Date).getTime(),a):A()}},t=function(){if(!C()){u(h,m[n]);var a;k&&(a=k(h),k=null);b(a)?a.done(K):e(K)}};v?e(t):t()},u=MetaphorJs.addClass,z=MetaphorJs.removeClass;MetaphorJs.stopAnimation=function(b){var c=a(b,"mjsAnimationQueue"),d;c&&c.length&&(d=c[0])&&d.stages&&(c=d.position,d=d.stages,z(b,d[c]),z(b,d[c]+"-active"));a(b,"mjsAnimationQueue",
null)};MetaphorJs.animate=function(c,d,e){var g=c.getAttribute("mjs-animate"),u=c.getAttribute("mjs-animate-js"),r=new n,z=a(c,"mjsAnimationQueue")||[],v=++s,q,p;d&&"string"==typeof d&&(d=k[d]);"string"==typeof g&&g&&"["==g.substr(0,1)&&(d=(new Function("","return "+g))(),g=null);z.push({el:c,stages:d,start:e,deferred:r,position:0,id:v});a(c,"mjsAnimationQueue",z);void 0!=g&&m&&d?1==z.length&&x(c,d,0,e,r,!0,v):(q=u||g)&&(p=h("animate."+q,!0))?p(c,e,r):e?(d=e(c),b(d)?d.done(function(){r.resolve(c)}):
r.resolve(c)):r.resolve(c);return r.promise()}})();
(function(){var k=MetaphorJs.lib.Observable,p=MetaphorJs.lib.Watchable,q=MetaphorJs.apply,c;c=MetaphorJs.d("MetaphorJs.view.Scope",{$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$checking:!1,$$destroyed:!1,initialize:function(c){this.$$observable=new k;q(this,c);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)},$new:function(){return new c({$parent:this,$root:this.$root})},
$on:function(c,k,s){return this.$$observable.on(c,k,s)},$un:function(c,k,s){return this.$$observable.un(c,k,s)},$watch:function(c,k,s){p.create(this,c,k,s,null)},$unwatch:function(c,k,s){p.unsubscribeAndDestroy(this,c,k,s)},$get:function(c){for(var k=this;k;){if(void 0!=k[c])return k[c];k=k.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$check:function(){var c;this.$$checking||(this.$$checking=!0,this.$$watchers&&(c=this.$$watchers.$checkAll()),this.$$checking=
!1,this.$$destroyed||this.$$observable.trigger("check",c))},$destroy:function(){this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;this.$$watchers&&(this.$$watchers.$destroyAll(),delete this.$$watchers);this.$$destroyed=!0}})})();
(function(){var k=navigator.userAgent.toLowerCase(),p=parseInt((/msie (\d+)/.exec(k)||[])[1],10),q=parseInt((/android (\d+)/.exec(k)||[])[1],10),c={};isNaN(p)&&(p=parseInt((/trident\/.*; rv:(\d+)/.exec(k)||[])[1],10));MetaphorJs.browser={android:q,hasEvent:function(g){if("input"==g&&9==p)return!1;if(void 0===c[g]){var k=document.createElement("div");c[g]="on"+g in k}return c[g]}}})();
(function(){var k=MetaphorJs.nextUid,p=MetaphorJs.view.Scope,q=MetaphorJs.lib.Watchable,c=MetaphorJs.lib.Observable,g=MetaphorJs.isThenable,r=MetaphorJs.toArray,s=MetaphorJs.getAttributeHandlers,m=null,e=MetaphorJs.g,h=q.create,n=q.unsubscribeAndDestroy,a,b="string"==typeof document.createTextNode("").textContent?"textContent":"nodeValue",d=function(a,b,c,d,e){var h=[];if(a&&!0!==a){if(a.nodeType){y(a,c,d,e);return}h=r(a)}h.length||(h=r(b.childNodes));a=-1;for(b=h.length>>>0;++a!==b;y(h[a],c,d,e));
},v=/^(script|template|mjs-template|style)$/i,y=function(a,b,c,e){var h;a.nodeName.match(v)||!1!==(h=b.call(c,a,e))&&(g(h)?h.done(function(h){!1!==h&&d(h,a,b,c,e)}):d(h,a,b,c,e))},x=new c;a=MetaphorJs.d("MetaphorJs.view.Renderer",{id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,_observable:null,initialize:function(a,b,c){this.id=k();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof p&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this);this.process()},
on:function(a,b,c){return x.on(a+"-"+this.id,b,c)},un:function(a,b,c){return x.un(a+"-"+this.id,b,c)},createChild:function(b){return new a(b,this.scope,this)},reset:function(){},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e;if(a.$breakRenderer)return this.createChild(c).render(),!1;a.$isolateScope?e=new p:a.$breakScope?b instanceof p?e=b.$new():(e={},e.$parent=b,e.$root=b.$root):e=b;return a.__isMetaphorClass?(b=new a(e,c,d,this),a.$stopRenderer||b.$stopRenderer?!1:b.$returnToRenderer):
a(e,c,d,this)},processNode:function(a,c){var d=a.nodeType,h=this.texts,g=this.scope,k;if(3==d)g={watchers:[],node:a,text:"",inx:k=h.length},this.processText(g,a[b]),0<g.watchers.length&&(h.push(g),c&&this.renderText(k));else if(1==d){m||(m=s());var n=a.attributes,v,r,q,p,d="tag."+a.tagName.toLowerCase();if(v=e(d,!0))if((p=this.runHandler(v,g,a))||!1===p)return p;v=0;for(r=m.length;v<r;v++)if(q=m[v].name,null!==(k=a.getAttribute(q))&&"undefined"!=typeof k&&(p=this.runHandler(m[v].handler,g,a,k),a.removeAttribute(q),
p||!1===p))return p;v=0;for(r=n.length;v<r;v++)e(d,!0)||(g={watchers:[],node:a,attr:n[v].name,text:"",inx:k=h.length},this.processText(g,n[v].value),0<g.watchers.length&&(h.push(g),c&&this.renderText(k)))}return!0},process:function(){y(this.el,this.processNode,this)},processText:function(a,b){for(var c=0,d=b.length,e,h,g=[];c<d;)if(-1!=(e=b.indexOf("{{",c))&&-1!=(h=b.indexOf("}}",e+2)))g.push(b.substring(c,e)),g.push(this.watcherMatch(a,b.substring(e+2,h))),c=h+2;else{c!==d&&g.push(b.substring(c));
break}return a.text=g.join("")},watcherMatch:function(a,b){var c=a.watchers;c.push({watcher:h(this.scope,b,this.onDataChange,this,a.inx)});return"---"+(c.length-1)+"---"},onDataChange:function(a,b,c){this.renderText(c)},render:function(){var a=this.texts.length,b;for(b=0;b<a;b++)this.renderText(b)},renderText:function(a){a=this.texts[a];var c=a.text,d=a.watchers,e=d.length,h=a.attr,g,k;for(g=0;g<e;g++)k=d[g].watcher.getLastResult(),c=c.replace("---"+g+"---",k);h?(a.node.setAttribute(h,c),"value"==
h&&(a.node.value=c),"class"==h&&(a.node.className=c)):a.node[b]=c},destroy:function(){var a=this.texts,b,c,d,e,h;if(!this.destroyed){this.destroyed=!0;c=0;for(d=a.length;c<d;c++)for(b=a[c].watchers,e=0,h=b.length;e<h;e++)n(this.scope,b[e].watcher.code,this.onDataChange,this);this.parent&&this.parent.un("destroy",this.destroy,this);x.trigger("destroy-"+this.id);this.parent=this.scope=this.el=this.texts=null}}},{eachNode:y});MetaphorJs.onReady(function(){var a=MetaphorJs.app;if(document.querySelectorAll)for(var b=
document.querySelectorAll("[mjs-app]"),c=-1,d=b.length;++c<d;a(b[c]));else y(document.documentElement,function(b){if(b.hasAttribute("mjs-app"))return a(b),!1})})})();
(function(){var k=window.MetaphorJs,p=k.data,q=k.toFragment,c=k.lib.Watchable,g=c.create,r=c.isExpression,s=c.eval,m=k.getTemplate,e=k.view.Renderer,h=k.clone,n=k.view.Scope,a=k.animate,b=k.lib.Promise,d=k.apply;k.define("MetaphorJs.view.Template",{_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,scope:null,node:null,tpl:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,initialize:function(a){d(this,a,!0);a=this.node;a.removeAttribute("mjs-include");
if(this.tpl){if(a.firstChild&&p(a,"mjs-transclude",q(a.childNodes)),r(this.tpl)&&!this.replace&&(this.ownRenderer=!0,this._watcher=g(this.scope,this.tpl,this.onChange,this)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();
this.scope instanceof n&&this.scope.$on("destroy",this.onScopeDestroy,this)},doRender:function(){this._renderer||(this._renderer=new e(this.node,this.scope),this._renderer.render())},startRendering:function(){var a=this.tpl;this.deferRendering&&(this.deferRendering=!1,this.initPromise?this.initPromise.done(a?this.applyTemplate:this.doRender,this):a?this.applyTemplate():this.doRender())},resolveTemplate:function(){var a=this,c=a._watcher?a._watcher.getLastResult():s(a.tpl,a.scope),d=new b;(new b(function(a,
b){a(m(c))})).done(function(b){a._fragment=b;d.resolve(!a.ownRenderer)}).fail(d.reject,d);return d},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(h(this._fragment),a):a.appendChild(h(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var c=this.node,d=new b;
this._initial?(this.doApplyTemplate(),d.resolve()):(a(c,"leave").done(this.doApplyTemplate,this).done(d.resolve,d),a(c,"enter"));this._initial=!1;return d},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),delete this._watcher);delete this.tpl}})})();
(function(){var k={},p=MetaphorJs.nextUid,q=MetaphorJs.emptyFn,c=MetaphorJs.ns.get,g=MetaphorJs.lib.Promise,r=MetaphorJs.view.Template,s=MetaphorJs.trim,m=MetaphorJs.lib.Watchable.toExpression;MetaphorJs.define("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",{id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,scope:null,template:null,tag:null,initialize:function(c){this.supr(c);c.as&&(this.scope[c.as]=this);this.node&&(this.id=this.node.getAttribute("id"))&&
(this.originalId=!0);this.id=this.id||"cmp-"+p();k[this.id]=this;this.initComponent.apply(this,arguments);this.node||this._createNode();var h=this.template;h&&h instanceof r||(this.template=h=new r({scope:this.scope,node:this.node,deferRendering:!0,ownRenderer:!0,tpl:m(s(h))}));if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(h.initPromise?h.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=
document.createElement(this.tag||"div")},_initElement:function(){var c=this.node;c.setAttribute("id",this.id);c.setAttribute("cmp-id",this.id);this.hidden&&(c.style.display="none")},render:function(){this.rendered||(this.renderTo&&this.renderTo.appendChild(this.node),this.hidden=!MetaphorJs.isVisible(this.node),this.rendered=!0,this.template.startRendering(),this.trigger("render",this),this.afterRender(),this.trigger("afterrender",this))},show:function(){this.hidden&&!1!==this.trigger("beforeshow",
this)&&(this.node.style.display="block",this.hidden=!1,this.onShow(),this.trigger("show",this))},hide:function(){this.hidden||!1===this.trigger("beforehide",this)||(this.node.style.display="none",this.hidden=!0,this.onHide(),this.trigger("hide",this))},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:q,afterRender:q,onShow:q,onHide:q,onParentRendererDestroy:function(){this.destroy()},
onDestroy:function(){this.template&&(this.template.destroy(),delete this.template);this.destroyEl?this.node.parentNode&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.scope.$destroy();delete this.scope;delete this.node;this.supr();delete k[this.id]}});MetaphorJs.getCmp=function(c){return k[c]||null};MetaphorJs.resolveComponent=function(e,h,k,a,b,d){var p="string"==typeof e?c(e):e,q,x=[];e=p.template||h.template;
d=d||[];if(p.resolve)for(q in p.resolve)(function(b){var c=new g;x.push(c.done(function(a){h[b]=a}));c.resolve(p.resolve[q](k,a))})(q);e&&(h.template=new r({scope:k,node:a,deferRendering:!0,ownRenderer:!0,tpl:m(s(e))}),x.push(h.template.initPromise));var u=x.length;u&&(a.style.visibility="hidden");d.unshift(h);return g.all(x).then(function(){u&&(a.style.visibility="visible");return p.__instantiate.apply(null,d)})}})();
(function(){var k=MetaphorJs.data,p=MetaphorJs.currentUrl,q=MetaphorJs.toFragment,c=MetaphorJs.animate,g=MetaphorJs.lib.Scope,r=MetaphorJs.apply,s=MetaphorJs.stopAnimation,m=MetaphorJs.resolveComponent;MetaphorJs.define("MetaphorJs.cmp.View",{route:null,node:null,scope:null,currentComponent:null,initialize:function(c){history.initPushState();r(this,c,!0);MetaphorJs.on("locationchange",this.onLocationChange,this);c=this.node;c.firstChild&&k(c,"mjs-transclude",q(c.childNodes));c.removeAttribute("mjs-view");
this.onLocationChange()},onLocationChange:function(){var c=p(),h=this.route,g,a,b,d,k;a=0;for(b=h.length;a<b;a++){d=h[a];if(k=c.match(d.reg)){this.changeComponent(d,k);return}d["default"]&&!g&&(g=d)}g?this.changeComponent(g,[]):this.clearComponent()},changeComponent:function(c,h){s(this.node);this.clearComponent();this.setComponent(c,h)},clearComponent:function(){var e=this,h=e.node;e.currentComponent&&c(h,"leave").done(function(){e.currentComponent.destroy();for(e.currentComponent=null;h.firstChild;)h.removeChild(h.firstChild)})},
setComponent:function(e,h){var k=this,a=k.node;c(a,"enter",function(){var b=h||[],c={destroyEl:!1,node:a,scope:e.isolateScope?new g:k.scope.$new()};e.as&&(c.as=e.as);e.template&&(c.template=e.template);b.shift();return m(e.cmp||"MetaphorJs.cmp.Component",c,c.scope,a,null,b).done(function(a){k.currentComponent=a})})}})})();
(function(){var k=MetaphorJs.view.Scope,p=MetaphorJs.trim,q=MetaphorJs.bind,c=MetaphorJs.define,g=MetaphorJs.ns.get,r=MetaphorJs.lib.Watchable,s=MetaphorJs.view.Renderer,m=MetaphorJs.data,e=MetaphorJs.toArray,h=MetaphorJs.toFragment,n=MetaphorJs.addListener,a=MetaphorJs.removeListener,b=MetaphorJs.normalizeEvent,d=MetaphorJs.registerAttributeHandler,v=MetaphorJs.registerTagHandler,y=MetaphorJs.async,x=r.create,u=r.createGetter,z=MetaphorJs.animate,L=MetaphorJs.addClass,E=MetaphorJs.removeClass,B=
MetaphorJs.hasClass,G=MetaphorJs.stopAnimation,M=MetaphorJs.isArray,H=MetaphorJs.view.Template,J,I=function(a,b){for(var c;a;){c=m(a,b);if(void 0!=c)return c;a=a.parentNode}};MetaphorJs.d("MetaphorJs.view.AttributeHandler",{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=p(c);this.node=b;this.expr=c;this.scope=a;this.watcher=x(a,c);this.watcher.addListener(this.onChange,this);this.onChange();a instanceof k&&a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){delete this.node;
delete this.scope;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)},onChange:function(){}});d("mjs-bind",1E3,c(null,"MetaphorJs.view.AttributeHandler",{isInput:!1,initialize:function(a,b,c){var d=b.tagName.toLowerCase();this.isInput="input"==d||"textarea"==d;this.supr(a,b,c)},onChange:function(){var a=this.watcher.getLastResult();this.isInput?this.node.value=a:this.node.textContent=a}}));d("mjs-bind-html",1E3,c(null,"MetaphorJs.view.AttributeHandler",{onChange:function(){this.node.innerHTML=
this.watcher.getLastResult()}}));d("mjs-model",1E3,c(null,"MetaphorJs.view.AttributeHandler",{inProg:!1,type:null,inputType:null,radio:null,listeners:null,initialize:function(a,b,c){var d;this.node=b;this.inputType=d=b.getAttribute("mjs-input-type")||b.type.toLowerCase();this.listeners=[];this.onRadioInputChangeDelegate=q(this.onRadioInputChange,this);this.onCheckboxInputChangeDelegate=q(this.onCheckboxInputChange,this);"radio"==d?this.initRadioInput():"checkbox"==d?this.initCheckboxInput():this.initTextInput();
this.supr(a,b,c)},onScopeDestroy:function(){var b=this.type,c=this.listeners,d=this.radio,e,h,g,k;e=0;for(h=c.length;e<h;e++)if("radio"==b)for(g=0,k=d.length;g<k;g++)a(d[g],c[e][0],c[e][1]);else a(this.node,c[e][0],c[e][1]);delete this.radio;this.supr()},initRadioInput:function(){var a,b,c;this.radio=a=e(document.querySelectorAll("input[name="+this.node.name+"]"));this.listeners.push(["click",this.onRadioInputChangeDelegate]);b=0;for(c=a.length;b<c;b++)n(a[b],"click",this.onRadioInputChangeDelegate)},
initCheckboxInput:function(){this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);n(this.node,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=MetaphorJs.browser,b=!1,c=this,d=c.node,e=c.listeners,h;if(!a.android){var g=function(){b=!0},k=function(){b=!1;m()};e.push(["compositionstart",g]);e.push(["compositionend",k]);n(d,"compositionstart",g);n(d,"compositionend",k)}var m=c.onTextInputChangeDelegate=function(){if(!b)c.onTextInputChange()};if(a.hasEvent("input"))e.push(["input",
m]),n(d,"input",m);else{var s=function(a){h||(h=window.setTimeout(function(){m(a);h=null},0))},g=function(a){a=a||window.event;var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||s(a)};e.push(["keydown",g]);n(d,"keydown",g);a.hasEvent("paste")&&(e.push(["paste",s]),e.push(["cut",s]),n(d,"paste",s),n(d,"cut",s))}e.push(["change",m]);n(d,"change",m)},onTextInputChange:function(){var a=this.node.value,b=this.scope;switch(this.inputType){case "number":a=parseInt(a,10)}this.watcher.setValue(a);this.inProg=
!0;b instanceof k?b.$root.$check():this.watcher.checkAll();this.inProg=!1},onCheckboxInputChange:function(){var a=this.node,b=this.scope;this.watcher.setValue(a.checked?a.getAttribute("value")||!0:!1);this.inProg=!0;b instanceof k?b.$root.$check():this.watcher.checkAll();this.inProg=!1},onRadioInputChange:function(a){a=a||window.event;a=b(a);var c=this.scope;this.watcher.setValue(a.target.value);this.inProg=!0;c instanceof k?c.$root.$check():this.watcher.checkAll();this.inProg=!1},onChange:function(){var a=
this.watcher.getLastResult(),b=this.inputType,c,d;if(!this.inProg)if("radio"==b)for(d=this.radio,b=0,c=d.length;b<c;b++){if(d[b].value==a){d[b].checked=!0;break}}else"checkbox"==b?(b=this.node,b.checked=!0===a||a==b.value):MetaphorJs.setValue(this.node,a)}}));d("mjs-show",500,c(null,"MetaphorJs.view.AttributeHandler",{initial:!0,initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,c=function(){b.display=a?"":"none"};this.initial?c():z(this.node,a?"show":"hide",
function(){a&&(b.display="")}).done(c)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));d("mjs-hide",500,c(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));d("mjs-if",500,c(null,"MetaphorJs.view.AttributeHandler",{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;
delete this.parentEl;this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},h=function(){c.removeChild(d)};b?d.parentNode||(a.initial?e():z(d,"enter",e)):d.parentNode&&(a.initial?h():z(d,"leave").done(h));a.initial=!1}}));d("mjs-each",100,c(null,"MetaphorJs.view.AttributeHandler",{model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,
initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.watcher=x(a,this.model);this.watcher.addListener(this.onChange,this);this.parentEl.removeChild(b);this.render(this.watcher.getValue())},onScopeDestroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.destroy();delete this.renderers;
delete this.tpl;delete this.prevEl;delete this.nextEl;delete this.parentEl;this.supr()},doUpdate:function(a,b){for(var c=this.renderers,d=b,e=c.length,h=e-1,g=!(d%2),k,m;d<e;d++)k=c[d],m=k.scope,m.$index=d,m.$first=0===d,m.$last=d===h,m.$even=g,m.$odd=!g,g=!g,k.renderer?m.$check():(k.renderer=new s(k.el,k.scope),k.renderer.render())},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,h=document.createDocumentFragment(),g,k,m;k=0;for(m=a.length;k<m;k++)g=c.cloneNode(!0),
h.appendChild(g),b.push(this.createItem(g,a,k));d.insertBefore(h,e);this.doUpdate(a,0)},createItem:function(a,b,c){var d=this.itemName,e=this.scope,e=e instanceof k?e.$new():{$parent:e,$root:e.$root};e[d]=b[c];return{el:a,scope:e}},onChange:function(a){var b=this,c=b.renderers;a=a.prescription;var d=b.tpl,e=0,h=b.parentEl,g=b.watcher.getValue(),m=null,n,s,p,q;s=0;for(p=a.length;s<p;s++)q=a[s],"-"==q?(c[e].scope.$index=e,e++):(null===m&&(m=0<s?s-1:0),"I"!=q&&c[e]&&(n=c[e],n.scope instanceof k&&n.scope.$destroy(),
n.renderer.destroy(),z(n.el,"leave").done(function(a){a.parentNode&&a.parentNode.removeChild(a)})),"D"==q?c.splice(e,1):(n=d.cloneNode(!0),z(n,"enter",function(a){return function(d){0<a?h.insertBefore(d,c[a-1].el.nextSibling):b.prevEl?h.insertBefore(d,b.prevEl.nextSibling):h.appendChild(d)}}(e)),"R"==q?c[s]=b.createItem(n,g,e):"I"==q&&(s<c.length?c.splice(s,0,b.createItem(n,g,e)):c.push(b.createItem(n,g,e))),e++));b.doUpdate(g,m)},parseExpr:function(a){a=a.split(" ");var b,c,d,e,h;b=0;for(c=a.length;b<
c;b++)if(h=a[b],""!=h&&"in"!=h)if(e){d=a.slice(b).join(" ");break}else e=h;this.model=d;this.itemName=e||"item"}},{$stopRenderer:!0}));d("mjs-each-in-store",100,c(null,"attr.mjs-each",{store:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each-in-store");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.store=a=u(this.model)(a);this.parentEl.removeChild(b);
this.initWatcher();this.render(this.watcher.getValue());y(this.bindStore,this,[a,"on"])},onScopeDestroy:function(){this.bindStore(this.store,"un");delete this.store;this.supr()},initWatcher:function(){this.watcher=x(this.store,".items",null);this.watcher.addListener(this.onChange,this)},resetWatcher:function(){this.watcher.setValue(this.store.items)},bindStore:function(a,b){a[b]("load",this.onStoreUpdate,this);a[b]("update",this.onStoreUpdate,this);a[b]("add",this.onStoreUpdate,this);a[b]("remove",
this.onStoreUpdate,this);a[b]("replace",this.onStoreUpdate,this);a[b]("filter",this.onStoreFilter,this);a[b]("clearfilter",this.onStoreFilter,this);a[b]("clear",this.onStoreClear,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},onStoreFilter:function(){this.resetWatcher();this.onStoreUpdate()},onStoreClear:function(){this.resetWatcher();this.onStoreUpdate()},onStoreDestroy:function(){this.onStoreClear();this.watcher.unsubscribeAndDestroy(this.onChange,
this);delete this.watcher}},{$stopRenderer:!0}));d("mjs-include",900,function(a,b,c,d){a=new H({scope:a,node:b,tpl:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});v("mjs-include",900,function(a,b,c,d){return(new H({scope:a,node:b,tpl:b.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});d("mjs-transclude",1E3,function(a,b){var c=I(b,"mjs-transclude");if(c){b.firstChild&&m(b,"mjs-transclude",h(b.childNodes));var d=b.parentNode,g=b.nextSibling,c=MetaphorJs.clone(c),k=e(c.childNodes);
d.removeChild(b);d.insertBefore(c,g);return k}});v("mjs-transclude",900,function(a,b){var c=I(b,"mjs-transclude");if(c){b.firstChild&&m(b,"mjs-transclude",h(b.childNodes));var d=b.parentNode,g=b.nextSibling,c=MetaphorJs.clone(c),k=e(c.childNodes);d.removeChild(b);d.insertBefore(c,g);return k}});var F=function(a,b,c,d){if(null!==c){if(c==B(a,b))return;c=!c}else c=B(a,b);c?d?z(a,[b+"-remove"]).done(function(){E(a,b)}):E(a,b):d?z(a,[b+"-add"]).done(function(){L(a,b)}):L(a,b)};d("mjs-class",1E3,c(null,
"MetaphorJs.view.AttributeHandler",{initial:!0,onChange:function(){var a=this.node,b=this.watcher.getLastResult(),c;G(a);if("string"==typeof b)F(a,b,null,!this.initial);else if(M(b)){var d;c=-1;for(d=b.length;++c<d;F(a,b[c],!0,!this.initial));}else for(c in b)F(a,c,b[c]?!0:!1,!this.initial);this.initial=!1}}));var v="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),C,A=r.createFunc,r=0;for(C=
v.length;r<C;r++)(function(a){var c=a;"enter"==c&&(c="keyup");d("mjs-"+a,1E3,function(d,e,h){var g=A(h);n(e,c,function(c){c=c||window.event;c=b(c);if("enter"==a&&13!=c.keyCode)return null;d.$event=c;try{g(d)}catch(e){MetaphorJs.asyncError(e)}delete d.$event;d instanceof k?d.$root.$check():d.$$watchers&&d.$$watchers.$checkAll();c.preventDefault();return!1})})})(v[r]);v="selected checked disabled readonly required open".split(" ");r=0;for(C=v.length;r<C;r++)(function(a){d("mjs-"+a,1E3,c(null,"MetaphorJs.view.AttributeHandler",
{onChange:function(){this.watcher.getLastResult()?this.node.setAttribute(a,!0):this.node.removeAttribute(a)}}))})(v[r]);v=function(a,b,c,d){J||(J=MetaphorJs.resolveComponent);var e,h,g,k,m;b.removeAttribute("mjs-cmp");c=c.split(" ");g=0;for(k=c.length;g<k;g++)m=c[g],""!=m&&"as"!=m&&(e?h=m:e=m);J(e,{scope:a,node:b,as:h,parentRenderer:d},a,b,d);return!1};v.$breakScope=!0;d("mjs-cmp",200,v);var K=MetaphorJs.getCmp;d("mjs-cmp-prop",200,function(a,b,c){a=b.parentNode;for(var d;a;){if(d=a.getAttribute("cmp-id")){(a=
K(d))&&(a[c]=b);break}a=a.parentNode}});d("mjs-view",200,function(a,b,c){b.removeAttribute("mjs-view");var d=g(c);if(d)new d({scope:a,node:b});else throw"View '"+c+"' not found";return!1});d("mjs-init",150,function(a,b,c){b.removeAttribute("mjs-init");A(c)(a)})})();
(function(){var k=MetaphorJs.add,p=MetaphorJs.numberFormats,q=MetaphorJs.dateFormats;k("filter.toUpper",function(c){return c.toUpperCase()});k("filter.toLower",function(c){return c.toLowerCase()});k("filter.limitTo",function(c,g){var e=typeof c;if(!MetaphorJs.isArray(c)&&"string"!=e)return c;g=Infinity===Math.abs(Number(g))?Number(g):parseInt(g,10);if("string"==e)return g?0<=g?c.slice(0,g):c.slice(g,c.length):"";var e=[],h,k;g>c.length?g=c.length:g<-c.length&&(g=-c.length);0<g?(h=0,k=g):(h=c.length+
g,k=c.length);for(;h<k;h++)e.push(c[h]);return e});k("filter.ucfirst",function(c){return c.substr(0,1).toUpperCase()+c.substr(1)});var c=MetaphorJs.numberFormats;k("filter.numeral",function(g,k){k=c[k]||k;k=p[k]||k;return numeral(g).format(k)});var g=MetaphorJs.dateFormats;k("filter.moment",function(c,k){k=g[k]||k;k=q[k]||k;return moment(c).format(k)});var r=MetaphorJs.filterArray;k("filter.filter",function(c,g,e,h){e&&!h&&(e=null);return r(c,g,e)});k("filter.sortBy",function(c,g,e,h){e&&!h&&(e="asc");
c=c.slice();c.sort(function(c,a){var b=typeof c;return b!=typeof a?0:"object"==b?c[g]>a[g]?1:c[g]<a[g]?-1:0:c>a?1:c<a?-1:0});return"desc"==e?c.reverse():c})})();
