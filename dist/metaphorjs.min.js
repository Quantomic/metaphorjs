(function(){window.MetaphorJs={lib:{}};var S=Array.prototype.slice,ha=function(m){return"function"===typeof m};(function(){var m="undefined"!=typeof window?window:global,a={};MetaphorJs.ns={register:function(b,c){var d;d=b.split(".");var e,g=d.pop();e=d.join(".");var f=d.length,k,h=m;if(a[e])d=[a[e],g];else{for(e=0;e<f;e++)k=d[e],h[k]||(h[k]={}),h=h[k];d=[h,g]}d[0][d[1]]=c;return a[b]=c},exists:function(b){return a[b]?!0:!1},get:function(b,c){if(a[b]||c)return a[b];var d=b.split("."),e,g=d.length,
f,k=m;for(e=0;e<g;e++){f=d[e];if(!k[f])return null;k=k[f]}k&&(a[b]=k);return k},add:function(b,c){return a[b]=c},remove:function(b){delete a[b]}}})();(function(){var m=m||MetaphorJs.ns,a=function(a,b){return d(function(){},a,b)},b=function(a,d,b){return function(){var c=void 0,e=this.supr;this.supr=a.prototype[d]||function(){};try{c=b.apply(this,arguments)}catch(v){}this.supr=e;return c}},c=function(a,d,c){for(var e in d)d.hasOwnProperty(e)&&(a[e]=ha(d[e])&&c.prototype&&ha(c.prototype[e])?b(c,e,d[e]):
d[e])},d=function(a,d,b){var e=function(){};e.prototype=a.prototype;e=new e;b=b||function(){this.initialize&&this.initialize.apply(this,arguments)};c(e,d,a);b.prototype=e;b.prototype.constructor=b;b.prototype.getClass=function(){return this.__proto__.constructor.__class};b.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};b.__instantiate=function(a){return function(){var d=function(){},b;d.prototype=a.prototype;d=new d;b=a.prototype.constructor.apply(d,arguments);
return"object"==typeof b?b:d}}(b);return b},e=function(b,c,e,h,l,v){null===b&&(b="");"function"==typeof b?(l=e,"string"==typeof c?(l=h,h=e):(h=c,e=b,c=null),b=null):"string"!=typeof b&&(l=c,h=b,b=e=c=null);"string"!=typeof c&&"function"!=typeof c&&(l=h,h=e,e=c,c=null);"function"!=typeof e&&(l=h,h=e,e=null);h=h||{};var E=c&&"string"==typeof c?m.get(c):c;if(c&&!E)throw Error(c+" not found");c=E?d(E,h,e):a(h,e);c.__isMetaphorClass=!0;c.__parent=E;c.__parentClass=E?E.__class:null;c.__class=b;if(l)for(var D in l)l.hasOwnProperty(D)&&
(c[D]=l[D]);b&&(v?m.add(b,c):m.register(b,c));l&&l.alias&&m.add(l.alias,c);return c};MetaphorJs.define=e;MetaphorJs.defineCache=function(b,a,d,c,l){return e(b,a,d,c,l,!0)};MetaphorJs.factory=function(b){var a=m.get(b),d=S.call(arguments,1);if(!a)throw Error(b+" not found");return a.__instantiate.apply(this,d)};MetaphorJs.isInstanceOf=function(b,a){var d="string"==typeof a?m.get(a):a;return d?b instanceof d:!1};MetaphorJs.isSubclassOf=function(a,b){var d=a,c=m.get;"string"!=typeof b&&(b=b.getClass?
b.getClass():b.prototype.constructor.__class);for("string"==typeof a&&(d=c(a));d;){if(d.prototype.constructor.__class==b)return!0;d&&(d=d.getParentClass?c(d.getParentClass()):d.__parent)}return!1}})();var O=MetaphorJs.define,m=MetaphorJs.bind=Function.prototype.bind?function(m,a){return m.bind(a)}:function(m,a){return function(){return m.apply(a,arguments)}},ia=MetaphorJs.isPlainObject=function(m){return!(!m||m.constructor!==Object)},T=MetaphorJs.extend=function a(){var b=!1,c=!1,d=S.call(arguments),
e=d.shift(),g,f,k;"boolean"==typeof d[d.length-1]&&(b=d.pop());"boolean"==typeof d[d.length-1]&&(c=b,b=d.pop());for(;d.length;)if(g=d.shift())for(f in g)if(g.hasOwnProperty(f)&&"undefined"!=typeof(k=g[f]))if(c)if(e[f]&&ia(e[f])&&ia(k))a(e[f],k,b,c);else{if(!0===b||"undefined"==typeof e[f]||null===e[f])ia(k)?(e[f]={},a(e[f],k,b,!0)):e[f]=k}else if(!0===b||"undefined"==typeof e[f]||null===e[f])e[f]=k;return e},I=MetaphorJs.emptyFn=function(){},Y=MetaphorJs.toFragment=function(a){var b=document.createDocumentFragment();
if("string"==typeof a){var c=document.createElement("div");c.innerHTML=a;a=c.childNodes}if(a.nodeType)b.appendChild(a);else for(var c=-1,d=a.length>>>0;++c!==d;b.appendChild(a[0]));return b},U=MetaphorJs.nextUid=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),K=MetaphorJs.data=function(){var a={};return function(b,
c,d){b=b._mjsId||(b._mjsId=U());var e=a[b];return"undefined"!=typeof d?(e||(e=a[b]={}),e[c]=d):e?e[c]:void 0}}(),oa=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),pa=MetaphorJs.hasClass=function(a,b){return b?oa("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},da=MetaphorJs.addClass=function(a,b){b&&!pa(a,b)&&(a.className+=" "+b)},W=MetaphorJs.removeClass=function(a,b){b&&(a.className=a.className.replace(oa("(?:^|\\s)"+b+"(?!\\S)"),""))},L=MetaphorJs.ns.get,qa=Object.prototype.toString,
u=MetaphorJs.isArray=function(a){return!(!a||"object"!=typeof a||"number"!=typeof a.length||"[object Array]"!=qa.call(a))},ja=MetaphorJs.clone=function(a){var b,c,d;if(u(a)){d=[];b=0;for(c=a.length;b<c;b++)d.push(ja(a[b]));return d}if(a)switch(a.nodeType){case 1:return a.cloneNode(!0);case 3:return document.createTextNode(a.innerText||a.textContent);case 11:return a.cloneNode(!0)}return null},Ba=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",
e="transitionDuration",g=null;(function(){var g=document.createElement("div"),k=!1,h,l,v;if(void 0!==g.style.animationName)k=!0;else for(l=0,v=a.length;l<v;l++)if(h=a[l],void 0!==g.style[h+"AnimationName"]){k=!0;b=h+"AnimationDelay";c=h+"AnimationDuration";d=h+"TransitionDelay";e=h+"TransitionDuration";break}return k})()&&(g={animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:e});return function(){return g}}(),Na=MetaphorJs.getAnimationDuration=function(){var a=function(b){if(!b)return 0;
var a=parseFloat(b);-1==b.indexOf("ms")&&(a*=1E3);return a},b=function(b,d,c){var e,g,f=d.length;for(e=0;e<f;e++)g=a(d[e])+a(c[e]),b=Math.max(g,b);return b},c=Ba(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,g=c?c.transitionDuration:null,f=c?c.transitionDelay:null;return function(a){if(!c)return 0;var h=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var l=(h[d]||"").split(","),v=(h[e]||"").split(","),E=(h[g]||"").split(","),h=(h[f]||"").split(",");a=Math.max(a,b(a,
l,v));return a=Math.max(a,b(a,E,h))}}(),F=MetaphorJs.isThenable=function(a){var b;return!a||"object"!=typeof a&&"function"!=typeof a?!1:"function"==typeof(b=a.then)?b:!1};(function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var e=a.shift();c(function(){e[0].apply(e[1],e[2]);a.length?d():b=!1},0)},e=function(c,e,g){g=g||[];a.push([c,e,g]);b||d()},g=function(a,b){return function(d){try{b.resolve(a(d))}catch(c){b.reject(c)}}},f=function(a,
b){if(a instanceof f)return a;if(!(this instanceof f))return new f(a,b);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if("undefined"!=typeof a)if(F(a)||"function"!=typeof a)this.resolve(a);else try{a.call(b,m(this.resolve,this),m(this.reject,this))}catch(d){this.reject(d)}};f.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},
isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var d;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(d=F(a)){a instanceof f?a.then(m(this._processResolveValue,this),m(this._processRejectReason,this)):(new f(d,a)).then(m(this._processResolveValue,this),m(this._processRejectReason,this));return}}catch(c){0==this._state&&
this._doReject(c);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=
this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var d=new f,c=this._state;0==c||0!=this._wait?(a&&"function"==typeof a?this._fulfills.push([g(a,d),null]):this._fulfills.push([d.resolve,
d]),b&&"function"==typeof b?this._rejects.push([g(b,d),null]):this._rejects.push([d.reject,d])):1==c?a&&"function"==typeof a?e(g(a,d),null,[this._value]):d.resolve(this._value):2==c&&(b&&"function"==typeof b?e(g(b,d),null,[this._reason]):d.reject(this._reason));return d},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)b[0].call(b[1]||null,this._value)},done:function(a,b){var d=this._state;1==d&&0==this._wait?a.call(b||null,this._value):0==d&&this._dones.push([a,
b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)b[0].call(b[1]||null,this._reason)},fail:function(a,b){var d=this._state;2==d&&0==this._wait?a.call(b||null,this._reason):0==d&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:m(this.then,this),done:m(this.done,this),fail:m(this.fail,this),always:m(this.always,this)}},after:function(a){var b=this;if(F(a)){b._wait++;var d=function(){b._wait--;0==
b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};"function"==typeof a.done?a.done(d):a.then(d)}return b}};f.resolve=function(a){return new f(a)};f.reject=function(a){var b=new f;b.reject(a);return b};f.all=function(a){if(!a.length)return f.resolve(null);var b=new f,d=a.length,c=Array(d),e=d,g,p,C=function(a,d){c[d]=a;e--;0==e&&b.resolve(c)};for(g=0;g<d;g++)(function(d){p=a[g];p instanceof f?p.done(function(a){C(a,d)}).fail(b.reject,b):F(p)||"function"==typeof p?
(new f(p)).done(function(a){C(a,d)}).fail(b.reject,b):C(p,d)})(g);return b};f.when=function(){return f.all(arguments)};f.allResolved=function(a){if(!a.length)return f.resolve(null);var b=new f,d=a.length,c=[],e=d,g,p,C=function(a){c.push(a);G()},G=function(){e--;0==e&&b.resolve(c)};for(g=0;g<d;g++)p=a[g],p instanceof f?p.done(C).fail(G):F(p)||"function"==typeof p?(new f(p)).done(C).fail(G):C(p);return b};f.race=function(a){if(!a.length)return f.resolve(null);var b=new f,d=a.length,c,e;for(c=0;c<d&&
(e=a[c],e instanceof f?e.done(b.resolve,b).fail(b.reject,b):F(e)||"function"==typeof e?(new f(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());c++);return b};MetaphorJs.lib.Promise=f})();var A=MetaphorJs.lib.Promise,H=MetaphorJs.animate=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=!!Ba(),d=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},e=function(a,b,c){var e=
function(){(new Date).getTime()-b>=c?a():d(e)};d(e)},g=function h(a,b,c,f,p,C,G){var q=function(){var b=K(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==G?!1:(p.reject(a),!0)},m=function(){if(!q()){var d=c;c++;if(c==b.length){p.resolve(a);K(a,"mjsAnimationQueue").shift();var e=K(a,"mjsAnimationQueue");e.length?(e=e[0],g(e.el,e.stages,0,e.start,e.deferred,!1,e.id)):K(a,"mjsAnimationQueue",null)}else K(a,"mjsAnimationQueue")[0].position=c,h(a,b,c,null,p);W(a,b[d]);W(a,b[d]+"-active")}},r=function(){if(!q()){da(a,
b[c]+"-active");var d=Na(a);d?e(m,(new Date).getTime(),d):m()}},y=function(){if(!q()){da(a,b[c]);var e;f&&(e=f(a),f=null);F(e)?e.done(r):d(r)}};C?d(y):y()},f=function(d,e,f,E){var D=new A,p=K(d,"mjsAnimationQueue")||[],C=++b,G=d.getAttribute("mjs-animate"),q,m,r,y,X,ka,t;e=e||G;E&&null===G&&(e=null);if(e){"string"==typeof e?"["==e.substr(0,1)?q=(new Function("","return "+e))():(q=a[e],e=L&&L("animate."+e,!0)):"function"==typeof e?m=e:u(e)&&("string"==typeof e[0]?q=e:(r=e[0],y=e[1]));e&&e.constructor===
Object&&(q=e.stages,m=e.fn,r=e.before,y=e.after,X=e.options?T({},e.options):{},ka=e.context||null,t=e.duration||null,f=f||X.start);if(c&&q)return p.push({el:d,stages:q,start:f,deferred:D,position:0,id:C}),K(d,"mjsAnimationQueue",p),1==p.length&&g(d,q,0,f,D,!0,C),D;X=X||{};f&&(X.start=function(){f(d)});X.complete=function(){D.resolve(d)};t&&(X.duration=t);if(m&&"function"==typeof m)return r&&T(d.style,r,!0,!1),f&&f(d),K(d,"mjsAnimationQueue",m.call(ka,d,function(){D.resolve(d)})),D;if(window.jQuery){e=
$(d);r&&e.css(r);K(d,"mjsAnimationQueue","stop");if(m&&"string"==typeof m)return e[m](X),D;if(y)return e.animate(y,X),D}}f?(m=f(d),F(m)?m.done(function(){D.resolve(d)}):D.resolve(d)):D.resolve(d);return D};f.addAnimationType=function(b,d){a[b]=d};return f}(),P=MetaphorJs.trim=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),ra=function(a){return"[object Date]"===qa.call(a)},
sa=function(a){return"[object RegExp]"===qa.call(a)},ta=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},Oa=MetaphorJs.async=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)};(function(){var a=function(){this.events={}};a.prototype={createEvent:function(a,c){a=a.toLowerCase();var g=this.events;g[a]||(g[a]=new b(a,c));return g[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,c,g,f){a=a.toLowerCase();var k=this.events;k[a]||(k[a]=new b(a));
return k[a].on(c,g,f)},once:function(a,b,c,f){f=f||{};f.limit=1;return this.on(a,b,c,f)},un:function(a,b,c){a=a.toLowerCase();var f=this.events;f[a]&&f[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var f=this.events;return f[a]?f[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},triggerAsync:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return[];a=b[a];return a.triggerAsync.apply(a,S.call(arguments,1))},trigger:function(){var a=
arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,S.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),
b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners triggerAsync trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,f=-1,k=a.length;++f<k;c=a[f],b[c]=m(this[c],this));this.api=b}return this.api}};var b=function(a,b){this.name=
a;this.listeners=[];this.map={};this.hash=U();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=b||!1};b.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var f=this.uni,k=b||a;if(k[f]&&!c.allowDupes)return null;var h=++this.lid,l=c.first||!1;k[f]=h;a={fn:a,scope:b,uniScope:k,id:h,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};l?this.listeners.unshift(a):
this.listeners.push(a);this.map[h]=a;return h},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,f=this.uni,k=this.listeners,h;h=a==parseInt(a)?a:(b||a)[f];if(!h)return!1;for(var l=0,v=k.length;l<v;l++)if(k[l].id==h){c=l;delete k[l].uniScope[f];break}if(-1==c)return!1;k.splice(c,1);delete this.map[h];return!0},hasListener:function(a,b){var c=this.listeners,f;if(a){f="function"!=typeof a?a:(b||a)[this.uni];if(!f)return!1;for(var k=0,h=c.length;k<h;k++)if(c[k].id==
f)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,f;c=0;for(f=a.length;c<f;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=S.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},triggerAsync:function(){if("undefined"==typeof A)throw Error("Promises are not defined");var a=
this,b=a.listeners,c=a.returnResult,f=S.call(arguments),k=[],h=[],l,v,E;if(a.suspended||0==b.length)return A.resolve(null);v=0;for(E=b.length;v<E;v++)k.push(b[v]);for(v=function(b){l=a._prepareArgs(b,f);return new A(function(c,e){Oa(function(){try{c(b.fn.apply(b.scope,l))}catch(g){e(g)}b.called++;b.called==b.limit&&a.un(b.id)},0)})};(b=k.shift())&&(!b||!a.map[b.id]||(b.count++,b.count<b.start||(h.push(v(b)),"first"!=c))););return"last"==c?[h.pop()]:h},trigger:function(){var a=this.listeners,b=this.returnResult;
if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,f,k,a="first"==b?[a[0]]:S.call(a);f=a.shift();)if(f&&this.map[f.id]&&(f.count++,!(f.count<f.start))){k=f.fn.apply(f.scope,this._prepareArgs(f,arguments));f.called++;f.called==f.limit&&this.un(f.id);"all"==b&&c.push(k);if("first"==b)return k;"last"==b&&(c=k);if(!1==b&&!1===k)break}if(b)return c}};var c=new a;T(MetaphorJs,c.getApi(),!0,!1);MetaphorJs.lib.Observable=a})();var Z=MetaphorJs.lib.Observable;(function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,
b=function(a){if("string"!=typeof a)return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},c=function(a,b){if(ta(a))throw Error("Cannot copy window object");if(b){if(a===b)throw Error("Objects are identical");if(u(a))for(var d=b.length=0;d<a.length;d++)b.push(c(a[d]));else{for(d in b)delete b[d];for(d in a)b[d]=c(a[d])}}else(b=a)&&(u(a)?b=c(a,[]):ra(a)?b=new Date(a.getTime()):sa(a)?b=new RegExp(a.source):null!=a&&"object"===typeof a&&(b=c(a,{})));return b},
d=function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,e;if(c==typeof b&&"object"==c)if(u(a)){if(!u(b))return!1;if((c=a.length)==b.length){for(e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}}else{if(ra(a))return ra(b)&&a.getTime()==b.getTime();if(sa(a)&&sa(b))return a.toString()==b.toString();if(ta(a)||ta(b)||u(b))return!1;c={};for(e in a)if(("$"!==e.charAt(0)||"object"!=typeof a[e])&&!ha(a[e])){if(!d(a[e],b[e]))return!1;c[e]=!0}for(e in b)if(!c.hasOwnProperty(e)&&
"$"!==e.charAt(0)&&void 0!==b[e]&&!ha(b[e]))return!1;return!0}return!1},e=function(a,b){var c=a.length,e=b.length,g=Array(c+1),f=Array(c+1),h,l,k,v,p=0;if(c==e&&0==c)return{changes:0,distance:0,prescription:[]};for(h=0;h<=c;h++)g[h]=Array(e+1),f[h]=Array(e+1),g[h][0]=h,f[h][0]="D";for(h=0;h<=e;h++)g[0][h]=h,f[0][h]="I";for(h=1;h<=c;h++)for(l=1;l<=e;l++)k=d(a[h-1],b[l-1])?0:1,g[h][l-1]<g[h-1][l]&&g[h][l-1]<g[h-1][l-1]+k?(g[h][l]=g[h][l-1]+1,f[h][l]="I"):g[h-1][l]<g[h-1][l-1]+k?(g[h][l]=g[h-1][l]+1,
f[h][l]="D"):(g[h][l]=g[h-1][l-1]+k,f[h][l]=1==k?"R":"-");v=[];h=c;l=e;do k=f[h][l],v.push(k),"-"!=k&&p++,"R"==k||"-"==k?(h--,l--):"D"==k?h--:l--;while(0!=h||0!=l);return{changes:p/v.length,distance:g[c][e],prescription:v.reverse()}},g,f=function(a,c,d,e,f){g||(g=new Z);var l=U(),k;this.origCode=c;u(a)&&null===c?k="array":("string"!=typeof c&&(e=d,d=c,c=null,k="object"),"string"==typeof a&&(e=d,d=c,c=a,a=null),c&&a&&(k=a.hasOwnProperty(c)?"attr":"expr"),c&&!a&&(k="expr"));if(d)g.on(l,d,e||this,{append:[f],
allowDupes:!0});if("expr"==k){c=this._processInputPipes(c,a);c=this._processPipes(c,a);if(this.inputPipes||this.pipes)c=h(a,c),k=a.hasOwnProperty(c)?"attr":"expr";if(this.staticValue=b(c))k="static"}this.userData=f;this.code=c;this.id=l;this.type=k;this.obj=a;"expr"==k&&(this.getterFn=C(c));this.curr=this._getValue()};f.prototype={staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,
_processInputPipes:function(a,b){if(-1==a.indexOf(">>"))return a;for(var c=0,d=a.length,e=[],g,f,h,l=a;c<d&&-1!=(g=a.indexOf(">>",c));)f=a.charAt(g-1),h=a.charAt(g+2),"\\"!=f&&"'"!=f&&'"'!=f&&"'"!=h&&'"'!=h&&(c=P(a.substring(c,g)).split(":"),l=a.substr(g+2),this._addPipe(e,c,b,this.onInputParamChange)),c=g+2;e.length&&(this.inputPipes=e);return P(l)},_addPipe:function(a,b,c,d){var e=b.shift(),g=null,f=[],h;L&&(g=L("filter."+e,!0));g||(g=window[e]||c[e]);if("function"==typeof g){e=-1;for(h=b.length;++e<
h;f.push(k(c,b[e],d,this)));a.push([g,b,f])}},_processPipes:function(a,b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,e=[],g,f,h,l=!1,k=a;c<d;)if(-1!=(g=a.indexOf("|",c)))f=a.charAt(g-1),h=a.charAt(g+1),"|"!=f&&"'"!=f&&'"'!=f&&"|"!=h&&"'"!=h&&'"'!=h&&(l?(c=P(a.substring(c,g)).split(":"),this._addPipe(e,c,b)):(l=!0,k=P(a.substring(0,g)))),c=g+1;else{l&&(c=P(a.substr(c)).split(":"),this._addPipe(e,c,b,this.onPipeParamChange));break}e.length&&(this.pipes=e);return k},_checkCode:function(){var a=
this._getValue(),b=!1,c=this.curr;if(u(c)&&u(a))return b=e(c,a),b.changes?(this.curr=a.slice(),g.trigger(this.id,b,a,c),!0):!1;a!==c&&(this.curr=a,g.trigger(this.id,a,c),b=!0);return b},_checkObject:function(){var a=this.obj,b=this.curr;return d(b,a)?!1:(this.curr=c(a),g.trigger(this.id,a,b),!0)},_checkArray:function(){var a=this.curr,b=this.obj,c=e(a,b);return c.changes?(this.curr=b.slice(),g.trigger(this.id,c,b,a),!0):!1},_getValue:function(){var a;switch(this.type){case "static":a=this.staticValue;
break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);"undefined"==typeof a&&(a="");break;case "object":a=c(this.obj);break;case "array":a=this.obj}u(a)&&(a=a.slice());return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,e,g=b.length,f=this.obj,h,l;for(c=0;c<g;c++){e=b[c][1];d=[];h=-1;for(l=e.length;++h<l;d.push(X(e[h],f)));d.unshift(f);d.unshift(a);a=b[c][0].apply(null,d)}}return a},subscribe:function(a,b,c){g.on(this.id,a,b,c)},
unsubscribe:function(a,b){return g.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);if("attr"==b)this.obj[this.code]=a;else if("expr"==b)this.setterFn||(this.setterFn=n(this.code)),this.setterFn(this.obj,a);else if("array"==b)this.obj=a;else throw"Cannot set value";},onInputParamChange:function(){this.setValue(this.lastSetValue)},
onPipeParamChange:function(){this.check()},check:function(){switch(this.type){case "expr":case "attr":case "static":return this._checkCode();case "object":return this._checkObject();case "array":return this._checkArray()}return!1},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=
null)},unsubscribeAndDestroy:function(a,b){var c=this.id;g.un(c,a,b);return g.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,c,d,e,f,h;this.itv&&this.clearInterval();if(a)for(c=-1,d=a.length;++c<d;)for(h=a[c][2],e=-1,f=h.length;++e<f;)h[e].unsubscribeAndDestroy(this.check,this);if(b)for(c=-1,d=b.length;++c<d;)for(h=b[c][2],e=-1,f=h.length;++e<f;)h[e].unsubscribeAndDestroy(this.onInputParamChange,this);this.obj&&delete this.obj.$$watchers[this.origCode];
delete this.id;delete this.curr;delete this.obj;delete this.pipes;delete this.inputPipes;delete this.origCode;delete this.code;delete this.getterFn;delete this.setterFn;delete this.lastSetValue;delete this.staticValue;delete this.userData;g.destroyEvent(this.id)}};var k=function(a,b,c,d,e){b=h(a,P(b));return a?(a.$$watchers||(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?b++:"$"==a.charAt(0)&&this[a]instanceof f&&this[a].check()&&b++;return b},$destroyAll:function(){for(var a in this)if("$"!=
a.charAt(0)||this[a]instanceof f)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].subscribe(c,d,{append:[e],allowDupes:!0}):a.$$watchers[b]=new f(a,b,c,d,e),a.$$watchers[b]):new f(a,b,c,d,e)},h=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},l=Function,v=function(a,b,c,d){for(;c&&!c.$isRoot;)if(c=c.$parent)try{return 4==arguments.length?b.call(null,c,d,I,b):b.call(null,c,I,b)}catch(e){}},E=
function(a){return function(){var b=S.call(arguments);b.push(v);b.push(a);b=a.apply(null,b);return void 0==b||!b&&"number"==typeof b&&isNaN(b)?(b=S.call(arguments),b.unshift(a),b.unshift(null),v.apply(null,b)):b}},D={},p=0,C=function(b){try{return D[b]?D[b]:(p++,D[b]=E(new l("____","$$interceptor","$$itself","".concat("try {","return ",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return I}},m={},q=0,n=function(b){try{if(!m[b]){q++;
var c=b.replace(a,"$1____.$3");return m[b]=E(new l("____","$$$$","$$interceptor","$$itself","".concat("try {",c," = $$$$",";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____, $$$$); }")))}return m[b]}catch(d){return I}},r={},y=0,X=function(a,c){var d;return(d=b(a))?d:C(a)(c)},ka=function(){1E3<=p&&(D={});1E3<=q&&(m={});1E3<=y&&(r={})};f.create=k;f.unsubscribeAndDestroy=function(a,b,c,d){b=P(b);(a=a.$$watchers)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};f.normalizeExpr=
h;f.prepareCode=function(b){return b.replace(a,"$1____.$3")};f.createGetter=C;f.createSetter=n;f.createFunc=function(b){try{return r[b]?r[b]:(y++,r[b]=E(new l("____","$$interceptor","$$itself","".concat("try {",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return I}};f.eval=X;f.enableResetCacheInterval=function(){setTimeout(ka,1E4)};MetaphorJs.lib.Watchable=f})();var aa=MetaphorJs.createWatchable=MetaphorJs.lib.Watchable.create,
ua=MetaphorJs.ns.register,V=MetaphorJs.toArray=function(a){if(a&&void 0!=a.length&&"string"!=typeof a){for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b}return a?[a]:[]},M=MetaphorJs.ns.add,n,Ca,va;(function(){var a=[],b=[],c=!1,d=!1,e=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};MetaphorJs.registerAttributeHandler=n=function(b,d,e){L("attr."+b,!0)||(a.push({priority:d,name:b,handler:M("attr."+b,e)}),c=!1)};MetaphorJs.getAttributeHandlers=Ca=function(){c||(a.sort(e),
c=!0);return a};MetaphorJs.registerTagHandler=va=function(a,c,e){L("tag."+a,!0)||(b.push({priority:c,name:a,handler:M("tag."+a,e)}),d=!1)};MetaphorJs.getTagHandlers=function(){d||(b.sort(e),d=!0);return b}})();var Pa=MetaphorJs.select=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,g=/(~|>|\+)/,f=/ +/,k=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,h=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,
l=/\D/,v=/[^(]*\(([^)]*)\)/,E=/\(.*/,D=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,p=document,C=!!p.getElementsByClassName,m=!!p.querySelectorAll,q={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var g=a.parentNode.firstChild;
c++;do if(1==g.nodeType&&(g.nodeIndex=++c)&&a===g&&(c+d)%e)return 0;while(g=g.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var g=a.parentNode.lastChild;c++;do if(1==g.nodeType&&(g.nodeLastIndex=c++)&&a===g&&(c+d)%e)return 0;while(g=g.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},
checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&p.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},n={},r=function(a){return n[a]||(n[a]=new RegExp("(^| +)"+a+"($| +)"))},y={"":function(a,b){return!!a.getAttribute(b)},"=":function(a,b,c){return(b=a.getAttribute(b))&&b===c},"&=":function(a,b,c){return(b=a.getAttribute(b))&&r(c).test(b)},"^=":function(a,b,c){return(b=
a.getAttribute(b)+"")&&!b.indexOf(c)},"$=":function(a,b,c){return(b=a.getAttribute(b)+"")&&b.indexOf(c)==b.length-c.length},"*=":function(a,b,c){return(b=a.getAttribute(b)+"")&&-1!=b.indexOf(c)},"|=":function(a,b,c){return(b=a.getAttribute(b)+"")&&(b===c||!!b.indexOf(c+"-"))},"!=":function(a,b,c){return!(b=a.getAttribute(b))||!r(c).test(b)}};return function(r,n){n=n||p;var t=[],B=null,J,u,x,s,A,N,Q;if(m)try{t=V(n.querySelectorAll(r.replace(b,'="$1"')))}catch(O){B=!0}if(!m||B)if(a.test(r))switch(B=
0,r.charAt(0)){case "#":B=r.slice(1);t=p.getElementById(B);t.id!==B&&(t=p.all[B]);t=t?[t]:[];break;case ".":J=r.slice(1);if(C)t=V((t=n.getElementsByClassName(J)).length?t:[]);else{J=" "+J+" ";u=n.getElementsByTagName("*");for(x=0;s=u[x++];)-1!=(" "+s.className+" ").indexOf(J)&&(t[B++]=s);t=B?t:[]}break;case ":":u=n.getElementsByTagName("*");x=0;A=r.replace(v,"$1");for(N=r.replace(E,"");s=u[x++];)q[N]&&!q[N](s,A)&&(t[B++]=s);t=B?t:[];break;case "[":u=n.getElementsByTagName("*");x=0;s=D.exec(r);J=s[1];
Q=s[2]||"";for(A=s[3];s=u[x++];)y[Q]&&(y[Q](s,J,A)||"class"===J&&y[Q](s,"className",A))&&(t[B++]=s);t=B?t:[];break;default:t=V((t=n.getElementsByTagName(r)).length?t:[])}else{for(var K=r.split(c),M=K.length-1,T=!!M,P,R,z,S,F,H,I,L,Y,w,U,W;B=K[M--];){R=(P=B.replace(d,"$1%").replace(e,"$1&").replace(g," $1 ").split(f)).length;x=0;S=" ";for(u=[n];z=P[x++];)if(" "!==z&&">"!==z&&"~"!==z&&"+"!==z&&u){z=z.match(k);F=z[1]||"*";H=z[2];I=z[3]?" "+z[3]+" ":"";J=z[4];Q=z[5]||"";N=z[7];A="nth-child"===N||"nth-last-child"===
N?h.exec("even"===z[8]&&"2n"||"odd"===z[8]&&"2n%1"||!l.test(z[8])&&"0n%"+z[8]||z[8]):z[8];L=[];B=Y=0;for(U=x==R;w=u[Y++];)switch(S){case " ":W=w.getElementsByTagName(F);for(w=0;s=W[w++];)H&&s.id!==H||I&&-1==(" "+s.className+" ").indexOf(I)||!(!J||y[Q]&&(y[Q](s,J,z[6])||"class"===J&&y[Q](s,"className",z[6])))||s.yeasss||(q[N]?q[N](s,A):N)||(U&&(s.yeasss=1),L[B++]=s);break;case "~":for(F=F.toLowerCase();(w=w.nextSibling)&&!w.yeasss;)1!=w.nodeType||"*"!==F&&w.nodeName.toLowerCase()!==F||H&&w.id!==H||
I&&-1==(" "+w.className+" ").indexOf(I)||!(!J||y[Q]&&(y[Q](s,J,z[6])||"class"===J&&y[Q](s,"className",z[6])))||w.yeasss||(q[N]?q[N](w,A):N)||(U&&(w.yeasss=1),L[B++]=w);break;case "+":for(;(w=w.nextSibling)&&1!=w.nodeType;);!w||w.nodeName.toLowerCase()!==F.toLowerCase()&&"*"!==F||H&&w.id!==H||I&&-1==(" "+s.className+" ").indexOf(I)||!(!J||y[Q]&&(y[Q](s,J,z[6])||"class"===J&&y[Q](s,"className",z[6])))||w.yeasss||(q[N]?q[N](w,A):N)||(U&&(w.yeasss=1),L[B++]=w);break;case ">":for(W=w.getElementsByTagName(F),
x=0;s=W[x++];)s.parentNode!==w||H&&s.id!==H||I&&-1==(" "+s.className+" ").indexOf(I)||!(!J||y[Q]&&(y[Q](s,J,z[6])||"class"===J&&y[Q](s,"className",z[6])))||s.yeasss||(q[N]?q[N](s,A):N)||(U&&(s.yeasss=1),L[B++]=s)}u=L}else S=z;if(T){if(!u.concat){L=[];for(w=0;s=u[w];)L[w++]=s;u=L}t=u.concat(1==t.length?t[0]:t)}else t=u}for(B=t.length;B--;)t[B].yeasss=t[B].nodeIndex=t[B].nodeIndexLast=null}return t}}(),ea=MetaphorJs.error=function(a){var b=a.stack||Error().stack;setTimeout(function(){"undefined"!=typeof console&&
console.log&&(console.log(a),b&&console.log(b))},0)},wa="string"==typeof document.createTextNode("").textContent?"textContent":"nodeValue",la=MetaphorJs.lib.Watchable,R=function(a){this.$$observable=new Z;T(this,a,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};R.prototype={$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new R({$parent:this,
$root:this.$root,$app:this.$app})},$newIsolated:function(){return new R({$app:this.$app})},$on:function(a,b,c){return this.$$observable.on(a,b,c)},$un:function(a,b,c){return this.$$observable.un(a,b,c)},$watch:function(a,b,c){return la.create(this,a,b,c,null)},$unwatch:function(a,b,c){return la.unsubscribeAndDestroy(this,a,b,c)},$get:function(a){for(var b=this;b;){if(void 0!=b[a])return b[a];b=b.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$check:function(){var a;
this.$$checking||(this.$$checking=!0,this.$$watchers&&(a=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",a))},$destroy:function(){this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;delete this.$app;delete this.$root;delete this.$parent;this.$$watchers&&(this.$$watchers.$destroyAll(),delete this.$$watchers);this.$$destroyed=!0}};MetaphorJs.lib.Scope=R;R=MetaphorJs.lib.Scope;(function(){var a=/\\{/g,b=new Z,c=
function(a,b,c,k,h){return!b||"string"!=typeof b||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new d(a,b,c,k,h)},d=function(a,b,c,d,h){this.id=U();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=d;this.lang=a.$app.lang;if(!0===h||!1===h)this.recursive=h;this.watchers=[];this.children=[];this.dataChangeDelegate=m(this.doDataChange,this);this.processed=this.processText(b);this.render()};d.prototype={id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,
children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(a,c){return b.on(this.id,a,c)},unsubscribe:function(a,c){return b.un(this.id,a,c)},getString:function(){null===this.text&&this.render();var b=this.text;return-1!=b.indexOf("\\{")?b.replace(a,"{"):b},render:function(){var a=this.processed,b,c,k;this.children.length||this.createChildren();k=this.children;b=-1;for(c=k.length;++b<c;a=a.replace("---"+b+"---",k[b]instanceof d?k[b].getString():k[b]));
return this.text=a},processText:function(a){for(var b=0,c=a.length,d,h,l="";b<c;)if(-1!=(d=a.indexOf("{{",b))&&-1!=(h=a.indexOf("}}",d+2))&&"\\"!=a.substr(d-1,1))l+=a.substring(b,d),h!=d+2&&(l+=this.watcherMatch(a.substring(d+2,h))),b=h+2;else{b!==c&&(l+=a.substring(b));break}b=0;a=l;c=a.length;for(l="";b<c;)if(-1!=(d=a.indexOf("{[",b))&&-1!=(h=a.indexOf("]}",d+2))&&"\\"!=a.substr(d-1,1))l+=a.substring(b,d),h!=d+2&&(l+=this.watcherMatch(a.substring(d+2,h),!0)),b=h+2;else{b!==c&&(l+=a.substring(b));
break}return l},watcherMatch:function(a,b){var c=this.watchers;if(b){a=P(a);var d=a.split("|"),h=P(d[0]);"."!=h.substr(0,1)&&(d[0]="'"+h+"'");1==d.length&&d.push("l");a=d.join(" | ")}c.push(aa(this.scope,a,this.onDataChange,this));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?b.trigger(this.id,
this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,b=this.children,d=this.scope,k=this.recursive,h,l,v;h=-1;for(l=a.length;++h<l;)v=a[h].getLastResult(),b.push(k&&c(d,v,this,null,!0)||v)},destroyChildren:function(){var a=this.children,b,c;b=-1;for(c=a.length;++b<c;)a[b]instanceof d&&a[b].destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},
destroy:function(){this.destroyChildren();this.destroyWatchers();b.destroyEvent(this.id);delete this.watchers;delete this.children;delete this.origin;delete this.processed;delete this.text;delete this.scope;delete this.data;delete this.dataChangeDelegate;delete this.lang;this.changeTmt&&clearTimeout(this.changeTmt);delete this.changeTmt}};d.create=c;ua("MetaphorJs.view.TextRenderer",d)})();var Da=MetaphorJs.view.TextRenderer;(function(){var a=null,b=Da.create,c=function(a,b,c,d,e,f){var k=[];if(a&&
!0!==a){if(a.nodeType){f.countdown+=1;g(a,c,d,e,f);return}k=V(a)}k.length||(k=V(b.childNodes));b=k.length;f.countdown+=b;for(a=-1;++a<b;g(k[a],c,d,e,f));},d=function(a,b){if(b)if(b.nodeType)a.push(b);else if(u(b))for(var c=-1,e=b.length;++c<e;d(a,b[c]));},e=/^(script|template|mjs-template|style)$/i,g=function(a,b,d,f,g){if(a){var k,m=a.nodeName;g||(g={countdown:1});if(!m||!m.match(e)){if(a.nodeType)try{k=b.call(d,a)}catch(G){ea(G)}if(!1!==k){if(F(k)){k.done(function(e){!1!==e&&c(e,a,b,d,f,g);0==--g.countdown&&
f&&f.call(d)});return}c(k,a,b,d,f,g)}}0==--g.countdown&&f&&f.call(d)}},f=new Z,k=function(a,b,c){this.id=U();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof R&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)};k.prototype={id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,_observable:null,on:function(a,b,c){return f.on(a+"-"+this.id,b,c)},un:function(a,b,c){return f.un(a+"-"+this.id,b,c)},createChild:function(a){return new k(a,this.scope,this)},
getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b;b=b.$app;var f={$scope:e,$node:c,$attrValue:d,$renderer:this};c=[e,c,d,this];return a.__isMetaphorClass?(c=b.inject(a,null,!0,f,c),a.$stopRenderer?!1:c):b.inject(a,null,!1,f,c)},processNode:function(c){var e=c.nodeType,f=this.texts,g=this.scope,k,p;if(3==e){if(p=null!==c.parentNode.getAttribute("mjs-recursive"),k=b(g,c[wa],null,f.length,p))k.subscribe(this.onTextChange,this),
f.push({node:c,tr:k}),this.renderText(f.length-1)}else if(1==e){a||(a=Ca());var m=c.attributes;k=[];var G=[],q,n,r,e="tag."+c.tagName.toLowerCase();if(q=L(e,!0)){r=this.runHandler(q,g,c);if(!1===r)return!1;F(r)?k.push(r):d(G,r)}q=0;for(n=a.length;q<n;q++)if(p=a[q].name,null!==(r=c.getAttribute(p))){r=this.runHandler(a[q].handler,g,c,r);c.removeAttribute(p);if(!1===r)return!1;F(r)?k.push(r):d(G,r)}if(k.length){var y=new A;A.all(k).done(function(a){d(G,a);y.resolve(G)});return y}p=null!==c.getAttribute("mjs-recursive");
q=0;for(n=m.length;q<n;q++)!L(e,!0)&&(k=b(g,m[q].value,null,f.length,p))&&(k.subscribe(this.onTextChange,this),f.push({node:c,attr:m[q].name,tr:k}),this.renderText(f.length-1));return G.length?G:!0}return!0},process:function(){g(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){f.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?(a.node.setAttribute(c,
b),"value"==c&&(a.node.value=b),"class"==c&&(a.node.className=b)):a.node[wa]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&this.parent.un("destroy",this.destroy,this);delete this.texts;delete this.el;delete this.scope;delete this.parent;f.trigger("destroy-"+this.id)}}};ua("MetaphorJs.view.Renderer",k)})();var xa=MetaphorJs.view.Renderer;(function(){var a=new Z,b={},c=function(a){if(!b[a]){var c=document.getElementById(a),
d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),d.innerHTML=c.innerHTML,b[a]=Y(d.childNodes)):b[a]="content"in c?c.content:Y(c.childNodes))}return b[a]},d=function(a){return b[a]?b[a]:b[a]=MetaphorJs.ajax(a,{dataType:"fragment"}).then(function(c){return b[a]=c})},e=function(a){T(this,a,!0,!1);this.id=U();this.tpl&&(this.tpl=P(this.tpl));this.url&&(this.url=P(this.url));a=this.node;var b=this.tpl||this.url;a&&a.removeAttribute("mjs-include");a||(this.deferRendering=!0);
if(b){if(a&&a.firstChild&&K(a,"mjs-transclude",Y(a.childNodes)),"."!=b.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=aa(this.scope,b,this.onChange,this)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof
R&&this.scope.$on("destroy",this.onScopeDestroy,this)};e.prototype={_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,doRender:function(){this._renderer||(this._renderer=new xa(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+
"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,e=a._watcher?a._watcher.getLastResult():a.tpl||b,h=new A;(new A(function(a){b?a(c(e)||d(b)):a(c(e)||Y(e))})).done(function(b){a._fragment=
b;h.resolve(a.ownRenderer?!1:a.node)}).fail(h.reject,h);return h},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(ja(this._fragment),a):a.appendChild(ja(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new A;this._initial?(this.doApplyTemplate(),
b.resolve()):(H(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),H(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),delete this._watcher);delete this.tpl}};e.getTemplate=c;
e.loadTemplate=d;ua("MetaphorJs.view.Template",e)})();var ba=MetaphorJs.view.Template;(function(){var a,b=function(){this.store={}};b.prototype={store:null,getApi:function(){return{value:m(this.value,this),constant:m(this.constant,this),factory:m(this.factory,this),service:m(this.service,this),provider:m(this.provider,this),resolve:m(this.resolve,this),inject:m(this.inject,this)}},instantiate:function(a,b){var e=function(){},g;e.prototype=a.prototype;e=new e;g=a.prototype.constructor.apply(e,b);return"object"==
typeof g?g:e},inject:function(a,b,e,g,f){g=g||{};f=f||[];if("function"==typeof a)if(a.inject)f=S.call(a.inject),f.push(a),a=f;else return e||a.__isMetaphorClass?this.instantiate(a,f):a.apply(b,f);a=S.call(a);var k=this;f=[];var h=a.pop(),l,m;l=-1;for(m=a.length;++l<m;f.push(k.resolve(a[l],g)));return A.all(f).then(function(a){return e||h.__isMetaphorClass?k.instantiate(h,a):h.apply(b,a)})},value:function(a,b){this.store[a]={type:1,value:b}},constant:function(a,b){var e=this.store;e[a]||(e[a]={type:2,
value:b})},factory:function(a,b,e,g){"boolean"==typeof e&&(g=e,e=null);this.store[a]={type:3,singleton:g,fn:b,context:e}},service:function(a,b,e){this.store[a]={type:4,singleton:e,fn:b}},provider:function(a,b){this.store[a+"Provider"]={name:a,type:5,fn:b,instance:null}},resolve:function(b,d){var e=this.store,g,f,k;if("undefined"!=typeof d[b])return d[b];if(f=e[b]){g=f.type;if(1==g||2==g)return f.value;if(3==g)k=this.inject(f.fn,f.context,!1,d);else if(4==g)k=this.inject(f.fn,null,!0,d);else if(5==
g)return f.instance||(f.instance=A.resolve(this.inject(f.fn,null,!0,d)).done(function(a){f.instance=a;e[f.name]={type:3,fn:a.$get,context:a}})),f.instance;f.singleton&&(f.type=1,f.value=k,3==g&&F(k)&&k.done(function(a){f.value=a}));return d[b]=k}if(e[b+"Provider"])return this.resolve(b+"Provider",d),this.resolve(b,d);if(this===a)throw"Could not provide value for "+b;return a.resolve(b)},destroy:function(){delete this.store;delete this.scope}};MetaphorJs.lib.Provider=b;b.global=function(){return a};
a=new b})();var Ea=MetaphorJs.lib.Provider,fa=MetaphorJs.resolveComponent=function(a,b,c,d,e){var g=!1!==b;b=b||{};e=e||[];c=c||b.scope;d=d||b.node;b.scope=b.scope||c;b.node=b.node||d;var f="string"==typeof a?L(a):a;if(!f)throw"Component "+a+" not found";c&&f.$isolateScope&&(b.scope=c=c.$newIsolated());var k,h=[];a=f.template||b.template||null;var l=f.templateUrl||b.templateUrl||null,m=c?c.$app:null,E=Ea.global(),n=m?m.inject:E.inject,p=m?m:E,C=d?d.getAttribute("mjs-cloak"):null,G={$node:d||null,
$scope:c||null,$config:b||null,$args:e||null};if(f.resolve)for(k in f.resolve)(function(a){var g=new A,l;h.push(g.done(function(c){G[a]=c;b[a]=c;e.push(c)}));l=f.resolve[k];"function"==typeof l?g.resolve(l(c,d)):"string"==typeof l?g.resolve(n.resolve(l)):g.resolve(n.call(p,l,null,!1,T({},G,b,!1,!1)))})(k);g&&(a||l)&&(b.template=new ba({scope:c,node:d,deferRendering:!0,ownRenderer:!0,tpl:a,url:l}),h.push(b.template.initPromise),d&&d.firstChild&&K(d,"mjs-transclude",Y(d.childNodes)));g&&e.unshift(b);
var q;h.length?(q=new A,A.all(h).done(function(){q.resolve(n.call(p,f,null,!0,T({},G,b,!1,!1),e))})):q=A.resolve(n.call(p,f,null,!0,T({},G,b,!1,!1),e));d&&q.isPending()&&null!==C&&(C?da(d,C):d.style.visibility="hidden",q.done(function(){C?W(d,C):d.style.visibility=""}));return q};(function(){var a=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;
case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},b=function(a){this.store={};a&&(this.locale=a)};b.prototype={store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var c=this.store;"undefined"==typeof c[a]&&(c[a]=b)},load:function(a){T(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===c?"-- "+a+" --":c.get(a))},plural:function(b,c){var g=this.get(b),f=a(c,this.locale);return u(g)?g[f]:ia(g)?g[c]?g[c]:1==c&&void 0!=g.one?g.one:0>c&&void 0!=g.negative?g.negative:g.other:g}};var c=new b;b.global=function(){return c};MetaphorJs.lib.Text=b;M("filter.l",function(a,b){return b.$app.lang.get(a)});M("filter.p",function(a,b,c){return b.$app.lang.plural(a,
parseInt(c,10)||0)})})();var Qa=MetaphorJs.lib.Text;O("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(a){a=a||{};this._observable=new Z;T(this,this._observable.getApi(),!0,!1);if(a.callback){var b=a.callback,c=b.scope||this;delete b.scope;for(var d in b)if(b.hasOwnProperty(d))this.on(d,b[d],c);delete a.callback}T(this,a,!0,!1)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",
this);this._observable.destroy();delete this._observable}},onDestroy:I});O("MetaphorJs.cmp.App","MetaphorJs.cmp.Base",{lang:null,scope:null,renderer:null,cmpListeners:null,components:null,initialize:function(a,b){var c=b instanceof R?b:new R(b),d,e;c.$app=this;this.supr();d=new Ea;e=new Z;this.lang=new Qa;T(this,d.getApi(),!0,!1);this.destroyProvider=m(d.destroy,d);T(this,e.getApi(),!0,!1);this.destroyObservable=m(e.destroy,e);this.scope=c;this.cmpListeners={};this.components={};this.factory("$parentCmp",
["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",c.$root);this.value("$lang",this.lang);this.renderer=new xa(a,c);d=S.call(arguments);d[1]=c;this.initApp.apply(this,d)},initApp:I,run:function(){this.renderer.process()},getParentCmp:function(a){a=a.parentNode;for(var b;a;){if(b=a.getAttribute("cmp-id"))return this.getCmp(b);a=a.parentNode}return null},onAvailable:function(a,b,c){var d=this.cmpListeners;d[a]||(d[a]=new A);b&&d[a].done(b,c);return d[a]},getCmp:function(a){return this.components[a]||
null},registerCmp:function(a){var b=this;b.components[a.id]=a;b.onAvailable(a.id).resolve(a);a.on("destroy",function(a){delete b.cmpListeners[a.id];delete b.components[a.id]})},destroy:function(){var a;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(a in this)this.hasOwnProperty(a)&&delete this[a]}});var ga=MetaphorJs.isAttached=function(a){var b=document.body;return a===b?!0:b.contains(a)};O("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",{id:null,
originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(a){this.supr(a);this.scope||(this.scope=new R);a.as&&(this.scope[a.as]=this);this.node&&(this.id=this.node.getAttribute("id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+U();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this);var b=this.template,c=this.templateUrl;
b&&b instanceof ba?b instanceof ba&&(this.template.node=this.node):this.template=b=new ba({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);
a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):ga(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;
this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:I,afterRender:I,onShow:I,onHide:I,onParentRendererDestroy:function(){this.destroy()},
onDestroy:function(){this.template&&(this.template.destroy(),delete this.template);this.destroyEl?ga(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();delete this.scope;delete this.node;this.supr()}});var Fa=MetaphorJs.stopAnimation=function(a){var b=K(a,"mjsAnimationQueue"),c;u(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,W(a,c[b]),W(a,c[b]+
"-active")):"function"==typeof b?b(a):"stop"==b&&$(a).stop(!0,!0);K(a,"mjsAnimationQueue",null)},x=MetaphorJs.addListener=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)};(function(){var a={locationChange:[],beforeLocationChange:[]},b=!1,c=/(?:(\w+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,d=!!history.pushState,e="onhashchange"in window,g=function(a){var b=location.protocol+"//"+location.hostname;location.port&&(b+=":"+
location.port);a=a.replace(b,"");d||(a=encodeURIComponent(a));return a},f=function(a){a=(""+a).match(c);var b,e;d||(e=a[6],"!"==e.substr(0,1)&&(b=e.substr(1)));b||(b=a[4],a[5]&&(b+="?"+a[5]));return b},k=function(){var a;d?a=location.pathname+location.search:(a=location.hash.substr(1))?("!"==a.substr(0,1)&&(a=a.substr(1)),a=decodeURIComponent(a)):a=location.pathname+location.search;return a},h=function(b,c,d){d=d||k();for(var e,f=-1,g=a[b].length;++f<g;)if(e=a[b][f].call(null,d),c&&!1===e)return!1;
if(window.MetaphorJs){if(c)return MetaphorJs.trigger(b,d);MetaphorJs.triggerAsync(b,d)}return null};x(window,"load",function(){b=!0});history.initPushState=function(){if(d)history.origPushState=history.pushState,history.origReplaceState=history.replaceState,x(window,"popstate",function(){h("locationChange")}),history.pushState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;history.origPushState(a,b,g(c));h("locationChange")},history.replaceState=function(a,b,c){if(!1===h("beforeLocationChange",
!0,c))return!1;history.origReplaceState(a,b,g(c));h("locationChange")};else if(e)history.replaceState=history.pushState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;a=g(c);location.hash=a?"!"+a:""},x(window,"hashchange",function(){h("locationChange")});else{var a=null,k=!1;window.onIframeHistoryChange=function(a){k||(location.hash=a?"!"+a:"",h("locationChange"))};var m=function(b){var c=a.contentWindow.document;c.open();c.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+
b+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');c.close()};history.pushState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;m(g(c))};history.replaceState=function(b,c,d){if(!1===h("beforeLocationChange",!0,d))return!1;b=g(d);a.contentWindow.hashValue=b};var n=function(){a=document.createElement("iframe");a.src="about:blank";a.style.display="none";document.body.appendChild(a);k=!0;m(g(location.hash.substr(1)));k=!1};b?n():x(window,"load",
n)}x(document.documentElement,"click",function(a){a=a||window.event;for(var b=a.target||a.srcElement,d;b&&"a"!=b.nodeName.toLowerCase();)b=b.parentNode;if(b){if(b=(d=b.getAttribute("href"))&&"#"!=d.substr(0,1)&&!b.getAttribute("target"))b=d.match(c),b=b[1]&&location.protocol!=b[1]||b[2]&&location.hostname!=b[2]?!1:b[2]||b[3]?location.port==b[3]:!0;if(b&&f(d)!=f(window.location))return history.pushState(null,null,f(d)),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}return null});
history.initPushState=function(){}};MetaphorJs.pushUrl=function(a){history.pushState(null,null,a)};MetaphorJs.replaceUrl=function(a){history.replaceState(null,null,a)};MetaphorJs.currentUrl=function(){return k()};history.onBeforeChange=function(b){a.beforeLocationChange.push(b)};history.onChange=function(b){a.locationChange.push(b)}})();var Ra=MetaphorJs.currentUrl;O("MetaphorJs.cmp.View",{route:null,node:null,scope:null,cmp:null,currentComponent:null,watchable:null,defaultCmp:null,initialize:function(a){T(this,
a,!0,!1);(a=this.node)&&a.firstChild&&K(a,"mjs-transclude",Y(a.childNodes));this.cmp||(this.cmp=a.getAttribute("mjs-view-cmp"));this.defaultCmp=a.getAttribute("mjs-view-default");a.removeAttribute("mjs-view");a.removeAttribute("mjs-view-cmp");a.removeAttribute("mjs-view-default");this.route?(history.initPushState(),MetaphorJs.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=aa(this.scope,this.cmp,this.onCmpChange,this),this.onCmpChange())},onCmpChange:function(){var a=
this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=Ra(),b=this.route,c,d,e,g,f;d=0;for(e=b.length;d<e;d++){g=b[d];if(f=a.match(g.reg)){this.changeRouteComponent(g,f);return}g["default"]&&!c&&(c=g)}c?this.setRouteComponent(c,[]):this.clearComponent();!c&&this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){Fa(this.node);this.clearComponent();this.setRouteComponent(a,b)},clearComponent:function(){var a=
this,b=a.node;a.currentComponent&&H(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,b){var c=this,d=c.node,e=a.params;H(d,"enter",function(){var g=b||[],f={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,h;a.as&&(f.as=a.as);a.template&&(f.template=a.template);g.shift();if(e)for(k=-1,h=e.length;++k<h;f[e[k]]=g[k]);return fa(a.cmp||"MetaphorJs.cmp.Component",
f,f.scope,d,null,g).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;H(c,"enter",function(){var d="object"==typeof a?a:{},e=("string"==typeof a?a:null)||"MetaphorJs.cmp.Component",g=d.scope||b.scope.$new();d.destroyEl=!1;return fa(e,d,g,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(MetaphorJs.un("locationchange",this.onLocationChange,this),delete this.route);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,
this),delete this.watchable);delete this.scope;delete this.currentComponent}});var ca=MetaphorJs.returnFalse=function(){return!1};n("mjs-app",0,ca);O("MetaphorJs.view.AttributeHandler",{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=P(c);this.node=b;this.expr=c;this.scope=a;this.watcher=aa(a,c,this.onChange,this);if(this.watcher.getLastResult())this.onChange();a instanceof R&&a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.destroy()},onChange:function(){},
destroy:function(){delete this.node;delete this.scope;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)}});var Sa=Array.prototype.indexOf,Ga=MetaphorJs.inArray=function(a,b){return b?-1!=Sa.call(b,a):!1},ma=MetaphorJs.getValue=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value");return null!=b?b:P(a.innerText||a.textContent)},select:function(a){for(var b,e=a.options,g=a.selectedIndex,f=(a="select-one"===a.type||0>g)?null:[],k=a?g+1:e.length,
h,l=0>g?k:a?g:0;l<k;l++)if(b=e[l],h=b.disabled||null!==b.getAttribute("disabled")||b.parentNode.disabled,(b.selected||l===g)&&!h){b=ma(b);if(a)return b;f.push(b)}return f},radio:function(a){return null===a.getAttribute("value")?"on":a.value},checkbox:function(a){return null===a.getAttribute("value")?"on":a.value}};return function(c){var d,e;if((d=b[c.type]||b[c.nodeName.toLowerCase()])&&void 0!==(e=d(c,"value")))return e;e=c.value;return"string"===typeof e?e.replace(a,""):null==e?"":e}}(),ya=MetaphorJs.setValue=
function(){var a={select:function(a,c){for(var d,e,g=a.options,f=V(c),k=g.length,h=-1;k--;)e=g[k],(e.selected=Ga(e.value,f))?d=!0:null!==e.getAttribute("mjs-default-option")&&(h=k);d||(a.selectedIndex=h);return f}};a.radio=a.checkbox=function(a,c){if(u(c))return a.checked=Ga(ma(a),c)};return function(b,c){if(1===b.nodeType){null===c?c="":"number"===typeof c&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];d&&void 0!==d(b,c,"value")||(b.value=c)}}}();n("mjs-bind",1E3,O(null,"MetaphorJs.view.AttributeHandler",
{isInput:!1,recursive:!1,textRenderer:null,initialize:function(a,b,c){var d=b.nodeName.toLowerCase(),e=b.type;this.isInput="input"!=d&&"textarea"!=d&&"select"!=d||"submit"==e||"reset"==e||"button"==e?!1:!0;(this.recursive=null!==b.getAttribute("mjs-recursive"))?(this.scope=a,this.node=b,this.textRenderer=new Da(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),a instanceof R&&a.$on("destroy",this.onScopeDestroy,this)):this.supr(a,b,
c)},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?ya(this.node,a):this.node[wa]=a},destroy:function(){this.textRenderer&&(this.textRenderer.destroy(),delete this.textRenderer);this.supr()}}));n("mjs-bind-html",1E3,O(null,"attr.mjs-bind",{updateElement:function(a){this.node.innerHTML=a}}));(function(){var a=function(a,c,d,e){if(null!==d){if(d==pa(a,
c))return;d=!d}else d=pa(a,c);d?e?H(a,[c+"-remove"],null,!0).done(function(){W(a,c)}):W(a,c):e?H(a,[c+"-add"],null,!0).done(function(){da(a,c)}):da(a,c)};n("mjs-class",1E3,O(null,"MetaphorJs.view.AttributeHandler",{initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),d;Fa(b);if("string"==typeof c)a(b,c,null,!this.initial);else if(u(c)){var e;d=-1;for(e=c.length;++d<e;a(b,c[d],!0,!this.initial));}else for(d in c)a(b,d,c[d]?!0:!1,!this.initial);this.initial=!1}}))})();n("mjs-cmp-prop",
200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=function(a,c,d,e){var g,f,k,h,l;c.removeAttribute("mjs-cmp");d=d.split(" ");k=0;for(h=d.length;k<h;k++)l=d[k],""!=l&&"as"!=l&&(g?f=l:g=l);fa(g,{scope:a,node:c,as:f,parentRenderer:e,destroyScope:!0},a,c);return!1};a.$breakScope=!0;n("mjs-cmp",200,a)})();var Ha=la.createGetter;n("mjs-each",100,O(null,"MetaphorJs.view.AttributeHandler",{model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,
initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;try{this.watcher=aa(a,this.model,this.onChange,this)}catch(d){ea(d)}this.parentEl.removeChild(b);this.render(V(this.watcher.getValue()))},onScopeDestroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.destroy();delete this.renderers;
delete this.tpl;delete this.prevEl;delete this.nextEl;delete this.parentEl;this.supr()},doUpdate:function(a,b){for(var c=this.renderers,d=b,e=c.length,g=e-1,f=!(d%2),k,h;d<e;d++)k=c[d],h=k.scope,h.$index=d,h.$first=0===d,h.$last=d===g,h.$even=f,h.$odd=!f,f=!f,k.renderer?h.$check():(k.renderer=new xa(k.el,k.scope),k.renderer.process())},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,g=document.createDocumentFragment(),f,k,h;k=0;for(h=a.length;k<h;k++)f=c.cloneNode(!0),
g.appendChild(f),b.push(this.createItem(f,a,k));d.insertBefore(g,e);this.doUpdate(a,0)},createItem:function(a,b,c){var d=this.itemName,e=this.scope.$new();e[d]=b[c];return{el:a,scope:e}},onChange:function(a){var b=this,c=b.renderers;a=a.prescription||[];var d=b.tpl,e=0,g=b.parentEl,f=V(b.watcher.getValue()),k=null,h,l,m,n;l=0;for(m=a.length;l<m;l++)n=a[l],"-"==n?(c[e].scope.$index=e,e++):(null===k&&(k=0<l?l-1:0),"I"!=n&&c[e]&&(h=c[e],h.scope.$destroy(),H(h.el,"leave",null,!0).done(function(a){ga(a)&&
a.parentNode.removeChild(a)})),"D"==n?c.splice(e,1):(h=d.cloneNode(!0),H(h,"enter",function(a){return function(d){0<a?g.insertBefore(d,c[a-1].el.nextSibling):b.prevEl?g.insertBefore(d,b.prevEl.nextSibling):g.insertBefore(d,g.firstChild)}}(e),!0),"R"==n?c[e]=b.createItem(h,f,e):"I"==n&&(l<c.length?c.splice(e,0,b.createItem(h,f,e)):c.push(b.createItem(h,f,e))),e++));b.doUpdate(f,k)},parseExpr:function(a){a=a.split(" ");var b,c,d,e,g;b=0;for(c=a.length;b<c;b++)if(g=a[b],""!=g&&"in"!=g)if(e){d=a.slice(b).join(" ");
break}else e=g;this.model=d;this.itemName=e||"item"}},{$stopRenderer:!0}));n("mjs-each-in-store",100,O(null,"attr.mjs-each",{store:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each-in-store");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.store=a=Ha(this.model)(a);this.parentEl.removeChild(b);this.initWatcher();this.render(this.watcher.getValue());
this.bindStore(a,"on")},onScopeDestroy:function(){this.bindStore(this.store,"un");delete this.store;this.supr()},initWatcher:function(){this.watcher=aa(this.store,".items",null);this.watcher.subscribe(this.onChange,this)},resetWatcher:function(){this.watcher.setValue(this.store.items)},bindStore:function(a,b){a[b]("load",this.onStoreUpdate,this);a[b]("update",this.onStoreUpdate,this);a[b]("add",this.onStoreUpdate,this);a[b]("remove",this.onStoreUpdate,this);a[b]("replace",this.onStoreUpdate,this);
a[b]("filter",this.onStoreFilter,this);a[b]("clearfilter",this.onStoreFilter,this);a[b]("clear",this.onStoreClear,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},onStoreFilter:function(){this.resetWatcher();this.onStoreUpdate()},onStoreClear:function(){this.resetWatcher();this.onStoreUpdate()},onStoreDestroy:function(){this.onStoreClear();this.watcher.unsubscribeAndDestroy(this.onChange,this);delete this.watcher}},{$stopRenderer:!0}));var Ia=la.createFunc,
na=MetaphorJs.returnTrue=function(){return!0};(function(){var a=function(b){if(b instanceof a)return b;if(!(this instanceof a))return new a(b);for(var c in b)if(!this[c])try{this[c]=b[c]}catch(d){}this.originalEvent=b;this.type=b.type;!this.target&&b.srcElement&&(this.target=b.srcElement);var e,g=b.button;"undefined"==typeof this.pageX&&null!=b.clientX&&(e=this.target?this.target.ownerDocument||document:document,c=e.documentElement,e=e.body,this.pageX=b.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||
0)-(c&&c.clientLeft||e&&e.clientLeft||0),this.pageY=b.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c&&c.clientTop||e&&e.clientTop||0));this.which||void 0===g||(this.which=g&1?1:g&2?3:g&4?2:0);this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?na:ca;this.timeStamp=b&&b.timeStamp||(new Date).getTime()};a.prototype={isDefaultPrevented:ca,isPropagationStopped:ca,isImmediatePropagationStopped:ca,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=
na;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=na;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=na;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};MetaphorJs.lib.NormalizedEvent=a})();var Ta=MetaphorJs.normalizeEvent=function(){var a=MetaphorJs.lib.NormalizedEvent;return function(b){return new a(b)}}();
(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=a;"enter"==b&&(b="keyup");n("mjs-"+a,1E3,function(c,f,k){var h=Ia(k);x(f,b,function(b){b=b||window.event;b=Ta(b);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;try{h(c)}catch(e){ea(e)}delete c.$event;c instanceof R?c.$root.$check():c.$$watchers&&c.$$watchers.$checkAll();
b.preventDefault();return!1})})})(a[b])})();n("mjs-show",500,O(null,"MetaphorJs.view.AttributeHandler",{initial:!0,initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,c=function(){b.display=a?"":"none"};this.initial?c():H(this.node,a?"show":"hide",function(){a&&(b.display="")},!0).done(c)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));n("mjs-hide",500,O(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();
this.runAnimation(!a);this.initial=!1}}));n("mjs-if",500,O(null,"MetaphorJs.view.AttributeHandler",{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;delete this.parentEl;this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},g=
function(){c.removeChild(d)};b?ga(d)||(a.initial?e():H(d,"enter",e,!0)):ga(d)&&(a.initial?g():H(d,"leave",null,!0).done(g));a.initial=!1}}));n("mjs-ignore",0,ca);n("mjs-include",900,function(a,b,c,d){a=new ba({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});n("mjs-init",250,function(a,b,c){b.removeAttribute("mjs-init");Ia(c)(a)});var za=MetaphorJs.removeListener=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},Ua=MetaphorJs.isSubmittable=
function(a){var b=a.type?a.type.toLowerCase():"";return"input"==a.nodeName.toLowerCase()&&"radio"!=b&&"checkbox"!=b},Aa=navigator.userAgent.toLowerCase(),Va=function(){var a=parseInt((/android (\d+)/.exec(Aa)||[])[1],10)||!1;return function(){return a}}(),Ja=function(){var a=parseInt((/msie (\d+)/.exec(Aa)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(Aa)||[])[1],10)||!1);return function(){return a}}(),Ka=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==
Ja())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}();(function(){var a=function(a,c,d,e){this.el=a;this.cb=c;this.scb=e;this.cbContext=d;this.inputType=c=a.getAttribute("mjs-input-type")||a.type.toLowerCase();this.listeners=[];this.submittable=Ua(a);"radio"==c?this.initRadioInput():"checkbox"==c?this.initCheckboxInput():this.initTextInput()};a.prototype={el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=
this.inputType,c=this.listeners,d=this.radio,e=this.el,g,f,k,h;g=0;for(f=c.length;g<f;g++)if("radio"==a)for(k=0,h=d.length;k<h;k++)za(d[k],c[g][0],c[g][1]);else za(e,c[g][0],c[g][1]);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var a=this.el,c=a.type,a=a.name,d,e,g;this.onRadioInputChangeDelegate=m(this.onRadioInputChange,this);if(document.querySelectorAll)d=document.querySelectorAll("input[name="+a+"]");else{var f=document.getElementsByTagName("input"),
k;d=[];e=0;for(g=f.length;e<g;e++)k=f[e],k.type==c&&k.name==a&&d.push(k)}this.radio=d;this.listeners.push(["click",this.onRadioInputChangeDelegate]);e=0;for(g=d.length;e<g;e++)x(d[e],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=m(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);x(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,c=this,d=c.el,e=c.listeners,
g;if(!Va()){var f=function(){a=!0},k=function(){a=!1;h()};e.push(["compositionstart",f]);e.push(["compositionend",k]);x(d,"compositionstart",f);x(d,"compositionend",k)}var h=c.onTextInputChangeDelegate=function(){if(!a)c.onTextInputChange()};if(Ka("input"))e.push(["input",h]),x(d,"input",h);else{var l=function(a){g||(g=window.setTimeout(function(){h(a);g=null},0))},f=function(a){a=a||window.event;var b=a.keyCode;if(13==b&&c.submittable&&c.scb)return c.scb.call(c.cbContext,a);91===b||15<b&&19>b||37<=
b&&40>=b||l(a)};e.push(["keydown",f]);x(d,"keydown",f);Ka("paste")&&(e.push(["paste",l]),e.push(["cut",l]),x(d,"paste",l),x(d,"cut",l))}e.push(["change",h]);x(d,"change",h)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10)}return a},onTextInputChange:function(){var a=this.getValue();this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;this.cb.call(this.cbContext,a.checked?a.getAttribute("value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;
this.cb.call(this.cbContext,(a.target||a.srcElement).value)},setValue:function(a){var c=this.inputType,d,e;if("radio"==c)for(c=this.radio,d=0,e=c.length;d<e;d++){if(c[d].value==a){c[d].checked=!0;break}}else"checkbox"==c?(c=this.el,c.checked=!0===a||a==c.value):ya(this.el,a)},getValue:function(){var a=this.inputType,c,d;if("radio"==a){a=this.radio;c=0;for(d=a.length;c<d;c++)if(a[c].checked)return a[c].value;return null}return"checkbox"==a?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(ma(this.el))}};
MetaphorJs.lib.Input=a})();var Wa=MetaphorJs.lib.Input;n("mjs-model",1E3,O(null,"MetaphorJs.view.AttributeHandler",{inProg:!1,input:null,binding:null,initialize:function(a,b,c){this.node=b;this.input=new Wa(b,this.onInputChange,this);this.binding=b.getAttribute("mjs-data-binding")||"both";var d=this.input.getValue();this.supr(a,b,c);a=this.watcher.getLastResult();if("scope"!=this.binding&&this.watcher&&(d||a&&this.watcher.hasInputPipes()))this.onInputChange(a||d)},onInputChange:function(a){var b=
this.scope;"scope"!=this.binding&&(a&&"string"==typeof a&&-1!=a.indexOf("\\{")&&(a=a.replace(/\\{/g,"{")),this.watcher.setValue(a),this.inProg=!0,b instanceof R?b.$root.$check():this.watcher.checkAll(),this.inProg=!1)},destroy:function(){this.input.destroy();delete this.input;this.supr()},onChange:function(){var a=this.watcher.getLastResult();"input"==this.binding||this.inProg||this.input.setValue(a)}}));n("mjs-options",100,O(null,"MetaphorJs.view.AttributeHandler",{model:null,getterFn:null,defOption:null,
prevGroup:null,groupEl:null,fragment:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-options");this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&this.defOption.setAttribute("mjs-default-option","");try{this.watcher=aa(a,this.model,this.onChange,this)}catch(d){ea(d)}this.render(V(this.watcher.getValue()))},onChange:function(){this.render(V(this.watcher.getValue()))},renderOption:function(a,
b,c){var d=this.groupEl||this.fragment,e=Ja();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=document.createElement("optgroup"),d.setAttribute("label",a.group),a.disabledGroup&&d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;e&&9>e&&(b.innerHTML=a.name);a.disabled&&
b.setAttribute("disabled","disabled");d.appendChild(b)},render:function(a){var b=this.node,c=ma(b),d=this.defOption,e=this.scope.$new(),g,f;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);g=0;for(f=a.length;g<f;g++)this.renderOption(a[g],g,e);d&&b.insertBefore(d,b.firstChild);e.$destroy();b.appendChild(this.fragment);this.fragment=null;ya(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):
(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=Ha(a)}}));(function(){var a="selected checked disabled readonly required open".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){n("mjs-"+a,1E3,O(null,"MetaphorJs.view.AttributeHandler",{onChange:function(){this.watcher.getLastResult()?this.node.setAttribute(a,!0):this.node.removeAttribute(a)}}))})(a[b])})();var Xa=MetaphorJs.parentData=function(a,b){for(var c;a;){c=K(a,b);if(void 0!=c)return c;a=a.parentNode}},La=function(a){var b=
Xa(a,"mjs-transclude");if(b){a.firstChild&&K(a,"mjs-transclude",Y(a.childNodes));var c=a.parentNode,d=a.nextSibling,b=ja(b),e=V(b.childNodes);c.removeChild(a);c.insertBefore(b,d);return e}return null};n("mjs-transclude",1E3,function(a,b){return La(b)});n("mjs-view",200,function(a,b,c){b.removeAttribute("mjs-view");fa(c||"MetaphorJs.cmp.View",{scope:a,node:b},a,b);return!1});va("mjs-include",900,function(a,b,c,d){return(new ba({scope:a,node:b,tpl:b.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});
va("mjs-transclude",900,function(a,b){return La(b)});(function(){var a=function(a,b,e){if(""===b||"undefined"==typeof b)return!0;if("undefined"!=typeof a){if("boolean"==typeof a)return a===b;if(e instanceof RegExp)return b.test(""+a);if("strict"==e)return""+a===""+b;if(!0===e||null===e||"undefined"==typeof e)return-1!=""+a.indexOf(b);if(!1===e)return-1==""+a.indexOf(b)}return!1},b=function(b,d,e){if("object"!=typeof b)return"undefined"==typeof d.$?!0:a(b,d.$,e);var g,f;for(g in d)if("$"==g)for(f in b){if(a(b[f],
d.$,e))return!0}else if(a(b[g],d[g],e))return!0;return!1};M("filter.filter",function(a,d,e,g){d=e;"object"!=typeof d&&(d={$:d});e=[];var f,k;f=-1;for(k=a.length;++f<k;)b(a[f],d,g)&&e.push(a[f]);return e})})();M("filter.fromList",function(a,b,c){c=c||", ";return a&&a.length?(u(a)||(a=V(a)),a.join(c)):""});M("filter.limitTo",function(a,b,c){b=typeof a;if(!u(a)&&"string"!=b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if("string"==b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):
"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});M("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});M("filter.lowercase",function(a){return a.toLowerCase()});MetaphorJs.dateFormats={};M("filter.moment",function(a,b,c){c=Ma[c]||c;return moment(a).format(c)});var Ma=MetaphorJs.numberFormats=
{};M("filter.numeral",function(a,b,c){c=Ma[c]||c;return numeral(a).format(c)});M("filter.sortBy",function(a,b,c,d){d||(d="asc");a=a.slice();a.sort(function(a,b){var d=typeof a,k=a,h=b;if(d!=typeof b)return 0;"object"==d&&(k=a[c],h=b[c]);if("number"==typeof k)return k-h;k=(""+k).toLowerCase();h=(""+h).toLowerCase();return k===h?0:k>h?1:-1});return"desc"==d?a.reverse():a});M("filter.toArray",function(a){return V(a)});M("filter.toList",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+
a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=oa(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=P(a[b]));return a});M("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});M("filter.uppercase",function(a){return a.toUpperCase()});var Ya=MetaphorJs.initApp=function(a,b,c){a.removeAttribute("mjs-app");try{return fa(b||"MetaphorJs.cmp.App",!1,c,a,[a,c])}catch(d){return ea(d),A.reject(d)}};(MetaphorJs.onReady=function(a){var b=!1,c=!0,d=window,
e=d.document,g=e.documentElement,f=function(c){if("readystatechange"!=c.type||"complete"==e.readyState)za("load"==c.type?d:e,c.type,f),!b&&(b=!0)&&a.call(d,c.type||c)},k=function(){try{g.doScroll("left")}catch(a){setTimeout(k,50);return}f("poll")};if("complete"==e.readyState)a.call(d,"lazy");else{if(e.createEventObject&&g.doScroll){try{c=!d.frameElement}catch(h){}c&&k()}x(e,"DOMContentLoaded",f);x(e,"readystatechange",f);x(d,"load",f)}})(function(){var a=Pa("[mjs-app]"),b,c,d,e=function(a){a.run()};
b=-1;for(c=a.length;++b<c;)d=a[b],Ya(d,d.getAttribute&&d.getAttribute("mjs-app")).done(e)})})();
