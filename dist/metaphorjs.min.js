Array.prototype.indexOf||(Array.prototype.indexOf=function(e,p){var m;if(null==this)throw new TypeError('"this" is null or not defined');var k=Object(this),q=k.length>>>0;if(0===q)return-1;m=+p||0;Infinity===Math.abs(m)&&(m=0);if(m>=q)return-1;for(m=Math.max(0<=m?m:q-Math.abs(m),0);m<q;){if(m in k&&k[m]===e)return m;m++}return-1});
(function(){var e=Array.prototype.slice,p=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},m=function(a){return a&&a.constructor===Object},k=function(){var a=!1,b=!0,c=e.call(arguments),d=c.shift(),f,g,n;"boolean"==typeof c[c.length-1]&&(a=c.pop());"boolean"==typeof c[c.length-1]&&(b=a,a=c.pop());for(;f=c.shift();)for(g in f)if(f.hasOwnProperty(g)&&"undefined"!=typeof(n=f[g]))if(b)if(d[g]&&m(d[g])&&m(n))k(d[g],n,a,b);else{if(!0===
a||"undefined"==typeof d[g]||null===d[g])m(n)?(d[g]={},k(d[g],n,a,!1)):d[g]=n}else if(!0===a||"undefined"==typeof d[g]||null===d[g])d[g]=n;return d},q=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),n=Array.prototype.indexOf,r=Object.prototype.toString,d={},g=function(a){return d[a]||(d[a]=new RegExp("(?:^|\\s)"+a+"(?!\\S)",""))},f=function(a,b){return b?g(b).test(a.className):
!1},c=["0","0","0"],b=function(){for(var a=c.length,b;a;){a--;b=c[a].charCodeAt(0);if(57==b)return c[a]="A",c.join("");if(90==b)c[a]="0";else return c[a]=String.fromCharCode(b+1),c.join("")}c.unshift("0");return c.join("")},a={};"undefined"!=typeof window?window.MetaphorJs||(window.MetaphorJs={}):global.MetaphorJs||(global.MetaphorJs={});MetaphorJs.emptyFn=function(){};MetaphorJs.bind=p;MetaphorJs.addListener=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)};MetaphorJs.removeListener=
function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)};MetaphorJs.extend=k;MetaphorJs.trim=q;MetaphorJs.inArray=function(a,b){return b?n.call(b,a):-1};MetaphorJs.isArray=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&"[object Array]"==r.call(a)||!1};MetaphorJs.toArray=function(a){if(a&&void 0!=a.length){for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b}return a?[a]:[]};MetaphorJs.addClass=function(a,b){b&&!f(a,b)&&(a.className+=" "+b)};
MetaphorJs.removeClass=function(a,b){b&&(a.className=a.className.replace(g(b),""))};MetaphorJs.hasClass=f;MetaphorJs.nextUid=b;MetaphorJs.data=function(h,l,c){h=h._mjsId||(h._mjsId=b());var d=a[h];return"undefined"!=typeof c?(d||(d=a[h]={}),d[l]=c):d?d[l]:void 0};MetaphorJs.isPlainObject=m;MetaphorJs.isThenable=function(a){var b;return a&&"function"==typeof(b=a.then)?b:!1};MetaphorJs.isAttached=function(a){var b=document.body;return a===b?!0:b.contains(a)};MetaphorJs.error=function(a){var b=a.stack||
Error().stack;setTimeout(function(){"undefined"!=typeof console&&console.log&&(console.log(a),b&&console.log(b))},0)}})();
(function(){var e=window.MetaphorJs,p=e.extend,m=e.addListener,k=e.removeListener,q=e.isArray,n=[],r=[],d=!1,g=!1,f=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0},c,b=function(a){var h,l,c;if(q(a)){c=[];h=0;for(l=a.length;h<l;h++)c.push(b(a[h]));return c}if(a)switch(a.nodeType){case 1:return a.cloneNode(!0);case 3:return document.createTextNode(a.innerText||a.textContent);case 11:return a.cloneNode(!0)}return null};p(e,{registerAttributeHandler:function(a,b,l){c||(c=MetaphorJs.add);
n.push({priority:b,name:a,handler:c("attr."+a,l)});d=!1},registerTagHandler:function(a,b,l){c||(c=MetaphorJs.add);r.push({priority:b,name:a,handler:c("tag."+a,l)});g=!1},getAttributeHandlers:function(){d||(n.sort(f),d=!0);return n},getTagHandlers:function(){g||(r.sort(f),g=!0);return r},numberFormats:{},dateFormats:{},clone:b,async:function(a,b,l){a.apply(b,l||[])},toFragment:function(a){var b=document.createDocumentFragment();if("string"==typeof a){var l=document.createElement("div");l.innerHTML=
a;a=l.childNodes}if(a.nodeType)b.appendChild(a);else for(var l=-1,c=a.length>>>0;++l!==c;b.appendChild(a[0]));return b},app:function(a,b,l){b=b||"MetaphorJs.cmp.App";a.removeAttribute("mjs-app");try{return MetaphorJs.resolveComponent(b,!1,l,a,[a,l])}catch(c){MetaphorJs.error(c)}},isVisible:function(a){return!(0>=a.offsetWidth||0>=a.offsetHeight)},isInjectable:function(a){return a.length&&"function"==typeof a[a.length-1]},onReady:function(a){var b=!1,l=!0,c=window,d=c.document,f=d.documentElement,
g=function(l){if("readystatechange"!=l.type||"complete"==d.readyState)k("load"==l.type?c:d,l.type,g),!b&&(b=!0)&&a.call(c,l.type||l)},e=function(){try{f.doScroll("left")}catch(a){setTimeout(e,50);return}g("poll")};if("complete"==d.readyState)a.call(c,"lazy");else{if(d.createEventObject&&f.doScroll){try{l=!c.frameElement}catch(C){}l&&e()}m(d,"DOMContentLoaded",g);m(d,"readystatechange",g);m(c,"load",g)}}})})();
(function(){var e=/^[\w[:#.][\w\]*^|=!]*$/,p=/=([^\]]+)/,m=/ *, */,k=/(\([^)]*)\+/,q=/(\[[^\]]+)~/,n=/(~|>|\+)/,r=/ +/,d=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,g=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,f=/\D/,c=/[^(]*\(([^)]*)\)/,b=/\(.*/,a=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,h=MetaphorJs.toArray,l=document,G=!!l.getElementsByClassName,A=!!l.querySelectorAll,v={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==
a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var h=a.nodeIndex||0,l=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,c=b[1];if(h)return!((h+l)%c);var d=a.parentNode.firstChild;h++;do if(1==d.nodeType&&(d.nodeIndex=++h)&&a===d&&(h+l)%c)return 0;while(d=d.nextSibling);return 1},"nth-last-child":function(a,b){var h=a.nodeIndexLast||0,l=b[3]?("%"===b[2]?-1:1)*b[3]:0,c=b[1];if(h)return!((h+l)%c);var d=
a.parentNode.lastChild;h++;do if(1==d.nodeType&&(d.nodeLastIndex=h++)&&a===d&&(h+l)%c)return 0;while(d=d.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&l.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){a.parentNode.selectedIndex;
return!a.selected}},u={},B=function(a){return u[a]||(u[a]=new RegExp("(^| +)"+a+"($| +)"))},C={"":function(a,b){return!!a.getAttribute(b)},"=":function(a,b,h){return(b=a.getAttribute(b))&&b===h},"&=":function(a,b,h){return(b=a.getAttribute(b))&&B(h).test(b)},"^=":function(a,b,h){return(b=a.getAttribute(b)+"")&&!b.indexOf(h)},"$=":function(a,b,h){return(b=a.getAttribute(b)+"")&&b.indexOf(h)==b.length-h.length},"*=":function(a,b,h){return(b=a.getAttribute(b)+"")&&-1!=b.indexOf(h)},"|=":function(a,b,
h){return(b=a.getAttribute(b)+"")&&(b===h||!!b.indexOf(h+"-"))},"!=":function(a,b,h){return!(b=a.getAttribute(b))||!B(h).test(b)}},x=function(y,u){u=u||l;var w=[],z=null,E,x,B,t,J,F,D;if(A)try{w=h(u.querySelectorAll(y.replace(p,'="$1"')))}catch(s){z=!0}if(!A||z)if(e.test(y))switch(z=0,y.charAt(0)){case "#":z=y.slice(1);w=l.getElementById(z);w.id!==z&&(w=l.all[z]);w=w?[w]:[];break;case ".":E=y.slice(1);if(G)w=h((w=u.getElementsByClassName(E)).length?w:[]);else{E=" "+E+" ";x=u.getElementsByTagName("*");
for(B=0;t=x[B++];)-1!=(" "+t.className+" ").indexOf(E)&&(w[z++]=t);w=z?w:[]}break;case ":":x=u.getElementsByTagName("*");B=0;J=y.replace(c,"$1");for(F=y.replace(b,"");t=x[B++];)v[F]&&!v[F](t,J)&&(w[z++]=t);w=z?w:[];break;case "[":x=u.getElementsByTagName("*");B=0;t=a.exec(y);E=t[1];D=t[2]||"";for(J=t[3];t=x[B++];)C[D]&&(C[D](t,E,J)||"class"===E&&C[D](t,"className",J))&&(w[z++]=t);w=z?w:[];break;default:w=h((w=u.getElementsByTagName(y)).length?w:[])}else{for(var U=y.split(m),V=U.length-1,Z=!!V,W,X,
I,T,N,O,P,Q,Y,H,R,S;z=U[V--];){X=(W=z.replace(k,"$1%").replace(q,"$1&").replace(n," $1 ").split(r)).length;B=0;T=" ";for(x=[u];I=W[B++];)if(" "!==I&&">"!==I&&"~"!==I&&"+"!==I&&x){I=I.match(d);N=I[1]||"*";O=I[2];P=I[3]?" "+I[3]+" ":"";E=I[4];D=I[5]||"";F=I[7];J="nth-child"===F||"nth-last-child"===F?g.exec("even"===I[8]&&"2n"||"odd"===I[8]&&"2n%1"||!f.test(I[8])&&"0n%"+I[8]||I[8]):I[8];Q=[];z=Y=0;for(R=B==X;H=x[Y++];)switch(T){case " ":S=H.getElementsByTagName(N);for(H=0;t=S[H++];)O&&t.id!==O||P&&-1==
(" "+t.className+" ").indexOf(P)||!(!E||C[D]&&(C[D](t,E,I[6])||"class"===E&&C[D](t,"className",I[6])))||t.yeasss||(v[F]?v[F](t,J):F)||(R&&(t.yeasss=1),Q[z++]=t);break;case "~":for(N=N.toLowerCase();(H=H.nextSibling)&&!H.yeasss;)1!=H.nodeType||"*"!==N&&H.nodeName.toLowerCase()!==N||O&&H.id!==O||P&&-1==(" "+H.className+" ").indexOf(P)||!(!E||C[D]&&(C[D](t,E,I[6])||"class"===E&&C[D](t,"className",I[6])))||H.yeasss||(v[F]?v[F](H,J):F)||(R&&(H.yeasss=1),Q[z++]=H);break;case "+":for(;(H=H.nextSibling)&&
1!=H.nodeType;);!H||H.nodeName.toLowerCase()!==N.toLowerCase()&&"*"!==N||O&&H.id!==O||P&&-1==(" "+t.className+" ").indexOf(P)||!(!E||C[D]&&(C[D](t,E,I[6])||"class"===E&&C[D](t,"className",I[6])))||H.yeasss||(v[F]?v[F](H,J):F)||(R&&(H.yeasss=1),Q[z++]=H);break;case ">":for(S=H.getElementsByTagName(N),B=0;t=S[B++];)t.parentNode!==H||O&&t.id!==O||P&&-1==(" "+t.className+" ").indexOf(P)||!(!E||C[D]&&(C[D](t,E,I[6])||"class"===E&&C[D](t,"className",I[6])))||t.yeasss||(v[F]?v[F](t,J):F)||(R&&(t.yeasss=
1),Q[z++]=t)}x=Q}else T=I;if(Z){if(!x.concat){Q=[];for(H=0;t=x[H];)Q[H++]=t;x=Q}w=x.concat(1==w.length?w[0]:w)}else w=x}for(z=w.length;z--;)w[z].yeasss=w[z].nodeIndex=w[z].nodeIndexLast=null}return w};MetaphorJs.select=x;MetaphorJs.select.is=function(a,b){var h=x(b,a.parentNode),l,c;l=-1;for(c=h.length;++l<c;)if(h[l]===a)return!0;return!1}})();
(function(){var e=/\r/g,p=MetaphorJs.trim,m=MetaphorJs.toArray,k=MetaphorJs.inArray,q=MetaphorJs.isArray,n=function(d){var g,f;if((g=r[d.type]||r[d.nodeName.toLowerCase()])&&"get"in g&&void 0!==(f=g.get(d,"value")))return f;f=d.value;return"string"===typeof f?f.replace(e,""):null==f?"":f},r={option:{get:function(d){var g=d.getAttribute("value");return null!=g?g:p(d.innerText||d.textContent)}},select:{get:function(d){for(var g,f=d.options,c=d.selectedIndex,b=(d="select-one"===d.type||0>c)?null:[],
a=d?c+1:f.length,h,l=0>c?a:d?c:0;l<a;l++)if(g=f[l],h=g.disabled||null!==g.getAttribute("disabled")||f.parentNode.disabled,(g.selected||l===c)&&!h){g=n(g);if(d)return g;b.push(g)}return b},set:function(d,g){for(var f,c,b=d.options,a=m(g),h=b.length;h--;)if(c=b[h],c.selected=k(c.value,a))f=!0;f||(d.selectedIndex=-1);return a}}};r.radio=r.checkbox={set:function(d,g){if(q(g))return d.checked=0<=k(n(d),g)},get:function(d){return null===d.getAttribute("value")?"on":d.value}};MetaphorJs.getValue=n;MetaphorJs.setValue=
function(d,g){if(1===d.nodeType){null==g?g="":"number"===typeof g&&(g+="");var f=r[d.type]||r[d.nodeName.toLowerCase()];f&&"set"in f&&void 0!==f.set(this,g,"value")||(d.value=g)}}})();
(function(){var e=function(){return!1},p=function(){return!0},m=function(k){if(k instanceof m)return k;if(!(this instanceof m))return new m(k);for(var q in k)if(!this[q])try{this[q]=k[q]}catch(n){}this.originalEvent=k;this.type=k.type;!this.target&&k.srcElement&&(this.target=k.srcElement);var r,d=k.button;"undefined"==typeof this.pageX&&null!=k.clientX&&(r=this.target?this.target.ownerDocument||document:document,q=r.documentElement,r=r.body,this.pageX=k.clientX+(q&&q.scrollLeft||r&&r.scrollLeft||
0)-(q&&q.clientLeft||r&&r.clientLeft||0),this.pageY=k.clientY+(q&&q.scrollTop||r&&r.scrollTop||0)-(q&&q.clientTop||r&&r.clientTop||0));this.which||void 0===d||(this.which=d&1?1:d&2?3:d&4?2:0);this.isDefaultPrevented=k.defaultPrevented||void 0===k.defaultPrevented&&!1===k.returnValue?p:e;this.timeStamp=k&&k.timeStamp||(new Date).getTime()};m.prototype={isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=
p;e.returnValue=!1;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p;e&&e.stopImmediatePropagation&&e.stopImmediatePropagation();this.stopPropagation()}};window.MetaphorJs||(window.MetaphorJs={});MetaphorJs.normalizeEvent=function(e){return new m(e)}})();
(function(){var e=MetaphorJs.extend,p=MetaphorJs.bind,m=MetaphorJs.addListener,k=MetaphorJs.removeListener,q=MetaphorJs.getValue,n=MetaphorJs.setValue,r=function(d,g,f,c){this.el=d;this.cb=g;this.scb=c;this.cbContext=f;this.inputType=g=d.getAttribute("mjs-input-type")||d.type.toLowerCase();this.listeners=[];f=d.type?d.type.toLowerCase():"";this.submittable="input"==d.nodeName.toLowerCase()&&"radio"!=f&&"checkbox"!=f;"radio"==g?this.initRadioInput():"checkbox"==g?this.initCheckboxInput():this.initTextInput()};
e(r.prototype,{el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var d=this.inputType,g=this.listeners,f=this.radio,c=this.el,b,a,h,l;b=0;for(a=g.length;b<a;b++)if("radio"==d)for(h=0,l=f.length;h<l;h++)k(f[h],g[b][0],g[b][1]);else k(c,g[b][0],g[b][1]);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var d=this.el,g=d.type,d=d.name,f,c,b;this.onRadioInputChangeDelegate=p(this.onRadioInputChange,
this);if(document.querySelectorAll)f=document.querySelectorAll("input[name="+d+"]");else{var a=document.getElementsByTagName("input"),h;f=[];c=0;for(b=a.length;c<b;c++)h=a[c],h.type==g&&h.name==d&&f.push(h)}this.radio=f;this.listeners.push(["click",this.onRadioInputChangeDelegate]);c=0;for(b=f.length;c<b;c++)m(f[c],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=p(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);
m(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var d=MetaphorJs.browser,g=!1,f=this,c=f.el,b=f.listeners,a;if(!d.android){var h=function(){g=!0},l=function(){g=!1;e()};b.push(["compositionstart",h]);b.push(["compositionend",l]);m(c,"compositionstart",h);m(c,"compositionend",l)}var e=f.onTextInputChangeDelegate=function(){if(!g)f.onTextInputChange()};if(d.hasEvent("input"))b.push(["input",e]),m(c,"input",e);else{var A=function(b){a||(a=window.setTimeout(function(){e(b);
a=null},0))},h=function(a){a=a||window.event;var b=a.keyCode;if(13==b&&f.submittable&&f.scb)return f.scb.call(f.cbContext,a);91===b||15<b&&19>b||37<=b&&40>=b||A(a)};b.push(["keydown",h]);m(c,"keydown",h);d.hasEvent("paste")&&(b.push(["paste",A]),b.push(["cut",A]),m(c,"paste",A),m(c,"cut",A))}b.push(["change",e]);m(c,"change",e)},onTextInputChange:function(){var d=this.el.value;switch(this.inputType){case "number":d=parseInt(d,10)}this.cb.call(this.cbContext,d)},onCheckboxInputChange:function(){var d=
this.el;this.cb.call(this.cbContext,d.checked?d.getAttribute("value")||!0:!1)},onRadioInputChange:function(d){d=d||window.event;this.cb.call(this.cbContext,(d.target||d.srcElement).value)},setValue:function(d){var g=this.inputType,f,c;if("radio"==g)for(g=this.radio,f=0,c=g.length;f<c;f++){if(g[f].value==d){g[f].checked=!0;break}}else"checkbox"==g?(g=this.el,g.checked=!0===d||d==g.value):n(this.el,d)},getValue:function(){var d=this.inputType,g,f;if("radio"==d){d=this.radio;g=0;for(f=d.length;g<f;g++)if(d[g].checked)return d[g].value;
return null}return"checkbox"==d?this.el.checked?this.el.getAttribute("value")||!0:!1:q(this.el)}});window.MetaphorJs||(window.MetaphorJs={});MetaphorJs.lib||(MetaphorJs.lib={});MetaphorJs.lib.Input=r})();
(function(){var e="undefined"!=typeof window?window:global,p={},m=function(k,q){if(p[k]||q)return p[k];var d=k.split("."),g,f=d.length,c,b=e;for(g=0;g<f;g++){c=d[g];if(!b[c])return null;b=b[c]}return b},k=function(k,q){var d;d=k.split(".");var g,f=d.pop();g=d.join(".");var c=d.length,b,a=e;if(p[g])d=[p[g],f];else{for(g=0;g<c;g++)b=d[g],a[b]||(a[b]={}),a=a[b];d=[a,f]}d[0][d[1]]=q;return p[k]=q},q=function(e,k){return p[e]=k};k("MetaphorJs.ns",{register:k,exists:function(e){return p[e]?!0:!1},get:m,
add:q,remove:function(e){delete p[e]}});MetaphorJs.r=k;MetaphorJs.g=m;MetaphorJs.add=q;"undefined"!=typeof module&&(module.exports=MetaphorJs.ns)})();
(function(){var e;if("undefined"!=typeof global)try{e=require("metaphorjs-namespace")}catch(p){e=global.MetaphorJs.ns}else e=window.MetaphorJs.ns;var m={}.undefined,k=Array.prototype.slice,q=function(a,b){return d(function(){},a,b)},n=function(a,b,c){return function(){var d=m,f=this.supr;this.supr=a.prototype[b]||function(){};try{d=c.apply(this,arguments)}catch(e){}this.supr=f;return d}},r=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(a[d]="function"===typeof b[d]&&c.prototype&&"function"===
typeof c.prototype[d]?n(c,d,b[d]):b[d])},d=function(a,b,c){var d=function(){};d.prototype=a.prototype;d=new d;c=c||function(){this.initialize&&this.initialize.apply(this,arguments)};r(d,b,a);c.prototype=d;c.prototype.constructor=c;c.prototype.getClass=function(){return this.__proto__.constructor.__class};c.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};c.__instantiate=function(a){return function(){var b=function(){},h;b.prototype=a.prototype;b=new b;h=a.prototype.constructor.apply(b,
arguments);return"object"==typeof h?h:b}}(c);return c},g=function(a,b,c,f,g,k){null===a&&(a="");"function"==typeof a?(g=c,"string"==typeof b?(g=f,f=c):(f=b,c=a,b=null),a=null):"string"!=typeof a&&(g=b,f=a,a=c=b=null);"string"!=typeof b&&"function"!=typeof b&&(g=f,f=c,c=b,b=null);"function"!=typeof c&&(g=f,f=c,c=null);f=f||{};var n=b&&"string"==typeof b?e.get(b):b;if(b&&!n)throw Error(b+" not found");b=n?d(n,f,c):q(f,c);b.__isMetaphorClass=!0;b.__parent=n;b.__parentClass=n?n.__class:null;b.__class=
a;if(g)for(var C in g)g.hasOwnProperty(C)&&(b[C]=g[C]);a&&(k?e.add(a,b):e.register(a,b));g&&g.alias&&e.add(g.alias,b);return b},f=function(a,b,c,d,f){return g(a,b,c,d,f,!0)},c=function(a){var b=e.get(a),c=k.call(arguments,1);if(!b)throw Error(a+" not found");return b.__instantiate.apply(this,c)},b=function(a,b){var c="string"==typeof b?e.get(b):b;return c?a instanceof c:!1},a=function(a,b){var c=a,d=e.get;"string"!=typeof b&&(b=b.getClass?b.getClass():b.prototype.constructor.__class);for("string"==
typeof a&&(c=d(a));c;){if(c.prototype.constructor.__class==b)return!0;c&&(c=c.getParentClass?d(c.getParentClass()):c.__parent)}return!1};"undefined"!=typeof global?module.exports={define:g,d:g,defineCache:f,dc:f,create:c,c:c,is:b,isSubclass:a}:(MetaphorJs.define=MetaphorJs.d=g,MetaphorJs.defineCache=MetaphorJs.dc=f,MetaphorJs.create=MetaphorJs.c=c,MetaphorJs.is=b,MetaphorJs.isSubclass=MetaphorJs.iss=a)})();
(function(){var e="undefined"!=typeof window?window.setTimeout:global.setTimeout,p=function(b){var a;return!b||"object"!=typeof b&&"function"!=typeof b||"function"!=typeof(a=b.then)?!1:a},m=Function.prototype.bind?function(b,a){return b.bind(a)}:function(b,a){return function(){return b.apply(a,arguments)}},k=[],q=!1,n="undefined"!=typeof process?process.nextTick:function(b){e(b,0)},r=function(){q=!0;var b=k.shift();n(function(){b[0].apply(b[1],b[2]);k.length?r():q=!1},0)},d=function(b,a,c){c=c||[];
k.push([b,a,c]);q||r()},g=function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},f=function(b,a){return function(c){try{a.resolve(b(c))}catch(d){a.reject(d)}}},c=function(b,a){if(b instanceof c)return b;if(!(this instanceof c))return new c(b,a);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if("undefined"!=typeof b)if(p(b)||"function"!=typeof b)this.resolve(b);else try{b.call(a,m(this.resolve,this),m(this.reject,this))}catch(h){this.reject(h)}};g(c.prototype,{_state:0,_fulfills:null,
_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(b,a){var h;if(0==this._state)if(b===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(h=p(b)){b instanceof c?b.then(m(this._processResolveValue,
this),m(this._processRejectReason,this)):(new c(h,b)).then(m(this._processResolveValue,this),m(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}a.call(this,b)}},_callResolveHandlers:function(){this._done();for(var b=this._fulfills,a;a=b.shift();)d(a[0],a[1],[this._value]);this._cleanup()},_doResolve:function(b){this._value=b;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(b){this._processValue(b,this._doResolve)},resolve:function(b){if(this._triggered)return this;
this._triggered=!0;this._processResolveValue(b);return this},_callRejectHandlers:function(){this._fail();for(var b=this._rejects,a;a=b.shift();)d(a[0],a[1],[this._reason]);this._cleanup()},_doReject:function(b){this._state=2;this._reason=b;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(b){this._processValue(b,this._doReject)},reject:function(b){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(b);return this},then:function(b,a){var h=new c,l=this._state;
0==l||0!=this._wait?(b&&"function"==typeof b?this._fulfills.push([f(b,h),null]):this._fulfills.push([h.resolve,h]),a&&"function"==typeof a?this._rejects.push([f(a,h),null]):this._rejects.push([h.reject,h])):1==l?b&&"function"==typeof b?d(f(b,h),null,[this._value]):h.resolve(this._value):2==l&&(a&&"function"==typeof a?d(f(a,h),null,[this._reason]):h.reject(this._reason));return h},"catch":function(b){return this.then(null,b)},_done:function(){for(var b=this._dones,a;a=b.shift();)a[0].call(a[1]||null,
this._value)},done:function(b,a){var c=this._state;1==c&&0==this._wait?b.call(a||null,this._value):0==c&&this._dones.push([b,a]);return this},_fail:function(){for(var b=this._fails,a;a=b.shift();)a[0].call(a[1]||null,this._reason)},fail:function(b,a){var c=this._state;2==c&&0==this._wait?b.call(a||null,this._reason):0==c&&this._fails.push([b,a]);return this},always:function(b,a){this.done(b,a);this.fail(b,a);return this},promise:function(){return{then:m(this.then,this),done:m(this.done,this),fail:m(this.fail,
this),always:m(this.always,this)}},after:function(b){var a=this;if(p(b)){a._wait++;var c=function(){a._wait--;0==a._wait&&0!=a._state&&(1==a._state?a._callResolveHandlers():a._callRejectHandlers())};"function"==typeof b.done?b.done(c):b.then(c)}return a}});g(c,{resolve:function(b){return new c(b)},reject:function(b){var a=new c;a.reject(b);return a},all:function(b){if(!b.length)return c.resolve(null);var a=new c,h=b.length,d=Array(h),f=h,g,e,k=function(b,c){d[c]=b;f--;0==f&&a.resolve(d)};for(g=0;g<
h;g++)(function(h){e=b[g];e instanceof c?e.done(function(a){k(a,h)}).fail(a.reject,a):p(e)||"function"==typeof e?(new c(e)).done(function(a){k(a,h)}).fail(a.reject,a):k(e,h)})(g);return a},when:function(){return c.all(arguments)},allResolved:function(b){if(!b.length)return c.resolve(null);var a=new c,h=b.length,d=[],f=h,g,e,k=function(a){d.push(a);n()},n=function(){f--;0==f&&a.resolve(d)};for(g=0;g<h;g++)e=b[g],e instanceof c?e.done(k).fail(n):p(e)||"function"==typeof e?(new c(e)).done(k).fail(n):
k(e);return a},race:function(b){if(!b.length)return c.resolve(null);var a=new c,h=b.length,d,f;for(d=0;d<h&&(f=b[d],f instanceof c?f.done(a.resolve,a).fail(a.reject,a):p(f)||"function"==typeof f?(new c(f)).done(a.resolve,a).fail(a.reject,a):a.resolve(f),a.isPending());d++);return a}});"undefined"==typeof global?(window.Promise||(window.Promise=c),window.MetaphorJs&&(MetaphorJs.r?MetaphorJs.r("MetaphorJs.lib.Promise",c):(MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Promise=c))):"undefined"!=typeof module&&
(module.exports=c)})();
(function(){"undefined"==typeof window&&(global.window=global);if(window.Promise)e=window.Promise;else{var e;if("undefined"!=typeof global)try{e=require("metaphorjs-promise")}catch(p){global.Promise&&(e=global.Promise)}else window.MetaphorJs&&MetaphorJs.lib&&MetaphorJs.lib.Promise&&(e=MetaphorJs.lib.Promise)}var m=window.MetaphorJs&&MetaphorJs.nextUid?MetaphorJs.nextUid:function(){return Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10)},k=function(b,a){for(var c in a)a.hasOwnProperty(c)&&
(b[c]=a[c])},q=Array.prototype.slice,n="undefined"!=typeof process?process.nextTick:function(b){window.setTimeout(b,0)},r=Function.prototype.bind?function(b,a){return b.bind(a)}:function(b,a){return function(){return b.apply(a,arguments)}},d=function(){this.events={}};k(d.prototype,{createEvent:function(b,a){b=b.toLowerCase();var c=this.events;c[b]||(c[b]=new g(b,a));return c[b]},getEvent:function(b){b=b.toLowerCase();return this.events[b]},on:function(b,a,c,d){b=b.toLowerCase();var f=this.events;
f[b]||(f[b]=new g(b));return f[b].on(a,c,d)},once:function(b,a,c,d){d=d||{};d.limit=1;return this.on(b,a,c,d)},un:function(b,a,c){b=b.toLowerCase();var d=this.events;d[b]&&d[b].un(a,c)},hasListener:function(b,a,c){b=b.toLowerCase();var d=this.events;return d[b]?d[b].hasListener(a,c):!1},removeAllListeners:function(b){var a=this.events;a[b]&&a[b].removeAllListeners()},triggerAsync:function(){var b=arguments[0],a=this.events,b=b.toLowerCase();if(!a[b])return[];b=a[b];return b.triggerAsync.apply(b,q.call(arguments,
1))},trigger:function(){var b=arguments[0],a=this.events,b=b.toLowerCase();if(!a[b])return null;b=a[b];return b.trigger.apply(b,q.call(arguments,1))},suspendEvent:function(b){b=b.toLowerCase();var a=this.events;a[b]&&a[b].suspend()},suspendAllEvents:function(){var b=this.events,a;for(a in b)b[a].suspend()},resumeEvent:function(b){b=b.toLowerCase();var a=this.events;a[b]&&a[b].resume()},resumeAllEvents:function(){var b=this.events,a;for(a in b)b[a].resume()},destroyEvent:function(b){var a=this.events;
a[b]&&(a[b].removeAllListeners(),a[b].destroy(),delete a[b])},destroy:function(b){var a=this.events;if(b)b=b.toLowerCase(),a[b]&&(a[b].destroy(),delete a[b]);else{for(var c in a)a[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var b="createEvent getEvent on un once hasListener removeAllListeners triggerAsync trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),a={},c,d=-1,f=b.length;++d<f;c=b[d],a[c]=r(this[c],this));this.api=a}return this.api}});
var g=function(b,a){this.name=b;this.listeners=[];this.map={};this.hash=m();this.uni="$$"+b+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=a||!1};k(g.prototype,{getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(b,a,c){if(!b)return null;a=a||null;c=c||{};var d=this.uni,f=a||b;if(f[d]&&!c.allowDupes)return null;var g=++this.lid,e=c.first||!1;f[d]=g;b={fn:b,scope:a,uniScope:f,id:g,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,
prepend:c.prepend};e?this.listeners.unshift(b):this.listeners.push(b);this.map[g]=b;return g},once:function(b,a,c){c=c||{};c.once=!0;return this.on(b,a,c)},un:function(b,a){var c=-1,d=this.uni,f=this.listeners,g;g=b==parseInt(b)?b:(a||b)[d];if(!g)return!1;for(var e=0,k=f.length;e<k;e++)if(f[e].id==g){c=e;delete f[e].uniScope[d];break}if(-1==c)return!1;f.splice(c,1);delete this.map[g];return!0},hasListener:function(b,a){var c=this.listeners,d;if(b){d="function"!=typeof b?b:(a||b)[this.uni];if(!d)return!1;
for(var f=0,g=c.length;f<g;f++)if(c[f].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var b=this.listeners,a=this.uni,c,d;c=0;for(d=b.length;c<d;c++)delete b[c].uniScope[a];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(b,a){var c;b.append||b.prepend?(c=q.call(a),b.prepend&&(c=b.prepend.concat(c)),b.append&&(c=c.concat(b.append))):c=a;return c},triggerAsync:function(){if("undefined"==typeof e)throw Error("Promises are not defined");
var b=this,a=b.listeners,c=b.returnResult,d=q.call(arguments),f=[],g=[],k,m,p;if(b.suspended||0==a.length)return e.resolve(null);m=0;for(p=a.length;m<p;m++)f.push(a[m]);for(m=function(a){k=b._prepareArgs(a,d);return new e(function(c,d){n(function(){try{c(a.fn.apply(a.scope,k))}catch(f){d(f)}a.called++;a.called==a.limit&&b.un(a.id)},0)})};(a=f.shift())&&(!a||!b.map[a.id]||(a.count++,a.count<a.start||(g.push(m(a)),"first"!=c))););return"last"==c?[g.pop()]:g},trigger:function(){var b=this.listeners,
a=this.returnResult;if(this.suspended||0==b.length)return null;for(var c="all"==a?[]:null,d,f,b="first"==a?[b[0]]:q.call(b);d=b.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){f=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==a&&c.push(f);if("first"==a)return f;"last"==a&&(c=f);if(!1==a&&!1===f)break}if(a)return c}});var f=window.MetaphorJs;if(f){var c=new d;k(f,c.getApi())}f&&f.r?f.r("MetaphorJs.lib.Observable",d):(window.MetaphorJs=
window.MetaphorJs||{},MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Observable=d);"undefined"!=typeof global&&(module.exports=d)})();
(function(){"undefined"==typeof window&&(global.window=global);var e,p;if("undefined"!=typeof global)try{e=require("metaphorjs-observable")}catch(m){global.Observable&&(e=global.Observable)}"undefined"==typeof MetaphorJs||e||(e=MetaphorJs.lib.Observable,p=MetaphorJs.g);var k=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,q={},n=window.MetaphorJs&&MetaphorJs.nextUid?MetaphorJs.nextUid:function(){var a;a=Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10);return q[a]?n():q[a]=
a},r=Object.prototype.toString,d=function(a){return"[object Array]"===r.call(a)},g=function(a){return"[object Date]"===r.call(a)},f=function(a){return"[object RegExp]"===r.call(a)},c=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},b=function(a){if("string"!=typeof a)return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},a=function(b,s){if(c(b))throw Error("Cannot copy window object");if(s){if(b===s)throw Error("Objects are identical");
if(d(b))for(var h=s.length=0;h<b.length;h++)s.push(a(b[h]));else{for(h in s)delete s[h];for(h in b)s[h]=a(b[h])}}else(s=b)&&(d(b)?s=a(b,[]):g(b)?s=new Date(b.getTime()):f(b)?s=new RegExp(b.source):null!=b&&"object"===typeof b&&(s=a(b,{})));return s},h=function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var s=typeof a,e;if(s==typeof b&&"object"==s)if(d(a)){if(!d(b))return!1;if((s=a.length)==b.length){for(e=0;e<s;e++)if(!h(a[e],b[e]))return!1;return!0}}else{if(g(a))return g(b)&&
a.getTime()==b.getTime();if(f(a)&&f(b))return a.toString()==b.toString();if(c(a)||c(b)||d(b))return!1;s={};for(e in a)if(("$"!==e.charAt(0)||"object"!=typeof a[e])&&"function"!==typeof a[e]){if(!h(a[e],b[e]))return!1;s[e]=!0}for(e in b)if(!s.hasOwnProperty(e)&&"$"!==e.charAt(0)&&void 0!==b[e]&&"function"!==typeof b[e])return!1;return!0}return!1},l=function(a,b){var c=a.length,s=b.length,d=Array(c+1),f=Array(c+1),e,g,l,D,F=0;if(c==s&&0==c)return{changes:0,distance:0,prescription:[]};for(e=0;e<=c;e++)d[e]=
Array(s+1),f[e]=Array(s+1),d[e][0]=e,f[e][0]="D";for(e=0;e<=s;e++)d[0][e]=e,f[0][e]="I";for(e=1;e<=c;e++)for(g=1;g<=s;g++)l=h(a[e-1],b[g-1])?0:1,d[e][g-1]<d[e-1][g]&&d[e][g-1]<d[e-1][g-1]+l?(d[e][g]=d[e][g-1]+1,f[e][g]="I"):d[e-1][g]<d[e-1][g-1]+l?(d[e][g]=d[e-1][g]+1,f[e][g]="D"):(d[e][g]=d[e-1][g-1]+l,f[e][g]=1==l?"R":"-");D=[];e=c;g=s;do l=f[e][g],D.push(l),"-"!=l&&F++,"R"==l||"-"==l?(e--,g--):"D"==l?e--:g--;while(0!=e||0!=g);return{changes:F/D.length,distance:d[c][s],prescription:D.reverse()}},
G=window.MetaphorJs?MetaphorJs.trim:function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),A,v=function(a,c,s,f,g){A||(A=new e);var h=n(),l;this.origCode=c;d(a)&&null===c?l="array":("string"!=typeof c&&(f=s,s=c,c=null,l="object"),"string"==typeof a&&(f=s,s=c,c=a,a=null),c&&a&&(l=a.hasOwnProperty(c)?"attr":"expr"),c&&!a&&(l="expr"));if(s)A.on(h,s,f||this,{append:[g],allowDupes:!0});
if("expr"==l){c=this._processInputPipes(c,a);c=this._processPipes(c,a);if(this.inputPipes||this.pipes)c=B(a,c),l=a.hasOwnProperty(c)?"attr":"expr";if(this.staticValue=b(c))l="static"}this.userData=g;this.code=c;this.id=h;this.type=l;this.obj=a;"expr"==l&&(this.getterFn=K(c));this.curr=this._getValue()};(function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(v.prototype,{staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,pipes:null,
inputPipes:null,lastSetValue:null,userData:null,_processInputPipes:function(a,b){if(-1==a.indexOf(">>"))return a;for(var c=0,s=a.length,d=[],f,e,g,h=a;c<s&&-1!=(f=a.indexOf(">>",c));)e=a.charAt(f-1),g=a.charAt(f+2),"\\"!=e&&"'"!=e&&'"'!=e&&"'"!=g&&'"'!=g&&(c=G(a.substring(c,f)).split(":"),h=a.substr(f+2),this._addPipe(d,c,b,this.onInputParamChange)),c=f+2;d.length&&(this.inputPipes=d);return G(h)},_addPipe:function(a,b,c,s){var d=b.shift(),f=null,e=[],g;p&&(f=p("filter."+d,!0));f||(f=window[d]||c[d]);
if("function"==typeof f){d=-1;for(g=b.length;++d<g;e.push(u(c,b[d],s,this)));a.push([f,b,e])}},_processPipes:function(a,b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,s=[],f,e,g,h=!1,l=a;c<d;)if(-1!=(f=a.indexOf("|",c)))e=a.charAt(f-1),g=a.charAt(f+1),"|"!=e&&"'"!=e&&'"'!=e&&"|"!=g&&"'"!=g&&'"'!=g&&(h?(c=G(a.substring(c,f)).split(":"),this._addPipe(s,c,b)):(h=!0,l=G(a.substring(0,f)))),c=f+1;else{h&&(c=G(a.substr(c)).split(":"),this._addPipe(s,c,b,this.onPipeParamChange));break}s.length&&
(this.pipes=s);return l},_checkCode:function(){var a=this._getValue(),b=!1,c=this.curr;if(d(c)&&d(a))return b=l(c,a),b.changes?(this.curr=a.slice(),A.trigger(this.id,b,a,c),!0):!1;a!==c&&(this.curr=a,A.trigger(this.id,a,c),b=!0);return b},_checkObject:function(){var b=this.obj,c=this.curr;return h(c,b)?!1:(this.curr=a(b),A.trigger(this.id,b,c),!0)},_checkArray:function(){var a=this.curr,b=this.obj,c=l(a,b);return c.changes?(this.curr=b.slice(),A.trigger(this.id,c,b,a),!0):!1},_getValue:function(){var b;
switch(this.type){case "static":b=this.staticValue;break;case "attr":b=this.obj[this.code];break;case "expr":b=this.getterFn(this.obj);"undefined"==typeof b&&(b="");break;case "object":b=a(this.obj);break;case "array":b=this.obj}d(b)&&(b=b.slice());return b=this._runThroughPipes(b,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,f,e=b.length,g=this.obj,h,l;for(c=0;c<e;c++){f=b[c][1];d=[];h=-1;for(l=f.length;++h<l;d.push(s(f[h],g)));d.unshift(g);d.unshift(a);a=b[c][0].apply(null,d)}}return a},
subscribe:function(a,b,c){A.on(this.id,a,b,c)},unsubscribe:function(a,b){return A.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);if("attr"==b)this.obj[this.code]=a;else if("expr"==b)this.setterFn||(this.setterFn=J(this.code)),this.setterFn(this.obj,a);else if("array"==b)this.obj=a;else throw"Cannot set value";
},onInputParamChange:function(){this.setValue(this.lastSetValue)},onPipeParamChange:function(){this.check()},check:function(){switch(this.type){case "expr":case "attr":case "static":return this._checkCode();case "object":return this._checkObject();case "array":return this._checkArray()}return!1},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},
clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,b){var c=this.id;A.un(c,a,b);return A.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,c,d,s,f,e;this.itv&&this.clearInterval();if(a)for(c=-1,d=a.length;++c<d;)for(e=a[c][2],s=-1,f=e.length;++s<f;)e[s].unsubscribeAndDestroy(this.check,this);if(b)for(c=-1,d=b.length;++c<d;)for(e=b[c][2],s=-1,f=e.length;++s<f;)e[s].unsubscribeAndDestroy(this.onInputParamChange,
this);this.obj&&delete this.obj.$$watchers[this.origCode];delete this.id;delete this.curr;delete this.obj;delete this.pipes;delete this.inputPipes;delete this.origCode;delete this.code;delete this.getterFn;delete this.setterFn;delete this.lastSetValue;delete this.staticValue;delete this.userData;A.destroyEvent(this.id)}});var u=function(a,b,c,d,s){b=B(a,G(b));return a?(a.$$watchers||(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?b++:"$"==a.charAt(0)&&
this[a]instanceof v&&this[a].check()&&b++;return b},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof v)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].subscribe(c,d,{append:[s],allowDupes:!0}):a.$$watchers[b]=new v(a,b,c,d,s),a.$$watchers[b]):new v(a,b,c,d,s)},B=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},C=Function,x=MetaphorJs.emptyFn,y=Array.prototype.slice,
L=function(a,b,c,d){for(;c&&!c.$isRoot;)if(c=c.$parent)try{return 4==arguments.length?b.call(null,c,d,x,b):b.call(null,c,x,b)}catch(s){}},w=function(a){return function(){var b=y.call(arguments);b.push(L);b.push(a);b=a.apply(null,b);return void 0==b||!b&&"number"==typeof b&&isNaN(b)?(b=y.call(arguments),b.unshift(a),b.unshift(null),L.apply(null,b)):b}},z={},E=0,K=function(a){try{return z[a]?z[a]:(E++,z[a]=w(new C("____","$$interceptor","$$itself","".concat("try {","return ",a.replace(k,"$1____.$3"),
";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(b){return x}},M={},t=0,J=function(a){try{if(!M[a]){t++;var b=a.replace(k,"$1____.$3");return M[a]=w(new C("____","$$$$","$$interceptor","$$itself","".concat("try {",b," = $$$$",";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____, $$$$); }")))}return M[a]}catch(c){return x}},F={},D=0,s=function(a,c){var d;return(d=b(a))?d:K(a)(c)};setTimeout(function(){1E3<=E&&(z={});1E3<=t&&(M={});1E3<=
D&&(F={})},1E4);v.create=u;v.unsubscribeAndDestroy=function(a,b,c,d){b=G(b);(a=a.$$watchers)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};v.normalizeExpr=B;v.prepareCode=function(a){return a.replace(k,"$1____.$3")};v.createGetter=K;v.createSetter=J;v.createFunc=function(a){try{return F[a]?F[a]:(D++,F[a]=w(new C("____","$$interceptor","$$itself","".concat("try {",a.replace(k,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(b){return x}};
v.eval=s;window.showGetterCache=function(){return z};window.MetaphorJs&&MetaphorJs.r&&MetaphorJs.r("MetaphorJs.lib.Watchable",v);"undefined"!=typeof global&&(module.exports=v)})();
(function(){var e,p;if("undefined"!=typeof global)try{e=require("metaphorjs-promise"),p=require("metaphorjs-observable")}catch(m){e=global.MetaphorJs.lib.Promise,p=global.MetaphorJs.lib.Observable}else e=window.MetaphorJs.lib.Promise,p=window.MetaphorJs.lib.Observable;var k=MetaphorJs.extend,q=MetaphorJs.bind,n=MetaphorJs.addListener,r=MetaphorJs.trim,d=MetaphorJs.isArray,g;"undefined"!=typeof window&&(g=document.querySelectorAll||function(a){var b=document,c=b.documentElement.firstChild,d=b.createElement("STYLE");
c.appendChild(d);b.__qsaels=[];d.sheet?d.sheet.insertRule(a+"{x:expression(document.__qsaels.push(this))}",0):d.styleSheet&&(d.styleSheet.cssText=a+"{x:expression(document.__qsaels.push(this))}");window.scrollBy(0,0);return b.__qsaels});var f=/#.*$/,c=/([?&])_=[^&]*/,b=/\?/,a=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,h=/^(?:GET|HEAD)$/i,l=0,G=function(a,b){setTimeout(function(){a.call(b)},0)},A=function(a,b){var c,d;if(!a||"string"!==typeof a)return null;try{d=new DOMParser,c=d.parseFromString(a,
b||"text/xml")}catch(f){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},v=function(a,b,c){var f,e;if("string"==typeof a&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a));else if(d(a)&&c)for(f=0,e=a.length;f<e;f++)v(a[f],b,c+"["+f+"]");else if("object"==typeof a)for(f in a)a.hasOwnProperty(f)&&v(a[f],b,c?c+"["+f+"]":f)},u=function(a,d){a.replace(f,"");if(!1===d.cache){var e=(new Date).getTime();return c.test(a)?a.replace(c,"$1_="+e):a+(b.test(a)?
"&":"?")+"_="+e}!d.data||window.FormData&&d.data instanceof window.FormData||("string"!=typeof d.data?(e=[],v(d.data,e,null),e=e.join("&").replace(/%20/g,"+")):e=d.data,d.data=e,h.test(d.method)&&(a+=(b.test(a)?"&":"?")+d.data,d.data=null));return a},B={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},C={url:null,data:null,method:"GET",headers:null,username:null,password:null,
cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},x={},y=new p,L=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},w=function(a,b,c){var f,e;if("object"!=
typeof a&&"function"!=typeof a&&c)f=document.createElement("input"),f.setAttribute("type","hidden"),f.setAttribute("name",c),f.setAttribute("value",a),b.appendChild(f);else if(d(a)&&c)for(f=0,e=a.length;f<e;f++)w(a[f],b,c+"["+f+"]");else if("object"==typeof a)for(f in a)a.hasOwnProperty(f)&&w(a[f],b,c?c+"["+f+"]":f)},z=function(a){for(var b,c,d="",f=0;f<a.elements.length;f++)if(b=a.elements[f],b.hasAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT",
"FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return d},E=function(){},K=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if("string"!=typeof a)return a;c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=A(r(a)),b?g.call(a,b):a;if("html"===d)return a=A(a,"text/html"),b?g.call(a,b):a;if("fragment"==d){c=document.createDocumentFragment();
d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return a=r(a),a=window.JSON?JSON.parse(a):(new Function("return "+a))(),a;("script"===d||!d&&0<=c.indexOf("javascript"))&&L(a);return a+""},M=function(b){var c=a.exec(("undefined"!=typeof window?window.location.href:"").toLowerCase())||[],d=a.exec(b.url.toLowerCase());this._opt=b;b.crossDomain=!(!d||d[1]===c[1]&&d[2]===c[2]&&(d[3]||("http:"===d[1]?"80":"443"))===
(c[3]||("http:"===c[1]?"80":"443")));c=new e;"iframe"!=b.transport||b.form?b.form&&(this._form=b.form,"POST"!=b.method||"undefined"!=typeof window&&window.FormData||"iframe"==b.transport||(b.transport="iframe")):(this.createForm(),b.form=this._form);b.form&&"iframe"!=b.transport&&(b.data="POST"==b.method?new FormData(b.form):z(b.form));b.url=u(b.url,b);d=!b.crossDomain&&"script"!=b.transport||b.form?"iframe"==b.transport?new D(b,c,this):new J(b,c,this):new F(b,c,this);this._deferred=c;this._transport=
d;c.done(function(a){y.trigger("success",a)});c.fail(function(a){y.trigger("error",a)});c.always(function(){y.trigger("end")});y.trigger("start");b.timeout&&(this._timeout=setTimeout(q(this.onTimeout,this),b.timeout));b.jsonp&&this.createJsonp();!1===y.trigger("beforeSend",b,d)&&(this._promise=e.reject());b.beforeSend&&!1===b.beforeSend.call(b.callbackScope,b,d)&&(this._promise=e.reject());this._promise||(G(d.send,d),c.abort=q(this.abort,this),c.always(this.destroy,this),this._promise=c)};k(M.prototype,
{_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);w(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=
this._opt,c=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+ ++l;a.url+=(b.test(a.url)?"&":"?")+c+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=q(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=q(this.jsonpCallback,this));return d},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},processResponseData:function(a,b){var c=this._opt;a=K(a,c,b);y.hasListener("processResponse")&&(a=y.trigger("processResponse",
a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred;if(this._opt.jsonp)if(a){try{L(a)}catch(d){c.reject(d)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else try{c.resolve(this.processResponseData(a,b))}catch(f){c.reject(f)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&
this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0);var t=function(a,b){b=b||{};a&&"string"!=typeof a?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";k(b,x,!1);k(b,
C,!1);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new M(b)).promise()};t.setup=function(a){k(x,a,!0)};t.on=function(){y.on.apply(y,arguments)};t.un=function(){y.un.apply(y,arguments)};t.get=function(a,b){b=b||{};b.method="GET";return t(a,b)};t.post=function(a,b){b=b||{};b.method="POST";return t(a,b)};t.load=function(a,b,c){c=c||{};"string"!=typeof b&&(c=b);c.dataType="fragment";return t(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);
a.appendChild(b)})};t.loadScript=function(a){return t(a,{transport:"script"})};t.submit=function(a,b){b=b||{};b.form=a;return t(null,b)};var J=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&n(d,"progress",q(a.progress,a.callbackScope));a.uploadProgress&&d.upload&&n(d.upload,"progress",q(a.uploadProgress,
a.callbackScope));try{var f;if(a.xhrFields)for(f in a.xhrFields)d[f]=a.xhrFields[f];a.data&&a.contentType&&d.setRequestHeader("Content-Type",a.contentType);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.setRequestHeader("Accept",a.dataType&&B[a.dataType]?B[a.dataType]+", */*; q=0.01":B._default);for(f in a.headers)d.setRequestHeader(f,a.headers[f])}catch(e){}d.onreadystatechange=q(this.onReadyStateChange,this)};k(J.prototype,{_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=
this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=E,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=E;var c;a:{try{c=!a.status&&"undefined"!=typeof location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse("string"==typeof a.responseText?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=E;this._xhr.abort()},
send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}},!0);var F=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};k(F.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",
this._opt.url);n(a,"load",q(this.onLoad,this));n(a,"error",q(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}},!0);var D=function(a,b,c){this._opt=
a;this._ajax=c;this._deferred=b};k(D.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++l,c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);n(a,"load",q(this.onLoad,this));n(a,"error",q(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=this._el;
this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}},!0);"undefined"!=typeof global?module.exports=t:window.MetaphorJs?MetaphorJs.ajax=t:window.MetaphorJs=
{ajax:t}})();
(function(){var e=[],p=!1,m=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,k=function(c,b,a){c.attachEvent?c.attachEvent("on"+b,a):c.addEventListener(b,a,!1)},q=!!history.pushState,n="onhashchange"in window,r=function(c){var b=location.protocol+"//"+location.hostname;location.port&&(b+=":"+location.port);c=c.replace(b,"");q||(c=encodeURIComponent(c));return c},d=function(c){c=(""+c).match(m);var b,a;q||(a=c[6],"!"==a.substr(0,1)&&(b=a.substr(1)));b||
(b=c[4],c[5]&&(b+="?"+c[5]));return b},g=function(){var c;q?c=location.pathname+location.search:(c=location.hash.substr(1))?("!"==c.substr(0,1)&&(c=c.substr(1)),c=decodeURIComponent(c)):c=location.pathname+location.search;return c},f=function(){var c=g();if(e.length)for(var b=-1,a=e.length;++b<a;e[b].call(null,c));window.MetaphorJs&&MetaphorJs.triggerAsync("locationchange",c)};k(window,"load",function(){p=!0});history.initPushState=function(){if(q)history.origPushState=history.pushState,history.origReplaceState=
history.replaceState,k(window,"popstate",f),history.pushState=function(a,b,c){history.origPushState(a,b,r(c));f()},history.replaceState=function(a,b,c){history.origReplaceState(a,b,r(c));f()};else if(n)history.replaceState=history.pushState=function(a,b,c){a=r(c);location.hash=a?"!"+a:""},k(window,"hashchange",f);else{var c=null,b=!1;window.onIframeHistoryChange=function(a){b||(location.hash=a?"!"+a:"",f())};var a=function(a){var b=c.contentWindow.document;b.open();b.write("<html><head><title>"+document.title+
'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');b.close()};history.pushState=function(b,c,d){a(r(d))};history.replaceState=function(a,b,d){a=r(d);c.contentWindow.hashValue=a};var e=function(){c=document.createElement("iframe");c.src="about:blank";c.style.display="none";document.body.appendChild(c);b=!0;a(r(location.hash.substr(1)));b=!1};p?e():k(window,"load",e)}k(document.documentElement,"click",
function(a){a=a||window.event;for(var b=a.target||a.srcElement,c;b&&"a"!=b.nodeName.toLowerCase();)b=b.parentNode;if(b){if(b=(c=b.getAttribute("href"))&&"#"!=c.substr(0,1)&&!b.getAttribute("target"))b=c.match(m),b=b[1]&&location.protocol!=b[1]||b[2]&&location.hostname!=b[2]?!1:b[2]||b[3]?location.port!=b[3]?!1:!0:!0;if(b&&d(c)!=d(window.location))return history.pushState(null,null,d(c)),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}});history.initPushState=function(){}};
window.MetaphorJs?(MetaphorJs.pushUrl=function(c){history.pushState(null,null,c)},MetaphorJs.replaceUrl=function(c){history.replaceState(null,null,c)},MetaphorJs.currentUrl=function(){return g()}):history.onchange=function(c){e.push(c)}})();
(function(){var e=window.MetaphorJs,p=e.extend,m=e.isArray,k=e.isPlainObject,q=function(d,e){"pt_BR"==e&&(e="xbr");3<e.length&&(e=e.substr(0,-e.lastIndexOf("_")));switch(e){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
d?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==d||1==d?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==d%10&&11!=d%100?0:2<=d%10&&4>=d%10&&(10>d%100||20<=d%100)?1:2;case "cs":case "sk":return 1==d?0:2<=d&&4>=d?1:2;case "ga":return 1==d?0:2==d?1:2;case "lt":return 1==d%10&&11!=d%100?0:2<=d%10&&(10>d%100||20<=d%100)?1:2;case "sl":return 1==d%100?0:2==d%100?1:3==d%100||4==d%100?2:3;
case "mk":return 1==d%10?0:1;case "mt":return 1==d?0:0==d||1<d%100&&11>d%100?1:10<d%100&&20>d%100?2:3;case "lv":return 0==d?0:1==d%10&&11!=d%100?1:2;case "pl":return 1==d?0:2<=d%10&&4>=d%10&&(12>d%100||14<d%100)?1:2;case "cy":return 1==d?0:2==d?1:8==d||11==d?2:3;case "ro":return 1==d?0:0==d||0<d%100&&20>d%100?1:2;case "ar":return 0==d?0:1==d?1:2==d?2:3<=d&&10>=d?3:11<=d&&99>=d?4:5;default:return 0}},n=function(d){this.store={};d&&(this.locale=d)};p(n.prototype,{store:null,locale:"en",setLocale:function(d){this.locale=
d},set:function(d,e){var f=this.store;"undefined"==typeof f[d]&&(f[d]=e)},load:function(d){p(this.store,d,!1,!1)},get:function(d){return this.store[d]||(this===r?"-- "+d+" --":r.get(d))},plural:function(d,e){var f=this.get(d),c=q(e,this.locale);return m(f)?f[c]:k(f)?f[e]?f[e]:1==e&&void 0!=f.one?f.one:0>e&&void 0!=f.negative?f.negative:f.other:f}},!1,!1);var r=new n;n.global=function(){return r};e.r("MetaphorJs.lib.Text",n);e.r("filter.l",function(d,e){return e.$app.lang.get(d)});e.r("filter.p",function(d,
e,f){return e.$app.lang.plural(d,parseInt(f,10)||0)})})();
(function(){var e=window.MetaphorJs,p=e.extend,m=e.lib.Promise,k=e.isThenable,q=Array.prototype.slice,n=e.bind,r,d=function(){this.store={}};p(d.prototype,{store:null,getApi:function(){return{value:n(this.value,this),constant:n(this.constant,this),factory:n(this.factory,this),service:n(this.service,this),provider:n(this.provider,this),resolve:n(this.resolve,this),inject:n(this.inject,this)}},instantiate:function(d,f){var c=function(){},b;c.prototype=d.prototype;c=new c;b=d.prototype.constructor.apply(c,
f);return"object"==typeof b?b:c},inject:function(d,f,c,b,a){b=b||{};a=a||[];if("function"==typeof d)if(d.inject)a=q.call(d.inject),a.push(d),d=a;else return c||d.__isMetaphorClass?this.instantiate(d,a):d.apply(f,a);d=q.call(d);var e=this;a=[];var l=d.pop(),k,n;k=-1;for(n=d.length;++k<n;a.push(e.resolve(d[k],b)));return m.all(a).then(function(a){return c||l.__isMetaphorClass?e.instantiate(l,a):l.apply(f,a)})},value:function(d,f){this.store[d]={type:1,value:f}},constant:function(d,f){var c=this.store;
c[d]||(c[d]={type:2,value:f})},factory:function(d,f,c,b){"boolean"==typeof c&&(b=c,c=null);this.store[d]={type:3,singleton:b,fn:f,context:c}},service:function(d,f,c){this.store[d]={type:4,singleton:c,fn:f}},provider:function(d,f){this.store[d+"Provider"]={name:d,type:5,fn:f,instance:null}},resolve:function(d,f){var c=this.store,b,a,e;if("undefined"!=typeof f[d])return f[d];if(a=c[d]){b=a.type;if(1==b||2==b)return a.value;if(3==b)e=this.inject(a.fn,a.context,!1,f);else if(4==b)e=this.inject(a.fn,null,
!0,f);else if(5==b)return a.instance||(a.instance=m.resolve(this.inject(a.fn,null,!0,f)).done(function(b){a.instance=b;c[a.name]={type:3,fn:b.$get,context:b}})),a.instance;a.singleton&&(a.type=1,a.value=e,3==b&&k(e)&&e.done(function(b){a.value=b}));return f[d]=e}if(c[d+"Provider"])return this.resolve(d+"Provider",f),this.resolve(d,f);if(this===r)throw"Could not provide value for "+d;return r.resolve(d)},destroy:function(){delete this.store;delete this.scope}});e.r("MetaphorJs.lib.Provider",d);d.global=
function(){return r};r=new d})();
(function(){var e=MetaphorJs.lib.Observable,p=MetaphorJs.extend;MetaphorJs.d("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(m){m=m||{};this._observable=new e;p(this,this._observable.getApi());if(m.callback){var k=m.callback,q=k.scope||this;delete k.scope;for(var n in k)if(k.hasOwnProperty(n))this.on(n,k[n],q);delete m.callback}p(this,m,!0)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",
this);this._observable.destroy();delete this._observable}},onDestroy:MetaphorJs.emptyFn})})();
(function(){var e=window.MetaphorJs,p=e.g,m=e.lib.Promise,k=e.data,q=e.isThenable,n=e.isArray,r=e.extend,d={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},g=["Moz","Webkit","ms","O","Khtml"],f="animationDelay",c="animationDuration",b="transitionDelay",a="transitionDuration",h=0,l=function(){var d=document.createElement("div"),e=!1,h,l,k;if(void 0!==d.style.animationName)e=!0;else for(l=0,k=g.length;l<k;l++)if(h=g[l],void 0!==d.style[h+"AnimationName"]){e=
!0;f=h+"AnimationDelay";c=h+"AnimationDuration";b=h+"TransitionDelay";a=h+"TransitionDuration";break}return e}(),G=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},A=function(a,b,c){var d=function(){(new Date).getTime()-b>=c?a():G(d)};G(d)},v=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},u=function(a,b,c){var d,e,f=b.length;for(d=0;d<f;d++)e=v(b[d])+v(c[d]),a=Math.max(e,a);return a},B=function(d){var e=window.getComputedStyle?
window.getComputedStyle(d,null):d.style;d=0;var h=(e[c]||"").split(","),g=(e[f]||"").split(","),l=(e[a]||"").split(","),e=(e[b]||"").split(",");d=Math.max(d,u(d,h,g));return d=Math.max(d,u(d,l,e))},C=function w(a,b,c,d,e,f,h){var g=function(){var b=k(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==h?!1:(e.reject(a),!0)},l=function(){if(!g()){var d=c;c++;if(c==b.length){e.resolve(a);k(a,"mjsAnimationQueue").shift();var f=k(a,"mjsAnimationQueue");f.length?(f=f[0],C(f.el,f.stages,0,f.start,f.deferred,
!1,f.id)):k(a,"mjsAnimationQueue",null)}else k(a,"mjsAnimationQueue")[0].position=c,w(a,b,c,null,e);y(a,b[d]);y(a,b[d]+"-active")}},n=function(){if(!g()){x(a,b[c]+"-active");var d=B(a);d?A(l,(new Date).getTime(),d):l()}},m=function(){if(!g()){x(a,b[c]);var e;d&&(e=d(a),d=null);q(e)?e.done(n):G(n)}};f?G(m):m()},x=MetaphorJs.addClass,y=MetaphorJs.removeClass;MetaphorJs.stopAnimation=function(a){var b=k(a,"mjsAnimationQueue"),c;n(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,y(a,c[b]),y(a,
c[b]+"-active")):"function"==typeof b?b(a):"stop"==b&&$(a).stop(!0,!0);k(a,"mjsAnimationQueue",null)};MetaphorJs.animate=function(a,b,c,e){var f=new m,g=k(a,"mjsAnimationQueue")||[],A=++h,F=a.getAttribute("mjs-animate"),D,s,x,y,v,G,u;b=b||F;e&&null===F&&(b=null);if(b){"string"==typeof b?"["==b.substr(0,1)?D=(new Function("","return "+b))():(D=d[b],b=p&&p("animate."+b,!0)):"function"==typeof b?s=b:n(b)&&("string"==typeof b[0]?D=b:(x=b[0],y=b[1]));b&&b.constructor===Object&&(D=b.stages,s=b.fn,x=b.before,
y=b.after,v=b.options?r({},b.options):{},G=b.context||null,u=b.duration||null,c=c||v.start);if(l&&D)return g.push({el:a,stages:D,start:c,deferred:f,position:0,id:A}),k(a,"mjsAnimationQueue",g),1==g.length&&C(a,D,0,c,f,!0,A),f;c&&(v.start=function(){c(a)});v.complete=function(){f.resolve(a)};u&&(v.duration=u);if(s&&"function"==typeof s)return x&&r(a.style,x,!0),c&&c(a),k(a,"mjsAnimationQueue",s.call(G,a,function(){f.resolve(a)})),f;if(window.jQuery){b=$(a);x&&b.css(x);k(a,"mjsAnimationQueue","stop");
if(s&&"string"==typeof s)return b[s](v),f;if(y)return b.animate(y,v),f}}c?(s=c(a),q(s)?s.done(function(){f.resolve(a)}):f.resolve(a)):f.resolve(a);return f};MetaphorJs.animate.getAnimationDuration=B;MetaphorJs.animate.addAnimationType=function(a,b){d[a]=b}})();
(function(){var e=MetaphorJs.lib.Observable,p=MetaphorJs.lib.Watchable,m=MetaphorJs.extend,k;k=MetaphorJs.d("MetaphorJs.view.Scope",{$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$checking:!1,$$destroyed:!1,initialize:function(k){this.$$observable=new e;m(this,k,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)},$new:function(){return new k({$parent:this,
$root:this.$root,$app:this.$app})},$newIsolated:function(){return new k({$app:this.$app})},$on:function(e,k,m){return this.$$observable.on(e,k,m)},$un:function(e,k,m){return this.$$observable.un(e,k,m)},$watch:function(e,k,m){return p.create(this,e,k,m,null)},$unwatch:function(e,k,m){return p.unsubscribeAndDestroy(this,e,k,m)},$get:function(e){for(var k=this;k;){if(void 0!=k[e])return k[e];k=k.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$check:function(){var e;
this.$$checking||(this.$$checking=!0,this.$$watchers&&(e=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",e))},$destroy:function(){this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;delete this.$app;delete this.$root;delete this.$parent;this.$$watchers&&(this.$$watchers.$destroyAll(),delete this.$$watchers);this.$$destroyed=!0}})})();
(function(){var e=navigator.userAgent.toLowerCase(),p=parseInt((/msie (\d+)/.exec(e)||[])[1],10),m=parseInt((/android (\d+)/.exec(e)||[])[1],10),k={};isNaN(p)&&(p=parseInt((/trident\/.*; rv:(\d+)/.exec(e)||[])[1],10));window.MetaphorJs||(window.MetaphorJs={});MetaphorJs.browser={android:m,hasEvent:function(e){if("input"==e&&9==p)return!1;if(void 0===k[e]){var m=document.createElement("div");k[e]="on"+e in m}return k[e]}}})();
(function(){var e=window.MetaphorJs,p=e.extend,m=e.nextUid,k=e.bind,q=e.trim,n=e.lib.Watchable.create,r=new e.lib.Observable,d=function(d,c,b,a,e){return!c||"string"!=typeof c||-1==c.indexOf("{{")&&-1==c.indexOf("{[")?null:new g(d,c,b,a,e)},g=function(d,c,b,a,e){this.id=m();this.origin=c;this.scope=d;this.parent=b;this.isRoot=!b;this.data=a;this.lang=d.$app.lang;if(!0===e||!1===e)this.recursive=e;this.watchers=[];this.children=[];this.dataChangeDelegate=k(this.doDataChange,this);this.processed=this.processText(c);
this.render()};p(g.prototype,{id:null,parent:null,isRoot:null,scope:null,origin:"",template:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(d,c){return r.on(this.id,d,c)},unsubscribe:function(d,c){return r.un(this.id,d,c)},toString:function(){null===this.text&&this.render();return this.text},toSource:function(){return this.origin},render:function(){var d=this.processed,c,b,a;this.children.length||this.createChildren();
a=this.children;c=-1;for(b=a.length;++c<b;d=d.replace("---"+c+"---",a[c].toString()));return this.text=d},processText:function(d){for(var c=0,b=d.length,a,e,g="";c<b;)if(-1!=(a=d.indexOf("{{",c))&&-1!=(e=d.indexOf("}}",a+2)))g+=d.substring(c,a),e!=a+2&&(g+=this.watcherMatch(d.substring(a+2,e))),c=e+2;else{c!==b&&(g+=d.substring(c));break}c=0;d=g;b=d.length;for(g="";c<b;)if(-1!=(a=d.indexOf("{[",c))&&-1!=(e=d.indexOf("]}",a+2)))g+=d.substring(c,a),e!=a+2&&(g+=this.watcherMatch(d.substring(a+2,e),!0)),
c=e+2;else{c!==b&&(g+=d.substring(c));break}return g},watcherMatch:function(d,c){var b=this.watchers;if(c){d=q(d);var a=d.split("|"),e=q(a[0]);"."!=e.substr(0,1)&&(a[0]="'"+e+"'");1==a.length&&a.push("l");d=a.join(" | ")}b.push(n(this.scope,d,this.onDataChange,this));return"---"+(b.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=
null;this.isRoot?r.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var e=this.watchers,c=this.children,b=this.scope,a=this.recursive,h,g,k;h=-1;for(g=e.length;++h<g;)k=e[h].getLastResult(),c.push(a&&d(b,k,this,null,!0)||k)},destroyChildren:function(){var d=this.children,c,b;c=-1;for(b=d.length;++c<b;)d[c]instanceof g&&d[c].destroy();this.children=[]},destroyWatchers:function(){var d=this.watchers,c,b;c=-1;for(b=d.length;++c<b;d[c].unsubscribeAndDestroy(this.onDataChange,
this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();r.destroyEvent(this.id);delete this.watchers;delete this.children;delete this.origin;delete this.template;delete this.text;delete this.scope;delete this.data;delete this.dataChangeDelegate;delete this.lang;this.changeTmt&&clearTimeout(this.changeTmt);delete this.changeTmt}},!0,!1);g.create=d;e.r("MetaphorJs.view.TextRenderer",g)})();
(function(){var e=window.MetaphorJs,p=e.nextUid,m=e.isArray,k=e.view.Scope,q=e.lib.Observable,n=e.isThenable,r=e.toArray,d=e.getAttributeHandlers,g=null,f=e.g,c=e.view.TextRenderer.create,b=e.lib.Promise,a=e.select,h,l="string"==typeof document.createTextNode("").textContent?"textContent":"nodeValue",G=function(a,b,c,d,e,f){var g=[];if(a&&!0!==a){if(a.nodeType){f.countdown+=1;u(a,c,d,e,f);return}g=r(a)}g.length||(g=r(b.childNodes));b=g.length;f.countdown+=b;for(a=-1;++a<b;u(g[a],c,d,e,f));},A=function(a,
b){if(b)if(b.nodeType)a.push(b);else if(m(b))for(var c=-1,d=b.length;++c<d;A(a,b[c]));},v=/^(script|template|mjs-template|style)$/i,u=function(a,b,c,d,e){if(a){var f,g=a.nodeName;e||(e={countdown:1});if(!g||!g.match(v))if(a.nodeType&&(f=b.call(c,a)),!1!==f){if(n(f)){f.done(function(f){!1!==f&&G(f,a,b,c,d,e);0==--e.countdown&&d&&d.call(c)});return}G(f,a,b,c,d,e)}0==--e.countdown&&d&&d.call(c)}},B=new q;h=MetaphorJs.d("MetaphorJs.view.Renderer",{id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,
_observable:null,initialize:function(a,b,c){this.id=p();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof k&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)},on:function(a,b,c){return B.on(a+"-"+this.id,b,c)},un:function(a,b,c){return B.un(a+"-"+this.id,b,c)},createChild:function(a){return new h(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b;b=b.$app;var f={$scope:e,
$node:c,$attrValue:d,$renderer:this};c=[e,c,d,this];return a.__isMetaphorClass?(c=b.inject(a,null,!0,f,c),a.$stopRenderer?!1:c):b.inject(a,null,!1,f,c)},processNode:function(a){var e=a.nodeType,h=this.texts,k=this.scope,m,p;if(3==e){if(p=null!==a.parentNode.getAttribute("mjs-recursive"),m=c(k,a[l],null,h.length,p))m.subscribe(this.onTextChange,this),h.push({node:a,tr:m}),this.renderText(h.length-1)}else if(1==e){g||(g=d());var q=a.attributes;m=[];var r=[],v,G,u,e="tag."+a.tagName.toLowerCase();if(v=
f(e,!0)){u=this.runHandler(v,k,a);if(!1===u)return!1;n(u)?m.push(u):A(r,u)}v=0;for(G=g.length;v<G;v++)if(p=g[v].name,null!==(u=a.getAttribute(p))){u=this.runHandler(g[v].handler,k,a,u);a.removeAttribute(p);if(!1===u)return!1;n(u)?m.push(u):A(r,u)}if(m.length){var F=new b;b.all(m).done(function(a){A(r,a);F.resolve(r)});return F}p=null!==a.getAttribute("mjs-recursive");v=0;for(G=q.length;v<G;v++)!f(e,!0)&&(m=c(k,q[v].value,null,h.length,p))&&(m.subscribe(this.onTextChange,this),h.push({node:a,attr:q[v].name,
tr:m}),this.renderText(h.length-1));return r.length?r:!0}return!0},process:function(){u(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){B.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.toString(),c=a.attr;c?(a.node.setAttribute(c,b),"value"==c&&(a.node.value=b),"class"==c&&(a.node.className=b)):a.node[l]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=
!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&this.parent.un("destroy",this.destroy,this);delete this.texts;delete this.el;delete this.scope;delete this.parent;B.trigger("destroy-"+this.id)}}},{eachNode:u});MetaphorJs.onReady(function(){var b=MetaphorJs.app,c=a("[mjs-app]"),d,e,f,g;e=-1;for(f=c.length;++e<f;)g=c[e],d=g.getAttribute&&g.getAttribute("mjs-app"),b(g,d).done(function(a){a.run()})})})();
(function(){var e=window.MetaphorJs,p=e.data,m=e.toFragment,k=e.lib.Watchable.create,q=e.view.Renderer,n=e.clone,r=e.view.Scope,d=e.animate,g=e.lib.Promise,f=e.extend,c=e.nextUid,b=e.trim,a=new e.lib.Observable,h={},l=function(a){if(!h[a]){var b=document.getElementById(a),c;b&&(c=b.tagName.toLowerCase(),"script"==c?(c=document.createElement("div"),c.innerHTML=b.innerHTML,h[a]=m(c.childNodes)):h[a]="content"in b?b.content:m(b.childNodes))}return h[a]},G=function(a){return h[a]?h[a]:h[a]=MetaphorJs.ajax(a,
{dataType:"fragment"}).then(function(b){return h[a]=b})};e.define("MetaphorJs.view.Template",{_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,initialize:function(a){f(this,a,!0);this.id=c();this.tpl&&(this.tpl=b(this.tpl));this.url&&(this.url=b(this.url));a=this.node;var d=this.tpl||this.url;a&&a.removeAttribute("mjs-include");a||(this.deferRendering=!0);
if(d){if(a&&a.firstChild&&p(a,"mjs-transclude",m(a.childNodes)),"."!=d.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=k(this.scope,d,this.onChange,this)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof
r&&this.scope.$on("destroy",this.onScopeDestroy,this)},doRender:function(){this._renderer||(this._renderer=new q(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?
this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,c=a._watcher?a._watcher.getLastResult():a.tpl||b,d=new g;(new g(function(a){b?a(l(c)||G(b)):a(l(c)||m(c))})).done(function(b){a._fragment=b;d.resolve(a.ownRenderer?!1:a.node)}).fail(d.reject,d);return d},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=
this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(n(this._fragment),a):a.appendChild(n(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new g;this._initial?(this.doApplyTemplate(),b.resolve()):(d(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),d(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();
delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),delete this._watcher);delete this.tpl}},{getTemplate:l,loadTemplate:G})})();
(function(){var e=window.MetaphorJs,p=e.extend,m=e.nextUid,k=e.emptyFn,q=e.ns.get,n=e.lib.Promise,r=e.view.Template,d=e.toFragment,g=e.isAttached,f=e.data,c=e.view.Scope,b=e.lib.Provider;MetaphorJs.define("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",{id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(a){this.scope||(this.scope=new c);this.supr(a);a.as&&(this.scope[a.as]=
this);this.node&&(this.id=this.node.getAttribute("id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+m();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this);var b=this.template,d=this.templateUrl;b&&b instanceof r?b instanceof r&&(this.template.node=this.node):this.template=b=new r({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:d});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,
this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?
this.renderTo.appendChild(this.node):g(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},
isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:k,afterRender:k,onShow:k,onHide:k,onParentRendererDestroy:function(){this.destroy()},onDestroy:function(){this.template&&(this.template.destroy(),delete this.template);this.destroyEl?g(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();
delete this.scope;delete this.node;this.supr()}});MetaphorJs.resolveComponent=function(a,c,e,g,k){var m=!1!==c;c=c||{};k=k||[];e=e||c.scope;g=g||c.node;c.scope=c.scope||e;c.node=c.node||g;var u="string"==typeof a?q(a):a;if(!u)throw"Component "+a+" not found";e&&u.isolateScope&&(c.scope=e=e.$newIsolated());var B,C=[];a=u.template||c.template||null;var x=u.templateUrl||c.templateUrl||null,y=e?e.$app:null,L=b.global(),w=y?y.inject:L.inject,z=y?y:L,E={$node:g||null,$scope:e||null,$config:c||null,$args:k||
null};if(u.resolve)for(B in u.resolve)(function(a){var b=new n,d;C.push(b.done(function(b){E[a]=b;c[a]=b;k.push(b)}));d=u.resolve[B];"function"==typeof d?b.resolve(d(e,g)):b.resolve(w.call(z,d,null,!1,p({},E,c,!1,!1)))})(B);m&&(a||x)&&(c.template=new r({scope:e,node:g,deferRendering:!0,ownRenderer:!0,tpl:a,url:x}),C.push(c.template.initPromise),g&&g.firstChild&&f(g,"mjs-transclude",d(g.childNodes)));m&&k.unshift(c);if(C.length){var K=new n;n.all(C).done(function(){K.resolve(w.call(z,u,null,!0,p({},
E,c,!1,!1),k))});return K}return n.resolve(w.call(z,u,null,!0,p({},E,c,!1,!1),k))}})();
(function(){var e=window.MetaphorJs,p=e.view.Scope,m=e.view.Renderer,k=e.lib.Provider,q=e.lib.Observable,n=e.lib.Promise,r=e.bind,d=e.extend,g=Array.prototype.slice,f=e.lib.Text;MetaphorJs.define("MetaphorJs.cmp.App","MetaphorJs.cmp.Base",{lang:null,scope:null,renderer:null,cmpListeners:null,components:null,initialize:function(c,b){var a=b instanceof p?b:new p(b),e,l;a.$app=this;this.supr();e=new k;l=new q;this.lang=new f;d(this,e.getApi());this.destroyProvider=r(e.destroy,e);d(this,l.getApi());this.destroyObservable=
r(l.destroy,l);this.scope=a;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",a.$root);this.value("$lang",this.lang);this.renderer=new m(c,a);e=g.call(arguments);e[1]=a;this.initApp.apply(this,e)},initApp:e.emptyFn,run:function(){this.renderer.process()},getParentCmp:function(c){c=c.parentNode;for(var b;c;){if(b=c.getAttribute("cmp-id"))return this.getCmp(b);c=c.parentNode}return null},onAvailable:function(c,
b,a){var d=this.cmpListeners;d[c]||(d[c]=new n);b&&d[c].done(b,a);return d[c]},getCmp:function(c){return this.components[c]||null},registerCmp:function(c){var b=this;b.components[c.id]=c;b.onAvailable(c.id).resolve(c);c.on("destroy",function(a){delete b.cmpListeners[a.id];delete b.components[a.id]})},destroy:function(){var c;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(c in this)this.hasOwnProperty(c)&&delete this[c]}})})();
(function(){var e=window.MetaphorJs,p=e.data,m=e.currentUrl,k=e.toFragment,q=e.animate,n=e.extend,r=e.stopAnimation,d=e.resolveComponent,g=e.lib.Watchable.create;MetaphorJs.define("MetaphorJs.cmp.View",{route:null,node:null,scope:null,cmp:null,currentComponent:null,watchable:null,defaultCmp:null,initialize:function(d){n(this,d,!0);(d=this.node)&&d.firstChild&&p(d,"mjs-transclude",k(d.childNodes));this.cmp||(this.cmp=d.getAttribute("mjs-view-cmp"));this.defaultCmp=d.getAttribute("mjs-view-default");
d.removeAttribute("mjs-view");d.removeAttribute("mjs-view-cmp");d.removeAttribute("mjs-view-default");this.route?(history.initPushState(),MetaphorJs.on("locationchange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=g(this.scope,this.cmp,this.onCmpChange,this),this.onCmpChange())},onCmpChange:function(){var d=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();d&&this.setComponent(d)},onLocationChange:function(){var d=m(),c=this.route,b,a,e,g,k;a=
0;for(e=c.length;a<e;a++){g=c[a];if(k=d.match(g.reg)){this.changeRouteComponent(g,k);return}g["default"]&&!b&&(b=g)}b?this.setRouteComponent(b,[]):this.clearComponent();!b&&this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(d,c){r(this.node);this.clearComponent();this.setRouteComponent(d,c)},clearComponent:function(){var d=this,c=d.node;d.currentComponent&&q(c,"leave",null,!0).done(function(){d.currentComponent.destroy();for(d.currentComponent=null;c.firstChild;)c.removeChild(c.firstChild)})},
setRouteComponent:function(e,c){var b=this,a=b.node,g=e.params;q(a,"enter",function(){var l=c||[],k={destroyEl:!1,node:a,scope:e.isolateScope?b.scope.$newIsolated():b.scope.$new()},m,n;e.as&&(k.as=e.as);e.template&&(k.template=e.template);l.shift();if(g)for(m=-1,n=g.length;++m<n;k[g[m]]=l[m]);return d(e.cmp||"MetaphorJs.cmp.Component",k,k.scope,a,null,l).done(function(a){b.currentComponent=a})},!0)},setComponent:function(e){var c=this,b=c.node;q(b,"enter",function(){var a="object"==typeof e?e:{},
g=("string"==typeof e?e:null)||"MetaphorJs.cmp.Component",l=a.scope||c.scope.$new();a.destroyEl=!1;return d(g,a,l,b).done(function(a){c.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(MetaphorJs.un("locationchange",this.onLocationChange,this),delete this.route);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),delete this.watchable);delete this.scope;delete this.currentComponent}})})();
(function(){var e=window.MetaphorJs,p=e.view.Scope,m=e.trim,k=e.define,q=e.ns.get,n=e.lib.Watchable,r=e.view.Renderer,d=e.data,g=e.toArray,f=e.toFragment,c=e.clone,b=e.addListener,a=e.normalizeEvent,h=e.registerAttributeHandler,l=e.registerTagHandler,G=e.async,A=n.create,v=n.createGetter,u=e.animate,B=e.addClass,C=e.removeClass,x=e.hasClass,y=e.stopAnimation,L=e.isArray,w=e.isAttached,z=e.view.Template,E=e.lib.Input,K,M=function(a,b){for(var c;a;){c=d(a,b);if(void 0!=c)return c;a=a.parentNode}};MetaphorJs.d("MetaphorJs.view.AttributeHandler",
{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=m(c);this.node=b;this.expr=c;this.scope=a;this.watcher=A(a,c,this.onChange,this);this.onChange();a instanceof p&&a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){delete this.node;delete this.scope;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)},onChange:function(){}});h("mjs-bind",1E3,k(null,"MetaphorJs.view.AttributeHandler",{isInput:!1,initialize:function(a,b,
c){var d=b.tagName.toLowerCase();this.isInput="input"==d||"textarea"==d;this.supr(a,b,c)},onChange:function(){var a=this.watcher.getLastResult();this.isInput?this.node.value=a:this.node.textContent=a}}));h("mjs-bind-html",1E3,k(null,"MetaphorJs.view.AttributeHandler",{onChange:function(){this.node.innerHTML=this.watcher.getLastResult()}}));h("mjs-model",1E3,k(null,"MetaphorJs.view.AttributeHandler",{inProg:!1,input:null,initialize:function(a,b,c){this.node=b;this.input=new E(b,this.onInputChange,
this);this.supr(a,b,c);if(this.watcher&&this.watcher.hasInputPipes())this.onInputChange(this.input.getValue())},onInputChange:function(a){var b=this.scope;this.watcher.setValue(a);this.inProg=!0;b instanceof p?b.$root.$check():this.watcher.checkAll();this.inProg=!1},onScopeDestroy:function(){this.input.destroy();delete this.input;this.supr()},onChange:function(){var a=this.watcher.getLastResult();this.inProg||this.input.setValue(a)}}));h("mjs-show",500,k(null,"MetaphorJs.view.AttributeHandler",{initial:!0,
initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,c=function(){b.display=a?"":"none"};this.initial?c():u(this.node,a?"show":"hide",function(){a&&(b.display="")},!0).done(c)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));h("mjs-hide",500,k(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));h("mjs-if",500,k(null,"MetaphorJs.view.AttributeHandler",
{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;delete this.parentEl;this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},f=function(){c.removeChild(d)};b?w(d)||(a.initial?e():u(d,"enter",e,!0)):w(d)&&(a.initial?f():u(d,"leave",
null,!0).done(f));a.initial=!1}}));h("mjs-each",100,k(null,"MetaphorJs.view.AttributeHandler",{model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;try{this.watcher=A(a,this.model,this.onChange,this)}catch(d){MetaphorJs.error(d)}this.parentEl.removeChild(b);
this.render(g(this.watcher.getValue()))},onScopeDestroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.destroy();delete this.renderers;delete this.tpl;delete this.prevEl;delete this.nextEl;delete this.parentEl;this.supr()},doUpdate:function(a,b){for(var c=this.renderers,d=b,e=c.length,f=e-1,g=!(d%2),h,l;d<e;d++)h=c[d],l=h.scope,l.$index=d,l.$first=0===d,l.$last=d===f,l.$even=g,l.$odd=!g,g=!g,h.renderer?l.$check():(h.renderer=new r(h.el,h.scope),h.renderer.process())},
render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,f=document.createDocumentFragment(),g,h,l;h=0;for(l=a.length;h<l;h++)g=c.cloneNode(!0),f.appendChild(g),b.push(this.createItem(g,a,h));d.insertBefore(f,e);this.doUpdate(a,0)},createItem:function(a,b,c){var d=this.itemName,e=this.scope.$new();e[d]=b[c];return{el:a,scope:e}},onChange:function(a){var b=this,c=b.renderers;a=a.prescription||[];var d=b.tpl,e=0,f=b.parentEl,h=g(b.watcher.getValue()),l=null,k,m,n,p;m=0;for(n=
a.length;m<n;m++)p=a[m],"-"==p?(c[e].scope.$index=e,e++):(null===l&&(l=0<m?m-1:0),"I"!=p&&c[e]&&(k=c[e],k.scope.$destroy(),u(k.el,"leave",null,!0).done(function(a){w(a)&&a.parentNode.removeChild(a)})),"D"==p?c.splice(e,1):(k=d.cloneNode(!0),u(k,"enter",function(a){return function(d){0<a?f.insertBefore(d,c[a-1].el.nextSibling):b.prevEl?f.insertBefore(d,b.prevEl.nextSibling):f.insertBefore(d,f.firstChild)}}(e),!0),"R"==p?c[e]=b.createItem(k,h,e):"I"==p&&(m<c.length?c.splice(e,0,b.createItem(k,h,e)):
c.push(b.createItem(k,h,e))),e++));b.doUpdate(h,l)},parseExpr:function(a){a=a.split(" ");var b,c,d,e,f;b=0;for(c=a.length;b<c;b++)if(f=a[b],""!=f&&"in"!=f)if(e){d=a.slice(b).join(" ");break}else e=f;this.model=d;this.itemName=e||"item"}},{$stopRenderer:!0}));h("mjs-each-in-store",100,k(null,"attr.mjs-each",{store:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each-in-store");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=
b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.store=a=v(this.model)(a);this.parentEl.removeChild(b);this.initWatcher();this.render(this.watcher.getValue());G(this.bindStore,this,[a,"on"]);this.bindStore(a,"on")},onScopeDestroy:function(){this.bindStore(this.store,"un");delete this.store;this.supr()},initWatcher:function(){this.watcher=A(this.store,".items",null);this.watcher.subscribe(this.onChange,this)},resetWatcher:function(){this.watcher.setValue(this.store.items)},bindStore:function(a,
b){a[b]("load",this.onStoreUpdate,this);a[b]("update",this.onStoreUpdate,this);a[b]("add",this.onStoreUpdate,this);a[b]("remove",this.onStoreUpdate,this);a[b]("replace",this.onStoreUpdate,this);a[b]("filter",this.onStoreFilter,this);a[b]("clearfilter",this.onStoreFilter,this);a[b]("clear",this.onStoreClear,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},onStoreFilter:function(){this.resetWatcher();this.onStoreUpdate()},onStoreClear:function(){this.resetWatcher();
this.onStoreUpdate()},onStoreDestroy:function(){this.onStoreClear();this.watcher.unsubscribeAndDestroy(this.onChange,this);delete this.watcher}},{$stopRenderer:!0}));h("mjs-include",900,function(a,b,c,d){a=new z({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});l("mjs-include",900,function(a,b,c,d){return(new z({scope:a,node:b,tpl:b.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});h("mjs-transclude",1E3,function(a,b){var e=M(b,"mjs-transclude");if(e){b.firstChild&&
d(b,"mjs-transclude",f(b.childNodes));var h=b.parentNode,l=b.nextSibling,e=c(e),k=g(e.childNodes);h.removeChild(b);h.insertBefore(e,l);return k}return null});l("mjs-transclude",900,function(a,b){var e=M(b,"mjs-transclude");if(e){b.firstChild&&d(b,"mjs-transclude",f(b.childNodes));var h=b.parentNode,l=b.nextSibling,e=c(e),k=g(e.childNodes);h.removeChild(b);h.insertBefore(e,l);return k}return null});var t=function(a,b,c,d){if(null!==c){if(c==x(a,b))return;c=!c}else c=x(a,b);c?d?u(a,[b+"-remove"],null,
!0).done(function(){C(a,b)}):C(a,b):d?u(a,[b+"-add"],null,!0).done(function(){B(a,b)}):B(a,b)};h("mjs-class",1E3,k(null,"MetaphorJs.view.AttributeHandler",{initial:!0,onChange:function(){var a=this.node,b=this.watcher.getLastResult(),c;y(a);if("string"==typeof b)t(a,b,null,!this.initial);else if(L(b)){var d;c=-1;for(d=b.length;++c<d;t(a,b[c],!0,!this.initial));}else for(c in b)t(a,c,b[c]?!0:!1,!this.initial);this.initial=!1}}));for(var e="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),
J=n.createFunc,n=0,l=e.length;n<l;n++)(function(c){var d=c;"enter"==d&&(d="keyup");h("mjs-"+c,1E3,function(e,f,g,h){var l=J(g);b(f,d,function(b){b=b||window.event;b=a(b);if("enter"==c&&13!=b.keyCode)return null;e.$event=b;l(e);delete e.$event;e instanceof p?e.$root.$check():e.$$watchers&&e.$$watchers.$checkAll();b.preventDefault();return!1})})})(e[n]);e="selected checked disabled readonly required open".split(" ");n=0;for(l=e.length;n<l;n++)(function(a){h("mjs-"+a,1E3,k(null,"MetaphorJs.view.AttributeHandler",
{onChange:function(){this.watcher.getLastResult()?this.node.setAttribute(a,!0):this.node.removeAttribute(a)}}))})(e[n]);n=function(a,b,c,d){K||(K=MetaphorJs.resolveComponent);var e,f,g,h,l;b.removeAttribute("mjs-cmp");c=c.split(" ");g=0;for(h=c.length;g<h;g++)l=c[g],""!=l&&"as"!=l&&(e?f=l:e=l);K(e,{scope:a,node:b,as:f,parentRenderer:d,destroyScope:!0},a,b);return!1};n.$breakScope=!0;h("mjs-cmp",200,n);h("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);h("mjs-view",
200,function(a,b,c){b.removeAttribute("mjs-view");c=q(c||"MetaphorJs.cmp.View");a.$app.inject(c,null,!0,{$scope:a,$node:b,$app:a.$app},[{scope:a,node:b}]);return!1});h("mjs-init",250,function(a,b,c){b.removeAttribute("mjs-init");J(c)(a)});h("mjs-app",0,function(){return!1});h("mjs-ignore",0,function(){return!1})})();
(function(){var e=window.MetaphorJs,p=e.add,m=e.numberFormats,k=e.dateFormats,q=e.trim,n=e.toArray,r=e.isArray;p("filter.uppercase",function(a){return a.toUpperCase()});p("filter.lowercase",function(a){return a.toLowerCase()});p("filter.limitTo",function(a,b,c){b=typeof a;if(!MetaphorJs.isArray(a)&&"string"!=b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if("string"==b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);
0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});p("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});var d=MetaphorJs.numberFormats;p("filter.numeral",function(a,b,c){c=d[c]||c;c=m[c]||c;return numeral(a).format(c)});var g=MetaphorJs.dateFormats;p("filter.moment",function(a,b,c){c=g[c]||c;c=k[c]||c;return moment(a).format(c)});var f=function(a,b,c){if(""===b||"undefined"==typeof b)return!0;if("undefined"!=typeof a){if("boolean"==typeof a)return a===
b;if(c instanceof RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||"undefined"==typeof c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},c=function(a,b,c){if("object"!=typeof a)return"undefined"==typeof b.$?!0:f(a,b.$,c);var d,e;for(d in b)if("$"==d)for(e in a){if(f(a[e],b.$,c))return!0}else if(f(a[d],b[d],c))return!0;return!1};p("filter.filter",function(a,b,d,e){b=d;"object"!=typeof b&&(b={$:b});d=[];var f,g;f=-1;for(g=a.length;++f<g;)c(a[f],
b,e)&&d.push(a[f]);return d});p("filter.sortBy",function(a,b,c,d){d||(d="asc");a=a.slice();a.sort(function(a,b){var d=typeof a,e=a,f=b;if(d!=typeof b)return 0;"object"==d&&(e=a[c],f=b[c]);if("number"==typeof e)return e-f;e=(""+e).toLowerCase();f=(""+f).toLowerCase();return e===f?0:e>f?1:-1});return"desc"==d?a.reverse():a});p("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):
""});var b={};p("filter.toList",function(a,c,d,e){e=e||void 0;d=d||"/\\n|,/";a=""+a;if(!a)return[];"/"==d.substr(0,1)&&"/"==d.substr(d.length-1)&&(c=d.substring(1,d.length-1),d=b[c]||(b[c]=new RegExp(c)));a=a.split(d,e);e=-1;for(c=a.length;++e<c;a[e]=q(a[e]));return a});p("filter.fromList",function(a,b,c){c=c||", ";return a&&a.length?(r(a)||(a=n(a)),a.join(c)):""});p("filter.toArray",function(a){return n(a)})})();
