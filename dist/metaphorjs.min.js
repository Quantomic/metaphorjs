(function(){var Ma={lib:{},cmp:{},view:{}},n=function(a){return"function"==typeof a},nb=Object.prototype.toString,V=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var c=a[nb.call(b)];return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),s=function(a){return"string"==typeof a||a===""+a},na=function(a){if(null===
a||"object"!=typeof a)return!1;a=V(a);return 2<a||-1==a},Na=function(a,b){var c={};a||(a="undefined"!=typeof global?global:window);this.register=function(d,e){var g;g=d;var f=g.split("."),k,h=f.pop();k=f.join(".");var l=f.length,v,p=a;if(c[k])g=[c[k],h,g];else{if(0<l)for(k=0;k<l;k++){v=f[k];if(b&&0==k)if(v==b){p=a;continue}else g=b+"."+g;void 0===p[v]&&(p[v]={});p=p[v]}else b&&(g=b+"."+g);g=[p,h,g]}f=g[0];h=g[1];na(f)&&void 0===f[h]&&(f[h]=e,c[g[2]]=e);return e};this.exists=function(a){return void 0!==
c[a]};this.get=function(d,e){if(void 0!==c[d])return c[d];if(b&&void 0!==c[b+"."+d])return c[b+"."+d];if(!e){var g=d.split("."),f,k=g.length,h,l=a;for(f=0;f<k;f++)if(h=g[f],b&&0==f&&h==b)l=a;else{if(void 0===l[h])return;l=l[h]}l&&(c[d]=l);return l}};this.add=function(a,e){b&&0!==a.indexOf(b)&&(a=b+"."+a);void 0===c[a]&&(c[a]=e);return e};this.remove=function(a){delete c[a]}};Na.prototype={register:null,exists:null,get:null,add:null,remove:null};var aa=Array.prototype.slice,oa=function(a,b,c,d){setTimeout(function(){a.apply(b,
c||[])},d||0)},W=function(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)oa(function(){console.log(a);b&&console.log(b)});else throw a;},O=function(){},Ya=function(a){a||(a=new Na);var b=function(){this.supr&&this.supr!==O&&this.supr.apply(this,arguments)},c=function(a,b){return g(function(){},a,b)},d=function(a,b,c){return function(){var d,e=this.supr;this.supr=a.prototype[b]||("__construct"==b?a:O)||O;d=c.apply(this,arguments);this.supr=e;return d}},e=function(a,b,c){for(var e in b)b.hasOwnProperty(e)&&
(a[e]=!n(b[e])||!n(c.prototype[e])&&c.prototype[e]?b[e]:d(c,e,b[e]))},g=function(a,c,d){var g=function(){};g.prototype=a.prototype;g=new g;c.__construct=d||b;var f=function(){this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};e(g,c,a);g.constructor=f;f.prototype=g;f.prototype.getClass=function(){return f.__class};f.prototype.getParentClass=function(){return f.__parentClass};f.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;
b=new b;c=a.prototype.constructor.apply(b,arguments);return na(c)?c:b}}(f);return f},f=function(b,d,e,f,p,K){null===b&&(b="");n(b)?(p=e,s(d)?(p=f,f=e):(f=d,e=b,d=null),b=null):s(b)||(p=d,f=b,b=e=d=null);s(d)||n(d)||(p=f,f=e,e=d,d=null);n(e)||(p=f,f=e,e=null);f=f||{};var r=d&&s(d)?a.get(d):d;if(d&&!r)throw Error(d+" not found");d=r?g(r,f,e):c(f,e);d.__isMetaphorClass=!0;d.__parent=r;d.__parentClass=r?r.__class:null;d.__class=b;if(p)for(var w in p)p.hasOwnProperty(w)&&(d[w]=p[w]);b&&(K?a.add(b,d):a.register(b,
d));p&&p.alias&&a.add(p.alias,d);return d};this.factory=function(b){var c=a.get(b),d=aa.call(arguments,1);if(!c)throw Error(b+" not found");return c.__instantiate.apply(this,d)};this.isSubclassOf=function(b,c){var d=b,e=a.get;s(c)||(c=c.getClass?c.getClass():c.prototype.constructor.__class);for(s(b)&&(d=e(b));d;){if(d.prototype.constructor.__class==c)return!0;d&&(d=d.getParentClass?e(d.getParentClass()):d.__parent)}return!1};this.isInstanceOf=function(b,c){var d=s(c)?a.get(c):c;return d?b instanceof
d:!1};this.define=f;this.defineCache=function(a,b,c,d,e){return f(a,b,c,d,e,!0)};this.extend=function(a,b,c,d){return f(null,a,b,c,d)}};Ya.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null,extend:null};var X=new Na(Ma,"MetaphorJs"),J=(new Ya(X)).define,m=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},ka=function(a){return"object"==typeof a&&3===V(a)&&!a.nodeType},Ba=function(a){return!0===
a||!1===a},Oa=function(a){return null===a},P=function(){return function b(){var c=!1,d=!1,e=aa.call(arguments),g=e.shift(),f,k,h;Ba(e[e.length-1])&&(c=e.pop());Ba(e[e.length-1])&&(d=c,c=e.pop());for(;e.length;)if(f=e.shift())for(k in f)if(f.hasOwnProperty(k)&&void 0!==(h=f[k]))if(d)if(g[k]&&ka(g[k])&&ka(h))b(g[k],h,c,d);else{if(!0===c||void 0==g[k])ka(h)?(g[k]={},b(g[k],h,c,!0)):g[k]=h}else if(!0===c||void 0==g[k])g[k]=h;return g}}(),Y=function(){var a=["0","0","0"];return function(){for(var b=a.length,
c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),ba=function(){this.events={}};ba.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new Pa(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new Pa(a));return e[a].on(b,c,d)},once:function(a,b,
c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,aa.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=
this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events=
{}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=m(this[c],this));this.api=b}return this.api}};var Pa=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=Y();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===b?null:b};Pa.prototype={getName:function(){return this.name},
destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var g=++this.lid,f=c.first||!1;e[d]=g;a={fn:a,scope:b,uniScope:e,id:g,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};f?this.listeners.unshift(a):this.listeners.push(a);this.map[g]=a;return g},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,
g;g=a==parseInt(a)?a:(b||a)[d];if(!g)return!1;for(var f=0,k=e.length;f<k;f++)if(e[f].id==g){c=f;delete e[f].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[g];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=n(a)?b[this.uni]:a;if(!d)return!1;for(var e=0,g=c.length;e<g;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];
this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=aa.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:aa.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,
arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};var D=function(a){return"object"==typeof a&&5===V(a)},F=function(){return String.prototype.trim?function(a){return s(a)?a.trim():a}:function(a){return s(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Qa=function(a){return a===window||a&&a.document&&a.location&&a.alert&&a.setInterval},Za=function(){var a=function(b,c){if(b===c)return!0;if(null===
b||null===c)return!1;if(b!==b&&c!==c)return!0;var d=typeof b,e;if(d==typeof c&&"object"==d)if(D(b)){if(!D(c))return!1;if((d=b.length)==c.length){for(e=0;e<d;e++)if(!a(b[e],c[e]))return!1;return!0}}else{if(10===V(b))return 10===V(c)&&b.getTime()==c.getTime();if(9===V(b)&&9===V(c))return b.toString()==c.toString();if(Qa(b)||Qa(c)||D(c))return!1;d={};for(e in b)if("$"!=e.charAt(0)&&!n(b[e])){if(!a(b[e],c[e]))return!1;d[e]=!0}for(e in c)if(!d.hasOwnProperty(e)&&"$"!=e.charAt(0)&&void 0!==c[e]&&!n(c[e]))return!1;
return!0}return!1};return a}(),ob=function(){var a=function(b,c){if(Qa(b))throw Error("Cannot copy window object");if(c){if(b===c)throw Error("Objects are identical");if(D(b))for(var d=c.length=0,e=b.length;d<e;d++)c.push(a(b[d]));else{for(d in c)delete c[d];for(d in b)c[d]=a(b[d])}}else(c=b)&&(D(b)?c=a(b,[]):10===V(b)?c=new Date(b.getTime()):9===V(b)?c=new RegExp(b.source):ka(b)&&(c=a(b,{})));return c};return a}(),pa=function(a){a=V(a);return 3>a&&-1<a},qa,ea;qa=ea=function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,
b=function(a){if(!s(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},c,d=function(a,d,e,f,h,l){c||(c=new ba);var k=Y(),v;l&&(this.namespace=l,this.nsGet=l.get);this.origCode=d;s(d)||(f=e,e=d,d=null,v="object");s(a)&&(f=e,e=d,d=a,a=null);d&&a&&(v=a.hasOwnProperty(d)?"attr":"expr");d&&!a&&(v="expr");if(e)c.on(k,e,f||this,{append:[h],allowDupes:!0});if("expr"==v){d=this._processInputPipes(d,a);d=this._processPipes(d,a);if(this.inputPipes||this.pipes)d=
g(a,d),v=a.hasOwnProperty(d)?"attr":"expr";if(this.staticValue=b(d))v="static"}this.userData=h;this.code=d;this.id=k;this.type=v;this.obj=a;"expr"==v&&(this.getterFn=p(d));this.curr=this._getValue()};d.prototype={namespace:null,nsGet:null,staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,prev:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,_indexArrayItems:function(a){var b="$$"+this.id,c,d,e;if(a)for(c=
0,d=a.length;c<d;c++)e=a[c],!e||pa(e)||e[b]||(e[b]=Y())},_processInputPipes:function(a,b){if(-1==a.indexOf(">>"))return a;for(var c=0,d=a.length,e=[],g,f,h,l=a;c<d&&-1!=(g=a.indexOf(">>",c));)f=a.charAt(g-1),h=a.charAt(g+2),"\\"!=f&&"'"!=f&&'"'!=f&&"'"!=h&&'"'!=h&&(c=F(a.substring(c,g)).split(":"),l=a.substr(g+2),this._addPipe(e,c,b,this.onInputParamChange)),c=g+2;e.length&&(this.inputPipes=e);return F(l)},_addPipe:function(a,b,c,d){var g=b.shift(),f=null,h=[],l;this.nsGet&&(f=this.nsGet("filter."+
g,!0));f||(f=window[g]||c[g]);if(n(f)){g=-1;for(l=b.length;++g<l;h.push(e(c,b[g],d,this,null,this.namespace)));a.push([f,b,h])}},_processPipes:function(a,b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,e=[],g,f,h,l=!1,k=a;c<d;)if(-1!=(g=a.indexOf("|",c)))f=a.charAt(g-1),h=a.charAt(g+1),"|"!=f&&"'"!=f&&'"'!=f&&"|"!=h&&"'"!=h&&'"'!=h&&(l?(c=F(a.substring(c,g)).split(":"),this._addPipe(e,c,b)):(l=!0,k=F(a.substring(0,g)))),c=g+1;else{l&&(c=F(a.substr(c)).split(":"),this._addPipe(e,c,b,this.onPipeParamChange));
break}e.length&&(this.pipes=e);return k},_getValue:function(){var a;switch(this.type){case "static":a=this.staticValue;break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);void 0===a&&(a="");break;case "object":a=this.obj}D(a)&&(this.inputPipes||this._indexArrayItems(a));pa(a)||(a=ob(a));this.unfiltered=a;return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,e,g=b.length,f=this.obj,h,l;for(c=0;c<g;c++){e=b[c][1];d=[];h=-1;for(l=e.length;++h<
l;d.push(u(e[h],f)));d.unshift(f);d.unshift(a);a=b[c][0].apply(null,d)}}return a},subscribe:function(a,b,d){c.on(this.id,a,b,d)},unsubscribe:function(a,b){return c.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||this.curr},getPrevValue:function(){return null===this.prev?this._getValue():this.prev},getPrescription:function(a,b){var c;
b=b||this._getValue();var d=b,e=a.length,g=d.length,f=Array(e+1);c=Array(e+1);var h,l,k,v=0;if(e==g&&0==e)c=[];else{for(h=0;h<=e;h++)f[h]=Array(g+1),c[h]=Array(g+1),f[h][0]=h,c[h][0]="D";for(h=0;h<=g;h++)f[0][h]=h,c[0][h]="I";for(h=1;h<=e;h++)for(l=1;l<=g;l++)k=Za(a[h-1],d[l-1])?0:1,f[h][l-1]<f[h-1][l]&&f[h][l-1]<f[h-1][l-1]+k?(f[h][l]=f[h][l-1]+1,c[h][l]="I"):f[h-1][l]<f[h-1][l-1]+k?(f[h][l]=f[h-1][l]+1,c[h][l]="D"):(f[h][l]=f[h-1][l-1]+k,c[h][l]=1==k?"R":"-");d=[];h=e;l=g;do e=c[h][l],d.push(e),
"-"!=e&&v++,"R"==e||"-"==e?(h--,l--):"D"==e?h--:l--;while(0!=h||0!=l);c=d.reverse()}return c},getMovePrescription:function(a,b,c){var d=c=c||this._getValue();c=this.getPrescription(a,c);var e=[],g,f,h,l={},k,v;g=0;for(f=a.length;g<f;g++)(h=b(a[g]))&&(l[h]=g);k=0;var p={};g=0;for(f=c.length;g<f;g++)a=c[g],"D"!=a&&(h=b(d[k]),void 0!=h&&!0!==p[h]&&void 0!==(v=l[h])?(e.push(v),p[h]=!0):e.push(a),k++);return e},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);
"attr"==b?this.obj[this.code]=a:"expr"==b?(this.setterFn||(this.setterFn=w(this.code)),this.setterFn(this.obj,a)):"object"==b&&(this.obj=a)},onInputParamChange:function(){this.setValue(this.lastSetValue)},onPipeParamChange:function(){this.check()},check:function(){var a=this._getValue(),b=this.curr;return Za(b,a)?!1:(this.curr=a,this.prev=b,c.trigger(this.id,a,b),!0)},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=
this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,b){var d=this.id;a&&c.un(d,a,b);return c.hasListener(d)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,d,e,g,f,h;this.itv&&this.clearInterval();if(a)for(d=-1,e=a.length;++d<e;)for(h=a[d][2],g=-1,f=h.length;++g<f;)h[g].unsubscribeAndDestroy(this.check,this);if(b)for(d=-1,e=b.length;++d<e;)for(h=
b[d][2],g=-1,f=h.length;++g<f;)h[g].unsubscribeAndDestroy(this.onInputParamChange,this);this.obj&&delete this.obj.$$watchers[this.origCode];delete this.id;delete this.curr;delete this.prev;delete this.unfiltered;delete this.obj;delete this.pipes;delete this.inputPipes;delete this.origCode;delete this.code;delete this.getterFn;delete this.setterFn;delete this.lastSetValue;delete this.staticValue;delete this.userData;delete this.namespace;delete this.nsGet;c.destroyEvent(this.id)}};var e=function(a,
b,c,e,f,h){b=g(a,F(b));return a?(a.$$watchers||(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?b++:"$"==a.charAt(0)&&this[a]instanceof d&&this[a].check()&&b++;return b},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof d)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].subscribe(c,e,{append:[f],allowDupes:!0}):a.$$watchers[b]=new d(a,b,c,e,f,h),a.$$watchers[b]):new d(a,b,c,e,f,h)},g=function(a,b){if(a&&
b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},f=Function,k=function(a,b,c,d){for(;c&&!c.$isRoot;)if(c=c.$parent)try{return 4==arguments.length?b.call(null,c,d,O,b):b.call(null,c,O,b)}catch(e){}null!==a&&W(a)},h=function(a,b){return function(){var c=aa.call(arguments);c.push(k);c.push(a);c=a.apply(null,c);return b&&void 0===c?(c=aa.call(arguments),c.unshift(a),c.unshift(null),k.apply(null,c)):c}},l={},v=0,p=function(b){try{return l[b]?
l[b]:(v++,l[b]=h(new f("____","$$interceptor","$$itself","".concat("try {","return ",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }")),!0))}catch(c){return W(c),O}},K={},r=0,w=function(b){try{if(!K[b]){r++;var c=b.replace(a,"$1____.$3");return K[b]=h(new f("____","$$$$","$$interceptor","$$itself","".concat("try {",c," = $$$$",";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____, $$$$); }")))}return K[b]}catch(d){return W(d),
O}},t={},q=0,u=function(a,c){var d;return(d=b(a))?d:p(a)(c)},m=function(){1E3<=v&&(l={});1E3<=r&&(K={});1E3<=q&&(t={})};d.create=e;d.unsubscribeAndDestroy=function(a,b,c,d){b=F(b);(a=a.$$watchers)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};d.normalizeExpr=g;d.prepareCode=function(b){return b.replace(a,"$1____.$3")};d.createGetter=p;d.createSetter=w;d.createFunc=function(b){try{return t[b]?t[b]:(q++,t[b]=h(new f("____","$$interceptor","$$itself","".concat("try {",b.replace(a,"$1____.$3"),
";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return W(c),O}};d.eval=u;d.enableResetCacheInterval=function(){setTimeout(m,1E4)};return d}();var da=function(a){this.$$observable=new ba;this.$$historyWatchers={};P(this,a,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};da.prototype={$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,
$$watchers:null,$$historyWatchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new da({$parent:this,$root:this.$root,$app:this.$app})},$newIsolated:function(){return new da({$app:this.$app})},$on:function(a,b,c){return this.$$observable.on(a,b,c)},$un:function(a,b,c){return this.$$observable.un(a,b,c)},$watch:function(a,b,c){return qa.create(this,a,b,c,null)},$unwatch:function(a,b,c){return qa.unsubscribeAndDestroy(this,a,b,c)},$watchHistory:function(a,b){this.$$historyWatchers[b]||(this.$$historyWatchers[b]=
a,Ma.history.on("change-"+b,this.$$onHistoryChange,this))},$unwatchHistory:function(a){this.$$historyWatchers[a]||(delete this.$$historyWatchers[a],Ma.history.un("change-"+a,this.$$onHistoryChange,this))},$get:function(a){for(var b=this;b;){if(void 0!==b[a])return b[a];b=b.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$$onHistoryChange:function(a,b,c){this.$$historyWatchers[c]&&(b=this.$$historyWatchers[c],this[b]=a,this.$check())},$check:function(){var a;
this.$$checking||(this.$$checking=!0,this.$$watchers&&(a=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",a))},$destroy:function(){var a;this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;delete this.$app;delete this.$root;delete this.$parent;this.$$watchers&&(this.$$watchers.$destroyAll(),delete this.$$watchers);for(a in this.$$historyWatchers)this.$unwatchHistory(a);delete this.$$historyWatchers;this.$$destroyed=
!0}};var Z=function(a){if(a&&void 0!=!a.length&&a!==""+a){for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b}return a?[a]:[]},S=function(a){if(!a||!a.then)return!1;var b,c;return"object"!=(c=typeof a)&&"function"!=c?!1:n(b=a.then)?b:!1},Da=X.get,Ea=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,g=/(~|>|\+)/,f=/ +/,k=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,
h=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,l=/\D/,v=/[^(]*\(([^)]*)\)/,p=/\(.*/,K=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,r=document,w=!!r.getElementsByClassName,t=!!r.querySelectorAll,q={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+
d)%e);var g=a.parentNode.firstChild;c++;do if(1==g.nodeType&&(g.nodeIndex=++c)&&a===g&&(c+d)%e)return 0;while(g=g.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var g=a.parentNode.lastChild;c++;do if(1==g.nodeType&&(g.nodeLastIndex=c++)&&a===g&&(c+d)%e)return 0;while(g=g.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=
a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&r.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},u={},m=function(a){return u[a]||(u[a]=new RegExp("(^| +)"+a+"($| +)"))},y={"":function(a,b){return null!==a.getAttribute(b)},"=":function(a,b,c){var d;return(d=a.getAttribute(b))&&d===c},"&=":function(a,b,c){var d;
return(d=a.getAttribute(b))&&m(c).test(d)},"^=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&!d.indexOf(c)},"$=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&d.indexOf(c)==d.length-c.length},"*=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&-1!=d.indexOf(c)},"|=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&(d===c||!!d.indexOf(c+"-"))},"!=":function(a,b,c){var d;return!(d=a.getAttribute(b))||!m(c).test(d)}},L=function(L,T){T=T||r;var z=[],G=null,R,m,u,x,B,n,s;if(t)try{z=
Z(T.querySelectorAll(L.replace(b,'="$1"')))}catch(A){G=!0}if(!t||G)if(a.test(L))switch(G=0,L.charAt(0)){case "#":G=L.slice(1);z=r.getElementById(G);z.id!==G&&(z=r.all[G]);z=z?[z]:[];break;case ".":R=L.slice(1);if(w)z=Z((z=T.getElementsByClassName(R)).length?z:[]);else{R=" "+R+" ";m=T.getElementsByTagName("*");for(u=0;x=m[u++];)-1!=(" "+x.className+" ").indexOf(R)&&(z[G++]=x);z=G?z:[]}break;case ":":m=T.getElementsByTagName("*");u=0;B=L.replace(v,"$1");for(n=L.replace(p,"");x=m[u++];)q[n]&&!q[n](x,
B)&&(z[G++]=x);z=G?z:[];break;case "[":m=T.getElementsByTagName("*");u=0;x=K.exec(L);R=x[1];s=x[2]||"";for(B=x[3];x=m[u++];)y[s]&&(y[s](x,R,B)||"class"===R&&y[s](x,"className",B))&&(z[G++]=x);z=G?z:[];break;default:z=Z((z=T.getElementsByTagName(L)).length?z:[])}else{for(var C=L.split(c),M=C.length-1,O=!!M,N,P,H,Q,D,F,I,J,V,E,S,U;G=C[M--];){P=(N=G.replace(d,"$1%").replace(e,"$1&").replace(g," $1 ").split(f)).length;u=0;Q=" ";for(m=[T];H=N[u++];)if(" "!==H&&">"!==H&&"~"!==H&&"+"!==H&&m){H=H.match(k);
D=H[1]||"*";F=H[2];I=H[3]?" "+H[3]+" ":"";R=H[4];s=H[5]||"";n=H[7];B="nth-child"===n||"nth-last-child"===n?h.exec("even"===H[8]&&"2n"||"odd"===H[8]&&"2n%1"||!l.test(H[8])&&"0n%"+H[8]||H[8]):H[8];J=[];G=V=0;for(S=u==P;E=m[V++];)switch(Q){case " ":U=E.getElementsByTagName(D);for(E=0;x=U[E++];)F&&x.id!==F||I&&-1==(" "+x.className+" ").indexOf(I)||!(!R||y[s]&&(y[s](x,R,H[6])||"class"===R&&y[s](x,"className",H[6])))||x.yeasss||(q[n]?q[n](x,B):n)||(S&&(x.yeasss=1),J[G++]=x);break;case "~":for(D=D.toLowerCase();(E=
E.nextSibling)&&!E.yeasss;)1!=E.nodeType||"*"!==D&&E.nodeName.toLowerCase()!==D||F&&E.id!==F||I&&-1==(" "+E.className+" ").indexOf(I)||!(!R||y[s]&&(y[s](x,R,H[6])||"class"===R&&y[s](x,"className",H[6])))||E.yeasss||(q[n]?q[n](E,B):n)||(S&&(E.yeasss=1),J[G++]=E);break;case "+":for(;(E=E.nextSibling)&&1!=E.nodeType;);!E||E.nodeName.toLowerCase()!==D.toLowerCase()&&"*"!==D||F&&E.id!==F||I&&-1==(" "+x.className+" ").indexOf(I)||!(!R||y[s]&&(y[s](x,R,H[6])||"class"===R&&y[s](x,"className",H[6])))||E.yeasss||
(q[n]?q[n](E,B):n)||(S&&(E.yeasss=1),J[G++]=E);break;case ">":for(U=E.getElementsByTagName(D),u=0;x=U[u++];)x.parentNode!==E||F&&x.id!==F||I&&-1==(" "+x.className+" ").indexOf(I)||!(!R||y[s]&&(y[s](x,R,H[6])||"class"===R&&y[s](x,"className",H[6])))||x.yeasss||(q[n]?q[n](x,B):n)||(S&&(x.yeasss=1),J[G++]=x)}m=J}else Q=H;if(O){if(!m.concat){J=[];for(E=0;x=m[E];)J[E++]=x;m=J}z=m.concat(1==z.length?z[0]:z)}else z=m}for(G=z.length;G--;)z[G].yeasss=z[G].nodeIndex=z[G].nodeIndexLast=null}return z};L.is=function(a,
b){var c=L(b,a.parentNode),d,e;d=-1;for(e=c.length;++d<e;)if(c[d]===a)return!0;return!1};return L}(),$a=function(){var a=document.createTextNode("");return s(a.textContent)?"textContent":"nodeValue"}(),ab=function(){var a=/\\{/g,b=new ba,c=function(a,b,c,k,h){return!b||!b.indexOf||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new d(a,b,c,k,h)},d=function(a,b,c,d,h){this.id=Y();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=d;this.lang=a.$app?a.$app.lang:null;if(!0===h||!1===h)this.recursive=
h;this.watchers=[];this.children=[];this.dataChangeDelegate=m(this.doDataChange,this);this.processed=this.processText(b);this.render()};d.prototype={id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(a,c){return b.on(this.id,a,c)},unsubscribe:function(a,c){return b.un(this.id,a,c)},getString:function(){null===this.text&&this.render();var b=this.text;return-1!=
b.indexOf("\\{")?b.replace(a,"{"):b},render:function(){var a=this.processed,b,c,k;this.children.length||this.createChildren();k=this.children;b=-1;for(c=k.length;++b<c;a=a.replace("---"+b+"---",k[b]instanceof d?k[b].getString():k[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,d,h,l="";b<c;)if(-1!=(d=a.indexOf("{{",b))&&-1!=(h=a.indexOf("}}",d+2))&&"\\"!=a.substr(d-1,1))l+=a.substring(b,d),h!=d+2&&(l+=this.watcherMatch(a.substring(d+2,h))),b=h+2;else{b!==c&&(l+=a.substring(b));
break}b=0;a=l;c=a.length;for(l="";b<c;)if(-1!=(d=a.indexOf("{[",b))&&-1!=(h=a.indexOf("]}",d+2))&&"\\"!=a.substr(d-1,1))l+=a.substring(b,d),h!=d+2&&(l+=this.watcherMatch(a.substring(d+2,h),!0)),b=h+2;else{b!==c&&(l+=a.substring(b));break}return l},watcherMatch:function(a,b){var c=this.watchers;if(b){a=F(a);var d=a.split("|"),h=F(d[0]);"."!=h.substr(0,1)&&(d[0]="'"+h+"'");1==d.length&&d.push("l");a=d.join(" | ")}c.push(ea(this.scope,a,this.onDataChange,this,null,X));return"---"+(c.length-1)+"---"},
onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?b.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,b=this.children,d=this.scope,k=this.recursive,h,l,v;h=-1;for(l=a.length;++h<l;)v=a[h].getLastResult(),b.push(k&&c(d,v,this,null,!0)||v)},destroyChildren:function(){var a=
this.children,b,c;b=-1;for(c=a.length;++b<c;)a[b]instanceof d&&a[b].destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();b.destroyEvent(this.id);delete this.watchers;delete this.children;delete this.origin;delete this.processed;delete this.text;delete this.scope;delete this.data;delete this.dataChangeDelegate;delete this.lang;
this.changeTmt&&clearTimeout(this.changeTmt);delete this.changeTmt}};d.create=c;return d}(),pb=function(a){var b={},c,d,e=a.attributes;a=0;for(c=e.length;a<c;a++)d=e[a],b[d.name]=d.value;return b},N=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=Y());var e=a[b];return void 0!==d?(e||(e=a[b]={}),e[c]=d):e?e[c]:void 0}}(),C=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var e=a.shift();c(function(){e[0].apply(e[1],
e[2]);a.length?d():b=!1},0)},e=function(c,e,g){g=g||[];a.push([c,e,g]);b||d()},g=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},f=function(a,b){if(a instanceof f)return a;if(!(this instanceof f))return new f(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=S(a))a instanceof f?a.then(m(this.resolve,this),m(this.reject,this)):(new f(c,a)).then(m(this.resolve,this),m(this.reject,this));else if(n(a))try{a.call(b,m(this.resolve,
this),m(this.reject,this))}catch(d){this.reject(d)}else this.resolve(a)};f.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));
else{try{if(c=S(a)){a instanceof f?a.then(m(this._processResolveValue,this),m(this._processRejectReason,this)):(new f(c,a)).then(m(this._processResolveValue,this),m(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new f,d=this._state;0==d||0!=this._wait?(a&&n(a)?this._fulfills.push([g(a,c),null]):this._fulfills.push([c.resolve,c]),b&&n(b)?this._rejects.push([g(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&n(a)?e(g(a,c),null,[this._value]):c.resolve(this._value):2==d&&(b&&n(b)?e(g(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,
this._value)}catch(c){W(c)}},done:function(a,b){var c=this._state;if(1==c&&0==this._wait)try{a.call(b||null,this._value)}catch(d){W(d)}else 0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){W(c)}},fail:function(a,b){var c=this._state;if(2==c&&0==this._wait)try{a.call(b||null,this._reason)}catch(d){W(d)}else 0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},
promise:function(){return{then:m(this.then,this),done:m(this.done,this),fail:m(this.fail,this),always:m(this.always,this)}},after:function(a){var b=this;if(S(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};n(a.done)?a.done(c):a.then(c)}return b}};f.fcall=function(a,b,c){return f.resolve(a.apply(b,c||[]))};f.resolve=function(a){var b=new f;b.resolve(a);return b};f.reject=function(a){var b=new f;b.reject(a);return b};
f.all=function(a){if(!a.length)return f.resolve(null);var b=new f,c=a.length,d=Array(c),e=c,g,r,w=function(a,c){d[c]=a;e--;0==e&&b.resolve(d)};for(g=0;g<c;g++)(function(c){r=a[g];r instanceof f?r.done(function(a){w(a,c)}).fail(b.reject,b):S(r)||n(r)?(new f(r)).done(function(a){w(a,c)}).fail(b.reject,b):w(r,c)})(g);return b};f.when=function(){return f.all(arguments)};f.allResolved=function(a){if(!a.length)return f.resolve(null);var b=new f,c=a.length,d=[],e=c,g,r,w=function(a){d.push(a);m()},m=function(){e--;
0==e&&b.resolve(d)};for(g=0;g<c;g++)r=a[g],r instanceof f?r.done(w).fail(m):S(r)||n(r)?(new f(r)).done(w).fail(m):w(r);return b};f.race=function(a){if(!a.length)return f.resolve(null);var b=new f,c=a.length,d,e;for(d=0;d<c&&(e=a[d],e instanceof f?e.done(b.resolve,b).fail(b.reject,b):S(e)||n(e)?(new f(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};f.waterfall=function(a){if(!a.length)return f.resolve(null);for(var b=a.shift(),b=n(b)?f.fcall(b):f.resolve(c),c;c=a.shift();)S(c)?
b=b.then(function(a){return function(){return a}}(c)):n(c)?b=b.then(c):b.resolve(c);return b};f.counter=function(a){var b=new f;b.countdown=function(){a--;0==a&&b.resolve()};return b};return f}(),I=X.add,Ra=function(){var a=[],b=[],c=!1,d=!1,e=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return{registerAttributeHandler:function(b,d,e){Da("attr."+b,!0)||(a.push({priority:d,name:b,handler:I("attr."+b,e)}),c=!1)},getAttributeHandlers:function(){c||(a.sort(e),c=!0);return a},
registerTagHandler:function(a,c,e){Da("tag."+a,!0)||(b.push({priority:c,name:a,handler:I("tag."+a,e)}),d=!1)},getTagHandlers:function(){d||(b.sort(e),d=!0);return b}}}(),qb=Ra.getAttributeHandlers,Sa=function(){var a=null,b=ab.create,c=function(a,b,c,d,e,f){var k=[];if(a&&!0!==a){if(a.nodeType){f.countdown+=1;g(a,c,d,e,f);return}k=aa.call(a)}k.length||(k=Z(b.childNodes));b=k.length;f.countdown+=b;for(a=-1;++a<b;g(k[a],c,d,e,f));},d=function(a,b){if(b)if(b.nodeType)a.push(b);else if(D(b))for(var c=
-1,e=b.length;++c<e;d(a,b[c]));},e={script:!0,template:!0,"mjs-template":!0,style:!0},g=function(a,b,d,g,f){if(a){var k;k=a.nodeName;f||(f={countdown:1});if(!k||!e[k.toLowerCase()])if(k=b.call(d,a),!1!==k){if(S(k)){k.done(function(e){!1!==e&&c(e,a,b,d,g,f);0==--f.countdown&&g&&g.call(d)});return}c(k,a,b,d,g,f)}0==--f.countdown&&g&&g.call(d)}},f=new ba,k=function(a,b,c){this.id=Y();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof da&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",
this.destroy,this)};k.prototype={id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,_observable:null,on:function(a,b,c){return f.on(a+"-"+this.id,b,c)},un:function(a,b,c){return f.un(a+"-"+this.id,b,c)},createChild:function(a){return new k(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b,g=b.$app;c=g.inject(a,null,{$scope:e,$node:c,$attrValue:d,$renderer:this},[e,c,d,this]);g&&a.$registerBy&&
c&&(S(c)?c.done(function(c){g.registerCmp(c,b,a.$registerBy)}):g.registerCmp(c,b,a.$registerBy));return a.$stopRenderer?!1:c},processNode:function(c){var e=c.nodeType,g=this.texts,f=this.scope,k,r;if(3==e){if(k=null!==c.parentNode.getAttribute("mjs-recursive"),e=b(f,c[$a],null,g.length,k))e.subscribe(this.onTextChange,this),g.push({node:c,tr:e}),this.renderText(g.length-1)}else if(1==e){a||(a=qb());var e=[],m=[],t,q,u;r="tag."+c.tagName.toLowerCase();if(r=Da(r,!0)){q=this.runHandler(r,f,c);if(!1===
q)return!1;S(q)?e.push(q):d(m,q)}t=pb(c);r=0;for(k=a.length;r<k;r++)if(u=a[r].name,void 0!==(q=t[u])){q=this.runHandler(a[r].handler,f,c,q);c.removeAttribute(u);delete t[u];if(!1===q)return!1;S(q)?e.push(q):d(m,q)}if(e.length){var n=new C;C.all(e).done(function(a){d(m,a);n.resolve(m)});return n}k=void 0!==t["mjs-recursive"];delete t["mjs-recursive"];for(r in t)if(e=b(f,t[r],null,g.length,k))c.removeAttribute(r),e.subscribe(this.onTextChange,this),g.push({node:c,attr:r,tr:e}),this.renderText(g.length-
1);return m.length?m:!0}return!0},process:function(){g(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){f.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?("value"==c?a.node.value=b:"class"==c?a.node.className=b:"src"==c&&(a.node.src=b),a.node.setAttribute(c,b)):a.node[$a]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=
!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&this.parent.un("destroy",this.destroy,this);delete this.texts;delete this.el;delete this.scope;delete this.parent;f.trigger("destroy-"+this.id)}}};return k}(),bb=function(){var a,b=function(){this.store={}};b.prototype={store:null,getApi:function(){return{value:m(this.value,this),constant:m(this.constant,this),factory:m(this.factory,this),service:m(this.service,this),provider:m(this.provider,this),resolve:m(this.resolve,this),inject:m(this.inject,
this)}},instantiate:function(a,b,e){return a.__instantiate?a.__instantiate.apply(null,e):a.apply(b,e)},inject:function(a,b,e,g){e=e||{};g=g||[];var f=this;if(n(a))if(a.inject)g=aa.call(a.inject),g.push(a),a=g;else return f.instantiate(a,b,g);a=aa.call(a);g=[];var k=a.pop(),h,l;h=-1;for(l=a.length;++h<l;g.push(f.resolve(a[h],e)));return C.all(g).then(function(a){return f.instantiate(k,b,a)})},value:function(a,b){this.store[a]={type:1,value:b}},constant:function(a,b){var e=this.store;e[a]||(e[a]={type:2,
value:b})},factory:function(a,b,e,g){Ba(e)&&(g=e,e=null);this.store[a]={type:3,singleton:g,fn:b,context:e}},service:function(a,b,e){this.store[a]={type:4,singleton:e,fn:b}},provider:function(a,b){this.store[a+"Provider"]={name:a,type:5,fn:b,instance:null}},resolve:function(b,d){var e=this.store,g,f,k;if(void 0!==d[b])return d[b];if(f=e[b]){g=f.type;if(1==g||2==g)return f.value;if(3==g)k=this.inject(f.fn,f.context,d);else if(4==g)k=this.inject(f.fn,null,d);else if(5==g)return f.instance||(f.instance=
C.resolve(this.inject(f.fn,null,d)).done(function(a){f.instance=a;e[f.name]={type:3,fn:a.$get,context:a}})),f.instance;f.singleton&&(f.type=1,f.value=k,3==g&&S(k)&&k.done(function(a){f.value=a}));return d[b]=k}if(e[b+"Provider"])return this.resolve(b+"Provider",d),this.resolve(b,d);if(this===a)throw"Could not provide value for "+b;return a.resolve(b)},destroy:function(){delete this.store;delete this.scope}};b.global=function(){return a};a=new b;return b}(),rb=function(){var a=function(a,b){"pt_BR"==
b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},b=function(a){this.store={};a&&(this.locale=a)};b.prototype={store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var c=this.store;void 0===c[a]&&(c[a]=b)},load:function(a){P(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===c?"-- "+a+" --":c.get(a))},plural:function(b,c){var g=this.get(b),f=a(c,this.locale);return D(g)?g[f]:ka(g)?g[c]?g[c]:1==c&&void 0!=g.one?g.one:0>c&&void 0!=g.negative?g.negative:g.other:g}};var c=new b;b.global=function(){return c};return b}();J("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(a){a=a||{};this._observable=new ba;
P(this,this._observable.getApi(),!0,!1);if(a.callback){var b=a.callback,c=b.scope||this;delete b.scope;for(var d in b)if(b.hasOwnProperty(d))this.on(d,b[d],c);delete a.callback}P(this,a,!0,!1)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",this);this._observable.destroy();delete this._observable}},onDestroy:O});J("MetaphorJs.cmp.App","MetaphorJs.cmp.Base",{lang:null,scope:null,renderer:null,cmpListeners:null,
components:null,initialize:function(a,b){var c=b instanceof da?b:new da(b),d,e;c.$app=this;this.supr();d=new bb;e=new ba;this.lang=new rb;P(this,d.getApi(),!0,!1);this.destroyProvider=m(d.destroy,d);P(this,e.getApi(),!0,!1);this.destroyObservable=m(e.destroy,e);this.scope=c;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",c.$root);this.value("$lang",this.lang);this.renderer=new Sa(a,c);d=aa.call(arguments);
d[1]=c;this.initApp.apply(this,d)},initApp:O,run:function(){this.renderer.process()},getParentCmp:function(a){a=a.parentNode;for(var b;a;){if(b=a.getAttribute("cmp-id"))return this.getCmp(b);a=a.parentNode}return null},onAvailable:function(a,b,c){var d=this.cmpListeners,e=this.components;d[a]||(d[a]=new C);b&&d[a].done(b,c);e[a]&&d[a].resolve(e[a]);return d[a]},getCmp:function(a){return this.components[a]||null},registerCmp:function(a,b,c){var d=this,e=a[c];c=function(){delete d.cmpListeners[e];delete d.components[e]};
d.components[e]=a;d.cmpListeners[e]&&d.cmpListeners[e].resolve(a);if(a.on)a.on("destroy",c);b.$on("$destroy",c)},destroy:function(){var a;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(a in this)this.hasOwnProperty(a)&&delete this[a]}});var fa=document.documentElement,va=function(){var a=function(b){return b===window?!0:3==b.nodeType?b.parentElement?a(b.parentElement):!0:b===fa?!0:fa.contains(b)};return a}(),la=function(a){var b=document.createDocumentFragment();
if(s(a)){var c=document.createElement("div");c.innerHTML=a;a=c.childNodes}if(a.nodeType)b.appendChild(a);else for(var c=-1,d=a.length>>>0;++c!==d;b.appendChild(a[0]));return b},Fa=function(a){var b,c,d;if(D(a)){d=[];b=0;for(c=a.length;b<c;b++)d.push(Fa(a[b]));return d}if(a)switch(a.nodeType){case 1:return a.cloneNode(!0);case 3:return document.createTextNode(a.innerText||a.textContent);case 11:return a.cloneNode(!0)}return null},cb=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",
c="animationDuration",d="transitionDelay",e="transitionDuration",g="transform",f=null,k=null;(function(){var h=document.createElement("div"),l=!1,k,p,m;if(void 0!==h.style.animationName)l=!0;else for(p=0,m=a.length;p<m;p++)if(k=a[p],void 0!==h.style[k+"AnimationName"]){l=!0;b=k+"AnimationDelay";c=k+"AnimationDuration";d=k+"TransitionDelay";e=k+"TransitionDuration";g=k+"Transform";break}l&&("ontransitionend"in window?f="transitionend":"onwebkittransitionend"in window&&(f="webkitTransitionEnd"));return l})()&&
(k={animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:e,transform:g,transitionend:f});return function(){return k}}(),sb=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,d){var e,g,f=c.length;for(e=0;e<f;e++)g=a(c[e])+a(d[e]),b=Math.max(g,b);return b},c=cb(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,g=c?c.transitionDuration:null,f=c?c.transitionDelay:null;return function(a){if(!c)return 0;var h=
window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var l=(h[d]||"").split(","),v=(h[e]||"").split(","),p=(h[g]||"").split(","),h=(h[f]||"").split(",");a=Math.max(a,b(a,l,v));return a=Math.max(a,b(a,p,h))}}(),wa=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),ga=function(a,b){b&&(a.className=a.className.replace(wa("(?:^|\\s)"+b+"(?!\\S)"),""))},xa=function(a){var b=N(a,"mjsAnimationQueue"),c,d;if(D(b)&&b.length){if(b=b[0])b.stages&&(c=b.position,d=b.stages,
ga(a,d[c]),ga(a,d[c]+"-active")),b.deferred&&b.deferred.reject(b.el)}else n(b)?b(a):"stop"==b&&$(a).stop(!0,!0);N(a,"mjsAnimationQueue",null)},Ta=function(a,b){return b?wa("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},ma=function(a,b){b&&!Ta(a,b)&&(a.className+=" "+b)},ca=function(){var a,b;if("undefined"!=typeof window){var c=window;a=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame;b=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||
c.webkitCancelRequestAnimationFrame;if(a)return function(c){var e=a(c);return function(){b(e)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),A=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},ha=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},Q=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=cb(),d=!!c,e=function(a,b,c){var d=
function(){(new Date).getTime()-b>=c?a():ca(d)};ca(d)},g=function h(a,b,d,f,m,n,t,q){var u=function(){var b=N(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==t?!1:(m.reject(a),!0)},s=function(){c.transitionend&&ha(a,c.transitionend,s);if(!u()){var e=d;d++;if(d==b.length){m.resolve(a);N(a,"mjsAnimationQueue").shift();var f=N(a,"mjsAnimationQueue");f.length?(f=f[0],g(f.el,f.stages,0,f.start,f.deferred,!1,f.id,f.step)):N(a,"mjsAnimationQueue",null)}else N(a,"mjsAnimationQueue")[0].position=d,h(a,
b,d,null,m,!1,t,q);ga(a,b[e]);ga(a,b[e]+"-active")}},y=function(){u()||(ma(a,b[d]+"-active"),C.resolve(q&&q(a,d,"active")).done(function(){if(!u()){var b=sb(a);b?c.transitionend?A(a,c.transitionend,s):e(s,(new Date).getTime(),b):ca(s)}}))},L=function(){u()||(ma(a,b[d]),C.waterfall([q&&q(a,d,"start"),function(){return f?f(a):null}]).done(function(){!u()&&ca(y)}))};n?ca(L):L()},f=function(c,e,f,p,m,r){var w=new C,t=N(c,"mjsAnimationQueue")||[],q=++b,u=c.getAttribute("mjs-animate"),B,y,L,Ca,T,z,G;e=
e||u;p&&null===u&&(e=null);if(e){s(e)?"["==e.substr(0,1)?B=(new Function("","return "+e))():(B=a[e],e=m&&m.get("animate."+e,!0)):n(e)?y=e:D(e)&&(s(e[0])?B=e:(L=e[0],Ca=e[1]));ka(e)&&(B=e.stages,y=e.fn,L=e.before,Ca=e.after,T=e.options?P({},e.options):{},z=e.context||null,G=e.duration||null,f=f||T.start);if(d&&B)return t.push({el:c,stages:B,start:f,step:r,deferred:w,position:0,id:q}),N(c,"mjsAnimationQueue",t),1==t.length&&g(c,B,0,f,w,!0,q,r),w;T=T||{};f&&(T.start=function(){f(c)});T.complete=function(){w.resolve(c)};
G&&(T.duration=G);if(y&&n(y))return L&&P(c.style,L,!0,!1),f&&f(c),N(c,"mjsAnimationQueue",y.call(z,c,function(){w.resolve(c)})),w;if(window.jQuery){e=$(c);L&&e.css(L);N(c,"mjsAnimationQueue","stop");if(y&&s(y))return e[y](T),w;if(Ca)return e.animate(Ca,T),w}}f?(y=f(c),S(y)?y.done(function(){w.resolve(c)}):w.resolve(c)):w.resolve(c);return w};f.addAnimationType=function(b,c){a[b]=c};f.stop=xa;f.prefixes=c;f.cssAnimations=d;return f}();ea=qa.create;var tb=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:
function(a){return(new Function("return "+a))()}}(),db=function(a,b){var c,d;if(!a||!s(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},ub=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,e=/^(?:GET|HEAD)$/i,g=function(a,b,c){var d,e;if(pa(a)&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(""+a));else if(D(a)&&
c)for(d=0,e=a.length;d<e;d++)g(a[d],b,c+"["+d+"]");else if(na(a))for(d in a)a.hasOwnProperty(d)&&g(a[d],b,c?c+"["+d+"]":d)},f=function(d,f){d.replace(a,"");if(!1===f.cache){var k=(new Date).getTime();return b.test(d)?d.replace(b,"$1_="+k):d+(c.test(d)?"&":"?")+"_="+k}!f.data||window.FormData&&f.data instanceof window.FormData||(s(f.data)?k=f.data:(k=[],g(f.data,k,null),k=k.join("&").replace(/%20/g,"+")),f.data=k,e.test(f.method)&&(d+=(c.test(d)?"&":"?")+f.data,f.data=null));return d},k={xml:"application/xml, text/xml",
html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},h={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},l=
{},v=new ba,p=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},K=function(a,b,c){var d,e;if(!na(a)&&!n(a)&&c)d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",a),b.appendChild(d);else if(D(a)&&c)for(d=0,e=a.length;d<e;d++)K(a[d],b,c+"["+d+"]");else if(na(a))for(d in a)a.hasOwnProperty(d)&&K(a[d],b,c?c+"["+d+"]":d)},r=function(a){for(var b,
c,d="",e=0;e<a.elements.length;e++)if(b=a.elements[e],null!==b.getAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return d},w=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!s(a))return a;c=c||"";if("xml"===
d||!d&&0<=c.indexOf("xml"))return a=db(F(a)),b?Ea(b,a):a;if("html"===d)return a=db(a,"text/html"),b?Ea(b,a):a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return tb(F(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&p(a);return a+""},t=function(a){var b=d.exec((window?window.location.href:"").toLowerCase())||[],c=d.exec(a.url.toLowerCase());this._opt=
a;!0!==a.crossDomain&&(a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443"))));b=new C;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):r(a.form));a.url=f(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new y(a,b,this):
new u(a,b,this):new B(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){v.trigger("success",a)});b.fail(function(a){v.trigger("error",a)});b.always(function(){v.trigger("end")});v.trigger("start");a.timeout&&(this._timeout=setTimeout(m(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===v.trigger("beforeSend",a,c)&&(this._promise=C.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=C.reject());this._promise||(oa(c.send,c),b.abort=m(this.abort,
this),b.always(this.destroy,this),this._promise=b)};t.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);K(this._opt.data,a,null);document.body.appendChild(a);
this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+Y();a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=m(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=m(this.jsonpCallback,this));return d},jsonpCallback:function(a){var b;try{b=this.processResponseData(a)}catch(c){this._deferred?this._deferred.reject(c):W(c)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,
b){var c=this._opt;a=w(a,c,b);v.hasListener("processResponse")&&(a=v.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred,d;if(this._opt.jsonp)if(a){try{p(a)}catch(e){c.reject(e)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else{try{d=this.processResponseData(a,b)}catch(f){c.reject(f)}c.resolve(d)}},destroy:function(){this._timeout&&
clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}};var q=function(a,b){b=b||{};a&&!s(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),
!b.url))throw"Must provide url";P(b,l,!1,!0);P(b,h,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new t(b)).promise()};q.setup=function(a){P(l,a,!0,!0)};q.on=function(){v.on.apply(v,arguments)};q.un=function(){v.un.apply(v,arguments)};q.get=function(a,b){b=b||{};b.method="GET";return q(a,b)};q.post=function(a,b){b=b||{};b.method="POST";return q(a,b)};q.load=function(a,b,c){c=c||{};s(b)||(c=b);c.dataType="fragment";return q(b,
c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};q.loadScript=function(a){return q(a,{transport:"script"})};q.submit=function(a,b){b=b||{};b.form=a;return q(null,b)};var u=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&A(d,"progress",m(a.progress,
a.callbackScope));a.uploadProgress&&d.upload&&A(d.upload,"progress",m(a.uploadProgress,a.callbackScope));d.onreadystatechange=m(this.onReadyStateChange,this)};u.prototype={_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,c;if(a.xhrFields)for(c in a.xhrFields)b[c]=a.xhrFields[c];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&k[a.dataType]?k[a.dataType]+
", */*; q=0.01":k._default);for(c in a.headers)b.setRequestHeader(c,a.headers[c])},onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=O,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=O;var c;a:{try{c=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(s(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||
""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=O;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}};var B=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};B.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");
a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);A(a,"load",m(this.onLoad,this));A(a,"error",m(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;
delete this._ajax;delete this._deferred}};var y=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};y.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+Y(),c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);A(a,"load",m(this.onLoad,this));A(a,"error",m(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},
onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return q}(),ra=function(){var a=new ba,b={},c=function(a){if(!b[a]){var c=
document.getElementById(a),d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),d.innerHTML=c.innerHTML,b[a]=la(d.childNodes)):b[a]="content"in c?c.content:la(c.childNodes))}return b[a]},d=function(a){return b[a]?b[a]:b[a]=ub(a,{dataType:"fragment"}).then(function(c){return b[a]=c})},e=function(a){P(this,a,!0,!1);this.id=Y();this.tpl&&(this.tpl=F(this.tpl));this.url&&(this.url=F(this.url));a=this.node;var b=this.tpl||this.url;a&&a.removeAttribute("mjs-include");a||(this.deferRendering=
!0);if(b){if(a&&a.firstChild&&N(a,"mjs-transclude",la(a.childNodes)),"."!=b.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=ea(this.scope,b,this.onChange,this,null,X)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();
this.scope instanceof da&&this.scope.$on("destroy",this.onScopeDestroy,this)};e.prototype={_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,doRender:function(){this._renderer||(this._renderer=new Sa(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},
on:function(b,c,d){return a.on(b+"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,e=a._watcher?a._watcher.getLastResult():a.tpl||b,h=new C;(new C(function(a){b?a(c(e)||
d(b)):a(c(e)||la(e))})).done(function(b){a._fragment=b;h.resolve(a.ownRenderer?!1:a.node)}).fail(h.reject,h);return h},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(Fa(this._fragment),a):a.appendChild(Fa(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=
this.node,b=new C;this._initial?(this.doApplyTemplate(),b.resolve()):(Q(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),Q(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),
delete this._watcher);delete this.tpl}};e.getTemplate=c;e.loadTemplate=d;return e}();J("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",{id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(a){this.supr(a);this.scope||(this.scope=new da);a.as&&(this.scope[a.as]=this);this.node&&(this.id=this.node.getAttribute("id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+Y();this.node||
this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this,this.scope,"id");var b=this.template,c=this.templateUrl;b&&b instanceof ra?b instanceof ra&&(this.template.node=this.node):this.template=b=new ra({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,
this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):va(this.node)||document.body.appendChild(this.node);
this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},
getEl:function(){return this.node},initComponent:O,afterRender:O,onShow:O,onHide:O,onParentRendererDestroy:function(){this.destroy()},onDestroy:function(){this.template&&(this.template.destroy(),delete this.template);this.destroyEl?va(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();delete this.scope;delete this.node;this.supr()}});var ya=function(a,b,
c,d,e){var g=!1!==b;b=b||{};e=e||[];c=c||b.scope;d=d||b.node;b.scope=b.scope||c;b.node=b.node||d;var f=s(a)?Da(a):a;if(!f)throw"Component "+a+" not found";c&&f.$isolateScope&&(b.scope=c=c.$newIsolated());var k,h=[];a=f.template||b.template||null;var l=f.templateUrl||b.templateUrl||null,v=c?c.$app:null,m=bb.global(),K=v?v.inject:m.inject,r=v?v:m,w=d?d.getAttribute("mjs-cloak"):null,t={$node:d||null,$scope:c||null,$config:b||null,$args:e||null};if(f.resolve)for(k in f.resolve)(function(a){var g=new C,
l;h.push(g.done(function(c){t[a]=c;b[a]=c;e.push(c)}));l=f.resolve[k];n(l)?g.resolve(l(c,d)):s(l)?g.resolve(K.resolve(l)):g.resolve(K.call(r,l,null,P({},t,b,!1,!1)))})(k);g&&(a||l)&&(b.template=new ra({scope:c,node:d,deferRendering:!0,ownRenderer:!0,tpl:a,url:l}),h.push(b.template.initPromise),d&&d.firstChild&&N(d,"mjs-transclude",la(d.childNodes)));g&&e.unshift(b);var q;h.length?(q=new C,C.all(h).done(function(){q.resolve(K.call(r,f,null,P({},t,b,!1,!1),e))})):q=C.resolve(K.call(r,f,null,P({},t,
b,!1,!1),e));d&&q.isPending()&&null!==w&&(w?ma(d,w):d.style.visibility="hidden",q.then(function(){w?ga(d,w):d.style.visibility=""}));d&&q.then(function(){ga(d,"mjs-cloak")});return q},sa=function(){return!1},Ga=function(){return!0},ta=function(a){if(a instanceof ta)return a;if(!(this instanceof ta))return new ta(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,e=a.button;void 0===this.pageX&&
null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Ga:sa;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};
ta.prototype={isDefaultPrevented:sa,isPropagationStopped:sa,isImmediatePropagationStopped:sa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Ga;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Ga;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Ga;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();
this.stopPropagation()}};var Ha=function(){var a=window,b=a.history,c=a.location,d=new ba,e={},g={},f={locationChange:[],beforeLocationChange:[]},k=!1,h=/(?:(\w+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,l=!!b.pushState,v="onhashchange"in a,m=l&&(navigator.vendor||"").match(/Opera/);P(e,d.getApi());var K=function(a){var b=c.protocol+"//"+c.hostname;c.port&&(b+=":"+c.port);a=a.replace(b,"");l||(a=encodeURIComponent(a));"?"==a.substr(0,1)&&(a=c.pathname+
a);m&&(a=a.replace("?","#"));return a},r=function(a){a=(""+a).match(h);var b,c;if(!l||m)c=a[6],"!"==c.substr(0,1)&&(b=c.substr(1));b||(b=a[4],a[5]&&(b+=a[5]));return b},w=function(a){c.hash=a?"!"+a:""},t=function(){var a;l?a=c.pathname+c.search+c.hash:(a=c.hash.substr(1))?("!"==a.substr(0,1)&&(a=a.substr(1)),a=decodeURIComponent(a)):a=c.pathname+c.search;return a},q=function(a,b){var c=g[a].extractor;return n(c)?c(b,a):(c=b.match(c))?c.pop():null},u=function(){var a=t();B("locationChange",!1,a);var b,
c,d;for(b in g)c=g[b].value,d=q(b,a),g[b].value=d,d!=c&&e.trigger("change-"+b,d,c,b,a)},B=function(a,b,c){c=c||t();for(var d,g=-1,h=f[a].length;++g<h;)if(d=f[a][g].call(null,c),b&&!1===d)return!1;return e.trigger(a,c)},y=function(){if(l)b.origPushState=b.pushState,b.origReplaceState=b.replaceState,A(a,"popstate",u),b.pushState=function(a,c,d){if(!1===B("beforeLocationChange",!0,d))return!1;b.origPushState(a,c,K(d));u()},b.replaceState=function(a,c,d){if(!1===B("beforeLocationChange",!0,d))return!1;
b.origReplaceState(a,c,K(d));u()};else if(v)b.replaceState=b.pushState=function(a,b,c){if(!1===B("beforeLocationChange",!0,c))return!1;oa(w,null,[K(c)])},A(a,"hashchange",u);else{var d=null,f=!1;a.onIframeHistoryChange=function(a){f||oa(function(){w(a);u()})};var g=function(a){var b=d.contentWindow.document;b.open();b.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');
b.close()};b.pushState=function(a,b,c){if(!1===B("beforeLocationChange",!0,c))return!1;g(K(c))};b.replaceState=function(a,b,c){if(!1===B("beforeLocationChange",!0,c))return!1;a=K(c);d.contentWindow.hashValue=a};var m=function(){d=document.createElement("iframe");d.src="about:blank";d.style.display="none";document.body.appendChild(d);f=!0;g(K(c.hash.substr(1)));f=!1};k?m():A(a,"load",m)}A(document.documentElement,"click",function(d){d=new ta(d||a.event);for(var e=d.target,f;e&&"a"!=e.nodeName.toLowerCase();)e=
e.parentNode;if(e){if(e=(f=e.getAttribute("href"))&&"#"!=f.substr(0,1)&&!e.getAttribute("target"))e=f.match(h),e=e[1]&&c.protocol!=e[1]||e[2]&&c.hostname!=e[2]?!1:e[2]||e[3]?c.port==e[3]:!0;if(e&&r(f)!=r(c))return b.pushState(null,null,r(f)),d.preventDefault(),d.stopPropagation(),!1}return null});b.initPushState=O;e.initPushState=O};A(a,"load",function(){k=!0});b.initPushState=y;b.onBeforeChange=function(a){f.beforeLocationChange.push(a)};b.onChange=function(a){f.locationChange.push(a)};e.pushUrl=
function(a){b.pushState(null,null,a)};e.replaceUrl=function(a){b.replaceState(null,null,a)};e.currentUrl=function(){return t()};e.initPushState=function(){return y()};e.getParam=function(a){return g[a]?g[a].value:null};e.addParam=function(a,b){g[a]||(b?n(b)||(b=s(b)?wa(b):b):b=wa(a+"=([^&]+)"),g[a]={name:a,value:null,extractor:b},g[a].value=q(a,t()))};return e}(),vb=Ha.currentUrl;J("MetaphorJs.cmp.View",{route:null,node:null,scope:null,cmp:null,currentComponent:null,watchable:null,defaultCmp:null,
initialize:function(a){P(this,a,!0,!1);(a=this.node)&&a.firstChild&&N(a,"mjs-transclude",la(a.childNodes));this.cmp||(this.cmp=a.getAttribute("mjs-view-cmp"));this.defaultCmp=a.getAttribute("mjs-view-default");a.removeAttribute("mjs-view");a.removeAttribute("mjs-view-cmp");a.removeAttribute("mjs-view-default");this.route?(Ha.initPushState(),Ha.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=ea(this.scope,this.cmp,this.onCmpChange,this,null,X),this.onCmpChange())},
onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=vb(),b=this.route,c,d,e,g,f;d=0;for(e=b.length;d<e;d++){g=b[d];if(g.reg&&(f=a.match(g.reg))){this.changeRouteComponent(g,f);return}g["default"]&&!c&&(c=g)}this.clearComponent();c?this.setRouteComponent(c,[]):this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){xa(this.node);this.clearComponent();this.setRouteComponent(a,
b)},clearComponent:function(){var a=this,b=a.node;a.currentComponent&&Q(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,b){var c=this,d=c.node,e=a.params;Q(d,"enter",function(){var g=b||[],f={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,h;a.as&&(f.as=a.as);a.template&&(f.template=a.template);g.shift();if(e)for(k=-1,h=e.length;++k<h;f[e[k]]=g[k]);
return ya(a.cmp||"MetaphorJs.cmp.Component",f,f.scope,d,null,g).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;Q(c,"enter",function(){var d=na(a)?a:{},e=(s(a)?a:null)||"MetaphorJs.cmp.Component",g=d.scope||b.scope.$new();d.destroyEl=!1;return ya(e,d,g,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(Ha.un("locationchange",this.onLocationChange,this),delete this.route);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,
this),delete this.watchable);delete this.scope;delete this.currentComponent}});var M=Ra.registerAttributeHandler;M("mjs-app",100,sa);var za=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value")||a.value;return void 0!=b?b:F(a.innerText||a.textContent)},select:function(a){for(var b,e=a.options,g=a.selectedIndex,f=(a="select-one"===a.type||0>g)?null:[],k=a?g+1:e.length,h,l=0>g?k:a?g:0;l<k;l++)if(b=e[l],h=b.disabled||b.parentNode.disabled,(b.selected||l===g)&&!h){b=za(b);if(a)return b;
f.push(b)}return f},radio:function(a){return Oa(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return Oa(a.getAttribute("value"))?"on":a.value}};return function(c){var d,e;if((d=b[c.type]||b[c.nodeName.toLowerCase()])&&void 0!==(e=d(c,"value")))return e;e=c.value;return s(e)?e.replace(a,""):null==e?"":e}}(),Ia=Array.prototype.indexOf;Ia||(Ia=Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;
if(0===e)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=e)return-1;for(c=Math.max(0<=c?c:e-Math.abs(c),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1});var Ua=function(){var a={select:function(a,c){for(var d,e,g=a.options,f=Z(c),k=g.length,h,l=-1;k--;)e=g[k],(h=f?-1!=Ia.call(f,e.value):!1)?(e.setAttribute("selected","selected"),d=!0):e.removeAttribute("selected"),h||Oa(e.getAttribute("mjs-default-option"))||(l=k);d||(a.selectedIndex=l);return f}};a.radio=a.checkbox=function(a,c){if(D(c)){var d;
d=za(a);d=c?-1!=Ia.call(c,d):!1;return a.checked=d}};return function(b,c){if(1===b.nodeType){null===c?c="":1===V(c)&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];d&&void 0!==d(b,c,"value")||(b.value=c)}}}(),wb=function(){var a=document.createElement("div");return s(a.textContent)?"textContent":"innerText"}(),ia=J("MetaphorJs.view.AttributeHandler",{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=F(c);this.node=b;this.expr=c;this.scope=a;this.watcher=ea(a,c,this.onChange,
this,null,X);if(void 0!=this.watcher.getLastResult())this.onChange();a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.destroy()},onChange:function(){},destroy:function(){delete this.node;delete this.scope;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)}}),Va=navigator.userAgent.toLowerCase(),xb=function(){var a=parseInt((/android (\d+)/.exec(Va)||[])[1],10)||!1;return function(){return a}}(),Wa=function(){var a=parseInt((/msie (\d+)/.exec(Va)||
[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(Va)||[])[1],10)||!1);return function(){return a}}(),eb=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==Wa())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),Aa=function(a,b,c,d){this.el=a;this.cb=b;this.scb=d;this.cbContext=c;this.inputType=b=a.getAttribute("mjs-input-type")||a.type.toLowerCase();this.listeners=[];c=a.type?a.type.toLowerCase():"";this.submittable="input"==
a.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==b?this.initRadioInput():"checkbox"==b?this.initCheckboxInput():this.initTextInput()};Aa.prototype={el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,b=this.listeners,c=this.radio,d=this.el,e,g,f,k;e=0;for(g=b.length;e<g;e++)if("radio"==a)for(f=0,k=c.length;f<k;f++)ha(c[f],b[e][0],b[e][1]);else ha(d,b[e][0],b[e][1]);delete this.radio;delete this.el;delete this.cb;
delete this.cbContext},initRadioInput:function(){var a,b,c;this.radio=a=Ea("input[name="+this.el.name+"]");this.onRadioInputChangeDelegate=m(this.onRadioInputChange,this);this.listeners.push(["click",this.onRadioInputChangeDelegate]);b=0;for(c=a.length;b<c;b++)A(a[b],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=m(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);A(this.el,"click",this.onCheckboxInputChangeDelegate)},
initTextInput:function(){var a=!1,b=this,c=b.el,d=b.listeners,e;if(!xb()){var g=function(){a=!0},f=function(){a=!1;k()};d.push(["compositionstart",g]);d.push(["compositionend",f]);A(c,"compositionstart",g);A(c,"compositionend",f)}var k=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()};if(eb("input"))d.push(["input",k]),A(c,"input",k);else{var h=function(a){e||(e=window.setTimeout(function(){k(a);e=null},0))},g=function(a){a=a||window.event;var c=a.keyCode;if(13==c&&b.submittable&&
b.scb)return b.scb.call(b.cbContext,a);91===c||15<c&&19>c||37<=c&&40>=c||h(a)};d.push(["keydown",g]);A(c,"keydown",g);eb("paste")&&(d.push(["paste",h]),d.push(["cut",h]),A(c,"paste",h),A(c,"cut",h))}d.push(["change",k]);A(c,"change",k)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=this.getValue();this.cb&&this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;this.cb&&this.cb.call(this.cbContext,
a.checked?a.getAttribute("value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;a=a.target||a.srcElement;this.cb&&this.cb.call(this.cbContext,a.value)},setValue:function(a){var b=this.inputType,c,d;if("radio"==b)for(b=this.radio,c=0,d=b.length;c<d;c++)b[c].checked=b[c].value==a;else"checkbox"==b?(b=this.el,b.checked=!0===a||a==b.value):Ua(this.el,a)},getValue:function(){var a=this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return a[b].value;return null}return"checkbox"==
a?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(za(this.el))}};Aa.getValue=za;Aa.setValue=Ua;M("mjs-bind",1E3,J(null,ia,{isInput:!1,input:null,lockInput:null,recursive:!1,textRenderer:null,initialize:function(a,b,c){var d=b.nodeName.toLowerCase(),e=b.type;this.isInput="input"!=d&&"textarea"!=d&&"select"!=d||"submit"==e||"reset"==e||"button"==e?!1:!0;this.recursive=null!==b.getAttribute("mjs-recursive");this.lockInput=null!==b.getAttribute("mjs-lock-input");b.removeAttribute("mjs-recursive");
b.removeAttribute("mjs-lock-input");this.isInput&&(this.input=new Aa(b,this.onInputChange,this));this.recursive?(this.scope=a,this.node=b,this.textRenderer=new ab(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),a instanceof da&&a.$on("destroy",this.onScopeDestroy,this)):this.supr(a,b,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=
this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?this.input.setValue(a):this.node[wb]=a},destroy:function(){this.textRenderer&&(this.textRenderer.destroy(),delete this.textRenderer);this.input&&(this.input.destroy(),delete this.input);this.supr()}}));M("mjs-bind-html",1E3,J(null,"attr.mjs-bind",{updateElement:function(a){this.node.innerHTML=a}}));(function(){var a=function(a,c,d,e){if(null!==d){if(d==Ta(a,c))return;d=!d}else d=Ta(a,c);d?e?Q(a,[c+"-remove"],
null,!0).done(function(){ga(a,c)}):ga(a,c):e?Q(a,[c+"-add"],null,!0).done(function(){ma(a,c)}):ma(a,c)};M("mjs-class",1E3,J(null,ia,{initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),d;xa(b);if(s(c))a(b,c,null,!this.initial);else if(D(c)){var e;d=-1;for(e=c.length;++d<e;a(b,c[d],!0,!this.initial));}else for(d in c)a(b,d,c[d]?!0:!1,!this.initial);this.initial=!1}}))})();M("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=
function(a,c,d,e){var g,f,k,h,l,m;m=N(c,"config")||{};c.removeAttribute("mjs-cmp");d=d.split(" ");k=0;for(h=d.length;k<h;k++)l=d[k],""!=l&&"as"!=l&&(g?f=l:g=l);e=P({scope:a,node:c,as:f,parentRenderer:e,destroyScope:!0},m,!1,!1);ya(g,e,a,c);return!1};a.$breakScope=!0;M("mjs-cmp",200,a)})();var fb=qa.createGetter;M("mjs-config",50,function(a,b,c){b.removeAttribute("mjs-config");N(b,"config",fb(c)(a))});var U=function(a){a=a||{};this._queue=[];this._map={};this.id="$$"+Y();for(var b in a)this[b]=a[b]};
U.REPLACE=1;U.ONCE=2;U.MULTIPLE=3;U.ONCE_EVER=3;U.prototype={_queue:null,_map:null,_nextRequested:!1,_running:!1,length:0,id:null,async:!0,auto:!0,thenable:!1,stack:!1,context:null,mode:U.MULTIPLE,add:function(a,b,c,d,e,g){var f=this.id,k=a[f]||Y();b={id:k,fn:a,context:b,args:c,async:g};d=d||this.mode;a[f]=k;if(d==U.ONCE_EVER&&a[f])return a[f];if(this._map[k])if(d==U.REPLACE)this.remove(k);else if(d==U.ONCE)return k;this._queue[e?"unshift":"push"](b);this._map[k]=b;this.length=this._queue.length;
this.auto&&this.next();return k},append:function(a,b,c,d,e){return this.add(a,b,c,d,!1,e)},prepend:function(a,b,c,d,e){return this.add(a,b,c,d,!0,e)},remove:function(a){var b=this._queue,c,d;c=0;for(d=b.length;c<d;c++)if(b[c].id==a){b.splice(c,1);break}delete this._map[a]},next:function(){var a=this,b;if(a._running)a._nextRequested=!0;else if(a._nextRequested=!1,b=a._queue[a.stack?"pop":"shift"](),a.length=a._queue.length,b)if(a._running=!0,delete a._map[b.id],a.async||b.async){var c=0;1===V(b.async)?
c=b.async:1===V(a.async)&&(c=a.async);oa(function(){try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(c){throw W(c),a._finish(),c;}},null,null,c)}else try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(d){throw W(d),a._finish(),d;}},_processResult:function(a){var b=this;b.thenable&&S(a)?a.then(function(){b._finish()},function(){b._finish()}):b._finish();return a},_finish:function(){this._running=!1;(this.auto||this._nextRequested)&&this.next()},destroy:function(){delete this._queue;
delete this._map;delete this.context;this._running=this._nextRequested=!1;this.next=O}};var ja=function(){return window.getComputedStyle?function(a,b,c){if(a===window)return b?c?0:null:{};a=getComputedStyle(a,null);b=b?a[b]:a;return c?parseFloat(b)||0:b}:function(a,b,c){a=a.currentStyle||a.style||{};b=b?a[b]:a;return c?parseFloat(b)||0:b}}(),Xa=function(){var a=/(auto|scroll)/,b,c=function(a){a=ja(a);return a.overflow+a.overflowY+a.overflowY};return function(d){b||(b=document.body);for(;d&&d!==b;){if(a.test(c(d)))return d;
d=d.parentNode}return window}}(),gb=function(a){var b,c=a?"pageYOffset":"pageXOffset",d=a?"scrollTop":"scrollLeft";a=document;var e=a.body,g=a.documentElement;b=void 0!==window[c]?function(){return window[c]}:g.clientHeight?function(){return g[d]}:function(){return e[d]};return function(a){return a&&a!==window?a&&1==a.nodeType&&a!==e&&a!==g?a[d]:b():b()}},Ja=gb(!0),Ka=gb(!1),La=function(a){var b={top:0,left:0};if(!va(a)||a===window)return b;a.getBoundingClientRect&&(b=a.getBoundingClientRect());return{top:b.top+
Ja()-fa.clientTop,left:b.left+Ka()-fa.clientLeft}},hb=function(a,b){var c,d,e={top:0,left:0};if(a===window||a===fa)return e;if("fixed"==ja(a,"position"))d=a.getBoundingClientRect();else{if(b)return e=La(a),c=La(b),e={left:e.left-c.left,top:e.top-c.top},0>e.left&&(e.left=0),0>e.top&&(e.top=0),e;for(c=a.offsetParent||fa;c&&c!=fa&&"static"==ja(c,"position");)c=c.offsetParent;c=c||fa;d=La(a);c!==fa&&(e=La(c));e.top+=ja(c,"borderTopWidth",!0);e.left+=ja(c,"borderLeftWidth",!0)}return{top:d.top-e.top-ja(a,
"marginTop",!0),left:d.left-e.left-ja(a,"marginLeft",!0)}},ua=function(a,b,c){if(!(this instanceof ua))return new ua(a,b,c);this.commonInit(a,b,c);this.init(a,b,c);this.queue.add(this.render,this,[Z(this.watcher.getLastResult())])};ua.prototype={id:null,observable:null,model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,animate:!1,trackByFn:null,griDelegate:null,queue:null,buffered:!1,itemSize:null,itemsOffsite:1,bufferState:null,
scrollOffset:0,horizontal:!1,bufferEventDelegate:null,topStub:null,botStub:null,commonInit:function(a,b,c){b.removeAttribute("mjs-include");this.parseExpr(c);this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.queue=new U({async:!1,auto:!0,thenable:!0,stack:!1,context:this,mode:U.ONCE});a=N(b,"config")||{};this.animateMove=!a.buffered&&a.animateMove&&Q.cssAnimations;this.animate=!a.buffered&&(null!==b.getAttribute("mjs-animate")||
a.animate);b.removeAttribute("mjs-animate");this.id=a.id||Y();a.observable&&(this.observable=new ba,P(this,this.observable.getApi(),!0,!1));this.parentEl.removeChild(b);a.buffered&&this.initBuffering(a)},init:function(a,b){var c=N(b,"config")||{};this.watcher=ea(a,this.model,this.onChange,this,null,X);(this.trackBy=c.trackBy)&&"$"!=this.trackBy?this.trackByWatcher=ea(a,this.trackBy,this.onChangeTrackBy,this,null,X):"$"==this.trackBy||this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);
this.griDelegate=m(this.scopeGetRawIndex,this)},triggerIf:function(){this.observable&&this.trigger.apply(null,arguments)},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,g=this.buffered,f=document.createDocumentFragment(),k,h,l;h=0;for(l=a.length;h<l;h++)k=c.cloneNode(!0),b.push(this.createItem(k,a,h)),g||(f.appendChild(k),b[h].attached=!0);g?(this.getScrollOffset(),this.updateScrollBuffer()):(this.doUpdate(),d.insertBefore(f,e));this.triggerIf("render",this)},doUpdate:function(a,
b,c,d){var e=this.renderers;a=a||0;var g=e.length;b=b||g-1;var f=this.watcher.getLastResult(),k=this.getTrackByFunction();for(b>g-1&&(b=g-1);a<=b;a++)c&&e[a].action!=c||this.renderItem(a,e,f,k,d)},renderItem:function(a,b,c,d,e){c=c||this.watcher.getLastResult();b=b||this.renderers;d=d||this.getTrackByFunction();var g=b[a],f=g.scope;b=b.length-1;var k=!(a%2);e&&g.rendered||(f.$index=a,f.$first=0===a,f.$last=a===b,f.$even=k,f.$odd=!k,f.$trackId=d(c[a]),f.$getRawIndex=this.griDelegate,g.renderer?f.$check():
(g.renderer=new Sa(g.el,f),g.renderer.process(),g.rendered=!0))},createItem:function(a,b,c){var d=this.itemName,e=this.scope.$new();e[d]=this.getListItem(b,c);return{index:c,action:"enter",el:a,scope:e,attached:!1,rendered:!1}},onChange:function(a,b){this.queue.prepend(this.applyChanges,this,[b],U.REPLACE)},applyChanges:function(a){var b=this,c=b.renderers,d=b.tpl,e=0,g=Z(b.watcher.getLastResult()),f=null,k=b.animateMove,h=b.animate,l=[],m=b.itemName,p=c.slice(),n=!1,r,s,t,q,u,B;a=b.watcher.getMovePrescription(a,
b.getTrackByFunction(),g);t=0;for(q=a.length;t<q;t++)r=a[t],1===V(r)?(s=r,r=c[s],s!=e&&null===f&&(f=t),r.action="move",r.scope[m]=b.getListItem(g,t),n=k,l.push(r),c[s]=null,e++):(null===f&&(f=t),u=b.createItem(d.cloneNode(!0),g,t),l.push(u));b.renderers=l;if(h){b.doUpdate(f,null,"enter");n&&(B=b.calculateTranslates(l,p,c));var d=[],y=new C,A=new C,D=new C,F=C.counter(l.length),e=function(){F.countdown();return y};t=0;for(q=c.length;t<q;t++)if(u=c[t])u.scope.$destroy(),xa(u.el),d.push(Q(u.el,"leave",
null,!1,X).done(function(a){a.style.visibility="hidden"}));t=0;for(q=l.length;t<q;t++)u=l[t],xa(u.el),"enter"==u.action?d.push(Q(u.el,"enter",e,!1,X)):d.push(b.moveAnimation(u.el,n?B[t][0]:null,n?B[t][1]:null,e,A));F.done(function(){ca(function(){A.resolve();b.applyDomPositions(c);n||b.doUpdate(f,null,"move");ca(function(){y.resolve()});b.triggerIf("change",b)})});C.all(d).always(function(){ca(function(){b.doUpdate(f||0);b.removeOldElements(c);if(n)for(b.doUpdate(f,null,"move"),t=0,q=l.length;t<q;t++)u=
l[t],u.el.style[Q.prefixes.transform]=null,u.el.style[Q.prefixes.transform]="";D.resolve()})});return D}b.buffered?(b.getScrollOffset(),b.removeOldElements(c),b.queue.append(b.updateScrollBuffer,b,[!0])):(b.applyDomPositions(),b.doUpdate(f||0),b.removeOldElements(c));b.triggerIf("change",b)},removeOldElements:function(a){var b,c,d,e=this.parentEl;b=0;for(c=a.length;b<c;b++)(d=a[b])&&d.attached&&(d.attached=!1,e.removeChild(d.el))},applyDomPositions:function(a){var b=this.renderers,c=this.parentEl,
d=this.prevEl,d=d?d.nextSibling:c.firstChild,e,g,f,k,h;g=0;for(f=b.length;g<f;g++)h=b[g],k=h.el,(e=a&&a[g]?a[g].el.nextSibling:0<g?b[g-1].el.nextSibling||d:d)&&k.nextSibling!==e?c.insertBefore(k,e):e||c.appendChild(k),h.attached=!0},getListItem:function(a,b){return a[b]},onChangeTrackBy:function(a){this.trackByFn=null;this.trackBy=a},getTrackByFunction:function(){var a;this.trackByFn||((a=this.trackBy)&&"$"!=a?n(a)?this.trackByFn=a:this.trackByFn=function(b){return b&&!pa(b)?b[a]:void 0}:this.trackByFn=
function(a){return pa(a)?a:void 0});return this.trackByFn},scopeGetRawIndex:function(a){if(void 0===a)return-1;var b=this.watcher.getUnfilteredValue(),c=this.getTrackByFunction(),d,e;d=0;for(e=b.length;d<e;d++)if(c(b[d])===a)return d;return-1},getNodePositions:function(a,b,c){for(var d=[],e,g,f,k={};a.firstChild;)a.removeChild(a.firstChild);e=0;for(g=b.length;e<g;e++)c&&c[e]&&(f=c[e].el.cloneNode(!0),a.appendChild(f)),f=b[e].el.cloneNode(!0),a.appendChild(f),d.push(f);e=0;for(g=d.length;e<g;e++)a=
d[e],(c=b[e].renderer)&&(k[c.id]={left:a.offsetLeft,top:a.offsetTop});return k},calculateTranslates:function(a,b,c){var d=this.parentEl,e=d.parentNode,g=d.cloneNode(!0),f=d.offsetWidth,k=[],h=0,l=0,m;m=g.style;m.position="absolute";m.left="-10000px";m.visibility="hidden";m.width=f+"px";e.insertBefore(g,d);m.width=f-(g.offsetWidth-f)+"px";b=this.getNodePositions(g,b);c=this.getNodePositions(g,a,c);d=this.getNodePositions(g,a);e.removeChild(g);e=0;for(g=a.length;e<g;e++)f=a[e].el,m=a[e].renderer,m=
m.id,0==e&&(h=f.offsetLeft,l=f.offsetTop),k.push([{left:d[m].left-h-(c[m].left-h),top:d[m].top-l-(c[m].top-l)},b[m]?{left:b[m].left-h-(c[m].left-h),top:b[m].top-l-(c[m].top-l)}:null]);return k},moveAnimation:function(a,b,c,d,e){var g=a.style;e.done(function(){c&&(g[Q.prefixes.transform]="translateX("+c.left+"px) translateY("+c.top+"px)")});return Q(a,"move",d,!1,X,function(a,c,d){0==c&&"start"!=d&&b&&(g[Q.prefixes.transform]="translateX("+b.left+"px) translateY("+b.top+"px)")})},initScrollParent:function(a){this.scrollEl=
Xa(this.parentEl)},initScrollStubs:function(a){var b=this.parentEl,c=this.prevEl,d,e,g={fontSize:0,lineHeight:0,padding:0,paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,margin:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0};this.topStub=d=document.createElement(a.stub||"div");this.botStub=a=document.createElement(a.stub||"div");ma(d,"mjs-buffer-top");ma(a,"mjs-buffer-bottom");for(e in g)d.style[e]=g[e],a.style[e]=g[e];b.insertBefore(d,c?c.nextSibling:b.firstChild);b.insertBefore(a,
this.nextEl);this.prevEl=d;this.nextEl=a},initBuffering:function(a){this.buffered=!0;this.itemSize=a.itemSize;this.itemsOffsite=a.itemsOffsite||5;this.horizontal=a.horizontal||!1;this.initScrollParent(a);this.initScrollStubs(a);this.bufferEventDelegate=m(this.bufferUpdateEvent,this);A(this.scrollEl,"scroll",this.bufferEventDelegate);A(window,"resize",this.bufferEventDelegate)},getScrollOffset:function(){var a=hb(this.topStub,this.scrollEl);return this.scrollOffset=this.horizontal?a.left:a.top},getBufferState:function(a){var b=
this.scrollEl,c=this.horizontal,d=document.documentElement,d=b===window?window[c?"innerWidth":"innerHeight"]||d[c?"clientWidth":"clientHeight"]:b[c?"offsetWidth":"offsetHeight"],e=c?Ka(b):Ja(b),b=this.itemSize,c=this.itemsOffsite,g=a?this.getScrollOffset():this.scrollOffset;a=this.renderers.length;var f,e=Math.max(0,e+g),g=Math.ceil(e/b);0>g&&(g=0);e=g;f=d=g+Math.ceil(d/b);g=g>c?g-c:0;f+=c;f>a-1&&(f=a-1);return g>f?this.bufferState:this.bufferState={first:g,last:f,viewFirst:e,viewLast:d,ot:g*b,ob:(a-
f-1)*b}},updateStubs:function(a){var b=this.horizontal;this.topStub.style[b?"width":"height"]=a.ot+"px";this.botStub.style[b?"width":"height"]=a.ob+"px"},bufferUpdateEvent:function(){this.queue.add(this.updateScrollBuffer,this)},updateScrollBuffer:function(a){var b=this,c=b.bufferState,d=b.parentEl,e=b.renderers,g=b.botStub,f=b.getBufferState(!1),k=new C,h,l,m,p;if(!f)return null;c&&f.first==c.first&&f.last==c.last||b.triggerIf("bufferchange",b,f,c);ca(function(){if(a||!c||f.last<c.first||f.first>
c.last){if(c)for(l=c.first,m=c.last;l<=m;l++)(p=e[l])&&p.attached&&(d.removeChild(p.el),p.attached=!1);h=document.createDocumentFragment();l=f.first;for(m=f.last;l<=m;l++)if(p=e[l])p.rendered||b.renderItem(l),h.appendChild(p.el),p.attached=!0;d.insertBefore(h,g)}else{if(c.first<f.first)for(l=c.first,m=f.first;l<m;l++)(p=e[l])&&p.attached&&(d.removeChild(p.el),p.attached=!1);else if(c.first>f.first){h=document.createDocumentFragment();l=f.first;for(m=c.first;l<m;l++)if(p=e[l])p.rendered||b.renderItem(l),
h.appendChild(p.el),p.attached=!0;d.insertBefore(h,e[c.first].el)}if(c.last<f.last){h=document.createDocumentFragment();l=c.last+1;for(m=f.last;l<=m;l++)if(p=e[l])p.rendered||b.renderItem(l),h.appendChild(p.el),p.attached=!0;d.insertBefore(h,g)}else if(c.last>f.last)for(l=f.last+1,m=c.last;l<=m;l++)(p=e[l])&&p.attached&&(d.removeChild(p.el),p.attached=!1)}b.updateStubs(f);b.triggerIf("bufferupdate",b);b.onBufferStateChange(f,c);k.resolve()});return k},scrollTo:function(a){var b=this.itemSize,c=this.scrollEl||
Xa(this.parentEl),d=this.horizontal,e=d?"scrollLeft":"scrollTop",g=new C,f;this.buffered&&this.queue.append(function(){ca(function(){f=b*a;c===window?window.scrollTo(d?f:Ka(),d?Ja():f):c[e]=f;g.resolve()});return g});return g},onBufferStateChange:function(a,b){},parseExpr:function(a){a=a.split(" ");var b,c,d,e,g;b=0;for(c=a.length;b<c;b++)if(g=a[b],""!=g&&"in"!=g)if(e){d=a.slice(b).join(" ");break}else e=g;this.model=d;this.itemName=e||"item"},destroy:function(){var a=this.renderers,b=this.parentEl,
c,d;c=0;for(d=a.length;c<d;c++)a[c].renderer.destroy();delete this.renderers;delete this.tpl;delete this.prevEl;delete this.nextEl;delete this.parentEl;this.trackByWatcher&&(this.trackByWatcher.unsubscribeAndDestroy(),delete this.trackByWatcher);this.buffered&&(b.removeChild(this.topStub),b.removeChild(this.botStub),ha(this.scrollEl,"scroll",this.bufferEventDelegate),ha(window,"resize",this.bufferEventDelegate),delete this.bufferEventDelegate);delete this.topStub;delete this.botStub;this.queue.destroy();
delete this.queue;this.watcher.unsubscribeAndDestroy(this.onChange,this);delete this.watcher;this.observable&&(this.trigger("bufferupdate",this),this.observable.destroy(),delete this.observable)}};ua.$stopRenderer=!0;ua.$registerBy="id";M("mjs-each",100,ua);var ib=qa.createFunc;(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=
a;"enter"==b&&(b="keyup");M("mjs-"+a,1E3,function(c,f,k){var h=ib(k);f.removeAttribute("mjs-"+a);A(f,b,function(b){b=new ta(b||window.event);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;h(c);delete c.$event;c.$root.$check();b.preventDefault();return!1})})})(a[b])})();M("mjs-show",500,J(null,ia,{initial:!0,initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,c=function(){b.display=a?"":"none"};this.initial?c():Q(this.node,a?"show":"hide",function(){a&&
(b.display="")},!0).done(c)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));M("mjs-hide",500,J(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));M("mjs-if",500,J(null,ia,{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;delete this.parentEl;
this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},g=function(){c.removeChild(d)};b?va(d)||(a.initial?e():Q(d,"enter",e,!0)):va(d)&&(a.initial?g():Q(d,"leave",null,!0).done(g));a.initial=!1}}));M("mjs-ignore",0,sa);M("mjs-include",900,function(a,b,c,d){a=new ra({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});M("mjs-init",250,function(a,
b,c){b.removeAttribute("mjs-init");ib(c)(a)});M("mjs-model",1E3,J(null,ia,{inProg:!1,input:null,binding:null,initialize:function(a,b,c){this.node=b;this.input=new Aa(b,this.onInputChange,this);this.binding=b.getAttribute("mjs-data-binding")||"both";var d=this.input.getValue();this.supr(a,b,c);a=this.watcher.getLastResult();if("scope"!=this.binding&&this.watcher&&(d||a&&this.watcher.hasInputPipes()))this.onInputChange(a||d)},onInputChange:function(a){var b=this.scope;"scope"!=this.binding&&(a&&s(a)&&
-1!=a.indexOf("\\{")&&(a=a.replace(/\\{/g,"{")),this.watcher.setValue(a),this.inProg=!0,b instanceof da?b.$root.$check():this.watcher.checkAll(),this.inProg=!1)},destroy:function(){this.input.destroy();delete this.input;this.supr()},onChange:function(){var a=this.watcher.getLastResult(),b;"input"==this.binding||this.inProg||((b=Wa())&&8>b?oa(this.input.setValue,this.input,[a]):this.input.setValue(a))}}));M("mjs-options",100,J(null,ia,{model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,
fragment:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-options");this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&this.defOption.setAttribute("mjs-default-option","");try{this.watcher=ea(a,this.model,this.onChange,this,null,X)}catch(d){W(d)}this.render(Z(this.watcher.getValue()))},onChange:function(){this.render(Z(this.watcher.getValue()))},renderOption:function(a,b,c){var d=this.groupEl||
this.fragment,e=Wa();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=document.createElement("optgroup"),d.setAttribute("label",a.group),a.disabledGroup&&d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;e&&9>e&&(b.innerHTML=a.name);a.disabled&&b.setAttribute("disabled",
"disabled");d.appendChild(b)},render:function(a){var b=this.node,c=za(b),d=this.defOption,e=this.scope.$new(),g,f;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);g=0;for(f=a.length;g<f;g++)this.renderOption(a[g],g,e);d&&b.insertBefore(d,b.firstChild);e.$destroy();b.appendChild(this.fragment);this.fragment=null;Ua(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):(c=a.substr(b+
4),a=a.substr(0,b));this.model=c;this.getterFn=fb(a)}}));(function(){var a="selected checked disabled readonly required open".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){M("mjs-"+a,1E3,J(null,ia,{initialize:function(b,c,f){this.supr(b,c,f);c.removeAttribute("mjs-"+a);this.onChange()},onChange:function(){this.watcher.getLastResult()?this.node.setAttribute(a,a):this.node.removeAttribute(a)}}))})(a[b])})();var yb=function(){var a={},b=0;return function(c){if(a[c])return C.resolve(c);1E3<b&&
(a={},b=0);var d=document.createElement("img"),e=d.style,g=new C;A(d,"load",function(){a[c]=!0;b++;document.body.removeChild(d);g.resolve(c)});e.position="absolute";e.visibility="hidden";e.left="-10000px";e.top="0";d.src=c;document.body.appendChild(d);return g}}(),jb=document.body,zb=function(){var a;return function(){if(void 0===a){var b=document.createElement("div"),c=document.createElement("div");c.style&&window.getComputedStyle?(b.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",
b.appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",c.innerHTML="",jb.appendChild(b),c="4px"===window.getComputedStyle(c,null).width,jb.removeChild(b),a=c):a=!1}return a}}(),kb=function(a,b){var c=/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,d=["Top","Right","Bottom","Left"],e=a?"inner"==a?"padding":"":"content";return function(a,f){if(a===window)return a.document.documentElement["client"+
b];if(9===a.nodeType){var k=a.documentElement;return Math.max(a.body["scroll"+b],k["scroll"+b],a.body["offset"+b],k["offset"+b],k["client"+b])}a:{var h=b.toLowerCase(),l=e||(!0===f?"margin":"border"),k=ja(a),m=!0,p="width"===h?a.offsetWidth:a.offsetHeight,n="border-box"===k.boxSizing;if(0>=p||null==p){p=a.style[h];if(c.test(p)){k=p;break a}m=n&&(zb()||p===a.style[h]);p=parseFloat(p)||0}l=l||(n?"border":"content");h=l===(m?"border":"content")?4:"width"===h?1:0;for(n=0;4>h;h+=2)"margin"===l&&(n+=parseFloat(k[l+
d[h]])),m?("content"===l&&(n-=parseFloat(k["padding"+d[h]])),"margin"!==l&&(n-=parseFloat(k["border"+d[h]+"Width"]))):(n+=parseFloat(k["padding"+d[h]]),"padding"!==l&&(n+=parseFloat(k["border"+d[h]+"Width"])));k=p+n}return k}},Ab=kb("","Width"),Bb=kb("","Height");M("mjs-src",1E3,J(null,ia,{scrollEl:null,scrollDelegate:null,resizeDelegate:null,position:null,sw:null,sh:null,queue:null,checkVisibility:!0,initialize:function(a,b,c){this.scrollEl=Xa(b);this.scrollDelegate=m(this.onScroll,this);this.resizeDelegate=
m(this.onResize,this);A(this.scrollEl,"scroll",this.scrollDelegate);A(window,"resize",this.resizeDelegate);this.queue=new U({auto:!0,async:!0,mode:U.ONCE});this.supr(a,b,c);b.removeAttribute("mjs-src")},isVisible:function(){if(!this.checkVisibility)return!0;var a=this.scrollEl,b=Ja(a),c=Ka(a),d=this.sw,e=this.sh,g;this.position||(this.position=hb(this.node,a));d||(d=this.sw=Ab(a),e=this.sh=Bb(a));a=this.position.top;g=this.position.left;return a>b&&a<b+e&&g>c&&g<c+d},onScroll:function(){this.queue.add(this.changeIfVisible,
this)},onResize:function(){this.sw=this.position=null;this.queue.add(this.changeIfVisible,this)},onChange:function(){this.queue.add(this.changeIfVisible,this)},changeIfVisible:function(){var a=this;if(a.isVisible()){var b=a.watcher.getLastResult();a.stopWatching();yb(b).done(function(){a&&a.node&&ca(function(){a.node.src=b;a.node.setAttribute("src",b)})})}},stopWatching:function(){this.scrollEl&&(ha(this.scrollEl,"scroll",this.scrollDelegate),ha(window,"resize",this.resizeDelegate),delete this.scrollDelegate,
delete this.resizeDelegate,delete this.scrollEl,this.queue.destroy(),delete this.queue,this.checkVisibility=!1)},destroy:function(){this.stopWatching();this.supr()}}));var lb=function(a){var b;a:{for(var c=a,d;c;){d=N(c,"mjs-transclude");if(void 0!==d){b=d;break a}c=c.parentNode}b=void 0}if(b){a.firstChild&&N(a,"mjs-transclude",la(a.childNodes));c=a.parentNode;d=a.nextSibling;b=Fa(b);var e=Z(b.childNodes);c.removeChild(a);c.insertBefore(b,d);return e}return null};M("mjs-transclude",1E3,function(a,
b){return lb(b)});M("mjs-view",200,function(a,b,c){b.removeAttribute("mjs-view");ya(c||"MetaphorJs.cmp.View",{scope:a,node:b},a,b);return!1});var mb=Ra.registerTagHandler;mb("mjs-include",900,function(a,b,c,d){return(new ra({scope:a,node:b,tpl:b.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});mb("mjs-transclude",900,function(a,b){return lb(b)});var Cb=function(){var a=function(a,b,c){if(n(b))return b(a,c);if(""===b||void 0===b)return!0;if(void 0!==a){if(Ba(a))return a===b;if(b instanceof
RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},b=function(b,c,g){if(pa(b))return void 0===c.$?!0:a(b,c.$,g);var f,k;for(f in c)if("$"==f)for(k in b){if(a(b[k],c.$,g))return!0}else if(a(b[f],c[f],g))return!0;return!1},c=function(a,c,g){ka(c)||(c={$:c});var f=[],k,h;k=-1;for(h=a.length;++k<h;)b(a[k],c,g)&&f.push(a[k]);return f};c.compare=b;return c}();I("filter.filter",function(a,b,c,
d){return Cb(a,c,d)});I("filter.fromList",function(a,b,c){c=c||", ";return a&&a.length?(D(a)||(a=Z(a)),a.join(c)):""});I("filter.l",function(a,b){return b.$app.lang.get(a)});I("filter.limitTo",function(a,b,c){b=s(a);if(!D(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});I("filter.linkify",
function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});I("filter.lowercase",function(a){return a.toLowerCase()});var Db={};I("filter.moment",function(a,b,c){c=Db[c]||c;return moment(a).format(c)});var Eb={};I("filter.numeral",function(a,b,c){c=Eb[c]||c;return numeral(a).format(c)});I("filter.p",function(a,b,c){return b.$app.lang.plural(a,parseInt(c,10)||0)});var Fb=function(a,b,c){c||
(c="asc");a=a.slice();a.sort(function(a,c){var g=typeof a,f=a,k=c;if(g!=typeof c)return 0;"object"==g&&(n(b)?(f=b(a),k=b(c)):(f=a[b],k=c[b]));if("number"==typeof f)return f-k;f=(""+f).toLowerCase();k=(""+k).toLowerCase();return f===k?0:f>k?1:-1});return"desc"==c?a.reverse():a};I("filter.sortBy",function(a,b,c,d){return Fb(a,c,d)});I("filter.toArray",function(a){return Z(a)});I("filter.toList",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-
1)&&(c=wa(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=F(a[b]));return a});I("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});I("filter.uppercase",function(a){return a.toUpperCase()});var Gb=function(a){var b=!1,c=!0,d=window,e=d.document,g=e.documentElement,f=function(c){if("readystatechange"!=c.type||"complete"==e.readyState)ha("load"==c.type?d:e,c.type,f),!b&&(b=!0)&&a.call(d,c.type||c)},k=function(){try{g.doScroll("left")}catch(a){setTimeout(k,
50);return}f("poll")};if("complete"==e.readyState)a.call(d,"lazy");else{if(e.createEventObject&&g.doScroll){try{c=!d.frameElement}catch(h){}c&&k()}A(e,"DOMContentLoaded",f);A(e,"readystatechange",f);A(d,"load",f)}},Hb=function(a,b,c,d){a.removeAttribute("mjs-app");try{var e=ya(b||"MetaphorJs.cmp.App",!1,c,a,[a,c]);return d?e.then(function(a){a.run();return a}):e}catch(g){return W(g),C.reject(g)}};(function(){Gb(function(){var a=Ea("[mjs-app]"),b,c,d,e=function(a){a.run()};b=-1;for(c=a.length;++b<
c;)d=a[b],Hb(d,d.getAttribute("mjs-app")).done(e)})})()})();
