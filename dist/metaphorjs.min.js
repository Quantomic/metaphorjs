'use strict';(function(){function z(e){return"function"==typeof e}function F(e){return"string"==typeof e||e===""+e}function Q(e){return"object"==typeof e&&5===U(e)}function ra(e){if(null===e||"object"!=typeof e)return!1;e=U(e);return 2<e||-1==e}function la(e){return"object"==typeof e&&3===U(e)&&!e.nodeType&&e.constructor===Object}function Da(e){return!0===e||!1===e}function R(){}function y(e,a){return e.getAttribute?e.getAttribute(a):null}function Xa(e){return e===window||e&&e.document&&e.location&&
e.alert&&e.setInterval}function oa(e){e=U(e);return 3>e&&-1<e}function pa(){return!1}function sa(e,a,b,c){return setTimeout(function(){e.apply(a,b||[])},c||0)}function aa(e){var a=e.stack||Error().stack;if("undefined"!=typeof console&&console.log)sa(function(){console.log(e);a&&console.log(a)});else throw e;}function V(e){if(e&&void 0!=!e.length&&e!==""+e){for(var a=[],b=-1,c=e.length>>>0;++b!==c;a[b]=e[b]);return a}return e?[e]:[]}function S(e){if(!e)return!1;var a,b;return"object"!=(b=typeof e)&&
"function"!=b?!1:z(a=e.then)?a:!1}function La(e){return null===e}function Ya(e){var a={},b,c,d=e.attributes;e=0;for(b=d.length;e<b;e++)c=d[e],a[c.name]=c.value;return a}function Y(e){var a=window.document.createDocumentFragment(),b,c;F(e)&&(b=window.document.createElement("div"),b.innerHTML=e,e=b.childNodes);if(!e)return a;if(e.nodeType)a.appendChild(e);else if(e.item)for(b=-1,c=e.length>>>0;++b!==c;a.appendChild(e[0]));else for(b=-1,c=e.length;++b!==c;a.appendChild(e[b]));return a}function da(e,
a){a&&(e.className=e.className.replace(ya("(?:^|\\s)"+a+"(?!\\S)"),""))}function Ma(e,a){return a?ya("(?:^|\\s)"+a+"(?!\\S)").test(e.className):!1}function ma(e,a){a&&!Ma(e,a)&&(e.className+=" "+a)}function Za(e,a){var b,c;if(!e||!F(e))return null;try{c=new DOMParser,b=c.parseFromString(e,a||"text/xml")}catch(d){b=void 0}if(!b||b.getElementsByTagName("parsererror").length)throw"Invalid XML: "+e;return b}function Ea(){return!0}function pb(e){return e.replace(qb,function(a){return a.charAt(1).toUpperCase()})}
function ba(e,a,b){var c=L(e,"config"),d;if(c)return c;c={};if(b||null!==(b=y(e,"mjs-config")))for(d in e.removeAttribute("mjs-config"),a=b?ca(b)(a||{}):{},a)c[d]=a[d];a=rb(e);for(d in a)b=a[d],c[d]=""===b?!0:b;L(e,"config",c);return c}function za(e,a,b,c,d){var f=!1!==a;a=a||{};d=d||[];b=b||a.scope;c=c||a.node;a.scope=a.scope||b;a.node=a.node||c;var g=F(e)?ta(e):e;if(!g)throw"Component "+e+" not found";b&&g.$isolateScope&&(a.scope=b=b.$newIsolated());var h,k=[];e=g.template||a.template||null;var m=
g.templateUrl||a.templateUrl||null,s=b?b.$app:null,K=$a.global(),t=s?s.inject:K.inject,r=s?s:K,q=c?y(c,"mjs-cloak"):null,n={$node:c||null,$scope:b||null,$config:a||null,$args:d||null};if(g.resolve)for(h in g.resolve)(function(f){var e=new D,m;k.push(e.done(function(b){n[f]=b;a[f]=b;d.push(b)}));m=g.resolve[h];z(m)?e.resolve(m(b,c)):F(m)?e.resolve(t.resolve(m)):e.resolve(t.call(r,m,null,x({},n,a,!1,!1)))})(h);f&&(e||m)&&(a.template=new ua({scope:b,node:c,deferRendering:!0,ownRenderer:!0,shadow:g.$shadow,
tpl:e,url:m}),k.push(a.template.initPromise),c&&c.firstChild&&L(c,"mjs-transclude",Y(c.childNodes)));f&&d.unshift(a);var p;k.length?(p=new D,D.all(k).done(function(){p.resolve(t.call(r,g,null,x({},n,a,!1,!1),d))})):p=D.resolve(t.call(r,g,null,x({},n,a,!1,!1),d));c&&p.isPending()&&null!==q&&(q?ma(c,q):c.style.visibility="hidden",p.then(function(){q?da(c,q):c.style.visibility=""}));c&&p.then(function(){da(c,"mjs-cloak")});return p}function ab(e,a){var b;a:{for(var c=e,d;c;){d=L(c,"mjs-transclude");
if(void 0!==d){b=d;break a}c=c.parentNode}b=void 0}if(b){e.firstChild&&L(e,"mjs-transclude",Y(e.childNodes));c=e.parentNode;d=e.nextSibling;b=Na(b);var f=V(b.childNodes);a?(c.removeChild(e),c.insertBefore(b,d)):e.appendChild(b);return f}return null}function sb(e,a,b){b||(b="asc");e=e.slice();e.sort(function(b,d){var f=typeof b,g=b,h=d;if(f!=typeof d)return 0;"object"==f&&(z(a)?(g=a(b),h=a(d)):(g=b[a],h=d[a]));if("number"==typeof g)return g-h;g=(""+g).toLowerCase();h=(""+h).toLowerCase();return g===
h?0:g>h?1:-1});return"desc"==b?e.reverse():e}function tb(e,a){var b=!1,c=!0,d=a||window,f,g,h=function(a){if("readystatechange"!=a.type||"complete"==g.readyState)Fa("load"==a.type?d:g,a.type,h),!b&&(b=!0)&&e.call(d,a.type||a)},k=function(){try{f.doScroll("left")}catch(a){setTimeout(k,50);return}h("poll")};g=d.document;f=g.documentElement;if("complete"==g.readyState)e.call(d,"lazy");else{if(g.createEventObject&&f.doScroll){try{c=!d.frameElement}catch(m){}c&&k()}O(g,"DOMContentLoaded",h);O(g,"readystatechange",
h);O(d,"load",h)}}function ub(e,a,b,c){try{var d=za(a||"MetaphorJs.App",!1,b,e,[e,b]);return!1!==c?d.done(function(a){a.run()}):d}catch(f){return aa(f),D.reject(f)}}var va={},vb=Object.prototype.toString,U=function(){var e={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(a){if(!a){if(null===a)return 6;if(void 0===a)return 7}var b=e[vb.call(a)];return void 0===b?-1:1==b&&
isNaN(a)?8:b}}(),bb=function(){var e,a=function(a){var c={},d=[];0==arguments.length&&(a=!0);return{addFinder:function(a,b,c){d[c?"unshift":"push"]({fn:a,context:b})},add:function(d,g,h){if(c[d]&&!1===c[d].rewritable)return c[d];c[d]={rewritable:"undefined"!=typeof h?h:a,value:g};return g},get:function(a){if(c[a])return c[a].value;if(d.length){var b,h,k;b=0;for(h=d.length;b<h;b++)if(k=d[b].fn.call(d[b].context,a,this),void 0!==k)return this.add(a,k,!0)}},remove:function(a){var b=c[a];b&&!0===b.rewritable&&
delete c[a];return b?b.value:void 0},exists:function(a){return!!c[a]},eachEntry:function(a,b){for(var d in c)a.call(b,c[d].value,d)},destroy:function(){this===e&&(e=null);this.remove=this.exists=this.destroy=this.get=this.add=a=c=null}}};a.global=function(){e||(e=new a(!0));return e};return a}(),Oa=function(){var e=function(b,c,d){d=d||new bb(!1);var f=c?c.length:null;b||(b="undefined"!=typeof global?global:window);var g=function(a){return a&&c&&a.substr(0,f)!=c?c+"."+a:a},h=function(a,h){a=g(a);
if(d.exists(a))return d.get(a);if(!h){var f=a.split("."),e,t=f.length,r,q=b;for(e=0;e<t;e++)if(r=f[e],c&&0==e&&r==c)q=b;else{if(void 0===q[r])return;q=q[r]}q&&d.add(a,q);return q}};this.register=function(a,h){var f;f=g(a);var e=f.split("."),t,r=e.pop();t=e.join(".");var q=e.length,n,p=b;if(d[t])f=[d[t],r,f];else{if(0<q)for(t=0;t<q;t++)n=e[t],c&&0==t&&n==c?p=b:(void 0===p[n]&&(p[n]={}),p=p[n]);f=[p,r,f]}e=f[0];r=f[1];ra(e)&&void 0===e[r]&&(e[r]=h,d.add(f[2],h));return h};this.exists=function(a){return void 0!==
h(a,!0)};this.get=h;this.add=function(a,b){a=g(a);d.add(a,b);return b};this.remove=function(a){a=g(a);d.remove(a)};this.normalize=g;this.makeAlias=function(a,b){a=g(a);b=g(b);var c=d.get(a);void 0!==c&&d.add(b,c)};this.destroy=function(){var b;this===a&&(a=null);d.eachEntry(function(a){a&&a.$destroy&&a.$destroy()});d.destroy();d=null;for(b in this)this[b]=null}};e.prototype.register=null;e.prototype.exists=null;e.prototype.get=null;e.prototype.add=null;e.prototype.remove=null;e.prototype.normalize=
null;e.prototype.makeAlias=null;e.prototype.destroy=null;var a;e.global=function(){a||(a=new e);return a};return e}(),Z=Array.prototype.slice,x=function(){return function a(){var b=!1,c=!1,d=Z.call(arguments),f=d.shift(),g,h,k;Da(d[d.length-1])&&(b=d.pop());Da(d[d.length-1])&&(c=b,b=d.pop());for(;d.length;)if(g=d.shift())for(h in g)if(g.hasOwnProperty(h)&&void 0!==(k=g[h]))if(c)if(f[h]&&la(f[h])&&la(k))a(f[h],k,b,c);else{if(!0===b||void 0==f[h])la(k)?(f[h]={},a(f[h],k,b,!0)):f[h]=k}else if(!0===b||
void 0==f[h])f[h]=k;return f}}(),cb=function(e,a){var b=function(){},c;b.prototype=e.prototype;b=new b;c=e.apply(b,a);return ra(c)||!1===c?c:b},wb=function(e,a,b,c,d,f){d=d||"before";return function(){var g,h;if("instead"==d)return a.apply(b||c,arguments);"before"==d?(g=a.apply(b||c,arguments),h=!1!==g?e.apply(c||b,arguments):null):(h=e.apply(c||b,arguments),g=a.apply(b||c,arguments));return f?g:h}},xb=function(){var e=function(){this.$super&&this.$super!==R&&this.$super.apply(this,arguments)},a=
function(a,b,c){var $super=a.prototype[b]||("$constructor"==b?a:R)||R;return function(){var a,b=this.$super;this.$super=$super;a=c.apply(this,arguments);this.$super=b;return a}},b=function(b,c,d,f){var e,K,t,r=d.prototype;for(e in c)c.hasOwnProperty(e)&&(t=r[e],K=c[e],b[e]=!z(K)||t&&!z(t)?K:a(d,e,K));f||(b.$plugins=null,r.$beforeInit?(b.$beforeInit=r.$beforeInit.slice(),b.$afterInit=r.$afterInit.slice(),b.$beforeDestroy=r.$beforeDestroy.slice(),b.$afterDestroy=r.$afterDestroy.slice()):(b.$beforeInit=
[],b.$afterInit=[],b.$beforeDestroy=[],b.$afterDestroy=[]))},c=function(a,b){for(var c in b)b.hasOwnProperty(c)&&("$beforeInit"==c?a.$beforeInit.push(b[c]):"$afterInit"==c?a.$afterInit.push(b[c]):"$beforeDestroy"==c?a.$beforeDestroy.push(b[c]):"$afterDestroy"==c?a.$afterDestroy.push(b[c]):a[c]||(a[c]=b[c]))},d=function(a){a||(a=new Oa);var h=function(){return function(){var b=[],c=[],d=arguments,h,f,k,e,m;if(!this)throw"Must instantiate via new";this.$plugins=[];(h=this.$constructor.apply(this,arguments))&&
Q(h)&&(d=h);k=this.$plugins;h=-1;for(f=this.$beforeInit.length;++h<f;b.push([this.$beforeInit[h],this]));h=-1;for(f=this.$afterInit.length;++h<f;c.push([this.$afterInit[h],this]));if(k&&k.length)for(h=0,f=k.length;h<f;h++){e=k[h];if(F(e)&&(m=e,e=a.get(e,!0),!e))throw m+" not found";e=new e(this,d);e.$beforeHostInit&&b.push([e.$beforeHostInit,e]);e.$afterHostInit&&c.push([e.$afterHostInit,e]);k[h]=e}h=-1;for(f=b.length;++h<f;b[h][0].apply(b[h][1],d));this.$init&&this.$init.apply(this,d);h=-1;for(f=
c.length;++h<f;c[h][0].apply(c[h][1],d));}},k=function(){};x(k.prototype,{$class:null,$extends:null,$plugins:null,$mixins:null,$destroyed:!1,$constructor:R,$init:R,$beforeInit:[],$afterInit:[],$beforeDestroy:[],$afterDestroy:[],$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$intercept:function(a,b,c,d,h){var f=this[a];this[a]=wb(f,b,c||this,this,d,h);return f},$implement:function(a){var c=this.constructor;c&&c.$parent&&b(this,a,c.$parent)},$destroy:function(){var a=
this.$beforeDestroy,b=this.$afterDestroy,c=this.$plugins,d,h,f;if(!this.$destroyed){this.$destroyed=!0;d=-1;for(h=a.length;++d<h;a[d].apply(this,arguments));d=0;for(h=c.length;d<h;d++)c[d].$beforeHostDestroy&&c[d].$beforeHostDestroy.call(c[d],arguments);f=this.destroy.apply(this,arguments);d=-1;for(h=a.length;++d<h;b[d].apply(this,arguments));d=0;for(h=c.length;d<h;d++)c[d].$destroy.apply(c[d],arguments);if(!1!==f)for(d in this)this.hasOwnProperty(d)&&(this[d]=null);this.$destroyed=!0}},destroy:function(){}});
k.$self=k;k.$instantiate=function(){var a=arguments;switch(a.length){case 0:return new this;case 1:return new this(a[0]);case 2:return new this(a[0],a[1]);case 3:return new this(a[0],a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:return cb(this,a)}};k.$override=function(a){var c=this.$self,d=this.$parent;c&&d&&b(c.prototype,a,d)};k.$extend=function(a,b){return m(a,b,this)};k.$destroy=function(){for(var a in this)this[a]=null};var m=function(d,f,m){d=d||{};var s=d.$class,n=m||d.$extends,
p=d.$mixins,v,w,l;n?F(n)?m=a.get(n):(m=n,n=m.$class||""):(m=k,n="");if(n&&!m)throw n+" not found";s&&(s=a.normalize(s));d.$class=s;d.$extends=n;d.$mixins=null;v=function(){};v.prototype=m.prototype;n=new v;v=null;d.$constructor=d.$constructor||e;b(n,d,m);if(p)for(d=0,v=p.length;d<v;d++)l=p[d],F(l)&&(l=a.get("mixin."+l,!0)),c(n,l);p=h();n.constructor=p;p.prototype=n;for(w in k)"prototype"!=w&&k.hasOwnProperty(w)&&(p[w]=k[w]);for(w in m)"prototype"!=w&&m.hasOwnProperty(w)&&(p[w]=m[w]);if(f)for(w in f)"prototype"!=
w&&f.hasOwnProperty(w)&&(p[w]=f[w]);p.$parent=m;p.$self=p;s&&a.register(s,p);return p},s=this;s.factory=function(b){var c=a.get(b),d=Z.call(arguments,1);if(!c)throw b+" not found";return c.$instantiate.apply(c,d)};s.isSubclassOf=function(b,c){var d=b,h=a.get;c=F(c)?a.normalize(c):c.prototype.$class;for(F(b)&&(d=h(a.normalize(b)));d&&d.prototype;){if(d.prototype.$class==c)return!0;d=d.$parent}return!1};s.isInstanceOf=function(b,c){var d=F(c)?a.get(c):c;return d?b instanceof d:!1};s.define=m;s.destroy=
function(){s===f&&(f=null);k.$destroy();k=null;a.destroy();d=a=null};s.BaseClass=k};d.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,destroy:null};var f;d.global=function(){f||(f=new d(Oa.global()));return f};return d}(),E=new Oa(va,"MetaphorJs"),Aa=new xb(E),C=Aa.define,M=function(){var e=["0","0","0"];return function(){for(var a=e.length,b;a;){a--;b=e[a].charCodeAt(0);if(57==b)return e[a]="A",e.join("");if(90==b)e[a]="0";else return e[a]=String.fromCharCode(b+1),e.join("")}e.unshift("0");
return e.join("")}}(),u=Function.prototype.bind?function(e,a){return e.bind(a)}:function(e,a){return function(){return e.apply(a,arguments)}},ea=function(){this.events={}};x(ea.prototype,{createEvent:function(e,a,b,c,d){e=e.toLowerCase();var f=this.events;f[e]||(f[e]=new Pa(e,a,b,c,d));return f[e]},getEvent:function(e){e=e.toLowerCase();return this.events[e]},on:function(e,a,b,c){e=e.toLowerCase();var d=this.events;d[e]||(d[e]=new Pa(e));return d[e].on(a,b,c)},once:function(e,a,b,c){c=c||{};c.limit=
1;return this.on(e,a,b,c)},un:function(e,a,b){e=e.toLowerCase();var c=this.events;c[e]&&c[e].un(a,b)},hasListener:function(e,a,b){var c=this.events;if(e)return e=e.toLowerCase(),c[e]?c[e].hasListener(a,b):!1;for(e in c)if(c[e].hasListener())return!0;return!1},removeAllListeners:function(e){var a=this.events;a[e]&&a[e].removeAllListeners()},trigger:function(){var e=arguments[0],a=this.events,e=e.toLowerCase();if(!a[e])return null;e=a[e];return e.trigger.apply(e,Z.call(arguments,1))},suspendEvent:function(e){e=
e.toLowerCase();var a=this.events;a[e]&&a[e].suspend()},suspendAllEvents:function(){var e=this.events,a;for(a in e)e[a].suspend()},resumeEvent:function(e){e=e.toLowerCase();var a=this.events;a[e]&&a[e].resume()},resumeAllEvents:function(){var e=this.events,a;for(a in e)e[a].resume()},destroyEvent:function(e){var a=this.events;a[e]&&(a[e].removeAllListeners(),a[e].destroy(),delete a[e])},destroy:function(){var e=this.events,a;for(a in e)this.destroyEvent(a);for(a in this)this[a]=null},getApi:function(){if(!this.api){for(var e=
"createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),a={},b,c=-1,d=e.length;++c<d;b=e[c],a[b]=u(this[b],this));this.api=a}return this.api}},!0,!1);var Pa=function(e,a,b,c,d){this.name=e;this.listeners=[];this.map={};this.hash=M();this.uni="$$"+e+"_"+this.hash;this.suspended=!1;this.lid=0;"object"==typeof a&&null!==a?x(this,a,!0,!1):(this.returnResult=void 0===a?null:a,this.autoTrigger=b,this.triggerFilter=
c,this.filterContext=d)};x(Pa.prototype,{name:null,listeners:null,map:null,hash:null,uni:null,suspended:!1,lid:null,returnResult:null,autoTrigger:null,lastTrigger:null,triggerFilter:null,filterContext:null,getName:function(){return this.name},destroy:function(){for(var e in this)this[e]=null},on:function(e,a,b){if(!e)return null;a=a||null;b=b||{};var c=this.uni,d=a||e;if(d[c]&&!b.allowDupes)return null;var f=++this.lid,g=b.first||!1;d[c]=f;e={fn:e,context:a,uniContext:d,id:f,called:0,limit:0,start:1,
count:0,append:null,prepend:null};x(e,b,!0,!1);g?this.listeners.unshift(e):this.listeners.push(e);this.map[f]=e;if(this.autoTrigger&&this.lastTrigger&&!this.suspended){var h=this.triggerFilter;this.triggerFilter=function(a){return a.id==f?h?!1!==h(a):!0:!1};this.trigger.apply(this,this.lastTrigger);this.triggerFilter=h}return f},once:function(e,a,b){b=b||{};b.once=!0;return this.on(e,a,b)},un:function(e,a){var b=-1,c=this.uni,d=this.listeners,f;f=e==parseInt(e)?e:(a||e)[c];if(!f)return!1;for(var g=
0,h=d.length;g<h;g++)if(d[g].id==f){b=g;delete d[g].uniContext[c];break}if(-1==b)return!1;d.splice(b,1);delete this.map[f];return!0},hasListener:function(e,a){var b=this.listeners,c;if(e){a=a||e;c=z(e)?a[this.uni]:e;if(!c)return!1;for(var d=0,f=b.length;d<f;d++)if(b[d].id==c)return!0;return!1}return 0<b.length},removeAllListeners:function(){var e=this.listeners,a=this.uni,b,c;b=0;for(c=e.length;b<c;b++)delete e[b].uniContext[a];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},
resume:function(){this.suspended=!1},_prepareArgs:function(e,a){var b;e.append||e.prepend?(b=Z.call(a),e.prepend&&(b=e.prepend.concat(b)),e.append&&(b=b.concat(e.append))):b=a;return b},trigger:function(){var e=this.listeners,a=this.returnResult,b=this.triggerFilter,c=this.filterContext,d;if(this.suspended)return null;this.autoTrigger&&(this.lastTrigger=Z.call(arguments));if(0==e.length)return null;for(var f="all"==a||"merge"==a?[]:null,g,e="first"==a?[e[0]]:Z.call(e);g=e.shift();)if(g&&this.map[g.id]&&
(d=this._prepareArgs(g,arguments),!b||!1!==b.call(c,g,d,this))&&(g.count++,!(g.count<g.start)))if(d=g.fn.apply(g.context,d),g.called++,g.called==g.limit&&this.un(g.id),"all"==a)f.push(d);else if("merge"==a&&d)f=f.concat(d);else{if("first"==a)return d;if("last"==a)f=d;else if(!1==a&&!1===d)return!1}if(a)return f}},!0,!1);var N=function(){return String.prototype.trim?function(e){return F(e)?e.trim():e}:function(e){return F(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}(),Qa=function(e,a,b){var c=
e.length,d=a.length,f=0,g=0,h=!1,k=!1,m=[],s;if(!d)return[e];for(;f<c;f++)if(s=e.charAt(f),"\\"==s)f++;else if('"'==s)h=!h;else if("'"==s)k=!k;else if(!h&&!k&&(1==d&&s==a||1<d&&e.substring(f,f+d)==a)){if(e.substr(f-1,d)!=a&&e.substr(f+1,d)!=a||b)m.push(e.substring(g,f).replace("\\"+a,a)),g=f+d;f+=d-1}m.push(e.substring(g).replace("\\"+a,a));return m},db=function(){return function a(b,c){if(b===c)return!0;if(null===b||null===c)return!1;if(b!==b&&c!==c)return!0;var d=typeof b,f;if(d==typeof c&&"object"==
d)if(Q(b)){if(!Q(c))return!1;if((d=b.length)==c.length){for(f=0;f<d;f++)if(!a(b[f],c[f]))return!1;return!0}}else{if(10===U(b))return 10===U(c)&&b.getTime()==c.getTime();if(9===U(b)&&9===U(c))return b.toString()==c.toString();if(Xa(b)||Xa(c)||Q(c))return!1;d={};for(f in b)if("$"!=f.charAt(0)&&!z(b[f])){if(!a(b[f],c[f]))return!1;d[f]=!0}for(f in c)if(!d.hasOwnProperty(f)&&"$"!=f.charAt(0)&&void 0!==c[f]&&!z(c[f]))return!1;return!0}return!1}}(),eb=function(){var e="undefined"!=typeof window?window:null,
a="undefined"!=typeof global?global:null;return function c(d,f){if(e&&d===e)throw Error("Cannot copy window object");if(a&&d===a)throw Error("Cannot copy global object");if(f){if(d===f)throw Error("Objects are identical");if(Q(d))for(var g=f.length=0,h=d.length;g<h;g++)f.push(c(d[g]));else{for(g in f)delete f[g];for(g in d)d.hasOwnProperty(g)&&("$"==g.charAt(0)||z(d[g])?f[g]=d[g]:f[g]=c(d[g]))}}else(f=d)&&(Q(d)?f=c(d,[]):10===U(d)?f=new Date(d.getTime()):9===U(d)?f=new RegExp(d.source):la(d)&&(f=
c(d,{})));return f}}(),yb=function(){var e=Object.prototype.toString,a=Function.prototype.toString,b=/^\[object .+?Constructor\]$/,c=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(d){var f=typeof d;return"function"==f?!("prototype"in d)||c.test(a.call(d)):d&&"object"==f&&b.test(e.call(d))||!1}}(),Ra=function(){var e=/(^|[^a-z0-9_$\]\)'"])(\.)([^0-9])/ig,a=Function,b=function(a,b){return function(c){var d=
Z.call(arguments),h;d.push(null);d.push(a);if(b){for(h=a.apply(null,d);(void 0===h||"number"==typeof h&&isNaN(h))&&!c.$isRoot;)c=c.$parent,d[0]=c,h=a.apply(null,d);return h}return a.apply(null,d)}},c={},d=0,f={},g=0,h={},k=0,m=function(){1E3<=d&&(c={});1E3<=g&&(f={});1E3<=k&&(h={})};return{createGetter:function(h){try{return c[h]?c[h]:(d++,c[h]=b(new a("____","$$interceptor","$$itself","".concat("try {","return ",h.replace(e,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(f){return aa(f),
R}},createSetter:function(c){try{if(!f[c]){g++;var d=c.replace(e,"$1____.$3");return f[c]=b(new a("____","$$$$","$$interceptor","$$itself","".concat("try {",d," = $$$$",";} catch (thrownError) { return undefined; }")))}return f[c]}catch(h){return aa(h),R}},createFunc:function(c){try{return h[c]?h[c]:(k++,h[c]=b(new a("____","$$interceptor","$$itself","".concat("try {",c.replace(e,"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(d){return aa(d),R}},resetCache:m,enableResetCacheInterval:function(){setTimeout(m,
1E4)}}}(),ca=Ra.createGetter,zb=Ra.createSetter,Sa=function(){var e=Object.observe&&yb(Object.observe),a=function(a){if(!F(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},b,c=function(c,d,e,g,K,t){b||(b=new ea);var r=M(),q;t&&(this.namespace=t,this.nsGet=t.get);this.origCode=d;F(d)||(g=e,e=d,d=null,q="object");F(c)&&(g=e,e=d,d=c,c=null);d&&c&&(q=c.hasOwnProperty(d)?"attr":"expr");d&&!c&&(q="expr");if(e)b.on(r,e,g||this,{append:[K],allowDupes:!0});
if("expr"==q){d=this._parsePipes(d,c,!0);d=this._parsePipes(d,c,!1);if(this.inputPipes||this.pipes)d=f(c,d),q=c.hasOwnProperty(d)?"attr":"expr";if(this.staticValue=a(d))q="static"}this.userData=K;this.code=d;this.id=r;this.type=q;this.obj=c;"expr"==q&&(this.getterFn=ca(d));"static"!=q||this.pipes?(this.curr=this.curr||this._getValue(),this.currCopy=oa(this.curr)?this.curr:eb(this.curr)):(this.check=pa,this.curr=this.prev=this.staticValue)};x(c.prototype,{namespace:null,nsGet:null,staticValue:null,
origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,currCopy:null,prev:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,obsrvDelegate:null,obsrvChanged:!1,_indexArrayItems:function(a){var b="$$"+this.id,c,d,f;if(a)for(c=0,d=a.length;c<d;c++)f=a[c],!f||oa(f)||f[b]||(f[b]=M())},_parsePipes:function(a,b,c){var d=c?">>":"|",f=c?"inputPipes":"pipes",e=c?this.onInputParamChange:this.onPipeParamChange;if(-1==a.indexOf(d))return a;
a=Qa(a,d);c=c?a.pop():a.shift();var d=[],g,q,n;q=0;for(n=a.length;q<n;q++)g=Qa(N(a[q]),":"),this._addPipe(d,g,b,e);d.length&&(this[f]=d);return N(c)},_addPipe:function(a,b,c,f){var e=b.shift(),g=null,r=[],q=!1,n;"!"==e.substr(0,1)&&(e=e.substr(1),q=!0);this.nsGet&&(g=this.nsGet("filter."+e,!0));g||(g=("undefined"!=typeof window?window[e]:null)||c[e]);if(z(g)){e=-1;for(n=b.length;++e<n;r.push(d(c,b[e],f,this,null,this.namespace)));a.push([g,b,r,q])}},_getValue:function(){var a;switch(this.type){case "static":a=
this.staticValue;break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);break;case "object":a=this.obj}Q(a)&&(this.inputPipes||this._indexArrayItems(a),a=a.slice());this.unfiltered=a;return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,f,e=b.length,r=this.obj,q,n,p;for(c=0;c<e;c++){f=b[c][1];q=b[c][3];d=[];n=-1;for(p=f.length;++n<p;d.push(g(f[n],r)));d.unshift(r);d.unshift(a);a=b[c][0].apply(null,d);q&&(a=!a)}}return a},subscribe:function(a,
c,d){b.on(this.id,a,c,d)},unsubscribe:function(a,c){return b.un(this.id,a,c)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||this.curr},getPrevValue:function(){return this.prev},getPrescription:function(a,b){var c;b=b||this._getValue();var d=a||[],f=b||[],e=d.length,g=f.length,q=Array(e+1);c=Array(e+1);var n,p,v,w=0;if(e==g&&0==e)c=[];else{for(n=
0;n<=e;n++)q[n]=Array(g+1),c[n]=Array(g+1),q[n][0]=n,c[n][0]="D";for(n=0;n<=g;n++)q[0][n]=n,c[0][n]="I";for(n=1;n<=e;n++)for(p=1;p<=g;p++)v=db(d[n-1],f[p-1])?0:1,q[n][p-1]<q[n-1][p]&&q[n][p-1]<q[n-1][p-1]+v?(q[n][p]=q[n][p-1]+1,c[n][p]="I"):q[n-1][p]<q[n-1][p-1]+v?(q[n][p]=q[n-1][p]+1,c[n][p]="D"):(q[n][p]=q[n-1][p-1]+v,c[n][p]=1==v?"R":"-");d=[];n=e;p=g;do e=c[n][p],d.push(e),"-"!=e&&w++,"R"==e||"-"==e?(n--,p--):"D"==e?n--:p--;while(0!=n||0!=p);c=d.reverse()}return c},getMovePrescription:function(a,
b,c){c=c||this._getValue();var d=a||[],f=c||[];a=this.getPrescription(a||[],c||[]);c=[];var e,g,q,n={},p,v;e=0;for(g=d.length;e<g;e++)(q=b(d[e]))&&(n[q]=e);p=0;var w={};e=0;for(g=a.length;e<g;e++)d=a[e],"D"!=d&&(q=b(f[p]),void 0!=q&&!0!==w[q]&&void 0!==(v=n[q])?(c.push(v),w[q]=!0):c.push(d),p++);return c},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);"attr"==b?this.obj[this.code]=a:"expr"==b?(this.setterFn||(this.setterFn=zb(this.code)),this.setterFn(this.obj,
a)):"object"==b&&(this.obj=a)},onInputParamChange:function(a,b,c){this.setValue(this.lastSetValue);c&&this.checkAll()},onPipeParamChange:function(a,b,c){this.check()},onObserverChange:function(a){var b=this.code,c,d,f;c=0;for(d=a.length;c<d;c++)if(f=a[c],f.name==b){this.obsrvChanged=!0;break}},_check:function(a){var c=this._getValue(),d=this.currCopy;return(this.obsrvDelegate?this.obsrvChanged:!db(d,c))?(this.curr=c,this.prev=d,this.currCopy=oa(c)?c:eb(c),this.obsrvChanged=!1,b.trigger(this.id,c,
d,a),!0):!1},check:function(a){return this._check(a)},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,c){var d=this.id;a&&b.un(d,a,c);return b.hasListener(d)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,c=this.inputPipes,
d,f,e,g,r;this.itv&&this.clearInterval();if(a)for(d=-1,f=a.length;++d<f;)for(r=a[d][2],e=-1,g=r.length;++e<g;)r[e].unsubscribeAndDestroy(this.check,this);if(c)for(d=-1,f=c.length;++d<f;)for(r=c[d][2],e=-1,g=r.length;++e<g;)r[e].unsubscribeAndDestroy(this.onInputParamChange,this);this.obsrvDelegate&&Object.unobserve(this.obj,this.obsrvDelegate);this.obj&&(this.obj.$$watchers.$codes[this.origCode]=null);b.destroyEvent(this.id);for(d in this)this.hasOwnProperty(d)&&(this[d]=null)}},!0,!1);var d=function(a,
b,d,e,g,t){b=f(a,N(b));return a?(a.$$watchers||(a.$$watchers={$codes:{},$checkAll:function(){var a=this.$codes,b,c=0;for(b in a)a[b]&&a[b].check()&&c++;return c},$destroyAll:function(){var a=this.$codes,b;for(b in a)a[b]&&(a[b].destroy(),a[b]=null)}}),a.$$watchers.$codes[b]?a.$$watchers.$codes[b].subscribe(d,e,{append:[g],allowDupes:!0}):a.$$watchers.$codes[b]=new c(a,b,d,e,g,t),a.$$watchers.$codes[b]):new c(a,b,d,e,g,t)},f=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&
(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},g=function(b,c){var d;return(d=a(b))?d:ca(b)(c)};c.create=d;c.unsubscribeAndDestroy=function(a,b,c,d){b=N(b);(a=a.$$watchers?a.$$watchers.$codes:null)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&(a[b]=null)};c.normalizeExpr=f;c.eval=g;c.usesNativeObserver=function(){return e};return c}(),ha=function(e){this.$$observable=new ea;this.$$historyWatchers={};x(this,e,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",
this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};x(ha.prototype,{$app:null,$parent:null,$root:null,$isRoot:!1,$level:0,$$observable:null,$$watchers:null,$$historyWatchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new ha({$parent:this,$root:this.$root,$app:this.$app,$level:this.$level+1})},$newIsolated:function(){return new ha({$app:this.$app,$level:self.$level+1})},$on:function(e,a,b){return this.$$observable.on(e,a,b)},$un:function(e,a,b){return this.$$observable.un(e,
a,b)},$watch:function(e,a,b){return Sa.create(this,e,a,b,null)},$unwatch:function(e,a,b){return Sa.unsubscribeAndDestroy(this,e,a,b)},$watchHistory:function(e,a){this.$$historyWatchers[a]||(this.$$historyWatchers[a]=e,va.history.on("change-"+a,this.$$onHistoryChange,this))},$unwatchHistory:function(e){this.$$historyWatchers[e]||(delete this.$$historyWatchers[e],va.history.un("change-"+e,this.$$onHistoryChange,this))},$get:function(e){for(var a=this;a;){if(void 0!==a[e])return a[e];a=a.$parent}},$set:function(e,
a){if("string"==typeof e)this[e]=a;else for(var b in e)this[b]=e[b];this.$check()},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$$onHistoryChange:function(e,a,b){this.$$historyWatchers[b]&&(a=this.$$historyWatchers[b],this[a]=e,this.$check())},$check:function(){var e;this.$$checking||(this.$$checking=!0,this.$$watchers&&(e=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",e),0<e&&this.$check())},$destroy:function(){var e,
a;this.$$observable.trigger("destroy");this.$$observable.destroy();this.$$watchers&&this.$$watchers.$destroyAll();for(e in this.$$historyWatchers)this.$unwatchHistory(e);for(a in this)this.hasOwnProperty(a)&&(this[a]=null);this.$$destroyed=!0}},!0,!1);var ia=Sa.create,P=E.add,ta=E.get,l=function(){var e=[],a=!1,b=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return C({$class:"Directive",watcher:null,scope:null,node:null,expr:null,autoOnChange:!0,$init:function(a,b,f){var e;
f=N(f);this.node=b;this.expr=f;this.scope=a;this.watcher=ia(a,f,this.onChange,this,null,E);if(this.autoOnChange&&void 0!==(e=this.watcher.getLastResult()))this.onChange(e,void 0);a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.$destroy()},onChange:function(){},destroy:function(){this.watcher&&this.watcher.unsubscribeAndDestroy(this.onChange,this);this.$super()}},{registerAttribute:function(b,d,f){ta("attr."+b,!0)||(e.push({priority:d,name:b,handler:P("attr."+b,f)}),a=!1)},
getAttributes:function(){a||(e.sort(b),a=!0);return e},registerTag:function(a,b){ta("tag."+a,!0)||P("tag."+a,b)}})}(),fb=function(){var e=/\\{/g,a=new ea,b=function(a,b,e,h,k){return!b||!b.indexOf||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new c(a,b,e,h,k)},c=C({$class:"TextRenderer",id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,$init:function(a,b,c,e,k){this.id=
M();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=e;this.lang=a.$app?a.$app.lang:null;if(!0===k||!1===k)this.recursive=k;this.watchers=[];this.children=[];this.dataChangeDelegate=u(this.doDataChange,this);this.processed=this.processText(b);this.render()},subscribe:function(b,c){return a.on(this.id,b,c)},unsubscribe:function(b,c){return a.un(this.id,b,c)},getString:function(){null===this.text&&this.render();var a=this.text;return-1!=a.indexOf("\\{")?a.replace(e,"{"):a},render:function(){var a=
this.processed,b,e,h;this.children.length||this.createChildren();h=this.children;b=-1;for(e=h.length;++b<e;a=a.replace("---"+b+"---",h[b]instanceof c?h[b].getString():h[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,e,k,m="";b<c;)if(-1!=(e=a.indexOf("{{",b))&&-1!=(k=a.indexOf("}}",e+2))&&"\\"!=a.substr(e-1,1))m+=a.substring(b,e),k!=e+2&&(m+=this.watcherMatch(a.substring(e+2,k))),b=k+2;else{b!==c&&(m+=a.substring(b));break}b=0;a=m;c=a.length;for(m="";b<c;)if(-1!=(e=a.indexOf("{[",
b))&&-1!=(k=a.indexOf("]}",e+2))&&"\\"!=a.substr(e-1,1))m+=a.substring(b,e),k!=e+2&&(m+=this.watcherMatch(a.substring(e+2,k),!0)),b=k+2;else{b!==c&&(m+=a.substring(b));break}return m},watcherMatch:function(a,b){var c=this.watchers;if(b){a=N(a);var e=Qa(a,"|"),k=N(e[0]);"."!=k.substr(0,1)&&(e[0]="'"+k+"'");1==e.length&&e.push("l");a=e.join(" | ")}c.push(ia(this.scope,a,this.onDataChange,this,null,E));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,
0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?a.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,c=this.children,e=this.scope,h=this.recursive,k,m,s;k=-1;for(m=a.length;++k<m;)s=a[k].getLastResult(),void 0===s&&(s=""),c.push(h&&b(e,s,this,null,!0)||s)},destroyChildren:function(){var a=this.children,b,e;b=-1;for(e=a.length;++b<e;)a[b]instanceof
c&&a[b].$destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();a.destroyEvent(this.id);this.changeTmt&&clearTimeout(this.changeTmt)}},{create:b});return c}(),D=function(){var e=[],a=!1,b="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},c=function(){a=!0;var d=e.shift();b(function(){d[0].apply(d[1],
d[2]);e.length?c():a=!1},0)},d=function(b,d,f){f=f||[];e.push([b,d,f]);a||c()},f=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},g=function(a,b){if(a instanceof g)return a;if(!(this instanceof g))return new g(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=S(a))a instanceof g?a.then(u(this.resolve,this),u(this.reject,this)):(new g(c,a)).then(u(this.resolve,this),u(this.reject,this));else if(z(a))try{a.call(b,u(this.resolve,
this),u(this.reject,this))}catch(d){this.reject(d)}else this.resolve(a)};x(g.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){this._fails=this._dones=this._rejects=this._fulfills=null},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));
else{try{if(c=S(a)){a instanceof g?a.then(u(this._processResolveValue,this),u(this._processRejectReason,this)):(new g(c,a)).then(u(this._processResolveValue,this),u(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)d(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)d(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new g,e=this._state;0==e||0!=this._wait?(a&&z(a)?this._fulfills.push([f(a,c),null]):this._fulfills.push([c.resolve,c]),b&&z(b)?this._rejects.push([f(b,c),null]):this._rejects.push([c.reject,c])):1==e?a&&z(a)?d(f(a,c),null,[this._value]):c.resolve(this._value):2==e&&(b&&z(b)?d(f(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,
this._value)}catch(c){aa(c)}},done:function(a,b){var c=this._state;if(1==c&&0==this._wait)try{a.call(b||null,this._value)}catch(d){aa(d)}else 0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){aa(c)}},fail:function(a,b){var c=this._state;if(2==c&&0==this._wait)try{a.call(b||null,this._reason)}catch(d){aa(d)}else 0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);
return this},promise:function(){return{then:u(this.then,this),done:u(this.done,this),fail:u(this.fail,this),always:u(this.always,this)}},after:function(a){var b=this;if(S(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};z(a.done)?a.done(c):a.then(c)}return b}},!0,!1);g.fcall=function(a,b,c){return g.resolve(a.apply(b,c||[]))};g.resolve=function(a){var b=new g;b.resolve(a);return b};g.reject=function(a){var b=new g;b.reject(a);
return b};g.all=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=Array(c),f=c,e,r,q=function(a,c){d[c]=a;f--;0==f&&b.resolve(d)};for(e=0;e<c;e++)(function(c){r=a[e];r instanceof g?r.done(function(a){q(a,c)}).fail(b.reject,b):S(r)||z(r)?(new g(r)).done(function(a){q(a,c)}).fail(b.reject,b):q(r,c)})(e);return b};g.when=function(){return g.all(arguments)};g.allResolved=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=[],f=c,e,r,q=function(a){d.push(a);
n()},n=function(){f--;0==f&&b.resolve(d)};for(e=0;e<c;e++)r=a[e],r instanceof g?r.done(q).fail(n):S(r)||z(r)?(new g(r)).done(q).fail(n):q(r);return b};g.race=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d,e;for(d=0;d<c&&(e=a[d],e instanceof g?e.done(b.resolve,b).fail(b.reject,b):S(e)||z(e)?(new g(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};g.waterfall=function(a){if(!a.length)return g.resolve(null);for(var b=a.shift(),b=z(b)?g.fcall(b):
g.resolve(c),c;c=a.shift();)S(c)?b=b.then(function(a){return function(){return a}}(c)):z(c)?b=b.then(c):b.resolve(c);return b};g.counter=function(a){var b=new g;b.countdown=function(){a--;0==a&&b.resolve()};return b};return g}(),Ga=Array.prototype.indexOf;Ga||(Ga=Array.prototype.indexOf=function(e,a){var b;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),d=c.length>>>0;if(0===d)return-1;b=+a||0;Infinity===Math.abs(b)&&(b=0);if(b>=d)return-1;for(b=Math.max(0<=b?
b:d-Math.abs(b),0);b<d;){if(b in c&&c[b]===e)return b;b++}return-1});var Ha=function(){var e=null,a=fb.create,b=function(a,b,c,d,e,g){var r=[];if(a&&!0!==a){if(a.nodeType){g.countdown+=1;f(a,c,d,e,g);return}r=Z.call(a)}r.length||(r=V(b.childNodes||b));b=r.length;g.countdown+=b;for(a=-1;++a<b;f(r[a],c,d,e,g));},c=function(a,b){if(b)if(b.nodeType)a.push(b);else if(Q(b))for(var d=-1,e=b.length;++d<e;c(a,b[d]));},d={script:!0,template:!0,"mjs-template":!0,style:!0},f=function(a,c,e,f,g){if(a){var t;t=
a.nodeName;g||(g={countdown:1});if(!t||!d[t.toLowerCase()])if(t=c.call(e,a),!1!==t){if(S(t)){t.done(function(d){!1!==d&&b(d,a,c,e,f,g);0==--g.countdown&&f&&f.call(e)});return}b(t,a,c,e,f,g)}0==--g.countdown&&f&&f.call(e)}},g=new ea;return C({$class:"Renderer",id:null,el:null,scope:null,texts:null,parent:null,$init:function(a,b,c){this.id=M();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof ha&&b.$on("destroy",this.$destroy,this);if(c)c.on("destroy",this.$destroy,this)},on:function(a,
b,c){return g.on(a+"-"+this.id,b,c)},once:function(a,b,c){return g.once(a+"-"+this.id,b,c)},un:function(a,b,c){return g.un(a+"-"+this.id,b,c)},createChild:function(a){return new Ha(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b,f=b.$app,g={$scope:e,$node:c,$attrValue:d,$renderer:this};c=[e,c,d,this];g=f?f.inject(a,null,g,c):a.apply(null,c);f&&a.$registerBy&&g&&(S(g)?g.done(function(c){f.registerCmp(c,
b,a.$registerBy)}):f.registerCmp(g,b,a.$registerBy));if("function"==typeof g)this.on("destroy",g);else if(g&&g.$destroy)this.on("destroy",g.$destroy,g);return a.$stopRenderer?!1:g},processNode:function(b){var d=b.nodeType,f=this.texts,g=this.scope,K,t;if(3==d){if(K=null!==y(b.parentNode,"mjs-recursive"),d=a(g,b.textContent||b.nodeValue,null,f.length,K))d.subscribe(this.onTextChange,this),f.push({node:b,tr:d}),this.renderText(f.length-1)}else if(1==d){e||(e=l.getAttributes());var d=[],r=[],q,n,p;t=
"tag."+b.tagName.toLowerCase();if(t=ta(t,!0)){n=this.runHandler(t,g,b);if(!1===n)return!1;S(n)?d.push(n):c(r,n)}q=Ya(b);t=0;for(K=e.length;t<K;t++)if(p=e[t].name,void 0!==(n=q[p])){b.removeAttribute(p);n=this.runHandler(e[t].handler,g,b,n);q[p]=null;if(!1===n)return!1;S(n)?d.push(n):c(r,n)}if(d.length){var v=new D;D.all(d).done(function(a){c(r,a);v.resolve(r)});return v}K=void 0!==q["mjs-recursive"];delete q["mjs-recursive"];for(t in q)null!==q[t]&&(d=a(g,q[t],null,f.length,K))&&(b.removeAttribute(t),
d.subscribe(this.onTextChange,this),f.push({node:b,attr:t,tr:d}),this.renderText(f.length-1));return r.length?r:!0}return!0},process:function(){this.el.nodeType?f(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1}):b(null,this.el,this.processNode,this,this.onProcessingFinished,{countdown:0})},onProcessingFinished:function(){g.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?
("value"==c?a.node.value=b:"class"==c?a.node.className=b:"src"==c&&(a.node.src=b),a.node.setAttribute(c,b)):(a.node.textContent=b,a.node.nodeValue=b)},destroy:function(){var a=this.texts,b,c;b=-1;for(c=a.length;++b<c;a[b].tr.$destroy());this.parent&&this.parent.un("destroy",this.$destroy,this);g.trigger("destroy-"+this.id)}})}(),Ab=function(){var e=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;
case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},a=function(a){this.store={};a&&(this.locale=a)};x(a.prototype,{store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var e=this.store;void 0===e[a]&&(e[a]=b)},load:function(a){x(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===b?"-- "+a+" --":b.get(a))},plural:function(a,b){var f=this.get(a),g=e(b,this.locale);return Q(f)?f[g]:la(f)?f[b]?f[b]:1==b&&void 0!=f.one?f.one:0>b&&void 0!=f.negative?f.negative:f.other:f},destroy:function(){this.store=null}},!0,!1);var b=new a;a.global=function(){return b};return a}(),gb=E.add("mixin.Observable",{$$observable:null,$beforeInit:function(e){this.$$observable=
new ea;if(e&&e.callback){var a=e.callback,b=a.context,c;a.context=null;for(c in a)if(a[c])this.$$observable.on(c,a[c],b||this);e.callback=null}},on:function(){var e=this.$$observable;return e.on.apply(e,arguments)},un:function(){var e=this.$$observable;return e.un.apply(e,arguments)},once:function(){var e=this.$$observable;return e.once.apply(e,arguments)},trigger:function(){var e=this.$$observable;return e.trigger.apply(e,arguments)},$beforeDestroy:function(){this.$$observable.trigger("beforedestroy",
this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null}}),$a=function(){var e,a=function(){this.store={}};x(a.prototype,{store:null,instantiate:function(a,c,d,e){return a.$instantiate?a.$instantiate.apply(a,d):e?cb(a,d):a.apply(c,d)},inject:function(a,c,d,e,g){d=d||{};e=e||[];var h=this;if(z(a))if(a.inject)e=Z.call(a.inject),e.push(a),a=e;else return h.instantiate(a,c,e,g);a=Z.call(a);e=[];var k=a.pop(),m,s;m=-1;for(s=a.length;++m<
s;e.push(h.resolve(a[m],d)));return D.all(e).then(function(a){return h.instantiate(k,c,a,g)})},value:function(a,c){this.store[a]={type:1,value:c}},constant:function(a,c){var d=this.store;d[a]||(d[a]={type:2,value:c})},factory:function(a,c,d,e){Da(d)&&(e=d,d=null);this.store[a]={type:3,singleton:e,fn:c,context:d}},service:function(a,c,d){this.store[a]={type:4,singleton:d,fn:c}},provider:function(a,c){this.store[a+"Provider"]={name:a,type:5,fn:c,instance:null}},resolve:function(a,c){var d=this.store,
f,g,h;if(void 0!==c[a])return c[a];if(g=d[a]){f=g.type;if(1==f||2==f)return g.value;if(3==f)h=this.inject(g.fn,g.context,c);else if(4==f)h=this.inject(g.fn,null,c,null,!0);else if(5==f)return g.instance||(g.instance=D.resolve(this.inject(g.fn,null,c)).done(function(a){g.instance=a;d[g.name]={type:3,fn:a.$get,context:a}})),g.instance;g.singleton&&(g.type=1,g.value=h,3==f&&S(h)&&h.done(function(a){g.value=a}));return c[a]=h}if(d[a+"Provider"])return this.resolve(a+"Provider",c),this.resolve(a,c);if(this===
e)throw"Could not provide value for "+a;return e.resolve(a)},destroy:function(){this.scope=this.store=null}},!0,!1);a.global=function(){return e};e=new a;return a}(),Bb=function(){var e=[],a=function(a){var c,d,f,g;c=0;for(d=e.length;c<d;c++)f=e[c],f.$destroy?f.$destroy():f.destroy&&f.destroy();e=null;Aa&&Aa.destroy&&(Aa.destroy(),Aa=null);E&&E.destroy&&(E.destroy(),E=null);for(g in va)va[g]=null;va=null;if(a)for(g in window)window.hasOwnProperty(g)&&(window[g]=null)};a.collect=function(a){e.push(a)};
return a}();C({$class:"App",$mixins:[gb,{$$provider:null,$beforeInit:function(){this.$$provider=new $a},value:function(){var e=this.$$provider;return e.value.apply(e,arguments)},constant:function(){var e=this.$$provider;return e.constant.apply(e,arguments)},factory:function(){var e=this.$$provider;return e.factory.apply(e,arguments)},service:function(){var e=this.$$provider;return e.service.apply(e,arguments)},provider:function(){var e=this.$$provider;return e.provider.apply(e,arguments)},resolve:function(){var e=
this.$$provider;return e.resolve.apply(e,arguments)},inject:function(){var e=this.$$provider;return e.inject.apply(e,arguments)},$afterDestroy:function(){this.$$provider.destroy();this.$$provider=null}}],lang:null,scope:null,renderer:null,cmpListeners:null,components:null,$init:function(e,a){var b=a instanceof ha?a:new ha(a),c;Bb.collect(this);e.removeAttribute("mjs-app");b.$app=this;this.$super();this.lang=new Ab;this.scope=b;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",
this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",b.$root);this.value("$lang",this.lang);this.renderer=new Ha(e,b);c=Z.call(arguments);c[1]=b;this.initApp.apply(this,c)},initApp:R,run:function(){this.renderer.process()},getParentCmp:function(e){e=e.parentNode;for(var a;e;){if(a=y(e,"cmp-id"))return this.getCmp(a);e=e.parentNode}return null},onAvailable:function(e,a,b){var c=this.cmpListeners,d=this.components;c[e]||(c[e]=new D);a&&c[e].done(a,b);d[e]&&c[e].resolve(d[e]);return c[e]},
getCmp:function(e){return this.components[e]||null},registerCmp:function(e,a,b){var c=this,d=e[b];b=function(){delete c.cmpListeners[d];delete c.components[d]};c.components[d]=e;c.cmpListeners[d]&&c.cmpListeners[d].resolve(e);if(e.on)e.on("destroy",b);a.$on("$destroy",b)},destroy:function(){this.renderer.$destroy();this.scope.$destroy();this.lang.destroy();this.$super()}});var Ta=function(){return function a(b){if(b===window)return!0;if(3==b.nodeType)return b.parentElement?a(b.parentElement):!0;var c=
window.document.documentElement;return b===c?!0:c.contains(b)}}(),L=function(){var e={};return function(a,b,c){a=a._mjsid||(a._mjsid=M());var d=e[a];return void 0!==c?(d||(d=e[a]={}),d[b]=c):d?d[b]:void 0}}(),Na=function a(b){var c,d,f;if(Q(b)){f=[];c=0;for(d=b.length;c<d;c++)f.push(a(b[c]));return f}if(b)switch(b.nodeType){case 1:return b.cloneNode(!0);case 3:return window.document.createTextNode(b.innerText||b.textContent);case 11:return b.cloneNode(!0)}return null},Ia=function(){var a=["Moz","Webkit",
"ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",f="transitionDuration",g="transform",h=null,k=null,m=!1;return function(){if(!m){var s=window.document.createElement("div"),K=!1,t,r,q;if(void 0!==s.style.animationName)K=!0;else for(r=0,q=a.length;r<q;r++)if(t=a[r],void 0!==s.style[t+"AnimationName"]){K=!0;b=t+"AnimationDelay";c=t+"AnimationDuration";d=t+"TransitionDelay";f=t+"TransitionDuration";g=t+"Transform";break}K&&("ontransitionend"in window?h="transitionend":"onwebkittransitionend"in
window&&(h="webkitTransitionEnd"));k=K?{animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:f,transform:g,transitionend:h}:{};m=!0}return k}}(),hb=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,d){var f,g,h=c.length;for(f=0;f<h;f++)g=a(c[f])+a(d[f]),b=Math.max(g,b);return b},c=!1,d=null,f=null,g=null,h=null;return function(a){!1===c&&(d=(c=Ia())?c.animationDuration:null,f=c?c.animationDelay:null,g=c?c.transitionDuration:
null,h=c?c.transitionDelay:null);if(!c)return 0;var m=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var s=(m[d]||"").split(","),K=(m[f]||"").split(","),t=(m[g]||"").split(","),m=(m[h]||"").split(",");a=Math.max(a,b(a,s,K));return a=Math.max(a,b(a,t,m))}}(),ya=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),Ba=function(a){var b=L(a,"mjsAnimationQueue"),c,d;if(Q(b)&&b.length){if(b=b[0])b.stages&&(c=b.position,d=b.stages,da(a,d[c]),da(a,d[c]+"-active")),
b.deferred&&b.deferred.reject(b.el)}else z(b)?b(a):"stop"==b&&$(a).stop(!0,!0);L(a,"mjsAnimationQueue",null)},fa=function(){var a,b;if("undefined"!=typeof window){var c=window;a=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame;b=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelRequestAnimationFrame;if(a)return function(c){var f=a(c);return function(){b(f)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),
T=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=!1,d=!1,f=function(a,b,c){var d=function(){(new Date).getTime()-b>=c?a():fa(d)};fa(d)},g=function(){!1===c&&(c=Ia(),d=!!c);return d},h=function s(a,b,c,d,g,k,v,w){var l=function(){var b=L(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==v?!1:(g.reject(a),!0)},x=function(){if(!l()){var d=c;c++;if(c==b.length){g.resolve(a);L(a,"mjsAnimationQueue").shift();var f=L(a,"mjsAnimationQueue");
f.length?(f=f[0],h(f.el,f.stages,0,f.start,f.deferred,!1,f.id,f.step)):L(a,"mjsAnimationQueue",null)}else L(a,"mjsAnimationQueue")[0].position=c,s(a,b,c,null,g,!1,v,w);da(a,b[d]);da(a,b[d]+"-active")}},G=function(){l()||(ma(a,b[c]+"-active"),D.resolve(w&&w(a,c,"active")).done(function(){if(!l()){var b=hb(a);b?f(x,(new Date).getTime(),b):fa(x)}}))},ja=function(){l()||(ma(a,b[c]),D.waterfall([w&&w(a,c,"start"),function(){return d?d(a):null}]).done(function(){!l()&&fa(G)}))};k?fa(ja):ja()},k=function(c,
d,f,k,q,n){var p=new D,v=L(c,"mjsAnimationQueue")||[],l=++b,u=y(c,"mjs-animate"),qa,G,ja,W,A,J,Ua;d=d||u;k&&null===u&&(d=null);if(d){F(d)?"["==d.substr(0,1)?qa=(new Function("","return "+d))():(qa=a[d],d=q&&q.get("animate."+d,!0)):z(d)?G=d:Q(d)&&(F(d[0])?qa=d:(ja=d[0],W=d[1]));la(d)&&(qa=d.stages,G=d.fn,ja=d.before,W=d.after,A=d.options?x({},d.options):{},J=d.context||null,Ua=d.duration||null,f=f||A.start);if(g()&&qa)return v.push({el:c,stages:qa,start:f,step:n,deferred:p,position:0,id:l}),L(c,"mjsAnimationQueue",
v),1==v.length&&h(c,qa,0,f,p,!0,l,n),p;A=A||{};f&&(A.start=function(){f(c)});A.complete=function(){p.resolve(c)};Ua&&(A.duration=Ua);if(G&&z(G))return ja&&x(c.style,ja,!0,!1),f&&f(c),L(c,"mjsAnimationQueue",G.call(J,c,function(){p.resolve(c)})),p;if(window.jQuery){d=$(c);ja&&d.css(ja);L(c,"mjsAnimationQueue","stop");if(G&&F(G))return d[G](A),p;if(W)return d.animate(W,A),p}}f?(G=f(c),S(G)?G.done(function(){p.resolve(c)}):p.resolve(c)):p.resolve(c);return p};k.addAnimationType=function(b,c){a[b]=c};
k.stop=Ba;k.getPrefixes=Ia;k.getDuration=hb;k.cssAnimationSupported=g;return k}(),Cb=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),wa=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,f=/(\[[^\]]+)~/,g=/(~|>|\+)/,h=/ +/,k=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,m=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,s=/\D/,K=/[^(]*\(([^)]*)\)/,
t=/\(.*/,r=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,q=window.document,n=!!q.getElementsByClassName,p=!!q.querySelectorAll,v={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,f=b[1];if(c)return!((c+d)%f);var g=a.parentNode.firstChild;c++;do if(1==g.nodeType&&
(g.nodeIndex=++c)&&a===g&&(c+d)%f)return 0;while(g=g.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,f=b[1];if(c)return!((c+d)%f);var g=a.parentNode.lastChild;c++;do if(1==g.nodeType&&(g.nodeLastIndex=c++)&&a===g&&(c+d)%f)return 0;while(g=g.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},
lang:function(a,b){return a.lang!==b&&q.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},l={},x=function(a){return l[a]||(l[a]=new RegExp("(^| +)"+a+"($| +)"))},u={"":function(a,b){return null!==y(a,b)},"=":function(a,b,c){var d;return(d=y(a,b))&&d===c},"&=":function(a,b,c){var d;return(d=y(a,b))&&x(c).test(d)},"^=":function(a,b,c){var d;return(d=y(a,b)+"")&&!d.indexOf(c)},"$=":function(a,
b,c){var d;return(d=y(a,b)+"")&&d.indexOf(c)==d.length-c.length},"*=":function(a,b,c){var d;return(d=y(a,b)+"")&&-1!=d.indexOf(c)},"|=":function(a,b,c){var d;return(d=y(a,b)+"")&&(d===c||!!d.indexOf(c+"-"))},"!=":function(a,b,c){var d;return!(d=y(a,b))||!x(c).test(d)}},G=function(G,W){W=W||q;var A=[],J=null,l,w,ga,B,x,y,z;if(p)try{A=V(W.querySelectorAll(G.replace(b,'="$1"')))}catch(F){J=!0}if(!p||J)if(a.test(G))switch(J=0,G.charAt(0)){case "#":J=G.slice(1);A=q.getElementById(J);A.id!==J&&(A=q.all[J]);
A=A?[A]:[];break;case ".":l=G.slice(1);if(n)A=V((A=W.getElementsByClassName(l)).length?A:[]);else{l=" "+l+" ";w=W.getElementsByTagName("*");for(ga=0;B=w[ga++];)-1!=(" "+B.className+" ").indexOf(l)&&(A[J++]=B);A=J?A:[]}break;case ":":w=W.getElementsByTagName("*");ga=0;x=G.replace(K,"$1");for(y=G.replace(t,"");B=w[ga++];)v[y]&&!v[y](B,x)&&(A[J++]=B);A=J?A:[];break;case "[":w=W.getElementsByTagName("*");ga=0;B=r.exec(G);l=B[1];z=B[2]||"";for(x=B[3];B=w[ga++];)u[z]&&(u[z](B,l,x)||"class"===l&&u[z](B,
"className",x))&&(A[J++]=B);A=J?A:[];break;default:A=V((A=W.getElementsByTagName(G)).length?A:[])}else{for(var D=G.split(c),L=D.length-1,P=!!L,Q,R,I,O,E,C,M,N,U,H,S,T;J=D[L--];){R=(Q=J.replace(d,"$1%").replace(f,"$1&").replace(g," $1 ").split(h)).length;ga=0;O=" ";for(w=[W];I=Q[ga++];)if(" "!==I&&">"!==I&&"~"!==I&&"+"!==I&&w){I=I.match(k);E=I[1]||"*";C=I[2];M=I[3]?" "+I[3]+" ":"";l=I[4];z=I[5]||"";y=I[7];x="nth-child"===y||"nth-last-child"===y?m.exec("even"===I[8]&&"2n"||"odd"===I[8]&&"2n%1"||!s.test(I[8])&&
"0n%"+I[8]||I[8]):I[8];N=[];J=U=0;for(S=ga==R;H=w[U++];)switch(O){case " ":T=H.getElementsByTagName(E);for(H=0;B=T[H++];)C&&B.id!==C||M&&-1==(" "+B.className+" ").indexOf(M)||!(!l||u[z]&&(u[z](B,l,I[6])||"class"===l&&u[z](B,"className",I[6])))||B.yeasss||(v[y]?v[y](B,x):y)||(S&&(B.yeasss=1),N[J++]=B);break;case "~":for(E=E.toLowerCase();(H=H.nextSibling)&&!H.yeasss;)1!=H.nodeType||"*"!==E&&H.nodeName.toLowerCase()!==E||C&&H.id!==C||M&&-1==(" "+H.className+" ").indexOf(M)||!(!l||u[z]&&(u[z](B,l,I[6])||
"class"===l&&u[z](B,"className",I[6])))||H.yeasss||(v[y]?v[y](H,x):y)||(S&&(H.yeasss=1),N[J++]=H);break;case "+":for(;(H=H.nextSibling)&&1!=H.nodeType;);!H||H.nodeName.toLowerCase()!==E.toLowerCase()&&"*"!==E||C&&H.id!==C||M&&-1==(" "+B.className+" ").indexOf(M)||!(!l||u[z]&&(u[z](B,l,I[6])||"class"===l&&u[z](B,"className",I[6])))||H.yeasss||(v[y]?v[y](H,x):y)||(S&&(H.yeasss=1),N[J++]=H);break;case ">":for(T=H.getElementsByTagName(E),ga=0;B=T[ga++];)B.parentNode!==H||C&&B.id!==C||M&&-1==(" "+B.className+
" ").indexOf(M)||!(!l||u[z]&&(u[z](B,l,I[6])||"class"===l&&u[z](B,"className",I[6])))||B.yeasss||(v[y]?v[y](B,x):y)||(S&&(B.yeasss=1),N[J++]=B)}w=N}else O=I;if(P){if(!w.concat){N=[];for(H=0;B=w[H];)N[H++]=B;w=N}A=w.concat(1==A.length?A[0]:A)}else A=w}for(J=A.length;J--;)A[J].yeasss=A[J].nodeIndex=A[J].nodeIndexLast=null}return A};G.is=function(a,b){var c=G(b,a.parentNode),d,f;d=-1;for(f=c.length;++d<f;)if(c[d]===a)return!0;return!1};return G}(),na=function(a){if(a instanceof na)return a;if(!(this instanceof
na))return new na(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,f=a.button;void 0===this.pageX&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||window.document:window.document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&
d.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Ea:pa;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};x(na.prototype,{isDefaultPrevented:pa,isPropagationStopped:pa,isImmediatePropagationStopped:pa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Ea;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;
this.isPropagationStopped=Ea;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Ea;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);var ib=function(a){function b(){d=null}var c,d;a=function(a){return function(g){var h=new na(g||window.event),k=Z.call(arguments,1),m=0,s=0,l=0,t=0,r=0,q=0;h.type="mousewheel";"detail"in h&&(l=-1*h.detail);"wheelDelta"in h&&(l=h.wheelDelta);
"wheelDeltaY"in h&&(l=h.wheelDeltaY);"wheelDeltaX"in h&&(s=-1*h.wheelDeltaX);"axis"in h&&h.axis===h.HORIZONTAL_AXIS&&(s=-1*l,l=0);m=0===l?s:l;"deltaY"in h&&(m=l=-1*h.deltaY);"deltaX"in h&&(s=h.deltaX,0===l&&(m=-1*s));if(0!==l||0!==s){t=Math.max(Math.abs(l),Math.abs(s));if(!d||t<d)d=t,"mousewheel"===h.type&&0===t%120&&(d/=40);"mousewheel"===h.type&&0===t%120&&(m/=40,s/=40,l/=40);m=Math[1<=m?"floor":"ceil"](m/d);s=Math[1<=s?"floor":"ceil"](s/d);l=Math[1<=l?"floor":"ceil"](l/d);this.getBoundingClientRect&&
(t=this.getBoundingClientRect(),r=h.clientX-t.left,q=h.clientY-t.top);h.deltaX=s;h.deltaY=l;h.deltaFactor=d;h.offsetX=r;h.offsetY=q;h.deltaMode=0;k.unshift(h,m,s,l);c&&clearTimeout(c);c=setTimeout(b,200);return a.apply(this,k)}}};a.events=function(){var a=window.document;return"onwheel"in a||9<=a.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]};return a}(),O=function(){var a=null,b=null;return function(c,d,f){null===a&&(a=c.attachEvent?"attachEvent":"addEventListener",
b=c.attachEvent?"on":"");if("mousewheel"==d){f=ib(f);d=ib.events();var g,h;g=0;for(h=d.length;g<h;g++)c[a](b+d[g],f,!1)}else c[a](b+d,f,!1);return f}}(),Db=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,f=/^(?:GET|HEAD)$/i,g=function(a,b,c){var d,f;if(oa(a)&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(""+a));else if(Q(a)&&c)for(d=0,f=a.length;d<f;d++)g(a[d],b,c+"["+d+"]");else if(ra(a))for(d in a)a.hasOwnProperty(d)&&g(a[d],
b,c?c+"["+d+"]":d)},h=function(d,h){d.replace(a,"");if(!1===h.cache){var k=(new Date).getTime();d=b.test(d)?d.replace(b,"$1_="+k):d+(c.test(d)?"&":"?")+"_="+k}!h.data||window.FormData&&h.data instanceof window.FormData||(F(h.data)?k=h.data:(k=[],g(h.data,k,null),k=k.join("&").replace(/%20/g,"+")),h.data=k,f.test(h.method)&&(d+=(c.test(d)?"&":"?")+h.data,h.data=null));return d},k={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",
text:"text/plain",_default:"*/*"},m={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},s={},l=new ea,t=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),
b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},r=function(a,b,c){var d,f;if(!ra(a)&&!z(a)&&c)d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",a),b.appendChild(d);else if(Q(a)&&c)for(d=0,f=a.length;d<f;d++)r(a[d],b,c+"["+d+"]");else if(ra(a))for(d in a)a.hasOwnProperty(d)&&r(a[d],b,c?c+"["+d+"]":d)},q=function(a){for(var b,c,d="",f=0;f<a.elements.length;f++)if(b=a.elements[f],null!==y(b,"name"))if(c="INPUT"===
b.nodeName.toUpperCase()?y(b,"type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return d},n=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!F(a))return a;c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=Za(N(a)),b?wa(b,a):a;if("html"===d)return a=Za(a,"text/html"),b?wa(b,a):
a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return Cb(N(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&t(a);return a+""},p=function(a){var b=d.exec((window?window.location.href:"").toLowerCase())||[],c=d.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===
(b[3]||("http:"===b[1]?"80":"443"))));b=new D;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):q(a.form));a.url=h(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new C(a,b,this):new w(a,b,this):new E(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){l.trigger("success",
a)});b.fail(function(a){l.trigger("error",a)});b.always(function(){l.trigger("end")});l.trigger("start");a.timeout&&(this._timeout=setTimeout(u(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===l.trigger("beforeSend",a,c)&&(this._promise=D.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=D.reject());this._promise||(sa(c.send,c),b.abort=u(this.abort,this),b.always(this.destroy,this),this._promise=b)};x(p.prototype,{_jsonpName:null,_transport:null,
_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);r(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||
"callback",d=a.jsonpCallback||"jsonp_"+M();a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=u(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=u(this.jsonpCallback,this));return d},jsonpCallback:function(a){var b;try{b=this.processResponseData(a)}catch(c){this._deferred?this._deferred.reject(c):aa(c)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,b){var c=this._opt;a=n(a,c,b);l.hasListener("processResponse")&&
(a=l.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred,d;if(this._opt.jsonp)if(a){try{t(a)}catch(f){c.reject(f)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else{try{d=this.processResponseData(a,b)}catch(g){c.reject(g)}c.resolve(d)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&
this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();this._form=this._timeout=this._promise=this._deferred=this._opt=this._transport=null;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0,!1);var v=function(a,b){b=b||{};a&&!F(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=y(b.form,"action")),!b.url))throw"Must provide url";x(b,s,!1,!0);x(b,m,!1,!0);b.method=
b.method?b.method.toUpperCase():b.form?y(b.form,"method").toUpperCase()||"GET":"GET";return(new p(b)).promise()};v.setup=function(a){x(s,a,!0,!0)};v.on=function(){l.on.apply(l,arguments)};v.un=function(){l.un.apply(l,arguments)};v.get=function(a,b){b=b||{};b.method="GET";return v(a,b)};v.post=function(a,b){b=b||{};b.method="POST";return v(a,b)};v.load=function(a,b,c){c=c||{};F(b)||(c=b);c.dataType="fragment";return v(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);
a.appendChild(b)})};v.loadScript=function(a){return v(a,{transport:"script"})};v.submit=function(a,b){b=b||{};b.form=a;return v(null,b)};var w=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&O(d,"progress",u(a.progress,a.callbackScope));a.uploadProgress&&d.upload&&O(d.upload,"progress",u(a.uploadProgress,
a.callbackScope));d.onreadystatechange=u(this.onReadyStateChange,this)};x(w.prototype,{_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,c;if(a.xhrFields)for(c in a.xhrFields)b[c]=a.xhrFields[c];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&k[a.dataType]?k[a.dataType]+", */*; q=0.01":k._default);for(c in a.headers)b.setRequestHeader(c,a.headers[c])},
onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=R,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=R;var c;a:{try{c=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(F(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=R;this._xhr.abort()},
send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred&&this._deferred.reject(b)}},destroy:function(){this._ajax=this._opt=this._deferred=this._xhr=null}},!0,!1);var E=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};x(E.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset",
"utf-8");a.setAttribute("src",this._opt.url);O(a,"load",u(this.onLoad,this));O(a,"error",u(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);var C=function(a,b,
c){this._opt=a;this._ajax=c;this._deferred=b};x(C.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+M(),c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);O(a,"load",u(this.onLoad,this));O(a,"error",u(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=
this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);return v}(),ua=function(){var a=new ea,b=new bb,c=function(a){var c=b.get(a);"string"==typeof c&&
(c=Y(c),b.add(a,c));return c},d=function(a){return b.exists(a)?b.get(a):b.add(a,Db(a,{dataType:"fragment"}).then(function(c){return b.add(a,c)}))};b.addFinder(function(a){a=window.document.getElementById(a);var b;if(a)return b=a.tagName.toLowerCase(),"script"==b?(b=window.document.createElement("div"),b.innerHTML=a.innerHTML,Y(b.childNodes)):"content"in a?a.content:Y(a.childNodes)});return C({$class:"Template",_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,_originalNode:null,
_intendedShadow:!1,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,tplPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,shadow:!1,animationEnabled:!0,$init:function(b){x(this,b,!0,!1);window.document.documentElement.createShadowRoot||(this._intendedShadow=this.shadow,this.shadow=!1);this.id=M();a.createEvent("rendered-"+this.id,!1,!0);this.tpl&&(this.tpl=N(this.tpl));this.url&&(this.url=N(this.url));var c=this.node;b=this.tpl||this.url;c&&c.removeAttribute("mjs-include");
this.shadow&&(this._originalNode=c,this.node=c=c.createShadowRoot());c||(this.deferRendering=!0);if(b){if(c&&c.firstChild&&!this.shadow&&L(c,"mjs-transclude",Y(c.childNodes)),"."==b.substr(0,1)?(c=b.substr(1,1),c=!("."==c||"/"==c)):c=!1,c&&(this._watcher=ia(this.scope,b,this.onChange,this,null,E)),this._watcher&&!this.replace?this.ownRenderer=!0:this.shadow?this.ownRenderer=!0:this.replace&&(this.ownRenderer=!1),this.resolveTemplate(),this._watcher&&this.replace&&(this._watcher.unsubscribeAndDestroy(this.onChange,
this),this._watcher=null),this.deferRendering&&this.ownRenderer||this.tplPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof ha&&this.scope.$on("destroy",this.onScopeDestroy,this)},setAnimation:function(a){this.animationEnabled=a},doRender:function(){this._renderer||(this._renderer=new Ha(this.node,this.scope),this._renderer.on("rendered",
this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.tplPromise)return this.tplPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=
this,b=a.url,h=a._watcher?a._watcher.getLastResult():a.tpl||b;a.initPromise=new D;a.tplPromise=new D;a.ownRenderer&&a.initPromise.resolve(!1);return(new D(function(a){b?a(c(h)||d(b)):a(c(h)||Y(h))})).done(function(b){a._fragment=b;a.tplPromise.resolve()}).fail(a.initPromise.reject,a.initPromise).fail(a.tplPromise.reject,a.tplPromise)},onChange:function(){this._renderer&&(this._renderer.$destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=
this.node;a.firstChild;)a.removeChild(a.firstChild);this._intendedShadow&&this.makeTranscludes();if(this.replace){var b=Na(this._fragment),c=L(a,"mjs-transclude"),d=Z.call(b.childNodes);if(c){var m=wa("[mjs-transclude], mjs-transclude",b);m.length&&L(m[0],"mjs-transclude",c)}a.parentNode.replaceChild(b,a);this.node=d;this.initPromise.resolve(d)}else a.appendChild(Na(this._fragment)),this.initPromise.resolve(this.node);this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new D;
!this._initial&&this.animationEnabled?(T(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),T(a,"enter",null,!0)):(this.doApplyTemplate(),b.resolve());this._initial=!1;return b},makeTranscludes:function(){var a=this._fragment,b=wa("content",a),c,d,m,s,l,t;l=0;for(t=b.length;l<t;l++)m=window.document.createElement("mjs-transclude"),c=b[l],d=c.nextSibling,(s=y(c,"select"))&&m.setAttribute("select",s),a.removeChild(c),a.insertBefore(m,d)},onParentRendererDestroy:function(){this._renderer.$destroy();
this.$destroy()},onScopeDestroy:function(){this.$destroy()},destroy:function(){this.shadow&&this._originalNode.createShadowRoot();this._watcher&&this._watcher.unsubscribeAndDestroy(this.onChange,this)}},{cache:b})}();C({$class:"MetaphorJs.Component",$mixins:[gb],id:null,originalId:!1,node:null,cls:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,as:null,$init:function(a){a=a||{};this.$super(a);x(this,a,!0,!1);this.scope||
(this.scope=new ha);this.as&&(this.scope[this.as]=this);if(this.node){var b=y(this.node,"id");b&&(this.originalId=!0,this.id||(this.id=b))}this.id=this.id||"cmp-"+M();this.node||this._createNode();this.cls&&ma(this.node,this.cls);this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this,this.scope,"id");var b=this.template,c=this.templateUrl;b&&b instanceof ua?b instanceof ua&&(this.template.node=this.node):this.template=b=new ua({scope:this.scope,node:this.node,deferRendering:!b,
ownRenderer:!0,tpl:b,url:c,shadow:this.constructor.$shadow,animationEnabled:!this.hidden});this.template.on("rendered",this.onRenderingFinished,this);if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=window.document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",
this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):Ta(this.node)||window.document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.rendered||this.render();this.template.setAnimation(!0);this.node.style.display=
"block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.template.setAnimation(!1);this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:R,afterRender:R,onShow:R,onHide:R,onParentRendererDestroy:function(){this.$destroy()},
destroy:function(){this.template&&this.template.$destroy();this.destroyEl?Ta(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"),this.cls&&da(this.node,this.cls));this.destroyScope&&this.scope&&this.scope.$destroy();this.$super()}});var X=function(a){a=a||{};this._queue=[];this._map={};this.id="$$"+M();for(var b in a)this[b]=a[b]};X.REPLACE=1;X.ONCE=2;X.MULTIPLE=3;X.ONCE_EVER=4;x(X.prototype,{_queue:null,_map:null,
_nextRequested:!1,_running:!1,length:0,id:null,async:!0,auto:!0,thenable:!1,stack:!1,context:null,mode:X.MULTIPLE,add:function(a,b,c,d,f,g){var h=this.id,k=a[h]||M();b={id:k,fn:a,context:b,args:c,async:g};d=d||this.mode;if(d==X.ONCE_EVER&&a[h])return a[h];a[h]=k;if(this._map[k])if(d==X.REPLACE)this.remove(k);else if(d==X.ONCE)return k;this._queue[f?"unshift":"push"](b);this._map[k]=b;this.length=this._queue.length;this.auto&&this.next();return k},append:function(a,b,c,d,f){return this.add(a,b,c,d,
!1,f)},prepend:function(a,b,c,d,f){return this.add(a,b,c,d,!0,f)},remove:function(a){var b=this._queue,c,d;c=0;for(d=b.length;c<d;c++)if(b[c].id==a){b.splice(c,1);break}delete this._map[a]},isEmpty:function(){return 0==this.length},next:function(){var a=this,b;if(a._running)a._nextRequested=!0;else if(a._nextRequested=!1,b=a._queue[a.stack?"pop":"shift"](),a.length=a._queue.length,b)if(a._running=!0,delete a._map[b.id],a.async||b.async){var c=0;1===U(b.async)?c=b.async:1===U(a.async)&&(c=a.async);
var d=function(){try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(c){throw aa(c),a._finish(),c;}};"raf"==b.async||!b.async&&"raf"==a.async?fa(d):sa(d,null,null,c)}else try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(f){throw aa(f),a._finish(),f;}},_processResult:function(a){var b=this;b.thenable&&S(a)?a.then(function(){b._finish()},function(){b._finish()}):b._finish();return a},_finish:function(){this._running=!1;(this.auto||this._nextRequested)&&this.next()},
destroy:function(){this.context=this._map=this._queue=null;this._running=this._nextRequested=!1;this.next=R}},!0,!1);var qb=/-./g,rb=function(){return function(a){if(a.dataset)return a.dataset;var b;if(void 0!==(b=L(a,"data")))return b;b=a.attributes;var c={},d,f,g;d=0;for(f=b.length;d<f;d++)g=b[d].name,0===g.indexOf("data-")&&(c[pb(g.substr(5))]=b[d].value);b=c;L(a,"data",b);return b}}(),jb=C({$class:"ListRenderer",id:null,model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,
nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,animate:!1,trackByFn:null,griDelegate:null,tagMode:!1,queue:null,buffered:!1,bufferPlugin:null,$constructor:function(a,b,c){a=ba(b,a);this.tagMode="mjs-each"==b.nodeName.toLowerCase();this.animateMove=!this.tagMode&&!a.buffered&&a.animateMove&&T.cssAnimationSupported();this.animate=!this.tagMode&&!a.buffered&&(null!==y(b,"mjs-animate")||a.animate);this.id=a.id||M();b.removeAttribute("mjs-animate");this.animate&&this.animateMove&&this.$plugins.push("plugin.ListAnimatedMove");
a.observable&&this.$plugins.push("plugin.Observable");this.tagMode&&(a.buffered=!1);a.buffered&&(this.buffered=!0,this.$plugins.push("plugin.ListBuffered"))},$init:function(a,b,c){b.removeAttribute("mjs-include");this.tagMode&&(c=y(b,"value"));this.parseExpr(c);this.tpl=this.tagMode?Y(b.childNodes):b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=null;this.scope=a;this.queue=new X({async:!1,auto:!0,thenable:!0,stack:!1,context:this,mode:X.ONCE});
this.parentEl.removeChild(b);this.afterInit(a,b);this.queue.add(this.render,this,[V(this.watcher.getLastResult())])},afterInit:function(a,b){var c=ba(b,a);this.watcher=ia(a,this.model,this.onChange,this,null,E);(this.trackBy=c.trackBy)&&"$"!=this.trackBy?this.trackByWatcher=ia(a,this.trackBy,this.onChangeTrackBy,this,null,E):"$"==this.trackBy||this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);this.griDelegate=u(this.scopeGetRawIndex,this)},trigger:R,render:function(a){var b=this.renderers,
c=this.tpl,d=this.parentEl,f=this.nextEl,g=this.buffered,h=window.document.createDocumentFragment(),k,m,s;m=0;for(s=a.length;m<s;m++)k=c.cloneNode(!0),b.push(this.createItem(k,a,m)),g||(h.appendChild(k),b[m].attached=!0);g?(this.bufferPlugin.getScrollOffset(),this.bufferPlugin.updateScrollBuffer()):(d.insertBefore(h,f),this.doUpdate());this.trigger("render",this)},doUpdate:function(a,b,c,d){var f=this.renderers;a=a||0;var g=f.length;b=b||g-1;var h=this.watcher.getLastResult(),k=this.getTrackByFunction();
for(b>g-1&&(b=g-1);a<=b;a++)c&&f[a].action!=c||this.renderItem(a,f,h,k,d)},renderItem:function(a,b,c,d,f){c=c||this.watcher.getLastResult();b=b||this.renderers;d=d||this.getTrackByFunction();var g=b[a],h=g.scope;b=b.length-1;var k=!(a%2);f&&g.rendered||(h.$index=a,h.$first=0===a,h.$last=a===b,h.$even=k,h.$odd=!k,h.$trackId=d(c[a]),h.$getRawIndex=this.griDelegate,g.renderer?h.$check():(g.renderer=new Ha(g.el,h),g.renderer.process(),g.rendered=!0))},createItem:function(a,b,c){var d=this.itemName,f=
this.scope.$new(),g=this.tagMode;f[d]=this.getListItem(b,c);a=g?V(a.childNodes):a;return{index:c,action:"enter",el:a,firstEl:g?a[0]:a,lastEl:g?a[a.length-1]:a,scope:f,attached:!1,rendered:!1}},onChange:function(a,b){this.queue.prepend(this.applyChanges,this,[b],X.REPLACE)},applyChanges:function(a){var b=this,c=b.renderers,d=b.tpl,f=0,g=V(b.watcher.getLastResult()),h=null,k=b.animateMove,m=b.animate,s=[],l=b.itemName,t=c.slice(),r=!1,q,n,p,v,w,x;a=b.watcher.getMovePrescription(a,b.getTrackByFunction(),
g);p=0;for(v=a.length;p<v;p++)q=a[p],1===U(q)?(n=q,q=c[n],n!=f&&null===h&&(h=p),q.action="move",q.scope[l]=b.getListItem(g,p),r=k,s.push(q),c[n]=null,f++):(null===h&&(h=p),w=b.createItem(d.cloneNode(!0),g,p),s.push(w));b.renderers=s;if(m){b.doUpdate(h,null,"enter");r&&(x=b.calculateTranslates(s,t,c));var d=[],y=new D,u=new D,z=new D,F=D.counter(s.length),f=function(){F.countdown();return y};p=0;for(v=c.length;p<v;p++)if(w=c[p])w.scope.$destroy(),Ba(w.el),d.push(T(w.el,"leave",null,!1,E).done(function(a){a.style.visibility=
"hidden"}));p=0;for(v=s.length;p<v;p++)w=s[p],Ba(w.el),"enter"==w.action?d.push(T(w.el,"enter",f,!1,E)):d.push(b.moveAnimation(w.el,r?x[p][0]:null,r?x[p][1]:null,f,u));F.done(function(){fa(function(){u.resolve();b.applyDomPositions(c);r||b.doUpdate(h,null,"move");fa(function(){y.resolve()});b.trigger("change",b)})});D.all(d).always(function(){fa(function(){var a=Ia();b.doUpdate(h||0);b.removeOldElements(c);if(r)for(b.doUpdate(h,null,"move"),p=0,v=s.length;p<v;p++)w=s[p],w.el.style[a.transform]=null,
w.el.style[a.transform]="";z.resolve()})});return z}b.buffered?(b.bufferPlugin.getScrollOffset(),b.removeOldElements(c),b.queue.append(b.bufferPlugin.updateScrollBuffer,b.bufferPlugin,[!0])):(b.applyDomPositions(),b.doUpdate(h||0),b.removeOldElements(c));b.trigger("change",b)},removeOldElements:function(a){var b,c,d,f,g,h=this.parentEl;b=0;for(c=a.length;b<c;b++)if((d=a[b])&&d.attached)if(d.attached=!1,self.tagMode)for(f=0,g=d.el.length;f<g;f++)h.removeChild(d.el[f]);else h.removeChild(d.el)},applyDomPositions:function(a){var b=
this.renderers,c=this.parentEl,d=this.prevEl,f=this.tagMode,d=d?d.nextSibling:c.firstChild,g,h,k,m,s;h=0;for(k=b.length;h<k;h++)s=b[h],m=s.el,g=a&&a[h]?a[h].lastEl.nextSibling:0<h?b[h-1].lastEl.nextSibling||d:d,s.firstEl!==g&&(g&&s.lastEl.nextSibling!==g?c.insertBefore(f?Y(m):m,g):g||c.appendChild(f?Y(m):m)),s.attached=!0},getListItem:function(a,b){return a[b]},onChangeTrackBy:function(a){this.trackByFn=null;this.trackBy=a},getTrackByFunction:function(){var a;this.trackByFn||((a=this.trackBy)&&"$"!=
a?z(a)?this.trackByFn=a:this.trackByFn=function(b){return b&&!oa(b)?b[a]:void 0}:this.trackByFn=function(a){return oa(a)?a:void 0});return this.trackByFn},scopeGetRawIndex:function(a){if(void 0===a)return-1;var b=this.watcher.getUnfilteredValue(),c=this.getTrackByFunction(),d,f;d=0;for(f=b.length;d<f;d++)if(c(b[d])===a)return d;return-1},getNodePositions:function(a,b,c){return{}},calculateTranslates:function(a,b,c){return[]},moveAnimation:function(a,b,c,d,f){return T(a,"move",d,!1,E)},scrollTo:function(){},
parseExpr:function(a){a=a.split(" ");var b,c,d,f,g;b=0;for(c=a.length;b<c;b++)if(g=a[b],""!=g&&"in"!=g)if(f){d=a.slice(b).join(" ");break}else f=g;this.model=d;this.itemName=f||"item"},destroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.$destroy();this.trackByWatcher&&this.trackByWatcher.unsubscribeAndDestroy();this.queue.destroy();this.watcher.unsubscribeAndDestroy(this.onChange,this)}},{$stopRenderer:!0,$registerBy:"id"}),Eb=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,
xa=function(a){var b=a.match(Eb)||[],c=("undefined"!=typeof window?window.location:null)||{};return{protocol:b[4]||c.protocol||"http:",hostname:b[11]||c.hostname||"",host:(b[11]||"")+(b[12]?":"+b[12]:"")||c.host||"",username:b[8]||c.username||"",password:b[9]||c.password||"",port:parseInt(b[12],10)||c.port||"",href:a,path:(b[13]||"/")+(b[16]||""),pathname:b[13]||"/",search:b[16]||"",hash:b[17]&&"#"!=b[17]?b[17]:""}},Va=function(a,b){var c="";b=b||{};b.onlyPath||(c+=a.protocol+"//",a.username&&a.password&&
(c+=a.username+":"+a.password+"@"),c+=a.hostname,a.hostname&&a.port&&(c+=":"+a.port));b.onlyHost||(c+=a.pathname||"/",a.search&&"?"!=a.search&&(c+=a.search),a.hash&&"#"!=a.hash&&(c+=a.hash));return c},Ja=function(){var a,b,c,d=new ea,f={},g,h,k="undefined"==typeof window,m=null,s,l,t;d.createEvent("beforeLocationChange",!1);var r=function(a,b){"string"==typeof a&&(a=xa(a));"string"==typeof b&&(b=xa(b));var c=["protocol","host","port"],d,f,g;d=0;for(f=c.length;d<f;d++)if(g=c[d],a[g]&&b[g]&&a[g]!=b[g])return!0;
return!1},q=function(a,b){"string"==typeof a&&(a=xa(a));"string"==typeof b&&(b=xa(b));return r(a,b)||a.pathname!=b.pathname||a.search!=b.search||a.hash!=b.hash},n=function(a){a=xa(a);if(!s||t)a.hash="#!"+encodeURIComponent(a.path),a.pathname="/",a.search="";return Va(a,{onlyPath:!0})},p=function(a){c.hash=a?"!"+a:""},v=function(){var a,b;s?a=Va(c):(a=c.hash.substr(1),b=x({},c,!0,!1),a&&("!"==a.substr(0,1)&&(a=a.substr(1)),a=decodeURIComponent(a).split("?"),b.pathname=a[0],b.search=a[1]?"?"+a[1]:""),
a=Va(b));return a},w=function(a,b){var c=f[a].extractor;return z(c)?c(b,a):(c=b.match(c))?c.pop():null},u=function(a){var b,c,g;for(b in f)c=f[b].value,g=w(b,a),f[b].value=g,g!=c&&d.trigger("change-"+b,g,c,b,a)},E=function(a){m=x({},c,!0,!1);C("locationChange",a);u(a)},G=function(){if(q(m,c)){var a=v();m=x({},c,!0,!1);C("locationChange",a);u(a)}},C=function(a,b){var c=b||v();return d.trigger(a,c)},D=function(){a=window;b=a.history;c=a.location;s=!!b.pushState;l="onhashchange"in a;t=s&&(navigator.vendor||
"").match(/Opera/);m=x({},c,!0,!1);if(s)O(a,"popstate",G),g=function(a){if(!1===C("beforeLocationChange",a))return!1;b.pushState(null,null,n(a));E(a)},h=function(a){if(!1===C("beforeLocationChange",a))return!1;b.replaceState(null,null,n(a));E(a)};else if(l)h=g=function(a){if(!1===C("beforeLocationChange",a))return!1;sa(p,null,[n(a)])},O(a,"hashchange",G);else{var d=null,f=!1;a.onIframeHistoryChange=function(a){f||sa(function(){p(a);G()})};var v=function(a){var b=d.contentWindow.document;b.open();
b.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');b.close()};g=function(a){if(!1===C("beforeLocationChange",a))return!1;v(n(a))};h=function(a){if(!1===C("beforeLocationChange",a))return!1;a=n(a);d.contentWindow.hashValue=a};var w=function(){d=window.document.createElement("iframe");d.src="about:blank";d.style.display="none";window.document.body.appendChild(d);
f=!0;v(n(c.hash.substr(1)));f=!1};k?w():O(a,"load",w)}O(window.document.documentElement,"click",function(b){b=new na(b||a.event);for(var d=b.target,f;d&&"a"!=d.nodeName.toLowerCase();)d=d.parentNode;if(d&&!b.isDefaultPrevented()){f=y(d,"href");if("#"==f)return b.preventDefault(),b.stopPropagation(),!1;if(f&&"#"!=f.substr(0,1)&&!y(d,"target")){var d=x({},c,!0,!1),h=xa(f);if(r(d,h))return null;q(d,h)&&g(f);b.preventDefault();b.stopPropagation();return!1}}return null});D=R};O(window,"load",function(){k=
!0});return x({},d.getApi(),{push:function(a){D();b.pushState(null,null,a)},replace:function(a){D();b.replaceState(null,null,a)},current:function(){D();return v()},init:function(){return D()},polyfill:function(){D();window.history.pushState=function(a,b,c){g(c)};window.history.replaceState=function(a,b,c){h(c)}},getParam:function(a){return f[a]?f[a].value:null},addParam:function(a,b){D();f[a]||(b?z(b)||(b=F(b)?ya(b):b):b=ya(a+"=([^&]+)"),f[a]={name:a,value:null,extractor:b},f[a].value=w(a,v()))}})}(),
Fb=Ja.current;C({$class:"View",route:null,node:null,scope:null,cmp:null,id:null,currentViewId:null,currentComponent:null,cmpCache:null,domCache:null,currentView:null,watchable:null,defaultCmp:null,currentCls:null,currentHtmlCls:null,$init:function(a){x(this,a,!0,!1);a=this.node;var b=ba(a,this.scope);x(this,b,!0,!1);a&&a.firstChild&&L(a,"mjs-transclude",Y(a.childNodes));this.id||(this.id=M());this.cmpCache={};this.domCache={};this.initView();this.scope.$app.registerCmp(this,this.scope,"id");this.route?
(Ja.init(),Ja.on("locationChange",this.onLocationChange,this),this.initRouteIds(),this.onLocationChange()):this.cmp&&(this.watchable=ia(this.scope,this.cmp,this.onCmpChange,this,null,E),this.onCmpChange())},initView:function(){},initRouteIds:function(){var a=this.route,b,c;b=0;for(c=a.length;b<c;b++)a[b].id=a[b].id||M()},onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=Fb(),b=this.route,c=
this.currentView||{},d,f,g,h,k;f=0;for(g=b.length;f<g;f++){h=b[f];if(h.reg&&(k=a.match(h.reg))){this.changeRouteComponent(h,k);return}h["default"]&&!d&&(d=h)}d?d.id!=c.id&&(this.clearComponent(),this.setRouteClasses(d),this.setRouteComponent(d,[])):this.defaultCmp&&(this.clearComponent(),this.currentView=null,this.setComponent(this.defaultCmp))},changeRouteComponent:function(a,b){a.id!=(this.currentView||{}).id&&(Ba(this.node),this.clearComponent(),this.setRouteClasses(a),this.setRouteComponent(a,
b))},setRouteClasses:function(a){a.cls&&(this.currentCls=a.cls,ma(this.node,a.cls));a.htmlCls&&(this.currentHtmlCls=a.htmlCls,ma(window.document.documentElement,a.htmlCls))},clearComponent:function(){var a=this,b=a.node,c=a.currentView||{};a.currentCls&&da(a.node,a.currentCls);a.currentHtmlCls&&da(window.document.documentElement,a.currentHtmlCls);a.currentComponent&&T(b,"leave",null,!0).done(function(){if(c.keepAlive)for(var d=a.domCache[c.id];b.firstChild;)d.appendChild(b.firstChild);else for(a.currentComponent.destroy();b.firstChild;)b.removeChild(b.firstChild);
a.currentComponent=null})},setRouteComponent:function(a,b){var c=this,d=c.node,f=a.params;c.currentView=a;T(d,"enter",function(){var g=b||[],h={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,m;a.as&&(h.as=a.as);a.template&&(h.template=a.template);g.shift();if(f)for(k=-1,m=f.length;++k<m;h[f[k]]=g[k]);if(c.cmpCache[a.id])c.currentComponent=c.cmpCache[a.id],d.appendChild(c.domCache[a.id]);else return za(a.cmp||"MetaphorJs.Component",h,h.scope,d,null,g).done(function(b){c.currentComponent=
b;a.keepAlive&&(c.cmpCache[a.id]=b,c.domCache[a.id]=window.document.createDocumentFragment())})},!0)},setComponent:function(a){var b=this,c=b.node;T(c,"enter",function(){var d=ra(a)?a:{},f=(F(a)?a:null)||"MetaphorJs.Component",g=d.scope||b.scope.$new();d.destroyEl=!1;return za(f,d,g,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(Ja.un("locationchange",this.onLocationChange,this),this.route=null);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,
this),this.watchable=null);this.currentComponent=this.scope=null;this.$super()}});l.registerAttribute("mjs-app",100,pa);var Ca=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value")||a.value;return void 0!=b?b:N(a.innerText||a.textContent)},select:function(a){for(var b,f=a.options,g=a.selectedIndex,h=(a="select-one"===a.type||0>g)?null:[],k=a?g+1:f.length,m,l=0>g?k:a?g:0;l<k;l++)if(b=f[l],m=b.disabled||b.parentNode.disabled,(b.selected||l===g)&&!m){b=Ca(b);if(a)return b;h.push(b)}return h},
radio:function(a){return La(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return La(a.getAttribute("value"))?"on":a.value}};return function(c){var d,f;if((d=b[c.type]||b[c.nodeName.toLowerCase()])&&void 0!==(f=d(c,"value")))return f;f=c.value;return F(f)?f.replace(a,""):null==f?"":f}}(),Wa=function(){var a={select:function(a,c){for(var d,f,g=a.options,h=V(c),k=g.length,m,l=-1;k--;)f=g[k],(m=h?-1!=Ga.call(h,f.value):!1)?(f.setAttribute("selected","selected"),d=f.selected=!0):f.removeAttribute("selected"),
m||La(y(f,"mjs-default-option"))||(l=k);d||(a.selectedIndex=l);return h}};a.radio=a.checkbox=function(a,c){if(Q(c)){var d;d=Ca(a);d=c?-1!=Ga.call(c,d):!1;return a.checked=d}};return function(b,c){if(1===b.nodeType){null===c?c="":1===U(c)&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];d&&void 0!==d(b,c,"value")||(b.value=c)}}}(),Fa=function(){var a=null,b=null;return function(c,d,f){null===a&&(a=c.detachEvent?"detachEvent":"removeEventListener",b=c.detachEvent?"on":"");c[a](b+d,f)}}(),Gb=function(){var a=
null;return function(){null===a&&(a=parseInt((/android (\d+)/i.exec(navigator.userAgent)||[])[1],10)||!1);return a}}(),Ka=function(){var a;return function(){if(null===a){var b=navigator.userAgent;a=parseInt((/msie (\d+)/i.exec(b)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/i.exec(b)||[])[1],10)||!1)}return a}}(),kb=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==Ka())return a[b]=!1;var c=window.document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),
ka=function(a,b,c){if(a.$$input){if(b)a.$$input.on("change",b,c);return a.$$input}var d=ba(a);this.observable=new ea;this.el=a;this.inputType=a.type.toLowerCase();this.dataType=d.type||this.inputType;this.listeners=[];if(b)this.onChange(b,c)};x(ka.prototype,{el:null,inputType:null,dataType:null,listeners:null,radio:null,keydownDelegate:null,changeInitialized:!1,destroy:function(){var a;this.observable.destroy();this._addOrRemoveListeners(Fa,!0);this.el.$$input=null;for(a in this)this.hasOwnProperty(a)&&
(this[a]=null)},_addOrRemoveListeners:function(a,b){var c=this.inputType,d=this.listeners,f=this.radio,g=this.el,h,k,m,l;k=0;for(m=d.length;k<m;k++)if(h=!!d[k][2],h==b){if("radio"==c)for(h=0,l=f.length;h<l;h++)a(f[h],d[k][0],d[k][1]);else a(g,d[k][0],d[k][1]);d[k][2]=!b}},initInputChange:function(){var a=this.inputType;"radio"==a?this.initRadioInput():"checkbox"==a?this.initCheckboxInput():this.initTextInput();this._addOrRemoveListeners(O,!1);this.changeInitialized=!0},initRadioInput:function(){var a=
this.el,b=a.name;if(Ta(a))a=a.ownerDocument;else for(;a.parentNode;)a=a.parentNode;this.radio=wa("input[name="+b+"]",a);this.onRadioInputChangeDelegate=u(this.onRadioInputChange,this);this.listeners.push(["click",this.onRadioInputChangeDelegate,!1])},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=u(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate,!1])},initTextInput:function(){var a=!1,b=this,c=b.listeners,d;Gb()||(c.push(["compositionstart",
function(){a=!0},!1]),c.push(["compositionend",function(){a=!1;f()},!1]));var f=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()},g=function(a){d||(d=setTimeout(function(){f(a);d=null},0))},h=function(a){a=a||window.event;var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||g(a)};kb("input")?c.push(["input",f,!1]):(c.push(["keydown",h,!1]),kb("paste")&&(c.push(["paste",g,!1]),c.push(["cut",g,!1])));c.push(["change",f,!1])},processValue:function(a){switch(this.dataType){case "number":a=
parseInt(a,10);isNaN(a)&&(a=0);break;case "bool":case "boolean":return!("false"===a||"0"===a||0===a||"off"===a||!1===a||""===a)}return a},onTextInputChange:function(){var a=this.getValue();this.observable.trigger("change",this.processValue(a))},onCheckboxInputChange:function(){var a=this.el;this.observable.trigger("change",this.processValue(a.checked?y(a,"value")||!0:!1))},onRadioInputChange:function(a){a=a||window.event;this.observable.trigger("change",this.processValue((a.target||a.srcElement).value))},
setValue:function(a){var b=this.inputType,c,d;a=this.processValue(a);if("radio"==b)for(b=this.radio,c=0,d=b.length;c<d;c++)b[c].checked=this.processValue(b[c].value)==a;else"checkbox"==b?(b=this.el,b.checked=!0===a||a==this.processValue(b.value)):Wa(this.el,a)},getValue:function(){var a=this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return this.processValue(a[b].value);return null}return"checkbox"==a?this.processValue(this.el.checked?y(this.el,"value")||
!0:!1):this.processValue(Ca(this.el))},onChange:function(a,b){this.changeInitialized||this.initInputChange();this.observable.on("change",a,b)},unChange:function(a,b){this.observable.un("change",a,b)},onKey:function(a,b,c){this.keydownDelegate||(this.keydownDelegate=u(this.keyHandler,this),this.listeners.push(["keydown",this.keydownDelegate,!1]),O(this.el,"keydown",this.keydownDelegate),this.observable.createEvent("key",!1,!1,this.keyEventFilter));this.observable.on("key",b,c,{key:a})},unKey:function(a,
b,c){this.observable.un("key",b,c)},keyEventFilter:function(a,b){var c=a.key,d=b[0];return"object"!=typeof c?c==d.keyCode:void 0!==c.ctrlKey&&c.ctrlKey!=d.ctrlKey||void 0!==c.shiftKey&&c.shiftKey!=d.shiftKey?!1:!(void 0!==c.keyCode&&c.keyCode!=d.keyCode)},keyHandler:function(a){a=new na(a||window.event);this.observable.trigger("key",a)}},!0,!1);ka.get=function(a){return a.$$input?a.$$input:new ka(a)};ka.getValue=Ca;ka.setValue=Wa;l.registerAttribute("mjs-bind",1E3,C({$extends:l,isInput:!1,input:null,
lockInput:null,recursive:!1,textRenderer:null,$init:function(a,b,c){var d=ba(b,a);var f=b.nodeName.toLowerCase(),g=b.type;this.isInput="input"!=f&&"textarea"!=f&&"select"!=f||"submit"==g||"reset"==g||"button"==g?!1:!0;this.recursive=d.recursive||null!==y(b,"mjs-recursive");this.lockInput=d.lockInput;b.removeAttribute("mjs-recursive");this.isInput&&(this.input=new ka(b,this.onInputChange,this));this.recursive?(this.scope=a,this.node=b,this.textRenderer=new fb(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,
this),this.onTextRendererChange(),a instanceof ha&&a.$on("destroy",this.onScopeDestroy,this)):this.$super(a,b,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?this.input.setValue(a):this.node["string"==typeof this.node.textContent?"textContent":"innerText"]=a},destroy:function(){this.textRenderer&&
(this.textRenderer.$destroy(),this.textRenderer=null);this.input&&(this.input.destroy(),this.input=null);this.$super()}}));l.registerAttribute("mjs-bind-html",1E3,C({$extends:"attr.mjs-bind",updateElement:function(a){this.node.innerHTML=a}}));l.registerAttribute("mjs-break-if",500,function(a,b,c){(a=!!ca(c)(a))&&b.parentNode.removeChild(b);return!a});(function(){var a=function(a,b,f,g){if(null!==f){if(f==Ma(a,b))return;f=!f}else f=Ma(a,b);f?g?T(a,[b+"-remove"],null,!0).done(function(){da(a,b)}):da(a,
b):g?T(a,[b+"-add"],null,!0).done(function(){ma(a,b)}):ma(a,b)},b=function(a){var b={},f,g,h;if(!a)return b;if(F(a))b[a]=!0;else if(Q(a))for(f=-1,h=a.length;++f<h;b[a[f]]=!0);else for(f in a)if("_"==f)for(g=-1,h=a._.length;++g<h;b[a._[g]]=!0);else b[f]=a[f];return b};l.registerAttribute("mjs-class",1E3,C({$extends:l,initial:!0,onChange:function(){var c=this.node,d=b(this.watcher.getLastResult()),f=b(this.watcher.getPrevValue()),g;Ba(c);for(g in f)f.hasOwnProperty(g)&&void 0===d[g]&&a(c,g,!1,!1);for(g in d)d.hasOwnProperty(g)&&
a(c,g,d[g]?!0:!1,!this.initial);this.initial=!1}}))})();l.registerAttribute("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=function(a,c,d,f){var g,h,k,m,l,u=ba(c,a);d=d.split(" ");k=0;for(m=d.length;k<m;k++)l=d[k],""!=l&&"as"!=l&&(g?h=l:g=l);d=ta(g,!0);k=u.sameScope||d.$sameScope;a=u.isolateScope||d.$isolateScope?a.$newIsolated():k?a:a.$new();f=x({scope:a,node:c,as:h,parentRenderer:f,destroyScope:!0},u,!1,!1);za(g,f,a,c);return!!d.$shadow};a.$breakScope=
!1;l.registerAttribute("mjs-cmp",200,a)})();l.registerAttribute("mjs-config",50,function(a,b,c){ba(b,a,c)});l.registerAttribute("mjs-each",100,jb);var Hb=function(){var a;return function(){if(void 0===a){var b=window.document,c=b.createElement("div"),d=b.createElement("div"),b=b.body;d.style&&window.getComputedStyle?(c.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",c.appendChild(d),d.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
d.innerHTML="",b.appendChild(c),d="4px"===window.getComputedStyle(d,null).width,b.removeChild(c),a=d):a=!1}return a}}(),lb=function(a,b){var c=/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,d=["Top","Right","Bottom","Left"],f=a?"inner"==a?"padding":"":"content";return function(a,h){if(a===window)return a.document.documentElement["client"+b];if(9===a.nodeType){var k=a.documentElement;return Math.max(a.body["scroll"+b],k["scroll"+b],a.body["offset"+b],k["offset"+b],k["client"+b])}var k=b.toLowerCase(),
m;a:if(window.getComputedStyle){if(a===window){m={};break a}m=getComputedStyle(a,null)}else m=a.currentStyle||a.style||{};a:{var l=f||(!0===h?"margin":"border"),u=!0,t="width"===k?a.offsetWidth:a.offsetHeight,r="border-box"===m.boxSizing;if(0>=t||null==t){t=a.style[k];if(c.test(t)){k=t;break a}u=r&&(Hb()||t===a.style[k]);t=parseFloat(t)||0}l=l||(r?"border":"content");k=l===(u?"border":"content")?4:"width"===k?1:0;for(r=0;4>k;k+=2)"margin"===l&&(r+=parseFloat(m[l+d[k]])),u?("content"===l&&(r-=parseFloat(m["padding"+
d[k]])),"margin"!==l&&(r-=parseFloat(m["border"+d[k]+"Width"]))):(r+=parseFloat(m["padding"+d[k]]),"padding"!==l&&(r+=parseFloat(m["border"+d[k]+"Width"])));k=t+r}return k}},Ib=lb("","Width"),Jb=lb("","Height"),mb=function(a){var b,c=a?"pageYOffset":"pageXOffset",d=a?"scrollTop":"scrollLeft";a=window.document;var f=a.body,g=a.documentElement;b=void 0!==window[c]?function(){return window[c]}:g.clientHeight?function(){return g[d]}:function(){return f[d]};return function(a){return a&&a!==window?a&&1==
a.nodeType&&a!==f&&a!==g?a[d]:b():b()}},Kb=mb(!0),Lb=mb(!1),Mb=function(){var a=C({queue:null,observable:null,handlerDelegate:null,triggerDelegate:null,watchers:null,breaks:null,running:!1,lastEvent:null,currentEvent:null,interval:null,$init:function(a,c,d){var f="$$"+c+"_"+d;if(a[f])return a[f];a[f]=this;this.breaks={};this.watchers={};this.node=a;this.event=c;this.observable=new ea;this.interval=d||0;this.handlerDelegate=u(this.handler,this);this.triggerDelegate=u(this.trigger,this);this.up()},
handler:function(a){this.running?a&&(this.lastEvent=a):this.next(a)},next:function(a){var c=this.interval;if(a=a||this.lastEvent)this.lastEvent=null,this.running=!0,this.currentEvent=a,"raf"==c?fa(this.triggerDelegate):setTimeout(this.triggerDelegate,c)},watchWidth:function(){this.addWatcher("width",Ib)},watchHeight:function(){this.addWatcher("width",Jb)},watchScrollTop:function(){this.addWatcher("scrollTop",Kb)},watchScrollLeft:function(){this.addWatcher("scrollLeft",Lb)},addWatcher:function(a,c,
d){this.watchers[a]={fn:c,context:d,prev:null,current:parseInt(c.call(d,this.node),10)}},removeWatcher:function(a){delete this.watchers[a]},breakFilter:function(a,c,d){a=a.breakValue;var f=this.watchers[d.watcher];d=f.current;var g=f.prev,f=Math.min(g,d),g=Math.max(g,d);c[0].breakPosition=d<a?-1:1;return f<=a&&a<=g},onBreak:function(a,c,d,f,g){var h=a+"_"+c;g=g||{};g.breakValue=c;this.breaks[h]||(this.breaks[h]=this.observable.createEvent(h,{watcher:a,triggerFilter:this.breakFilter,filterContext:this}));
this.breaks[h].on(d,f,g)},unBreak:function(a,c,d,f,g){a=a+"_"+c;this.breaks[a]&&(this.breaks[a].un(d,f),this.breaks[a].hasListener()||(this.breaks[a].destroy(),delete this.breaks[a]));g&&this.destroyIfIdle()},on:function(a,c){this.observable.on(this.event,a,c)},un:function(a,c,d){this.observable.un(this.event,a,c);d&&this.destroyIfIdle()},trigger:function(){var a=this.currentEvent,c=this.watchers,d=this.breaks,f=this.node,g,h;this.observable.trigger(this.event,a);for(g in c)c[g].prev=c[g].current,
c[g].current=parseInt(c[g].fn.call(c[g].context,f,a),10);for(h in d)d[h].trigger(a);this.running=!1;this.currentEvent=null;this.next()},up:function(){O(this.node,this.event,this.handlerDelegate)},down:function(){Fa(this.node,this.event,this.handlerDelegate)},destroyIfIdle:function(){if(!this.observable.hasListener())return this.$destroy(),!0},destroy:function(){this.down();this.observable.destroy();this.queue.destroy()}},{get:function(b,c,d){var f="$$"+c+"_"+d;return b[f]?b[f]:b[f]=new a(b,c,d)}});
return a}(),nb=C({cfg:null,scope:null,node:null,listeners:null,event:null,buffers:null,$init:function(a,b,c,d,f){this.event=d;f=f||{};c=c||{};"string"==typeof c&&(d=c.substr(0,1),"{"==d?(this.watcher=ia(a,c,this.onConfigChange,this),c=this.watcher.getLastResult()):"="==d?(c=c.substr(1),this.watcher=ia(a,c,this.onConfigChange,this),c=this.watcher.getLastResult()):c={handler:ca(c)});this.prepareConfig(c,f);this.buffers={};this.listeners=[];this.scope=a;this.node=b;this.up()},prepareConfig:function(a,
b){var c,d=this.event;if(a.event){c={};var d=a.event.split(","),f,g;delete a.event;f=0;for(g=d.length;f<g;f++)c[N(d[f])]=a;a=c}else d&&(c={},c[d]=a,a=c);x(a,b,!1,!1);this.cfg=a},onConfigChange:function(a){this.down();this.prepareConfig(a);this.up()},createHandler:function(a,b){return function(c){var d,f=!0,g=!1,h=!1;void 0!==a.preventDefault&&(f=a.preventDefault);void 0!==a.stopPropagation&&(h=a.stopPropagation);void 0!==a.returnValue&&(g=a.returnValue);void 0!==a.keyCode&&(d=a.keyCode);c=new na(c||
window.event);if(d&&("number"==typeof d&&d!=c.keyCode||-1==d.indexOf(c.keyCode)))return null;b.$event=c;a.handler&&a.handler.call(a.context||null,b);b.$event=null;b.$root.$check();h&&c.stopPropagation();f&&c.preventDefault();return g}},up:function(){var a=this.cfg,b=this.listeners,c=this.buffers,d=this.node,f=this.scope,g=a.buffer,h,k;for(k in a)if(void 0===a.if||a.if)h=this.createHandler(a[k],f),b.push([k,h]),g?c[k]||(c[k]=Mb.get(d,k,g),c[k].on(h)):O(d,k,h)},down:function(){var a=this.listeners,
b=this.buffers,c=this.node,d=this.cfg.buffer,f,g,h,k;h=0;for(k=a.length;h<k;h++)f=a[h][0],g=a[h][1],d?(b[f].un(g),!0===b[f].destroyIfIdle()&&delete b[f]):Fa(c,f,g);this.listeners=[]},destroy:function(){this.down();this.watcher&&this.watcher.unsubscribeAndDestroy(this.onConfigChange,this)}});(function(){l.registerAttribute("mjs-event",1E3,function(a,b,c){var d=new nb(a,b,c);return function(){d.$destroy();d=null}})})();(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove keydown keyup keypress submit focus blur copy cut paste mousewheel touchstart touchend touchcancel touchleave touchmove".split(" "),
b,c;b=0;for(c=a.length;b<c;b++)(function(a){l.registerAttribute("mjs-"+a,1E3,function(b,c,h){var k=new nb(b,c,h,a,{stopPropagation:!0});return function(){k.$destroy();k=null}})})(a[b]);a=null})();l.registerAttribute("mjs-show",500,C({$extends:l,initial:!0,display:"",$init:function(a,b,c){this.display=ba(b,a).display||"";this.$super(a,b,c)},runAnimation:function(a){var b=this,c=b.node.style,d=function(){c.display=a?b.display:"none"};b.initial?d():T(b.node,a?"show":"hide",function(){a&&(c.display=b.display)},
!0).done(d)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));l.registerAttribute("mjs-hide",500,C({$extends:"attr.mjs-show",onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));l.registerAttribute("mjs-if",500,l.$extend({parentEl:null,prevEl:null,el:null,initial:!0,cfg:null,$init:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.$super(a,b,c)},onScopeDestroy:function(){this.parentEl=
this.prevEl=null;this.$super()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,f=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},g=function(){c.removeChild(d)};b?a.initial?f():T(d,"enter",f,!0):d.parentNode&&(a.initial?g():T(d,"leave",null,!0).done(g));a.initial?a.initial=!1:(a.cfg||(a.cfg=ba(d,a.scope)),a.cfg.ifOnce&&a.$destroy())}}));l.registerAttribute("mjs-ignore",0,pa);l.registerAttribute("mjs-include-file",900,function(a,
b,c){a=require("fs");b.innerHTML=a.readFileSync(c).toString()});l.registerAttribute("mjs-include",900,function(a,b,c,d){a=new ua({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});var Nb=Ra.createFunc;l.registerAttribute("mjs-init",250,function(a,b,c){Nb(c)(a)});l.registerAttribute("mjs-key",1E3,function(a,b,c){var d=ca(c)(a),f=d.handler,g=d.context||a;delete d.handler;delete d.context;ka.get(b).onKey(d,f,g);return function(){ka.get(b).unKey(d,f,g)}});l.registerAttribute("mjs-model",
1E3,l.$extend({inProg:!1,input:null,binding:null,autoOnChange:!1,$init:function(a,b,c){var d=ba(b,a);this.node=b;this.input=ka.get(b);this.binding=d.binding||"both";this.input.onChange(this.onInputChange,this);this.$super(a,b,c);a=this.input.getValue();b=this.watcher.getLastResult();if(b!=a)if("input"!=this.binding&&void 0!=b)this.onChange(b);else if("scope"!=this.binding&&void 0!=a)this.onInputChange(a)},onInputChange:function(a){var b=this.scope;"scope"!=this.binding&&(a&&F(a)&&-1!=a.indexOf("\\{")&&
(a=a.replace(/\\{/g,"{")),this.watcher.getLastResult()!=a&&(this.watcher.setValue(a),this.inProg=!0,b instanceof ha?b.$root.$check():this.watcher.checkAll(),this.inProg=!1))},destroy:function(){this.input.destroy();this.$super()},onChange:function(){var a=this.watcher.getLastResult()||"",b;"input"==this.binding||this.inProg||((b=Ka())&&8>b?sa(this.input.setValue,this.input,[a]):this.input.setValue(a))}}));l.registerAttribute("mjs-on",1E3,function(a,b,c){var d=ca(c)(a),f=function(b){var c,f,l,s,u;
l=0;for(s=d.length;l<s;l++)c=d[l],f=c[0],(c=c[1])&&f&&(c[b]||c["$"+b])&&(u=c[b]||c["$"+b],u.call(c,f,a.$check,a))};f("on");return function(){f("un");d=null}});l.registerAttribute("mjs-options",100,C({$extends:l,model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,fragment:null,$init:function(a,b,c){this.parseExpr(c);this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&this.defOption.setAttribute("mjs-default-option",
"");try{this.watcher=ia(a,this.model,this.onChange,this,null,E)}catch(d){aa(d)}this.render(V(this.watcher.getValue()))},onChange:function(){this.render(V(this.watcher.getValue()))},renderOption:function(a,b,c){var d=this.groupEl||this.fragment,f=Ka();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=window.document.createElement("optgroup"),d.setAttribute("label",a.group),a.disabledGroup&&d.setAttribute("disabled","disabled"),
this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=window.document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;f&&9>f&&(b.innerHTML=a.name);a.disabled&&b.setAttribute("disabled","disabled");d.appendChild(b)},render:function(a){var b=this.node,c=Ca(b),d=this.defOption,f=this.scope.$new(),g=Ka(),h,k,l,s;this.fragment=window.document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);
l=0;for(s=a.length;l<s;l++)this.renderOption(a[l],l,f);d&&b.insertBefore(d,b.firstChild);f.$destroy();g&&8>g&&(k=b.nextSibling,h=b.parentNode,h.removeChild(b));b.appendChild(this.fragment);this.fragment=null;g&&8>g&&h.insertBefore(b,k);Wa(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=ca(a)}}));(function(){var a="selected checked disabled readonly open required".split(" "),b,c,d=C({$extends:l,
propName:null,$init:function(a,b,c,d){this.propName=d;this.$super(a,b,c)},onChange:function(a){var b=this.propName;a?this.node.setAttribute(b,b):this.node.removeAttribute(b)}});b=0;for(c=a.length;b<c;b++)(function(a){l.registerAttribute("mjs-"+a,1E3,function(b,c,k){return new d(b,c,k,a)})})(a[b])})();var ob=function(){var a={},b=0;return function(c){if(a[c])return D.resolve(c);1E3<b&&(a={},b=0);var d=window.document,f=d.createElement("img"),g=f.style,h=new D;O(f,"load",function(){a[c]=!0;b++;d.body.removeChild(f);
h.resolve(c)});g.position="absolute";g.visibility="hidden";g.left="-10000px";g.top="0";f.src=c;d.body.appendChild(f);return h}}();l.registerAttribute("mjs-src",1E3,C({$extends:l,queue:null,usePreload:!0,$constructor:function(a,b,c){var d=ba(b,a);d.deferred&&this.$plugins.push("plugin.SrcDeferred");d.preloadSize&&this.$plugins.push("plugin.SrcSize");if(d.srcPlugin){var d=d.srcPlugin.split(","),f,g;f=0;for(g=d.length;f<g;f++)this.$plugins.push(N(d[f]))}this.$super(a,b,c)},$init:function(a,b,c){ba(b,
a).noPreload?this.usePreload=!1:b.style.visibility="hidden";this.queue=new X({auto:!0,async:!0,mode:X.ONCE,thenable:!0});this.$super(a,b,c)},onChange:function(){this.queue.add(this.doChange,this)},doChange:function(){var a=this,b=a.watcher.getLastResult();if(a.usePreload)return ob(b).done(function(){a&&a.node&&fa(function(){a.node.src=b;a.node.setAttribute("src",b);a.onSrcChanged();a.node.style.visibility=""})});a.node.src=b;a.node.setAttribute("src",b);a.onSrcChanged()},onSrcChanged:function(){},
destroy:function(){this.queue.destroy();this.$super()}}));l.registerAttribute("mjs-transclude",1E3,function(a,b){return ab(b)});l.registerAttribute("mjs-view",200,function(a,b,c){za(c||"MetaphorJs.View",{scope:a,node:b},a,b);return!1});l.registerTag("mjs-bind-html",function(a,b){var c=y(b,"value"),c=ia(a,c,null,null,null,E),d=c.getLastResult(),d=Y(d),f=b.nextSibling,g=V(d.childNodes);b.parentNode.insertBefore(d,f);b.parentNode.removeChild(b);c.unsubscribeAndDestroy();return g});l.registerTag("mjs-bind",
function(a,b){var c=y(b,"value"),c=ca(c)(a),c=window.document.createTextNode(c);b.parentNode.insertBefore(c,b.nextSibling);b.parentNode.removeChild(b);return[c]});l.registerTag("mjs-each",jb);l.registerTag("mjs-if",function(a,b){var c=y(b,"value");if(ca(c)(a)){var c=V(b.childNodes),d=Y(b.childNodes);b.parentNode.insertBefore(d,b.nextSibling);b.parentNode.removeChild(b);return c}b.parentNode.removeChild(b);return!1});l.registerTag("mjs-include",function(a,b,c,d){return(new ua({scope:a,node:b,url:y(b,
"src"),parentRenderer:d,replace:!0})).initPromise});l.registerTag("mjs-tag",function(a,b){var c=y(b,"value");if(c=ca(c)(a)){for(var c=window.document.createElement(c),d=b.nextSibling,f=Ya(b),g;b.firstChild;)c.appendChild(b.firstChild);delete f.value;for(g in f)c.setAttribute(g,f[g]);b.parentNode.insertBefore(c,d);b.parentNode.removeChild(b);return[c]}b.parentNode.removeChild(b);return!1});l.registerTag("mjs-transclude",function(a,b){return ab(b,!0)});P("filter.collect",function(a,b,c){b=[];var d,
f,g;d=0;for(f=a.length;d<f;d++)g=a[d][c],void 0!=g&&b.push(g);return b});var Ob=function(){var a=function(a,b,c){if(z(b))return b(a,c);if(""===b||void 0===b)return!0;if(void 0!==a){if(Da(a))return a===b;if(b instanceof RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},b=function(b,c,g){if(oa(b))return void 0===c.$?!0:a(b,c.$,g);var h,k;for(h in c)if("$"==h)for(k in b){if(a(b[k],c.$,g))return!0}else if(a(b[h],
c[h],g))return!0;return!1},c=function(a,c,g){la(c)||(c={$:c});var h=[],k,l;k=-1;for(l=a.length;++k<l;)b(a[k],c,g)&&h.push(a[k]);return h};c.compare=b;return c}();P("filter.filter",function(a,b,c,d){return Ob(a,c,d)});P("filter.get",function(a,b,c){for(b=(""+c).split(".");c=b.shift();)if(a=a[c],void 0==a)return;return a});P("filter.join",function(a,b,c){c=c||", ";return a&&a.length?(Q(a)||(a=V(a)),a.join(c)):""});P("filter.l",function(a,b){return b.$app.lang.get(a)});P("filter.limitTo",function(a,
b,c){b=F(a);if(!Q(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});P("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});P("filter.lowercase",function(a){return a.toLowerCase()});
P("filter.map",function(a,b,c){var d=ta(c,!0)||window[c]||ca(c)(b);if(d)for(b=0,c=a.length;b<c;b++)a[b]=d(a[b]);return a});var Pb={};P("filter.moment",function(a,b,c){c=Pb[c]||c;return moment(a).format(c)});var Qb={};P("filter.numeral",function(a,b,c){c=Qb[c]||c;return numeral(a).format(c)});P("filter.offset",function(a,b,c){b=F(a);if(!Q(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);return b?a.substr(c):a.slice(c)});P("filter.p",function(a,b,c){return b.$app.lang.plural(a,
parseInt(c,10)||0)});P("filter.preloaded",function(a,b){var c=ob(a);if(c.isFulfilled())return!0;c.done(function(){b.$check()});return!1});P("filter.sortBy",function(a,b,c,d){return sb(a,c,d)});P("filter.split",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=ya(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=N(a[b]));return a});P("filter.toArray",function(a){if(la(a)){var b=[],c;for(c in a)a.hasOwnProperty(c)&&
b.push({key:c,value:a[c]});return b}return V(a)});P("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});P("filter.uppercase",function(a){return a.toUpperCase()});(function(a,b){var c=a||window;if(!c)throw"Window object neither defined nor provided";tb(function(){var a=wa("[mjs-app]",c.document),f,g,h;f=-1;for(g=a.length;++f<g;)h=a[f],ub(h,y(h,"mjs-app"),b,!0)},c)})()})();
