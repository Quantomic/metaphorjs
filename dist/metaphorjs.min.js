(function(){var O={lib:{}},x=function(m){return"function"===typeof m},q=function(m){return"string"==typeof m},L=function(m){return null!=m&&"object"===typeof m},aa=function(m){m||(m=new ra);var a=function(a,b){return d(function(){},a,b)},b=function(a,b,c){return function(){var d=void 0,e=this.supr;this.supr=a.prototype[b]||function(){};try{d=c.apply(this,arguments)}catch(B){}this.supr=e;return d}},c=function(a,c,d){for(var h in c)c.hasOwnProperty(h)&&(a[h]=x(c[h])&&d.prototype&&x(d.prototype[h])?
b(d,h,c[h]):c[h])},d=function(a,b,d){var h=function(){};h.prototype=a.prototype;h=new h;d=d||function(){this.initialize&&this.initialize.apply(this,arguments)};c(h,b,a);d.prototype=h;d.prototype.constructor=d;d.prototype.getClass=function(){return this.__proto__.constructor.__class};d.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};d.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,
arguments);return L(c)?c:b}}(d);return d},e=function(b,c,e,h,l,B){null===b&&(b="");x(b)?(l=e,q(c)?(l=h,h=e):(h=c,e=b,c=null),b=null):q(b)||(l=c,h=b,b=e=c=null);q(c)||x(c)||(l=h,h=e,e=c,c=null);x(e)||(l=h,h=e,e=null);h=h||{};var H=c&&q(c)?m.get(c):c;if(c&&!H)throw Error(c+" not found");c=H?d(H,h,e):a(h,e);c.__isMetaphorClass=!0;c.__parent=H;c.__parentClass=H?H.__class:null;c.__class=m;if(l)for(var F in l)l.hasOwnProperty(F)&&(c[F]=l[F]);b&&(B?m.add(b,c):m.register(b,c));l&&l.alias&&m.add(l.alias,c);
return c};this.factory=function(a){var b=m.get(a),c=Z.call(arguments,1);if(!b)throw Error(a+" not found");return b.__instantiate.apply(this,c)};this.isSubclassOf=function(a,b){var c=a,d=m.get;q(b)||(b=b.getClass?b.getClass():b.prototype.constructor.__class);for(q(a)&&(c=d(a));c;){if(c.prototype.constructor.__class==b)return!0;c&&(c=c.getParentClass?d(c.getParentClass()):c.__parent)}return!1};this.isInstanceOf=function(a,b){var c=q(b)?m.get(b):b;return c?a instanceof c:!1};this.define=e;this.defineCache=
function(a,b,c,d,l){return e(a,b,c,d,l,!0)}};aa.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null};O.lib.Class=aa;var m=function(m){return"undefined"==typeof m},ra=function(n,a){var b={};n||(n=m(global)?window:global);this.register=function(c,d){var e;e=c;var f=e.split("."),g,k=f.pop();g=f.join(".");var h=f.length,l,B=n;if(b[g])e=[b[g],k,e];else{if(0<h)for(g=0;g<h;g++){l=f[g];if(a&&0==g)if(l==a){B=n;continue}else e=a+"."+e;m(B[l])&&(B[l]={});B=B[l]}else a&&(e=
a+"."+e);e=[B,k,e]}f=e[0];k=e[1];L(f)&&m(f[k])&&(f[k]=d,b[e[2]]=d);return d};this.exists=function(a){return!m(b[a])};this.get=function(c,d){if(!m(b[c]))return b[c];if(a&&!m(b[a+"."+c]))return b[a+"."+c];if(!d){var e=c.split("."),f,g=e.length,k,h=n;for(f=0;f<g;f++)if(k=e[f],a&&0==f&&k==a)h=n;else{if(m(h[k]))return;h=h[k]}h&&(b[c]=h);return h}};this.add=function(c,d){a&&0!==c.indexOf(a)&&(c=a+"."+c);m(b[c])&&(b[c]=d);return d};this.remove=function(a){delete b[a]}};ra.prototype={register:null,exists:null,
get:null,add:null,remove:null};O.lib.Namespace=ra;var ba=new ra(O,"MetaphorJs"),E=(new aa(ba)).define,n=Function.prototype.bind?function(m,a){return m.bind(a)}:function(m,a){return function(){return m.apply(a,arguments)}},Z=Array.prototype.slice,ma=function(m){return!(!m||m.constructor!==Object)},sa=function(m){return"boolean"==typeof m},xa=function(m){return null===m},R=function a(){var b=!1,c=!1,d=Z.call(arguments),e=d.shift(),f,g,k;sa(d[d.length-1])&&(b=d.pop());sa(d[d.length-1])&&(c=b,b=d.pop());
for(;d.length;)if(f=d.shift())for(g in f)if(f.hasOwnProperty(g)&&!m(k=f[g]))if(c)if(e[g]&&ma(e[g])&&ma(k))a(e[g],k,b,c);else{if(!0===b||m(e[g])||null===e[g])ma(k)?(e[g]={},a(e[g],k,b,!0)):e[g]=k}else if(!0===b||m(e[g])||null===e[g])e[g]=k;return e},I=function(){},ca=function(a){var b=document.createDocumentFragment();if(q(a)){var c=document.createElement("div");c.innerHTML=a;a=c.childNodes}if(a.nodeType)b.appendChild(a);else for(var c=-1,d=a.length>>>0;++c!==d;b.appendChild(a[0]));return b},da=function(){var a=
["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),S=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=da());var e=a[b];if(m(d))return e?e[c]:void 0;e||(e=a[b]={});return e[c]=d}}(),ya=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),za=function(a,b){return b?ya("(?:^|\\s)"+b+"(?!\\S)").test(a.className):
!1},na=function(a,b){b&&!za(a,b)&&(a.className+=" "+b)},ea=function(a,b){b&&(a.className=a.className.replace(ya("(?:^|\\s)"+b+"(?!\\S)"),""))},fa=ba.get,Aa=Object.prototype.toString,Na=function(a){return"number"==typeof a&&!isNaN(a)},v=function(a){return!!(a&&L(a)&&Na(a.length)&&"[object Array]"==Aa.call(a))},ta=function(a){var b,c,d;if(v(a)){d=[];b=0;for(c=a.length;b<c;b++)d.push(ta(a[b]));return d}if(a)switch(a.nodeType){case 1:return a.cloneNode(!0);case 3:return document.createTextNode(a.innerText||
a.textContent);case 11:return a.cloneNode(!0)}return null},Oa=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",e="transitionDuration",f=null;(function(){var f=document.createElement("div"),k=!1,h,l,B;if(void 0!==f.style.animationName)k=!0;else for(l=0,B=a.length;l<B;l++)if(h=a[l],void 0!==f.style[h+"AnimationName"]){k=!0;b=h+"AnimationDelay";c=h+"AnimationDuration";d=h+"TransitionDelay";e=h+"TransitionDuration";break}return k})()&&(f=
{animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:e});return function(){return f}}(),Ya=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,d){var e,f,g=c.length;for(e=0;e<g;e++)f=a(c[e])+a(d[e]),b=Math.max(f,b);return b},c=Oa(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,f=c?c.transitionDuration:null,g=c?c.transitionDelay:null;return function(a){if(!c)return 0;var h=window.getComputedStyle?window.getComputedStyle(a,
null):a.style;a=0;var l=(h[d]||"").split(","),B=(h[e]||"").split(","),H=(h[f]||"").split(","),h=(h[g]||"").split(",");a=Math.max(a,b(a,l,B));return a=Math.max(a,b(a,H,h))}}(),W=function(a){var b;return a&&(L(a)||x(a))?x(b=a.then)?b:!1:!1},M=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var e=a.shift();c(function(){e[0].apply(e[1],e[2]);a.length?d():b=!1},0)},e=function(c,e,f){f=f||[];a.push([c,e,f]);b||d()},f=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},
g=function(a,b){if(a instanceof g)return a;if(!(this instanceof g))return new g(a,b);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(!m(a))if(W(a)||!x(a))this.resolve(a);else try{a.call(b,n(this.resolve,this),n(this.reject,this))}catch(c){this.reject(c)}};g.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==
this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=W(a)){a instanceof g?a.then(n(this._processResolveValue,this),n(this._processRejectReason,this)):(new g(c,a)).then(n(this._processResolveValue,this),n(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,
a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],
b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new g,d=this._state;0==d||0!=this._wait?(a&&x(a)?this._fulfills.push([f(a,c),null]):this._fulfills.push([c.resolve,c]),b&&x(b)?this._rejects.push([f(b,c),null]):this._rejects.push([c.reject,
c])):1==d?a&&x(a)?e(f(a,c),null,[this._value]):c.resolve(this._value):2==d&&(b&&x(b)?e(f(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)b[0].call(b[1]||null,this._value)},done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)b[0].call(b[1]||null,this._reason)},
fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:n(this.then,this),done:n(this.done,this),fail:n(this.fail,this),always:n(this.always,this)}},after:function(a){var b=this;if(W(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};x(a.done)?a.done(c):
a.then(c)}return b}};g.resolve=function(a){return new g(a)};g.reject=function(a){var b=new g;b.reject(a);return b};g.all=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=Array(c),e=c,f,s,J=function(a,c){d[c]=a;e--;0==e&&b.resolve(d)};for(f=0;f<c;f++)(function(c){s=a[f];s instanceof g?s.done(function(a){J(a,c)}).fail(b.reject,b):W(s)||x(s)?(new g(s)).done(function(a){J(a,c)}).fail(b.reject,b):J(s,c)})(f);return b};g.when=function(){return g.all(arguments)};g.allResolved=function(a){if(!a.length)return g.resolve(null);
var b=new g,c=a.length,d=[],e=c,f,s,J=function(a){d.push(a);m()},m=function(){e--;0==e&&b.resolve(d)};for(f=0;f<c;f++)s=a[f],s instanceof g?s.done(J).fail(m):W(s)||x(s)?(new g(s)).done(J).fail(m):J(s);return b};g.race=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d,e;for(d=0;d<c&&(e=a[d],e instanceof g?e.done(b.resolve,b).fail(b.reject,b):W(e)||x(e)?(new g(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};return g}();O.lib.Promise=M;var U=function(){var a=
{show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=!!Oa(),d=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},e=function(a,b,c){var e=function(){(new Date).getTime()-b>=c?a():d(e)};d(e)},f=function h(a,b,c,g,s,m,ha){var t=function(){var b=S(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==ha?!1:(s.reject(a),!0)},z=function(){if(!t()){var d=c;c++;if(c==b.length){s.resolve(a);S(a,"mjsAnimationQueue").shift();
var e=S(a,"mjsAnimationQueue");e.length?(e=e[0],f(e.el,e.stages,0,e.start,e.deferred,!1,e.id)):S(a,"mjsAnimationQueue",null)}else S(a,"mjsAnimationQueue")[0].position=c,h(a,b,c,null,s);ea(a,b[d]);ea(a,b[d]+"-active")}},n=function(){if(!t()){na(a,b[c]+"-active");var d=Ya(a);d?e(z,(new Date).getTime(),d):z()}},C=function(){if(!t()){na(a,b[c]);var e;g&&(e=g(a),g=null);W(e)?e.done(n):d(n)}};m?d(C):C()},g=function(d,e,g,m){var F=new M,s=S(d,"mjsAnimationQueue")||[],J=++b,ha=d.getAttribute("mjs-animate"),
t,n,u,C,Y,p,y;e=e||ha;m&&null===ha&&(e=null);if(e){q(e)?"["==e.substr(0,1)?t=(new Function("","return "+e))():(t=a[e],e=fa&&fa("animate."+e,!0)):x(e)?n=e:v(e)&&(q(e[0])?t=e:(u=e[0],C=e[1]));ma(e)&&(t=e.stages,n=e.fn,u=e.before,C=e.after,Y=e.options?R({},e.options):{},p=e.context||null,y=e.duration||null,g=g||Y.start);if(c&&t)return s.push({el:d,stages:t,start:g,deferred:F,position:0,id:J}),S(d,"mjsAnimationQueue",s),1==s.length&&f(d,t,0,g,F,!0,J),F;Y=Y||{};g&&(Y.start=function(){g(d)});Y.complete=
function(){F.resolve(d)};y&&(Y.duration=y);if(n&&x(n))return u&&R(d.style,u,!0,!1),g&&g(d),S(d,"mjsAnimationQueue",n.call(p,d,function(){F.resolve(d)})),F;if(window.jQuery){e=$(d);u&&e.css(u);S(d,"mjsAnimationQueue","stop");if(n&&q(n))return e[n](Y),F;if(C)return e.animate(C,Y),F}}g?(n=g(d),W(n)?n.done(function(){F.resolve(d)}):F.resolve(d)):F.resolve(d);return F};g.addAnimationType=function(b,c){a[b]=c};return g}(),T=function(){return String.prototype.trim?function(a){return q(a)?a.trim():a}:function(a){return q(a)?
a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Ba=function(a){return"[object Date]"===Aa.call(a)},Ca=function(a){return"[object RegExp]"===Aa.call(a)},Da=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},ia=function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,b=function(a){if(!q(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},c=function(a,b){if(Da(a))throw Error("Cannot copy window object");if(b){if(a===b)throw Error("Objects are identical");
if(v(a))for(var d=b.length=0;d<a.length;d++)b.push(c(a[d]));else{for(d in b)delete b[d];for(d in a)b[d]=c(a[d])}}else(b=a)&&(v(a)?b=c(a,[]):Ba(a)?b=new Date(a.getTime()):Ca(a)?b=new RegExp(a.source):L(a)&&(b=c(a,{})));return b},d=function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,e;if(c==typeof b&&"object"==c)if(v(a)){if(!v(b))return!1;if((c=a.length)==b.length){for(e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}}else{if(Ba(a))return Ba(b)&&a.getTime()==
b.getTime();if(Ca(a)&&Ca(b))return a.toString()==b.toString();if(Da(a)||Da(b)||v(b))return!1;c={};for(e in a)if(("$"!==e.charAt(0)||"object"!=typeof a[e])&&!x(a[e])){if(!d(a[e],b[e]))return!1;c[e]=!0}for(e in b)if(!c.hasOwnProperty(e)&&"$"!==e.charAt(0)&&void 0!==b[e]&&!x(b[e]))return!1;return!0}return!1},e=function(a,b){var c=a.length,e=b.length,f=Array(c+1),g=Array(c+1),p,h,l,k,B=0;if(c==e&&0==c)return{changes:0,distance:0,prescription:[]};for(p=0;p<=c;p++)f[p]=Array(e+1),g[p]=Array(e+1),f[p][0]=
p,g[p][0]="D";for(p=0;p<=e;p++)f[0][p]=p,g[0][p]="I";for(p=1;p<=c;p++)for(h=1;h<=e;h++)l=d(a[p-1],b[h-1])?0:1,f[p][h-1]<f[p-1][h]&&f[p][h-1]<f[p-1][h-1]+l?(f[p][h]=f[p][h-1]+1,g[p][h]="I"):f[p-1][h]<f[p-1][h-1]+l?(f[p][h]=f[p-1][h]+1,g[p][h]="D"):(f[p][h]=f[p-1][h-1]+l,g[p][h]=1==l?"R":"-");k=[];p=c;h=e;do l=g[p][h],k.push(l),"-"!=l&&B++,"R"==l||"-"==l?(p--,h--):"D"==l?p--:h--;while(0!=p||0!=h);return{changes:B/k.length,distance:f[c][e],prescription:k.reverse()}},f,g=function(a,c,d,e,p,g){f||(f=new V);
var l=da(),k;g&&(this.namespace=g,this.nsGet=g.get);this.origCode=c;v(a)&&null===c?k="array":(q(c)||(e=d,d=c,c=null,k="object"),q(a)&&(e=d,d=c,c=a,a=null),c&&a&&(k=a.hasOwnProperty(c)?"attr":"expr"),c&&!a&&(k="expr"));if(d)f.on(l,d,e||this,{append:[p],allowDupes:!0});if("expr"==k){c=this._processInputPipes(c,a);c=this._processPipes(c,a);if(this.inputPipes||this.pipes)c=h(a,c),k=a.hasOwnProperty(c)?"attr":"expr";if(this.staticValue=b(c))k="static"}this.userData=p;this.code=c;this.id=l;this.type=k;
this.obj=a;"expr"==k&&(this.getterFn=J(c));this.curr=this._getValue()};g.prototype={namespace:null,nsGet:null,staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,_processInputPipes:function(a,b){if(-1==a.indexOf(">>"))return a;for(var c=0,d=a.length,e=[],f,p,g,h=a;c<d&&-1!=(f=a.indexOf(">>",c));)p=a.charAt(f-1),g=a.charAt(f+2),"\\"!=p&&"'"!=p&&'"'!=p&&"'"!=g&&'"'!=g&&(c=T(a.substring(c,
f)).split(":"),h=a.substr(f+2),this._addPipe(e,c,b,this.onInputParamChange)),c=f+2;e.length&&(this.inputPipes=e);return T(h)},_addPipe:function(a,b,c,d){var e=b.shift(),f=null,p=[],g;this.nsGet&&(f=this.nsGet("filter."+e,!0));f||(f=window[e]||c[e]);if(x(f)){e=-1;for(g=b.length;++e<g;p.push(k(c,b[e],d,this,null,this.namespace)));a.push([f,b,p])}},_processPipes:function(a,b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,e=[],f,p,g,h=!1,l=a;c<d;)if(-1!=(f=a.indexOf("|",c)))p=a.charAt(f-1),g=
a.charAt(f+1),"|"!=p&&"'"!=p&&'"'!=p&&"|"!=g&&"'"!=g&&'"'!=g&&(h?(c=T(a.substring(c,f)).split(":"),this._addPipe(e,c,b)):(h=!0,l=T(a.substring(0,f)))),c=f+1;else{h&&(c=T(a.substr(c)).split(":"),this._addPipe(e,c,b,this.onPipeParamChange));break}e.length&&(this.pipes=e);return l},_checkCode:function(){var a=this._getValue(),b=!1,c=this.curr;if(v(c)&&v(a))return b=e(c,a),b.changes?(this.curr=a.slice(),f.trigger(this.id,b,a,c),!0):!1;a!==c&&(this.curr=a,f.trigger(this.id,a,c),b=!0);return b},_checkObject:function(){var a=
this.obj,b=this.curr;return d(b,a)?!1:(this.curr=c(a),f.trigger(this.id,a,b),!0)},_checkArray:function(){var a=this.curr,b=this.obj,c=e(a,b);return c.changes?(this.curr=b.slice(),f.trigger(this.id,c,b,a),!0):!1},_getValue:function(){var a;switch(this.type){case "static":a=this.staticValue;break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);m(a)&&(a="");break;case "object":a=c(this.obj);break;case "array":a=this.obj}v(a)&&(a=a.slice());return a=this._runThroughPipes(a,
this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,e,f=b.length,p=this.obj,g,h;for(c=0;c<f;c++){e=b[c][1];d=[];g=-1;for(h=e.length;++g<h;d.push(Y(e[g],p)));d.unshift(p);d.unshift(a);a=b[c][0].apply(null,d)}}return a},subscribe:function(a,b,c){f.on(this.id,a,b,c)},unsubscribe:function(a,b){return f.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},setValue:function(a){var b=this.type;
this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);if("attr"==b)this.obj[this.code]=a;else if("expr"==b)this.setterFn||(this.setterFn=z(this.code)),this.setterFn(this.obj,a);else if("array"==b)this.obj=a;else throw"Cannot set value";},onInputParamChange:function(){this.setValue(this.lastSetValue)},onPipeParamChange:function(){this.check()},check:function(){switch(this.type){case "expr":case "attr":case "static":return this._checkCode();case "object":return this._checkObject();case "array":return this._checkArray()}return!1},
checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,b){var c=this.id;f.un(c,a,b);return f.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,c,d,e,p,g;this.itv&&this.clearInterval();if(a)for(c=-1,
d=a.length;++c<d;)for(g=a[c][2],e=-1,p=g.length;++e<p;)g[e].unsubscribeAndDestroy(this.check,this);if(b)for(c=-1,d=b.length;++c<d;)for(g=b[c][2],e=-1,p=g.length;++e<p;)g[e].unsubscribeAndDestroy(this.onInputParamChange,this);this.obj&&delete this.obj.$$watchers[this.origCode];delete this.id;delete this.curr;delete this.obj;delete this.pipes;delete this.inputPipes;delete this.origCode;delete this.code;delete this.getterFn;delete this.setterFn;delete this.lastSetValue;delete this.staticValue;delete this.userData;
delete this.namespace;delete this.nsGet;f.destroyEvent(this.id)}};var k=function(a,b,c,d,e,f){b=h(a,T(b));return a?(a.$$watchers||(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?b++:"$"==a.charAt(0)&&this[a]instanceof g&&this[a].check()&&b++;return b},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof g)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].subscribe(c,d,{append:[e],allowDupes:!0}):a.$$watchers[b]=
new g(a,b,c,d,e,f),a.$$watchers[b]):new g(a,b,c,d,e,f)},h=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},l=Function,B=function(a,b,c,d){for(;c&&!c.$isRoot;)if(c=c.$parent)try{return 4==arguments.length?b.call(null,c,d,I,b):b.call(null,c,I,b)}catch(e){}},H=function(a){return function(){var b=Z.call(arguments);b.push(B);b.push(a);var c=b=a.apply(null,b);return m(c)||!c&&"number"==typeof c&&isNaN(c)?(b=Z.call(arguments),
b.unshift(a),b.unshift(null),B.apply(null,b)):b}},F={},s=0,J=function(b){try{return F[b]?F[b]:(s++,F[b]=H(new l("____","$$interceptor","$$itself","".concat("try {","return ",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return I}},n={},t=0,z=function(b){try{if(!n[b]){t++;var c=b.replace(a,"$1____.$3");return n[b]=H(new l("____","$$$$","$$interceptor","$$itself","".concat("try {",c," = $$$$",";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____, $$$$); }")))}return n[b]}catch(d){return I}},
u={},C=0,Y=function(a,c){var d;return(d=b(a))?d:J(a)(c)},p=function(){1E3<=s&&(F={});1E3<=t&&(n={});1E3<=C&&(u={})};g.create=k;g.unsubscribeAndDestroy=function(a,b,c,d){b=T(b);(a=a.$$watchers)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};g.normalizeExpr=h;g.prepareCode=function(b){return b.replace(a,"$1____.$3")};g.createGetter=J;g.createSetter=z;g.createFunc=function(b){try{return u[b]?u[b]:(C++,u[b]=H(new l("____","$$interceptor","$$itself","".concat("try {",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return I}};
g.eval=Y;g.enableResetCacheInterval=function(){setTimeout(p,1E4)};return g}(),ga=O.lib.Watchable=ia,ga=ia.create,Ea=ba.register,X=function(a){if(!a||m(a.length)||q(a))return a?[a]:[];for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b},Pa=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)},oa=function(a){var b=a.stack||Error().stack;Pa(function(){!m(console)&&console.log&&(console.log(a),b&&console.log(b))})},Fa=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=
/(\([^)]*)\+/,e=/(\[[^\]]+)~/,f=/(~|>|\+)/,g=/ +/,k=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,h=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,l=/\D/,B=/[^(]*\(([^)]*)\)/,m=/\(.*/,F=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,s=document,J=!!s.getElementsByClassName,n=!!s.querySelectorAll,t={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);
return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.firstChild;c++;do if(1==f.nodeType&&(f.nodeIndex=++c)&&a===f&&(c+d)%e)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.lastChild;c++;do if(1==f.nodeType&&(f.nodeLastIndex=
c++)&&a===f&&(c+d)%e)return 0;while(f=f.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&s.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},q={},u=function(a){return q[a]||
(q[a]=new RegExp("(^| +)"+a+"($| +)"))},C={"":function(a,b){return!!a.getAttribute(b)},"=":function(a,b,c){return(b=a.getAttribute(b))&&b===c},"&=":function(a,b,c){return(b=a.getAttribute(b))&&u(c).test(b)},"^=":function(a,b,c){return(b=a.getAttribute(b)+"")&&!b.indexOf(c)},"$=":function(a,b,c){return(b=a.getAttribute(b)+"")&&b.indexOf(c)==b.length-c.length},"*=":function(a,b,c){return(b=a.getAttribute(b)+"")&&-1!=b.indexOf(c)},"|=":function(a,b,c){return(b=a.getAttribute(b)+"")&&(b===c||!!b.indexOf(c+
"-"))},"!=":function(a,b,c){return!(b=a.getAttribute(b))||!u(c).test(b)}};return function(q,p){p=p||s;var y=[],G=null,N,u,z,w,x,r,v;if(n)try{y=X(p.querySelectorAll(q.replace(b,'="$1"')))}catch(Q){G=!0}if(!n||G)if(a.test(q))switch(G=0,q.charAt(0)){case "#":G=q.slice(1);y=s.getElementById(G);y.id!==G&&(y=s.all[G]);y=y?[y]:[];break;case ".":N=q.slice(1);if(J)y=X((y=p.getElementsByClassName(N)).length?y:[]);else{N=" "+N+" ";u=p.getElementsByTagName("*");for(z=0;w=u[z++];)-1!=(" "+w.className+" ").indexOf(N)&&
(y[G++]=w);y=G?y:[]}break;case ":":u=p.getElementsByTagName("*");z=0;x=q.replace(B,"$1");for(r=q.replace(m,"");w=u[z++];)t[r]&&!t[r](w,x)&&(y[G++]=w);y=G?y:[];break;case "[":u=p.getElementsByTagName("*");z=0;w=F.exec(q);N=w[1];v=w[2]||"";for(x=w[3];w=u[z++];)C[v]&&(C[v](w,N,x)||"class"===N&&C[v](w,"className",x))&&(y[G++]=w);y=G?y:[];break;default:y=X((y=p.getElementsByTagName(q)).length?y:[])}else{for(var M=q.split(c),O=M.length-1,R=!!O,S,T,D,P,E,I,K,L,W,A,U,V;G=M[O--];){T=(S=G.replace(d,"$1%").replace(e,
"$1&").replace(f," $1 ").split(g)).length;z=0;P=" ";for(u=[p];D=S[z++];)if(" "!==D&&">"!==D&&"~"!==D&&"+"!==D&&u){D=D.match(k);E=D[1]||"*";I=D[2];K=D[3]?" "+D[3]+" ":"";N=D[4];v=D[5]||"";r=D[7];x="nth-child"===r||"nth-last-child"===r?h.exec("even"===D[8]&&"2n"||"odd"===D[8]&&"2n%1"||!l.test(D[8])&&"0n%"+D[8]||D[8]):D[8];L=[];G=W=0;for(U=z==T;A=u[W++];)switch(P){case " ":V=A.getElementsByTagName(E);for(A=0;w=V[A++];)I&&w.id!==I||K&&-1==(" "+w.className+" ").indexOf(K)||!(!N||C[v]&&(C[v](w,N,D[6])||
"class"===N&&C[v](w,"className",D[6])))||w.yeasss||(t[r]?t[r](w,x):r)||(U&&(w.yeasss=1),L[G++]=w);break;case "~":for(E=E.toLowerCase();(A=A.nextSibling)&&!A.yeasss;)1!=A.nodeType||"*"!==E&&A.nodeName.toLowerCase()!==E||I&&A.id!==I||K&&-1==(" "+A.className+" ").indexOf(K)||!(!N||C[v]&&(C[v](w,N,D[6])||"class"===N&&C[v](w,"className",D[6])))||A.yeasss||(t[r]?t[r](A,x):r)||(U&&(A.yeasss=1),L[G++]=A);break;case "+":for(;(A=A.nextSibling)&&1!=A.nodeType;);!A||A.nodeName.toLowerCase()!==E.toLowerCase()&&
"*"!==E||I&&A.id!==I||K&&-1==(" "+w.className+" ").indexOf(K)||!(!N||C[v]&&(C[v](w,N,D[6])||"class"===N&&C[v](w,"className",D[6])))||A.yeasss||(t[r]?t[r](A,x):r)||(U&&(A.yeasss=1),L[G++]=A);break;case ">":for(V=A.getElementsByTagName(E),z=0;w=V[z++];)w.parentNode!==A||I&&w.id!==I||K&&-1==(" "+w.className+" ").indexOf(K)||!(!N||C[v]&&(C[v](w,N,D[6])||"class"===N&&C[v](w,"className",D[6])))||w.yeasss||(t[r]?t[r](w,x):r)||(U&&(w.yeasss=1),L[G++]=w)}u=L}else P=D;if(R){if(!u.concat){L=[];for(A=0;w=u[A];)L[A++]=
w;u=L}y=u.concat(1==y.length?y[0]:y)}else y=u}for(G=y.length;G--;)y[G].yeasss=y[G].nodeIndex=y[G].nodeIndexLast=null}return y}}(),Ga=function(){var a=document.createTextNode("");return q(a.textContent)?"textContent":"nodeValue"}(),V=function(){this.events={}};V.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new Ha(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=
new Ha(a));return e[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,Z.call(arguments,1))},
suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);
else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=n(this[c],this));this.api=b}return this.api}};var Ha=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=da();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=m(b)?null:
b};Ha.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var f=++this.lid,g=c.first||!1;e[d]=f;a={fn:a,scope:b,uniScope:e,id:f,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};g?this.listeners.unshift(a):this.listeners.push(a);this.map[f]=a;return f},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,
b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,f;f=a==parseInt(a)?a:(b||a)[d];if(!f)return!1;for(var g=0,k=e.length;g<k;g++)if(e[g].id==f){c=g;delete e[g].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[f];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=x(a)?b[this.uni]:a;if(!d)return!1;for(var e=0,f=c.length;e<f;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=
a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=Z.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:Z.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,
!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};(function(){var a=new V;R(O,a.getApi(),!0,!1)})();O.lib.Observable=V;var K=function(a){this.$$observable=new V;R(this,a,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};
K.prototype={$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new K({$parent:this,$root:this.$root,$app:this.$app})},$newIsolated:function(){return new K({$app:this.$app})},$on:function(a,b,c){return this.$$observable.on(a,b,c)},$un:function(a,b,c){return this.$$observable.un(a,b,c)},$watch:function(a,b,c){return ia.create(this,a,b,c,null)},$unwatch:function(a,b,c){return ia.unsubscribeAndDestroy(this,a,b,c)},$get:function(a){for(var b=
this;b;){if(void 0!=b[a])return b[a];b=b.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$check:function(){var a;this.$$checking||(this.$$checking=!0,this.$$watchers&&(a=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",a))},$destroy:function(){this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;delete this.$app;delete this.$root;delete this.$parent;this.$$watchers&&
(this.$$watchers.$destroyAll(),delete this.$$watchers);this.$$destroyed=!0}};O.lib.Scope=K;var Qa=function(){var a=/\\{/g,b=new V,c=function(a,b,c,k,h){return!b||!q(b)||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new d(a,b,c,k,h)},d=function(a,b,c,d,h){this.id=da();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=d;this.lang=a.$app.lang;if(!0===h||!1===h)this.recursive=h;this.watchers=[];this.children=[];this.dataChangeDelegate=n(this.doDataChange,this);this.processed=this.processText(b);
this.render()};d.prototype={id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(a,c){return b.on(this.id,a,c)},unsubscribe:function(a,c){return b.un(this.id,a,c)},getString:function(){null===this.text&&this.render();var b=this.text;return-1!=b.indexOf("\\{")?b.replace(a,"{"):b},render:function(){var a=this.processed,b,c,k;this.children.length||this.createChildren();
k=this.children;b=-1;for(c=k.length;++b<c;a=a.replace("---"+b+"---",k[b]instanceof d?k[b].getString():k[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,d,h,l="";b<c;)if(-1!=(d=a.indexOf("{{",b))&&-1!=(h=a.indexOf("}}",d+2))&&"\\"!=a.substr(d-1,1))l+=a.substring(b,d),h!=d+2&&(l+=this.watcherMatch(a.substring(d+2,h))),b=h+2;else{b!==c&&(l+=a.substring(b));break}b=0;a=l;c=a.length;for(l="";b<c;)if(-1!=(d=a.indexOf("{[",b))&&-1!=(h=a.indexOf("]}",d+2))&&"\\"!=a.substr(d-1,1))l+=
a.substring(b,d),h!=d+2&&(l+=this.watcherMatch(a.substring(d+2,h),!0)),b=h+2;else{b!==c&&(l+=a.substring(b));break}return l},watcherMatch:function(a,b){var c=this.watchers;if(b){a=T(a);var d=a.split("|"),h=T(d[0]);"."!=h.substr(0,1)&&(d[0]="'"+h+"'");1==d.length&&d.push("l");a=d.join(" | ")}c.push(ga(this.scope,a,this.onDataChange,this,null,ba));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();
this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?b.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,b=this.children,d=this.scope,k=this.recursive,h,l,B;h=-1;for(l=a.length;++h<l;)B=a[h].getLastResult(),b.push(k&&c(d,B,this,null,!0)||B)},destroyChildren:function(){var a=this.children,b,c;b=-1;for(c=a.length;++b<c;)a[b]instanceof d&&a[b].destroy();this.children=[]},destroyWatchers:function(){var a=
this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();b.destroyEvent(this.id);delete this.watchers;delete this.children;delete this.origin;delete this.processed;delete this.text;delete this.scope;delete this.data;delete this.dataChangeDelegate;delete this.lang;this.changeTmt&&clearTimeout(this.changeTmt);delete this.changeTmt}};d.create=c;Ea("MetaphorJs.view.TextRenderer",d);
return d}(),P=ba.add,aa=function(){var a=[],b=[],c=!1,d=!1,e=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return{registerAttributeHandler:function(b,d,e){fa("attr."+b,!0)||(a.push({priority:d,name:b,handler:P("attr."+b,e)}),c=!1)},getAttributeHandlers:function(){c||(a.sort(e),c=!0);return a},registerTagHandler:function(a,c,e){fa("tag."+a,!0)||(b.push({priority:c,name:a,handler:P("tag."+a,e)}),d=!1)},getTagHandlers:function(){d||(b.sort(e),d=!0);return b}}}(),Za=aa.getAttributeHandlers,
Ia=function(){var a=null,b=Qa.create,c=function(a,b,c,d,e,g){var k=[];if(a&&!0!==a){if(a.nodeType){g.countdown+=1;f(a,c,d,e,g);return}k=X(a)}k.length||(k=X(b.childNodes));b=k.length;g.countdown+=b;for(a=-1;++a<b;f(k[a],c,d,e,g));},d=function(a,b){if(b)if(b.nodeType)a.push(b);else if(v(b))for(var c=-1,e=b.length;++c<e;d(a,b[c]));},e=/^(script|template|mjs-template|style)$/i,f=function(a,b,d,f,g){if(a){var k,m=a.nodeName;g||(g={countdown:1});if(!m||!m.match(e)){if(a.nodeType)try{k=b.call(d,a)}catch(n){oa(n)}if(!1!==
k){if(W(k)){k.done(function(e){!1!==e&&c(e,a,b,d,f,g);0==--g.countdown&&f&&f.call(d)});return}c(k,a,b,d,f,g)}}0==--g.countdown&&f&&f.call(d)}},g=new V,k=function(a,b,c){this.id=da();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof K&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)};k.prototype={id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,_observable:null,on:function(a,b,c){return g.on(a+"-"+this.id,b,c)},un:function(a,b,c){return g.un(a+
"-"+this.id,b,c)},createChild:function(a){return new k(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b;b=b.$app;var f={$scope:e,$node:c,$attrValue:d,$renderer:this};c=[e,c,d,this];return a.__isMetaphorClass?(c=b.inject(a,null,!0,f,c),a.$stopRenderer?!1:c):b.inject(a,null,!1,f,c)},processNode:function(c){var e=c.nodeType,f=this.texts,g=this.scope,k,s;if(3==e){if(s=null!==c.parentNode.getAttribute("mjs-recursive"),
k=b(g,c[Ga],null,f.length,s))k.subscribe(this.onTextChange,this),f.push({node:c,tr:k}),this.renderText(f.length-1)}else if(1==e){a||(a=Za());var m=c.attributes;k=[];var n=[],t,q,u,e="tag."+c.tagName.toLowerCase();if(t=fa(e,!0)){u=this.runHandler(t,g,c);if(!1===u)return!1;W(u)?k.push(u):d(n,u)}t=0;for(q=a.length;t<q;t++)if(s=a[t].name,null!==(u=c.getAttribute(s))){u=this.runHandler(a[t].handler,g,c,u);c.removeAttribute(s);if(!1===u)return!1;W(u)?k.push(u):d(n,u)}if(k.length){var r=new M;M.all(k).done(function(a){d(n,
a);r.resolve(n)});return r}s=null!==c.getAttribute("mjs-recursive");t=0;for(q=m.length;t<q;t++)!fa(e,!0)&&(k=b(g,m[t].value,null,f.length,s))&&(k.subscribe(this.onTextChange,this),f.push({node:c,attr:m[t].name,tr:k}),this.renderText(f.length-1));return n.length?n:!0}return!0},process:function(){f(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){g.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=
this.texts[a];var b=a.tr.getString(),c=a.attr;c?(a.node.setAttribute(c,b),"value"==c&&(a.node.value=b),"class"==c&&(a.node.className=b)):a.node[Ga]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&this.parent.un("destroy",this.destroy,this);delete this.texts;delete this.el;delete this.scope;delete this.parent;g.trigger("destroy-"+this.id)}}};Ea("MetaphorJs.view.Renderer",k);return k}(),$a=function(){return m(JSON)?
function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),Ra=function(a,b){var c,d;if(!a||!q(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},r=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},ab=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,e=/^(?:GET|HEAD)$/i,
f=0,g=function(a,b,c){var d,e;if(q(a)&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a));else if(v(a)&&c)for(d=0,e=a.length;d<e;d++)g(a[d],b,c+"["+d+"]");else if(L(a))for(d in a)a.hasOwnProperty(d)&&g(a[d],b,c?c+"["+d+"]":d)},k=function(d,f){d.replace(a,"");if(!1===f.cache){var h=(new Date).getTime();return b.test(d)?d.replace(b,"$1_="+h):d+(c.test(d)?"&":"?")+"_="+h}!f.data||window.FormData&&f.data instanceof window.FormData||(q(f.data)?h=f.data:(h=[],g(f.data,h,null),h=h.join("&").replace(/%20/g,
"+")),f.data=h,e.test(f.method)&&(d+=(c.test(d)?"&":"?")+f.data,f.data=null));return d},h={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},l={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,
selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},B={},H=new V,F=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},s=function(a,b,c){var d,e;if(!L(a)&&!x(a)&&c)d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",a),b.appendChild(d);else if(v(a)&&c)for(d=0,e=a.length;d<
e;d++)s(a[d],b,c+"["+d+"]");else if(L(a))for(d in a)a.hasOwnProperty(d)&&s(a[d],b,c?c+"["+d+"]":d)},J=function(a){for(var b,c,d="",e=0;e<a.elements.length;e++)if(b=a.elements[e],b.hasAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);
return d},ha=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!q(a))return a;c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=Ra(T(a)),b?Fa(b,a):a;if("html"===d)return a=Ra(a,"text/html"),b?Fa(b,a):a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return $a(T(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&F(a);return a+""},t=function(a){var b=
m(window)?"":window.location.href,b=d.exec(b.toLowerCase())||[],c=d.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")));b=new M;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||!m(window)&&window.FormData||"iframe"==a.transport||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):
J(a.form));a.url=k(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new E(a,b,this):new u(a,b,this):new C(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){H.trigger("success",a)});b.fail(function(a){H.trigger("error",a)});b.always(function(){H.trigger("end")});H.trigger("start");a.timeout&&(this._timeout=setTimeout(n(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===H.trigger("beforeSend",a,c)&&(this._promise=M.reject());a.beforeSend&&!1===
a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=M.reject());this._promise||(Pa(c.send,c),b.abort=n(this.abort,this),b.always(this.destroy,this),this._promise=b)};t.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");
a.style.display="none";a.setAttribute("method",this._opt.method);s(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+ ++f;a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;m(window)||(window[d]=n(this.jsonpCallback,this));m(global)||(global[d]=n(this.jsonpCallback,this));return d},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},
processResponseData:function(a,b){var c=this._opt;a=ha(a,c,b);H.hasListener("processResponse")&&(a=H.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred;if(this._opt.jsonp)if(a){try{F(a)}catch(d){c.reject(d)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else try{c.resolve(this.processResponseData(a,b))}catch(e){c.reject(e)}},
destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&(m(window)||delete window[this._jsonpName],m(global)||delete global[this._jsonpName])}};var z=function(a,b){b=b||{};a&&!q(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),
!b.url))throw"Must provide url";R(b,B,!1,!0);R(b,l,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new t(b)).promise()};z.setup=function(a){R(B,a,!0,!0)};z.on=function(){H.on.apply(H,arguments)};z.un=function(){H.un.apply(H,arguments)};z.get=function(a,b){b=b||{};b.method="GET";return z(a,b)};z.post=function(a,b){b=b||{};b.method="POST";return z(a,b)};z.load=function(a,b,c){c=c||{};q(b)||(c=b);c.dataType="fragment";return z(b,
c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};z.loadScript=function(a){return z(a,{transport:"script"})};z.submit=function(a,b){b=b||{};b.form=a;return z(null,b)};var u=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&r(d,"progress",n(a.progress,
a.callbackScope));a.uploadProgress&&d.upload&&r(d.upload,"progress",n(a.uploadProgress,a.callbackScope));try{var e;if(a.xhrFields)for(e in a.xhrFields)d[e]=a.xhrFields[e];a.data&&a.contentType&&d.setRequestHeader("Content-Type",a.contentType);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.setRequestHeader("Accept",a.dataType&&h[a.dataType]?h[a.dataType]+", */*; q=0.01":h._default);for(e in a.headers)d.setRequestHeader(e,a.headers[e])}catch(f){}d.onreadystatechange=n(this.onReadyStateChange,
this)};u.prototype={_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=I,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=I;var c;a:{try{c=!a.status&&!m(location)&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(q(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=
I;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}};var C=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};C.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset",
"utf-8");a.setAttribute("src",this._opt.url);r(a,"load",n(this.onLoad,this));r(a,"error",n(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var E=
function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};E.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++f,c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);r(a,"load",n(this.onLoad,this));r(a,"error",n(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=
this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return z}(),ja=function(){var a=new V,b={},c=function(a){if(!b[a]){var c=document.getElementById(a),
d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),d.innerHTML=c.innerHTML,b[a]=ca(d.childNodes)):b[a]="content"in c?c.content:ca(c.childNodes))}return b[a]},d=function(a){return b[a]?b[a]:b[a]=ab(a,{dataType:"fragment"}).then(function(c){return b[a]=c})},e=function(a){R(this,a,!0,!1);this.id=da();this.tpl&&(this.tpl=T(this.tpl));this.url&&(this.url=T(this.url));a=this.node;var b=this.tpl||this.url;a&&a.removeAttribute("mjs-include");a||(this.deferRendering=!0);if(b){if(a&&
a.firstChild&&S(a,"mjs-transclude",ca(a.childNodes)),"."!=b.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=ga(this.scope,b,this.onChange,this,null,ba)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof
K&&this.scope.$on("destroy",this.onScopeDestroy,this)};e.prototype={_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,doRender:function(){this._renderer||(this._renderer=new Ia(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+
"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,e=a._watcher?a._watcher.getLastResult():a.tpl||b,h=new M;(new M(function(a){b?a(c(e)||d(b)):a(c(e)||ca(e))})).done(function(b){a._fragment=
b;h.resolve(a.ownRenderer?!1:a.node)}).fail(h.reject,h);return h},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(ta(this._fragment),a):a.appendChild(ta(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new M;this._initial?(this.doApplyTemplate(),
b.resolve()):(U(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),U(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),delete this._watcher);delete this.tpl}};e.getTemplate=c;
e.loadTemplate=d;Ea("MetaphorJs.view.Template",e);return e}(),Sa=function(){var a,b=function(){this.store={}};b.prototype={store:null,getApi:function(){return{value:n(this.value,this),constant:n(this.constant,this),factory:n(this.factory,this),service:n(this.service,this),provider:n(this.provider,this),resolve:n(this.resolve,this),inject:n(this.inject,this)}},instantiate:function(a,b){var e=function(){},f;e.prototype=a.prototype;e=new e;f=a.prototype.constructor.apply(e,b);return L(f)?f:e},inject:function(a,
b,e,f,g){f=f||{};g=g||[];if(x(a))if(a.inject)g=Z.call(a.inject),g.push(a),a=g;else return e||a.__isMetaphorClass?this.instantiate(a,g):a.apply(b,g);a=Z.call(a);var k=this;g=[];var h=a.pop(),l,m;l=-1;for(m=a.length;++l<m;g.push(k.resolve(a[l],f)));return M.all(g).then(function(a){return e||h.__isMetaphorClass?k.instantiate(h,a):h.apply(b,a)})},value:function(a,b){this.store[a]={type:1,value:b}},constant:function(a,b){var e=this.store;e[a]||(e[a]={type:2,value:b})},factory:function(a,b,e,f){sa(e)&&
(f=e,e=null);this.store[a]={type:3,singleton:f,fn:b,context:e}},service:function(a,b,e){this.store[a]={type:4,singleton:e,fn:b}},provider:function(a,b){this.store[a+"Provider"]={name:a,type:5,fn:b,instance:null}},resolve:function(b,d){var e=this.store,f,g,k;if(!m(d[b]))return d[b];if(g=e[b]){f=g.type;if(1==f||2==f)return g.value;if(3==f)k=this.inject(g.fn,g.context,!1,d);else if(4==f)k=this.inject(g.fn,null,!0,d);else if(5==f)return g.instance||(g.instance=M.resolve(this.inject(g.fn,null,!0,d)).done(function(a){g.instance=
a;e[g.name]={type:3,fn:a.$get,context:a}})),g.instance;g.singleton&&(g.type=1,g.value=k,3==f&&W(k)&&k.done(function(a){g.value=a}));return d[b]=k}if(e[b+"Provider"])return this.resolve(b+"Provider",d),this.resolve(b,d);if(this===a)throw"Could not provide value for "+b;return a.resolve(b)},destroy:function(){delete this.store;delete this.scope}};b.global=function(){return a};a=new b;return O.lib.Provider=b}(),pa=function(a,b,c,d,e){var f=!1!==b;b=b||{};e=e||[];c=c||b.scope;d=d||b.node;b.scope=b.scope||
c;b.node=b.node||d;var g=q(a)?fa(a):a;if(!g)throw"Component "+a+" not found";c&&g.$isolateScope&&(b.scope=c=c.$newIsolated());var k,h=[];a=g.template||b.template||null;var l=g.templateUrl||b.templateUrl||null,m=c?c.$app:null,n=Sa.global(),r=m?m.inject:n.inject,s=m?m:n,J=d?d.getAttribute("mjs-cloak"):null,v={$node:d||null,$scope:c||null,$config:b||null,$args:e||null};if(g.resolve)for(k in g.resolve)(function(a){var f=new M,l;h.push(f.done(function(c){v[a]=c;b[a]=c;e.push(c)}));l=g.resolve[k];x(l)?
f.resolve(l(c,d)):q(l)?f.resolve(r.resolve(l)):f.resolve(r.call(s,l,null,!1,R({},v,b,!1,!1)))})(k);f&&(a||l)&&(b.template=new ja({scope:c,node:d,deferRendering:!0,ownRenderer:!0,tpl:a,url:l}),h.push(b.template.initPromise),d&&d.firstChild&&S(d,"mjs-transclude",ca(d.childNodes)));f&&e.unshift(b);var t;h.length?(t=new M,M.all(h).done(function(){t.resolve(r.call(s,g,null,!0,R({},v,b,!1,!1),e))})):t=M.resolve(r.call(s,g,null,!0,R({},v,b,!1,!1),e));d&&t.isPending()&&null!==J&&(J?na(d,J):d.style.visibility=
"hidden",t.done(function(){J?ea(d,J):d.style.visibility=""}));return t},bb=function(){var a=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},b=function(a){this.store={};a&&(this.locale=a)};b.prototype={store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var c=this.store;m(c[a])&&(c[a]=b)},load:function(a){R(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===c?"-- "+a+" --":c.get(a))},plural:function(b,c){var f=this.get(b),g=a(c,this.locale);return v(f)?f[g]:ma(f)?f[c]?f[c]:1==c&&void 0!=f.one?f.one:0>c&&void 0!=f.negative?f.negative:f.other:f}};var c=new b;b.global=function(){return c};return O.lib.Text=b}();E("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(a){a=a||{};this._observable=
new V;R(this,this._observable.getApi(),!0,!1);if(a.callback){var b=a.callback,c=b.scope||this;delete b.scope;for(var d in b)if(b.hasOwnProperty(d))this.on(d,b[d],c);delete a.callback}R(this,a,!0,!1)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",this);this._observable.destroy();delete this._observable}},onDestroy:I});E("MetaphorJs.cmp.App","MetaphorJs.cmp.Base",{lang:null,scope:null,renderer:null,
cmpListeners:null,components:null,initialize:function(a,b){var c=b instanceof K?b:new K(b),d,e;c.$app=this;this.supr();d=new Sa;e=new V;this.lang=new bb;R(this,d.getApi(),!0,!1);this.destroyProvider=n(d.destroy,d);R(this,e.getApi(),!0,!1);this.destroyObservable=n(e.destroy,e);this.scope=c;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",c.$root);this.value("$lang",this.lang);this.renderer=new Ia(a,c);
d=Z.call(arguments);d[1]=c;this.initApp.apply(this,d)},initApp:I,run:function(){this.renderer.process()},getParentCmp:function(a){a=a.parentNode;for(var b;a;){if(b=a.getAttribute("cmp-id"))return this.getCmp(b);a=a.parentNode}return null},onAvailable:function(a,b,c){var d=this.cmpListeners;d[a]||(d[a]=new M);b&&d[a].done(b,c);return d[a]},getCmp:function(a){return this.components[a]||null},registerCmp:function(a){var b=this;b.components[a.id]=a;b.onAvailable(a.id).resolve(a);a.on("destroy",function(a){delete b.cmpListeners[a.id];
delete b.components[a.id]})},destroy:function(){var a;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(a in this)this.hasOwnProperty(a)&&delete this[a]}});var qa=function(a){var b=document.body;return a===b?!0:b.contains(a)};E("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",{id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(a){this.supr(a);
this.scope||(this.scope=new K);a.as&&(this.scope[a.as]=this);this.node&&(this.id=this.node.getAttribute("id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+da();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this);var b=this.template,c=this.templateUrl;b&&b instanceof ja?b instanceof ja&&(this.template.node=this.node):this.template=b=new ja({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",
this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},
onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):qa(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;
this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:I,afterRender:I,onShow:I,onHide:I,onParentRendererDestroy:function(){this.destroy()},onDestroy:function(){this.template&&(this.template.destroy(),delete this.template);this.destroyEl?qa(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||
this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();delete this.scope;delete this.node;this.supr()}});var Ta=function(a){var b=S(a,"mjsAnimationQueue"),c;v(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,ea(a,c[b]),ea(a,c[b]+"-active")):x(b)?b(a):"stop"==b&&$(a).stop(!0,!0);S(a,"mjsAnimationQueue",null)},cb=function(){var a={locationChange:[],beforeLocationChange:[]},b=!1,c=/(?:(\w+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,
d=!!history.pushState,e="onhashchange"in window,f=function(a){var b=location.protocol+"//"+location.hostname;location.port&&(b+=":"+location.port);a=a.replace(b,"");d||(a=encodeURIComponent(a));return a},g=function(a){a=(""+a).match(c);var b,e;d||(e=a[6],"!"==e.substr(0,1)&&(b=e.substr(1)));b||(b=a[4],a[5]&&(b+="?"+a[5]));return b},k=function(){var a;d?a=location.pathname+location.search:(a=location.hash.substr(1))?("!"==a.substr(0,1)&&(a=a.substr(1)),a=decodeURIComponent(a)):a=location.pathname+
location.search;return a},h=function(b,c,d){d=d||k();for(var e,f=-1,g=a[b].length;++f<g;)if(e=a[b][f].call(null,d),c&&!1===e)return!1;return O.trigger(b,d)};r(window,"load",function(){b=!0});history.initPushState=function(){if(d)history.origPushState=history.pushState,history.origReplaceState=history.replaceState,r(window,"popstate",function(){h("locationChange")}),history.pushState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;history.origPushState(a,b,f(c));h("locationChange")},
history.replaceState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;history.origReplaceState(a,b,f(c));h("locationChange")};else if(e)history.replaceState=history.pushState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;a=f(c);location.hash=a?"!"+a:""},r(window,"hashchange",function(){h("locationChange")});else{var a=null,k=!1;window.onIframeHistoryChange=function(a){k||(location.hash=a?"!"+a:"",h("locationChange"))};var m=function(b){var c=a.contentWindow.document;
c.open();c.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+b+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');c.close()};history.pushState=function(a,b,c){if(!1===h("beforeLocationChange",!0,c))return!1;m(f(c))};history.replaceState=function(b,c,d){if(!1===h("beforeLocationChange",!0,d))return!1;b=f(d);a.contentWindow.hashValue=b};var n=function(){a=document.createElement("iframe");a.src="about:blank";
a.style.display="none";document.body.appendChild(a);k=!0;m(f(location.hash.substr(1)));k=!1};b?n():r(window,"load",n)}r(document.documentElement,"click",function(a){a=a||window.event;for(var b=a.target||a.srcElement,d;b&&"a"!=b.nodeName.toLowerCase();)b=b.parentNode;if(b){if(b=(d=b.getAttribute("href"))&&"#"!=d.substr(0,1)&&!b.getAttribute("target"))b=d.match(c),b=b[1]&&location.protocol!=b[1]||b[2]&&location.hostname!=b[2]?!1:b[2]||b[3]?location.port==b[3]:!0;if(b&&g(d)!=g(window.location))return history.pushState(null,
null,g(d)),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}return null});history.initPushState=function(){}};history.onBeforeChange=function(b){a.beforeLocationChange.push(b)};history.onChange=function(b){a.locationChange.push(b)};return{pushUrl:function(a){history.pushState(null,null,a)},replaceUrl:function(a){history.replaceState(null,null,a)},currentUrl:function(){return k()}}}().currentUrl;E("MetaphorJs.cmp.View",{route:null,node:null,scope:null,cmp:null,currentComponent:null,
watchable:null,defaultCmp:null,initialize:function(a){R(this,a,!0,!1);(a=this.node)&&a.firstChild&&S(a,"mjs-transclude",ca(a.childNodes));this.cmp||(this.cmp=a.getAttribute("mjs-view-cmp"));this.defaultCmp=a.getAttribute("mjs-view-default");a.removeAttribute("mjs-view");a.removeAttribute("mjs-view-cmp");a.removeAttribute("mjs-view-default");this.route?(history.initPushState(),O.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=ga(this.scope,this.cmp,
this.onCmpChange,this,null,ba),this.onCmpChange())},onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=cb(),b=this.route,c,d,e,f,g;d=0;for(e=b.length;d<e;d++){f=b[d];if(g=a.match(f.reg)){this.changeRouteComponent(f,g);return}f["default"]&&!c&&(c=f)}c?this.setRouteComponent(c,[]):this.clearComponent();!c&&this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){Ta(this.node);
this.clearComponent();this.setRouteComponent(a,b)},clearComponent:function(){var a=this,b=a.node;a.currentComponent&&U(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,b){var c=this,d=c.node,e=a.params;U(d,"enter",function(){var f=b||[],g={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,h;a.as&&(g.as=a.as);a.template&&(g.template=a.template);f.shift();
if(e)for(k=-1,h=e.length;++k<h;g[e[k]]=f[k]);return pa(a.cmp||"MetaphorJs.cmp.Component",g,g.scope,d,null,f).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;U(c,"enter",function(){var d=L(a)?a:{},e=(q(a)?a:null)||"MetaphorJs.cmp.Component",f=d.scope||b.scope.$new();d.destroyEl=!1;return pa(e,d,f,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(O.un("locationchange",this.onLocationChange,this),delete this.route);
this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),delete this.watchable);delete this.scope;delete this.currentComponent}});var Q=aa.registerAttributeHandler,ka=function(){return!1};Q("mjs-app",0,ka);var ua=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value")||a.value;return null===b||m(b)?T(a.innerText||a.textContent):b},select:function(a){for(var b,e=a.options,f=a.selectedIndex,g=(a="select-one"===a.type||0>f)?null:[],k=a?f+1:e.length,h,l=0>f?k:a?f:
0;l<k;l++)if(b=e[l],h=b.disabled||b.parentNode.disabled,(b.selected||l===f)&&!h){b=ua(b);if(a)return b;g.push(b)}return g},radio:function(a){return xa(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return xa(a.getAttribute("value"))?"on":a.value}};return function(c){var d,e;if((d=b[c.type]||b[c.nodeName.toLowerCase()])&&!m(e=d(c,"value")))return e;e=c.value;return q(e)?e.replace(a,""):null==e?"":e}}(),va=Array.prototype.indexOf;va||(va=Array.prototype.indexOf=function(a,b){var c;if(null==
this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=e)return-1;for(c=Math.max(0<=c?c:e-Math.abs(c),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1});var Ja=function(){var a={select:function(a,c){for(var d,e,f=a.options,g=X(c),k=f.length,h=-1;k--;)e=f[k],(e.selected=g?-1!=va.call(g,e.value):!1)?d=!0:xa(e.getAttribute("mjs-default-option"))||(h=k);d||(a.selectedIndex=h);return g}};a.radio=a.checkbox=
function(a,c){if(v(c)){var d;d=ua(a);d=c?-1!=va.call(c,d):!1;return a.checked=d}};return function(b,c){if(1===b.nodeType){null===c?c="":Na(c)&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];if(!d||m(d(b,c,"value")))b.value=c}}}();E("MetaphorJs.view.AttributeHandler",{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=T(c);this.node=b;this.expr=c;this.scope=a;this.watcher=ga(a,c,this.onChange,this,null,ba);if(this.watcher.getLastResult())this.onChange();a instanceof K&&
a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.destroy()},onChange:function(){},destroy:function(){delete this.node;delete this.scope;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)}});Q("mjs-bind",1E3,E(null,"MetaphorJs.view.AttributeHandler",{isInput:!1,recursive:!1,textRenderer:null,initialize:function(a,b,c){var d=b.nodeName.toLowerCase(),e=b.type;this.isInput="input"!=d&&"textarea"!=d&&"select"!=d||"submit"==e||"reset"==e||
"button"==e?!1:!0;(this.recursive=null!==b.getAttribute("mjs-recursive"))?(this.scope=a,this.node=b,this.textRenderer=new Qa(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),a instanceof K&&a.$on("destroy",this.onScopeDestroy,this)):this.supr(a,b,c)},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?
Ja(this.node,a):this.node[Ga]=a},destroy:function(){this.textRenderer&&(this.textRenderer.destroy(),delete this.textRenderer);this.supr()}}));Q("mjs-bind-html",1E3,E(null,"attr.mjs-bind",{updateElement:function(a){this.node.innerHTML=a}}));(function(){var a=function(a,c,d,e){if(null!==d){if(d==za(a,c))return;d=!d}else d=za(a,c);d?e?U(a,[c+"-remove"],null,!0).done(function(){ea(a,c)}):ea(a,c):e?U(a,[c+"-add"],null,!0).done(function(){na(a,c)}):na(a,c)};Q("mjs-class",1E3,E(null,"MetaphorJs.view.AttributeHandler",
{initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),d;Ta(b);if(q(c))a(b,c,null,!this.initial);else if(v(c)){var e;d=-1;for(e=c.length;++d<e;a(b,c[d],!0,!this.initial));}else for(d in c)a(b,d,c[d]?!0:!1,!this.initial);this.initial=!1}}))})();Q("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=function(a,c,d,e){var f,g,k,h,l;c.removeAttribute("mjs-cmp");d=d.split(" ");k=0;for(h=d.length;k<h;k++)l=d[k],""!=l&&"as"!=l&&(f?
g=l:f=l);pa(f,{scope:a,node:c,as:g,parentRenderer:e,destroyScope:!0},a,c);return!1};a.$breakScope=!0;Q("mjs-cmp",200,a)})();Q("mjs-each",100,E(null,"MetaphorJs.view.AttributeHandler",{model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=
b;this.scope=a;try{this.watcher=ga(a,this.model,this.onChange,this,null,ba)}catch(d){oa(d)}this.parentEl.removeChild(b);this.render(X(this.watcher.getValue()))},onScopeDestroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.destroy();delete this.renderers;delete this.tpl;delete this.prevEl;delete this.nextEl;delete this.parentEl;this.supr()},doUpdate:function(a,b){for(var c=this.renderers,d=b,e=c.length,f=e-1,g=!(d%2),k,h;d<e;d++)k=c[d],h=k.scope,h.$index=d,h.$first=0===
d,h.$last=d===f,h.$even=g,h.$odd=!g,g=!g,k.renderer?h.$check():(k.renderer=new Ia(k.el,k.scope),k.renderer.process())},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,f=document.createDocumentFragment(),g,k,h;k=0;for(h=a.length;k<h;k++)g=c.cloneNode(!0),f.appendChild(g),b.push(this.createItem(g,a,k));d.insertBefore(f,e);this.doUpdate(a,0)},createItem:function(a,b,c){var d=this.itemName,e=this.scope.$new();e[d]=b[c];return{el:a,scope:e}},onChange:function(a){var b=
this,c=b.renderers;a=a.prescription||[];var d=b.tpl,e=0,f=b.parentEl,g=X(b.watcher.getValue()),k=null,h,l,m,n;l=0;for(m=a.length;l<m;l++)n=a[l],"-"==n?(c[e].scope.$index=e,e++):(null===k&&(k=0<l?l-1:0),"I"!=n&&c[e]&&(h=c[e],h.scope.$destroy(),U(h.el,"leave",null,!0).done(function(a){qa(a)&&a.parentNode.removeChild(a)})),"D"==n?c.splice(e,1):(h=d.cloneNode(!0),U(h,"enter",function(a){return function(d){0<a?f.insertBefore(d,c[a-1].el.nextSibling):b.prevEl?f.insertBefore(d,b.prevEl.nextSibling):f.insertBefore(d,
f.firstChild)}}(e),!0),"R"==n?c[e]=b.createItem(h,g,e):"I"==n&&(l<c.length?c.splice(e,0,b.createItem(h,g,e)):c.push(b.createItem(h,g,e))),e++));b.doUpdate(g,k)},parseExpr:function(a){a=a.split(" ");var b,c,d,e,f;b=0;for(c=a.length;b<c;b++)if(f=a[b],""!=f&&"in"!=f)if(e){d=a.slice(b).join(" ");break}else e=f;this.model=d;this.itemName=e||"item"}},{$stopRenderer:!0}));var Ua=ia.createFunc,wa=function(){return!0},la=function(a){if(a instanceof la)return a;if(!(this instanceof la))return new la(a);for(var b in a)if(!this[b])try{this[b]=
a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,e=a.button;m(this.pageX)&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=
a.defaultPrevented||m(a.defaultPrevented)&&!1===a.returnValue?wa:ka;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};la.prototype={isDefaultPrevented:ka,isPropagationStopped:ka,isImmediatePropagationStopped:ka,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=wa;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=wa;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=
this.originalEvent;this.isImmediatePropagationStopped=wa;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};O.lib.NormalizedEvent=la;(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=a;"enter"==b&&(b="keyup");Q("mjs-"+a,1E3,function(c,g,k){var h=Ua(k);r(g,b,function(b){b=b||window.event;b=
new la(b);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;try{h(c)}catch(e){oa(e)}delete c.$event;c instanceof K?c.$root.$check():c.$$watchers&&c.$$watchers.$checkAll();b.preventDefault();return!1})})})(a[b])})();Q("mjs-show",500,E(null,"MetaphorJs.view.AttributeHandler",{initial:!0,initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,c=function(){b.display=a?"":"none"};this.initial?c():U(this.node,a?"show":"hide",function(){a&&(b.display="")},!0).done(c)},
onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));Q("mjs-hide",500,E(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));Q("mjs-if",500,E(null,"MetaphorJs.view.AttributeHandler",{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;delete this.parentEl;
this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},f=function(){c.removeChild(d)};b?qa(d)||(a.initial?e():U(d,"enter",e,!0)):qa(d)&&(a.initial?f():U(d,"leave",null,!0).done(f));a.initial=!1}}));Q("mjs-ignore",0,ka);Q("mjs-include",900,function(a,b,c,d){a=new ja({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});Q("mjs-init",250,function(a,
b,c){b.removeAttribute("mjs-init");Ua(c)(a)});var Ka=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},La=navigator.userAgent.toLowerCase(),db=function(){var a=parseInt((/android (\d+)/.exec(La)||[])[1],10)||!1;return function(){return a}}(),Va=function(){var a=parseInt((/msie (\d+)/.exec(La)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(La)||[])[1],10)||!1);return function(){return a}}(),Wa=function(){var a={};return function(b){if(void 0===a[b]){if("input"==
b&&9==Va())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),Ma=function(a,b,c,d){this.el=a;this.cb=b;this.scb=d;this.cbContext=c;this.inputType=b=a.getAttribute("mjs-input-type")||a.type.toLowerCase();this.listeners=[];c=a.type?a.type.toLowerCase():"";this.submittable="input"==a.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==b?this.initRadioInput():"checkbox"==b?this.initCheckboxInput():this.initTextInput()};Ma.prototype={el:null,inputType:null,cb:null,
scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,b=this.listeners,c=this.radio,d=this.el,e,f,g,k;e=0;for(f=b.length;e<f;e++)if("radio"==a)for(g=0,k=c.length;g<k;g++)Ka(c[g],b[e][0],b[e][1]);else Ka(d,b[e][0],b[e][1]);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var a=this.el,b=a.type,a=a.name,c,d,e;this.onRadioInputChangeDelegate=n(this.onRadioInputChange,this);if(document.querySelectorAll)c=
document.querySelectorAll("input[name="+a+"]");else{var f=document.getElementsByTagName("input"),g;c=[];d=0;for(e=f.length;d<e;d++)g=f[d],g.type==b&&g.name==a&&c.push(g)}this.radio=c;this.listeners.push(["click",this.onRadioInputChangeDelegate]);d=0;for(e=c.length;d<e;d++)r(c[d],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=n(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);r(this.el,"click",
this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,b=this,c=b.el,d=b.listeners,e;if(!db()){var f=function(){a=!0},g=function(){a=!1;k()};d.push(["compositionstart",f]);d.push(["compositionend",g]);r(c,"compositionstart",f);r(c,"compositionend",g)}var k=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()};if(Wa("input"))d.push(["input",k]),r(c,"input",k);else{var h=function(a){e||(e=window.setTimeout(function(){k(a);e=null},0))},f=function(a){a=a||window.event;var c=
a.keyCode;if(13==c&&b.submittable&&b.scb)return b.scb.call(b.cbContext,a);91===c||15<c&&19>c||37<=c&&40>=c||h(a)};d.push(["keydown",f]);r(c,"keydown",f);Wa("paste")&&(d.push(["paste",h]),d.push(["cut",h]),r(c,"paste",h),r(c,"cut",h))}d.push(["change",k]);r(c,"change",k)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=this.getValue();this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;
this.cb.call(this.cbContext,a.checked?a.getAttribute("value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;this.cb.call(this.cbContext,(a.target||a.srcElement).value)},setValue:function(a){var b=this.inputType,c,d;if("radio"==b)for(b=this.radio,c=0,d=b.length;c<d;c++){if(b[c].value==a){b[c].checked=!0;break}}else"checkbox"==b?(b=this.el,b.checked=!0===a||a==b.value):Ja(this.el,a)},getValue:function(){var a=this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return a[b].value;
return null}return"checkbox"==a?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(ua(this.el))}};O.lib.Input=Ma;Q("mjs-model",1E3,E(null,"MetaphorJs.view.AttributeHandler",{inProg:!1,input:null,binding:null,initialize:function(a,b,c){this.node=b;this.input=new Ma(b,this.onInputChange,this);this.binding=b.getAttribute("mjs-data-binding")||"both";var d=this.input.getValue();this.supr(a,b,c);a=this.watcher.getLastResult();if("scope"!=this.binding&&this.watcher&&(d||a&&this.watcher.hasInputPipes()))this.onInputChange(a||
d)},onInputChange:function(a){var b=this.scope;"scope"!=this.binding&&(a&&q(a)&&-1!=a.indexOf("\\{")&&(a=a.replace(/\\{/g,"{")),this.watcher.setValue(a),this.inProg=!0,b instanceof K?b.$root.$check():this.watcher.checkAll(),this.inProg=!1)},destroy:function(){this.input.destroy();delete this.input;this.supr()},onChange:function(){var a=this.watcher.getLastResult();"input"==this.binding||this.inProg||this.input.setValue(a)}}));var eb=ia.createGetter;Q("mjs-options",100,E(null,"MetaphorJs.view.AttributeHandler",
{model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,fragment:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-options");this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&this.defOption.setAttribute("mjs-default-option","");try{this.watcher=ga(a,this.model,this.onChange,this,null,ba)}catch(d){oa(d)}this.render(X(this.watcher.getValue()))},onChange:function(){this.render(X(this.watcher.getValue()))},
renderOption:function(a,b,c){var d=this.groupEl||this.fragment,e=Va();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=document.createElement("optgroup"),d.setAttribute("label",a.group),a.disabledGroup&&d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;e&&9>e&&(b.innerHTML=
a.name);a.disabled&&b.setAttribute("disabled","disabled");d.appendChild(b)},render:function(a){var b=this.node,c=ua(b),d=this.defOption,e=this.scope.$new(),f,g;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);f=0;for(g=a.length;f<g;f++)this.renderOption(a[f],f,e);d&&b.insertBefore(d,b.firstChild);e.$destroy();b.appendChild(this.fragment);this.fragment=null;Ja(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=
a,a="{name: .item, value: .$index}"):(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=eb(a)}}));(function(){var a="selected checked disabled readonly required open".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){Q("mjs-"+a,1E3,E(null,"MetaphorJs.view.AttributeHandler",{onChange:function(){this.watcher.getLastResult()?this.node.setAttribute(a,!0):this.node.removeAttribute(a)}}))})(a[b])})();var Xa=function(a){var b;a:{for(var c=a,d;c;){d=S(c,"mjs-transclude");if(void 0!=d){b=d;
break a}c=c.parentNode}b=void 0}if(b){a.firstChild&&S(a,"mjs-transclude",ca(a.childNodes));c=a.parentNode;d=a.nextSibling;b=ta(b);var e=X(b.childNodes);c.removeChild(a);c.insertBefore(b,d);return e}return null};Q("mjs-transclude",1E3,function(a,b){return Xa(b)});Q("mjs-view",200,function(a,b,c){b.removeAttribute("mjs-view");pa(c||"MetaphorJs.cmp.View",{scope:a,node:b},a,b);return!1});aa=aa.registerTagHandler;aa("mjs-include",900,function(a,b,c,d){return(new ja({scope:a,node:b,tpl:b.getAttribute("src"),
parentRenderer:d,replace:!0})).initPromise});aa("mjs-transclude",900,function(a,b){return Xa(b)});(function(){var a=function(a,b,e){if(""===b||m(b))return!0;if(!m(a)){if(sa(a))return a===b;if(e instanceof RegExp)return b.test(""+a);if("strict"==e)return""+a===""+b;if(!0===e||null===e||m(e))return-1!=""+a.indexOf(b);if(!1===e)return-1==""+a.indexOf(b)}return!1},b=function(b,d,e){if(L(b)){var f,g;for(f in d)if("$"==f)for(g in b){if(a(b[g],d.$,e))return!0}else if(a(b[f],d[f],e))return!0}else return m(d.$)?
!0:a(b,d.$,e);return!1};P("filter.filter",function(a,d,e,f){d=e;L(d)||(d={$:d});e=[];var g,k;g=-1;for(k=a.length;++g<k;)b(a[g],d,f)&&e.push(a[g]);return e})})();P("filter.fromList",function(a,b,c){c=c||", ";return a&&a.length?(v(a)||(a=X(a)),a.join(c)):""});P("filter.l",function(a,b){return b.$app.lang.get(a)});P("filter.limitTo",function(a,b,c){b=q(a);if(!v(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;
c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});P("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});P("filter.lowercase",function(a){return a.toLowerCase()});var fb={};P("filter.moment",function(a,b,c){c=fb[c]||c;return moment(a).format(c)});var gb={};P("filter.numeral",function(a,b,c){c=gb[c]||
c;return numeral(a).format(c)});P("filter.p",function(a,b,c){return b.$app.lang.plural(a,parseInt(c,10)||0)});P("filter.sortBy",function(a,b,c,d){d||(d="asc");a=a.slice();a.sort(function(a,b){var d=typeof a,k=a,h=b;if(d!=typeof b)return 0;"object"==d&&(k=a[c],h=b[c]);if("number"==typeof k)return k-h;k=(""+k).toLowerCase();h=(""+h).toLowerCase();return k===h?0:k>h?1:-1});return"desc"==d?a.reverse():a});P("filter.toArray",function(a){return X(a)});P("filter.toList",function(a,b,c,d){d=d||void 0;c=c||
"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=ya(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=T(a[b]));return a});P("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});P("filter.uppercase",function(a){return a.toUpperCase()});var hb=function(a,b,c){a.removeAttribute("mjs-app");try{return pa(b||"MetaphorJs.cmp.App",!1,c,a,[a,c])}catch(d){return oa(d),M.reject(d)}};(function(a){var b=!1,c=!0,d=window,e=d.document,
f=e.documentElement,g=function(c){if("readystatechange"!=c.type||"complete"==e.readyState)Ka("load"==c.type?d:e,c.type,g),!b&&(b=!0)&&a.call(d,c.type||c)},k=function(){try{f.doScroll("left")}catch(a){setTimeout(k,50);return}g("poll")};if("complete"==e.readyState)a.call(d,"lazy");else{if(e.createEventObject&&f.doScroll){try{c=!d.frameElement}catch(h){}c&&k()}r(e,"DOMContentLoaded",g);r(e,"readystatechange",g);r(d,"load",g)}})(function(){var a=Fa("[mjs-app]"),b,c,d,e=function(a){a.run()};b=-1;for(c=
a.length;++b<c;)d=a[b],hb(d,d.getAttribute&&d.getAttribute("mjs-app")).done(e)});"undefined"!=typeof global?global.MetaphorJs=O:window.MetaphorJs=O})();
