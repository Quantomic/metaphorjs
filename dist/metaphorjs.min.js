(function(){var v=function(a){return"function"==typeof a},$a=Object.prototype.toString,I=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var c=a[$a.call(b)];return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),r=function(a){return"string"==typeof a||0===I(a)},Z=function(a){if(null===a||"object"!=typeof a)return!1;
a=I(a);return 2<a||-1==a},Ea=function(a,b){var c={};a||(a="undefined"!=typeof global?global:window);this.register=function(d,e){var f;f=d;var g=f.split("."),h,k=g.pop();h=g.join(".");var m=g.length,p,V=a;if(c[h])f=[c[h],k,f];else{if(0<m)for(h=0;h<m;h++){p=g[h];if(b&&0==h)if(p==b){V=a;continue}else f=b+"."+f;void 0===V[p]&&(V[p]={});V=V[p]}else b&&(f=b+"."+f);f=[V,k,f]}g=f[0];k=f[1];Z(g)&&void 0===g[k]&&(g[k]=e,c[f[2]]=e);return e};this.exists=function(a){return void 0!==c[a]};this.get=function(d,
e){if(void 0!==c[d])return c[d];if(b&&void 0!==c[b+"."+d])return c[b+"."+d];if(!e){var f=d.split("."),g,h=f.length,k,m=a;for(g=0;g<h;g++)if(k=f[g],b&&0==g&&k==b)m=a;else{if(void 0===m[k])return;m=m[k]}m&&(c[d]=m);return m}};this.add=function(a,e){b&&0!==a.indexOf(b)&&(a=b+"."+a);void 0===c[a]&&(c[a]=e);return e};this.remove=function(a){delete c[a]}};Ea.prototype={register:null,exists:null,get:null,add:null,remove:null};var T=Array.prototype.slice,oa=function(a,b,c){setTimeout(function(){a.apply(b,
c||[])},0)},aa=function(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)oa(function(){console.log(a);b&&console.log(b)});else throw a;},ba=function(a){a||(a=new Ea);var b=function(a,b){return e(function(){},a,b)},c=function(a,b,c){return function(){var d,e=this.supr;this.supr="__construct"==b?a.prototype[b]||a.prototype.constructor:a.prototype[b]||function(){};d=c.apply(this,arguments);this.supr=e;return d}},d=function(a,b,d){for(var e in b)b.hasOwnProperty(e)&&(a[e]=!v(b[e])||
!v(d.prototype[e])&&d.prototype[e]?b[e]:c(d,e,b[e]))},e=function(a,b,c){var e=function(){};e.prototype=a.prototype;e=new e;c&&(b.__construct=c);var f=function(){this.__construct&&this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};d(e,b,a);e.constructor=f;f.prototype=e;f.prototype.getClass=function(){return f.__class};f.prototype.getParentClass=function(){return f.__parentClass};f.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=
a.prototype;b=new b;c=a.prototype.constructor.apply(b,arguments);return Z(c)?c:b}}(f);return f},f=function(c,d,f,m,p,V){null===c&&(c="");v(c)?(p=f,r(d)?(p=m,m=f):(m=d,f=c,d=null),c=null):r(c)||(p=d,m=c,c=f=d=null);r(d)||v(d)||(p=m,m=f,f=d,d=null);v(f)||(p=m,m=f,f=null);m=m||{};var l=d&&r(d)?a.get(d):d;if(d&&!l)throw Error(d+" not found");d=l?e(l,m,f):b(m,f);d.__isMetaphorClass=!0;d.__parent=l;d.__parentClass=l?l.__class:null;d.__class=c;if(p)for(var z in p)p.hasOwnProperty(z)&&(d[z]=p[z]);c&&(V?a.add(c,
d):a.register(c,d));p&&p.alias&&a.add(p.alias,d);return d};this.factory=function(b){var c=a.get(b),d=T.call(arguments,1);if(!c)throw Error(b+" not found");return c.__instantiate.apply(this,d)};this.isSubclassOf=function(b,c){var d=b,e=a.get;r(c)||(c=c.getClass?c.getClass():c.prototype.constructor.__class);for(r(b)&&(d=e(b));d;){if(d.prototype.constructor.__class==c)return!0;d&&(d=d.getParentClass?e(d.getParentClass()):d.__parent)}return!1};this.isInstanceOf=function(b,c){var d=r(c)?a.get(c):c;return d?
b instanceof d:!1};this.define=f;this.defineCache=function(a,b,c,d,e){return f(a,b,c,d,e,!0)};this.extend=function(a,b,c,d){return f(null,a,b,c,d)}};ba.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null,extend:null};var S=new Ea({lib:{},cmp:{},view:{}},"MetaphorJs"),C=(new ba(S)).define,n=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},ia=function(a){return"object"==typeof a&&3===I(a)&&!a.nodeType},
xa=function(a){return!0===a||!1===a},Fa=function(a){return null===a},M=function(){return function b(){var c=!1,d=!1,e=T.call(arguments),f=e.shift(),g,h,k;xa(e[e.length-1])&&(c=e.pop());xa(e[e.length-1])&&(d=c,c=e.pop());for(;e.length;)if(g=e.shift())for(h in g)if(g.hasOwnProperty(h)&&void 0!==(k=g[h]))if(d)if(f[h]&&ia(f[h])&&ia(k))b(f[h],k,c,d);else{if(!0===c||void 0==f[h])ia(k)?(f[h]={},b(f[h],k,c,!0)):f[h]=k}else if(!0===c||void 0==f[h])f[h]=k;return f}}(),P=function(){},l=function(a,b,c){return a&&
a.getAttribute?void 0===c?a.getAttribute(b):null===c?a.removeAttribute(b):a.setAttribute(b,c):null},W=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),X=function(){this.events={}};X.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new Ga(a,b));return c[a]},getEvent:function(a){a=
a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new Ga(a));return e[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],
b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,T.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),
delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=n(this[c],this));this.api=b}return this.api}};var Ga=function(a,b){this.name=a;this.listeners=[];this.map=
{};this.hash=W();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===b?null:b};Ga.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var f=++this.lid,g=c.first||!1;e[d]=f;a={fn:a,scope:b,uniScope:e,id:f,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};g?this.listeners.unshift(a):
this.listeners.push(a);this.map[f]=a;return f},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,f;f=a==parseInt(a)?a:(b||a)[d];if(!f)return!1;for(var g=0,h=e.length;g<h;g++)if(e[g].id==f){c=g;delete e[g].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[f];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=v(a)?b[this.uni]:a;if(!d)return!1;for(var e=0,f=c.length;e<f;e++)if(c[e].id==d)return!0;
return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=T.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;
for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:T.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};var L=function(a){return"object"==typeof a&&5===I(a)},B=function(){return String.prototype.trim?function(a){return r(a)?a.trim():a}:function(a){return r(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,
""):a}}(),Ha=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},Ia=function(){var a=function(b,c){if(b===c)return!0;if(null===b||null===c)return!1;if(b!==b&&c!==c)return!0;var d=typeof b,e;if(d==typeof c&&"object"==d)if(L(b)){if(!L(c))return!1;if((d=b.length)==c.length){for(e=0;e<d;e++)if(!a(b[e],c[e]))return!1;return!0}}else{if(10===I(b))return 10===I(c)&&b.getTime()==c.getTime();if(9===I(b)&&9===I(c))return b.toString()==c.toString();if(Ha(b)||Ha(c)||L(c))return!1;d={};for(e in b)if(("$"!==
e.charAt(0)||"object"!=typeof b[e])&&!v(b[e])){if(!a(b[e],c[e]))return!1;d[e]=!0}for(e in c)if(!d.hasOwnProperty(e)&&"$"!==e.charAt(0)&&void 0!==c[e]&&!v(c[e]))return!1;return!0}return!1};return a}(),Qa=function(){var a=function(b,c){if(Ha(b))throw Error("Cannot copy window object");if(c){if(b===c)throw Error("Objects are identical");if(L(b))for(var d=c.length=0;d<b.length;d++)c.push(a(b[d]));else{for(d in c)delete c[d];for(d in b)c[d]=a(b[d])}}else(c=b)&&(L(b)?c=a(b,[]):10===I(b)?c=new Date(b.getTime()):
9===I(b)?c=new RegExp(b.source):Z(b)&&(c=a(b,{})));return c};return a}(),qa=function(a){a=I(a);return 3>a&&-1<a},ja,ca;ja=ca=function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,b=function(a){if(!r(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},c=function(a,b){var c=a.length,d=b.length,e=Array(c+1),f=Array(c+1),h,k,g,m,p=0;if(c==d&&0==c)return{changes:0,distance:0,prescription:[]};for(h=0;h<=c;h++)e[h]=Array(d+1),f[h]=Array(d+1),e[h][0]=h,f[h][0]=
"D";for(h=0;h<=d;h++)e[0][h]=h,f[0][h]="I";for(h=1;h<=c;h++)for(k=1;k<=d;k++)g=Ia(a[h-1],b[k-1])?0:1,e[h][k-1]<e[h-1][k]&&e[h][k-1]<e[h-1][k-1]+g?(e[h][k]=e[h][k-1]+1,f[h][k]="I"):e[h-1][k]<e[h-1][k-1]+g?(e[h][k]=e[h-1][k]+1,f[h][k]="D"):(e[h][k]=e[h-1][k-1]+g,f[h][k]=1==g?"R":"-");m=[];h=c;k=d;do g=f[h][k],m.push(g),"-"!=g&&p++,"R"==g||"-"==g?(h--,k--):"D"==g?h--:k--;while(0!=h||0!=k);return{changes:p/m.length,distance:e[c][d],prescription:m.reverse()}},d,e=function(a,c,e,f,h,k){d||(d=new X);var m=
W(),p;k&&(this.namespace=k,this.nsGet=k.get);this.origCode=c;L(a)&&null===c?p="array":(r(c)||(f=e,e=c,c=null,p="object"),r(a)&&(f=e,e=c,c=a,a=null),c&&a&&(p=a.hasOwnProperty(c)?"attr":"expr"),c&&!a&&(p="expr"));if(e)d.on(m,e,f||this,{append:[h],allowDupes:!0});if("expr"==p){c=this._processInputPipes(c,a);c=this._processPipes(c,a);if(this.inputPipes||this.pipes)c=g(a,c),p=a.hasOwnProperty(c)?"attr":"expr";if(this.staticValue=b(c))p="static"}this.userData=h;this.code=c;this.id=m;this.type=p;this.obj=
a;"expr"==p&&(this.getterFn=pa(c));this.curr=this._getValue()};e.prototype={namespace:null,nsGet:null,staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,prev:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,_indexArrayItems:function(a){var b="$$"+this.id,c,d,e;if(a)for(c=0,d=a.length;c<d;c++)e=a[c],!e||qa(e)||e[b]||(e[b]=W())},_processInputPipes:function(a,b){if(-1==a.indexOf(">>"))return a;for(var c=0,
d=a.length,e=[],f,h,k,g=a;c<d&&-1!=(f=a.indexOf(">>",c));)h=a.charAt(f-1),k=a.charAt(f+2),"\\"!=h&&"'"!=h&&'"'!=h&&"'"!=k&&'"'!=k&&(c=B(a.substring(c,f)).split(":"),g=a.substr(f+2),this._addPipe(e,c,b,this.onInputParamChange)),c=f+2;e.length&&(this.inputPipes=e);return B(g)},_addPipe:function(a,b,c,d){var e=b.shift(),h=null,k=[],g;this.nsGet&&(h=this.nsGet("filter."+e,!0));h||(h=window[e]||c[e]);if(v(h)){e=-1;for(g=b.length;++e<g;k.push(f(c,b[e],d,this,null,this.namespace)));a.push([h,b,k])}},_processPipes:function(a,
b){if(-1==a.indexOf("|"))return a;for(var c=0,d=a.length,e=[],f,h,k,g=!1,m=a;c<d;)if(-1!=(f=a.indexOf("|",c)))h=a.charAt(f-1),k=a.charAt(f+1),"|"!=h&&"'"!=h&&'"'!=h&&"|"!=k&&"'"!=k&&'"'!=k&&(g?(c=B(a.substring(c,f)).split(":"),this._addPipe(e,c,b)):(g=!0,m=B(a.substring(0,f)))),c=f+1;else{g&&(c=B(a.substr(c)).split(":"),this._addPipe(e,c,b,this.onPipeParamChange));break}e.length&&(this.pipes=e);return m},_checkCode:function(){var a=this._getValue(),b=!1,e=this.curr;if(L(e)&&L(a))return b=c(e,a),b.changes?
(this.curr=a.slice(),this.prev=e,d.trigger(this.id,b,a,e),!0):!1;Ia(e,a)||(this.curr=a,this.prev=e,d.trigger(this.id,a,e),b=!0);return b},_checkObject:function(){var a=this.obj,b=this.curr;return Ia(b,a)?!1:(this.curr=Qa(a),this.prev=b,d.trigger(this.id,a,b),!0)},_checkArray:function(){var a=this.curr,b=this.obj,e=c(a,b);return e.changes?(this.curr=b.slice(),this.prev=a,d.trigger(this.id,e,b,a),!0):!1},_getValue:function(){var a;switch(this.type){case "static":a=this.staticValue;break;case "attr":a=
this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);void 0===a&&(a="");break;case "object":a=Qa(this.obj);break;case "array":a=this.obj}L(a)&&(this.inputPipes||this._indexArrayItems(a),a=a.slice());this.unfiltered=a;return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,e,f=b.length,h=this.obj,k,g;for(c=0;c<f;c++){e=b[c][1];d=[];k=-1;for(g=e.length;++k<g;d.push(n(e[k],h)));d.unshift(h);d.unshift(a);a=b[c][0].apply(null,d)}}return a},subscribe:function(a,
b,c){d.on(this.id,a,b,c)},unsubscribe:function(a,b){return d.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||this.curr},getPrevValue:function(){return null===this.prev?this._getValue():this.prev},getMovePrescription:function(a,b){var c=this.getPrevValue(),d=this.curr,e=[],f,h,k={},g,m,p;f=0;for(h=c.length;f<h;f++)k[b(c[f])]=f;m=0;
var s={};g=0;for(h=a.length;g<h;g++)f=a[g],"D"!=f&&(c=b(d[m]),void 0!==c&&!0!==s[c]&&void 0!==(p=k[c])?(e.push(p),s[c]=!0):e.push(f),m++);return e},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);if("attr"==b)this.obj[this.code]=a;else if("expr"==b)this.setterFn||(this.setterFn=s(this.code)),this.setterFn(this.obj,a);else if("array"==b)this.obj=a;else throw"Cannot set value";},onInputParamChange:function(){this.setValue(this.lastSetValue)},onPipeParamChange:function(){this.check()},
check:function(){switch(this.type){case "expr":case "attr":case "static":return this._checkCode();case "object":return this._checkObject();case "array":return this._checkArray()}return!1},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,
b){var c=this.id;a&&d.un(c,a,b);return d.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,c,e,f,h,k;this.itv&&this.clearInterval();if(a)for(c=-1,e=a.length;++c<e;)for(k=a[c][2],f=-1,h=k.length;++f<h;)k[f].unsubscribeAndDestroy(this.check,this);if(b)for(c=-1,e=b.length;++c<e;)for(k=b[c][2],f=-1,h=k.length;++f<h;)k[f].unsubscribeAndDestroy(this.onInputParamChange,this);this.obj&&delete this.obj.$$watchers[this.origCode];delete this.id;delete this.curr;delete this.prev;
delete this.unfiltered;delete this.obj;delete this.pipes;delete this.inputPipes;delete this.origCode;delete this.code;delete this.getterFn;delete this.setterFn;delete this.lastSetValue;delete this.staticValue;delete this.userData;delete this.namespace;delete this.nsGet;d.destroyEvent(this.id)}};var f=function(a,b,c,d,f,h){b=g(a,B(b));return a?(a.$$watchers||(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?b++:"$"==a.charAt(0)&&this[a]instanceof e&&this[a].check()&&
b++;return b},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof e)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].subscribe(c,d,{append:[f],allowDupes:!0}):a.$$watchers[b]=new e(a,b,c,d,f,h),a.$$watchers[b]):new e(a,b,c,d,f,h)},g=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},h=Function,k=function(a,b,c,d){for(;c&&!c.$isRoot;)if(c=c.$parent)try{return 4==arguments.length?
b.call(null,c,d,P,b):b.call(null,c,P,b)}catch(e){}null!==a&&aa(a)},m=function(a,b){return function(){var c=T.call(arguments);c.push(k);c.push(a);c=a.apply(null,c);if(!b||void 0!==c&&8!=I(c))return c;c=T.call(arguments);c.unshift(a);c.unshift(null);return k.apply(null,c)}},p={},l=0,pa=function(b){try{return p[b]?p[b]:(l++,p[b]=m(new h("____","$$interceptor","$$itself","".concat("try {","return ",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }")),
!0))}catch(c){return aa(c),P}},z={},H=0,s=function(b){try{if(!z[b]){H++;var c=b.replace(a,"$1____.$3");return z[b]=m(new h("____","$$$$","$$interceptor","$$itself","".concat("try {",c," = $$$$",";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____, $$$$); }")))}return z[b]}catch(d){return aa(d),P}},u={},q=0,n=function(a,c){var d;return(d=b(a))?d:pa(a)(c)},x=function(){1E3<=l&&(p={});1E3<=H&&(z={});1E3<=q&&(u={})};e.create=f;e.unsubscribeAndDestroy=function(a,b,c,d){b=B(b);(a=
a.$$watchers)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};e.normalizeExpr=g;e.prepareCode=function(b){return b.replace(a,"$1____.$3")};e.createGetter=pa;e.createSetter=s;e.createFunc=function(b){try{return u[b]?u[b]:(q++,u[b]=m(new h("____","$$interceptor","$$itself","".concat("try {",b.replace(a,"$1____.$3"),";} catch (thrownError) { return $$interceptor(thrownError, $$itself, ____); }"))))}catch(c){return aa(c),P}};e.eval=n;e.enableResetCacheInterval=function(){setTimeout(x,1E4)};return e}();
var Y=function(a){this.$$observable=new X;M(this,a,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};Y.prototype={$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new Y({$parent:this,$root:this.$root,$app:this.$app})},$newIsolated:function(){return new Y({$app:this.$app})},$on:function(a,b,c){return this.$$observable.on(a,
b,c)},$un:function(a,b,c){return this.$$observable.un(a,b,c)},$watch:function(a,b,c){return ja.create(this,a,b,c,null)},$unwatch:function(a,b,c){return ja.unsubscribeAndDestroy(this,a,b,c)},$get:function(a){for(var b=this;b;){if(void 0!==b[a])return b[a];b=b.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$check:function(){var a;this.$$checking||(this.$$checking=!0,this.$$watchers&&(a=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||
this.$$observable.trigger("check",a))},$destroy:function(){this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;delete this.$app;delete this.$root;delete this.$parent;this.$$watchers&&(this.$$watchers.$destroyAll(),delete this.$$watchers);this.$$destroyed=!0}};var U=function(a){if(a&&void 0!=!a.length&&!r(a)){for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b}return a?[a]:[]},R=function(a){var b;return a&&(Z(a)||v(a))?v(b=a.then)?b:!1:!1},ra=S.get,Ja=
function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,f=/(~|>|\+)/,g=/ +/,h=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,k=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,m=/\D/,p=/[^(]*\(([^)]*)\)/,V=/\(.*/,pa=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,z=document,H=!!z.getElementsByClassName,s=!!z.querySelectorAll,u={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==
a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.firstChild;c++;do if(1==f.nodeType&&(f.nodeIndex=++c)&&a===f&&(c+d)%e)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=
a.parentNode.lastChild;c++;do if(1==f.nodeType&&(f.nodeLastIndex=c++)&&a===f&&(c+d)%e)return 0;while(f=f.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&z.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},
q={},n=function(a){return q[a]||(q[a]=new RegExp("(^| +)"+a+"($| +)"))},x={"":function(a,b){return null!==l(a,b)},"=":function(a,b,c){var d;return(d=l(a,b))&&d===c},"&=":function(a,b,c){var d;return(d=l(a,b))&&n(c).test(d)},"^=":function(a,b,c){var d;return(d=l(a,b)+"")&&!d.indexOf(c)},"$=":function(a,b,c){var d;return(d=l(a,b)+"")&&d.indexOf(c)==d.length-c.length},"*=":function(a,b,c){var d;return(d=l(a,b)+"")&&-1!=d.indexOf(c)},"|=":function(a,b,c){var d;return(d=l(a,b)+"")&&(d===c||!!d.indexOf(c+
"-"))},"!=":function(a,b,c){var d;return!(d=l(a,b))||!n(c).test(d)}},J=function(J,Q){Q=Q||z;var A=[],l=null,q,n,r,w,v,y,t;if(s)try{A=U(Q.querySelectorAll(J.replace(b,'="$1"')))}catch(G){l=!0}if(!s||l)if(a.test(J))switch(l=0,J.charAt(0)){case "#":l=J.slice(1);A=z.getElementById(l);A.id!==l&&(A=z.all[l]);A=A?[A]:[];break;case ".":q=J.slice(1);if(H)A=U((A=Q.getElementsByClassName(q)).length?A:[]);else{q=" "+q+" ";n=Q.getElementsByTagName("*");for(r=0;w=n[r++];)-1!=(" "+w.className+" ").indexOf(q)&&(A[l++]=
w);A=l?A:[]}break;case ":":n=Q.getElementsByTagName("*");r=0;v=J.replace(p,"$1");for(y=J.replace(V,"");w=n[r++];)u[y]&&!u[y](w,v)&&(A[l++]=w);A=l?A:[];break;case "[":n=Q.getElementsByTagName("*");r=0;w=pa.exec(J);q=w[1];t=w[2]||"";for(v=w[3];w=n[r++];)x[t]&&(x[t](w,q,v)||"class"===q&&x[t](w,"className",v))&&(A[l++]=w);A=l?A:[];break;default:A=U((A=Q.getElementsByTagName(J)).length?A:[])}else{for(var K=J.split(c),L=K.length-1,N=!!L,M,O,E,P,B,F,C,I,S,D,R,T;l=K[L--];){O=(M=l.replace(d,"$1%").replace(e,
"$1&").replace(f," $1 ").split(g)).length;r=0;P=" ";for(n=[Q];E=M[r++];)if(" "!==E&&">"!==E&&"~"!==E&&"+"!==E&&n){E=E.match(h);B=E[1]||"*";F=E[2];C=E[3]?" "+E[3]+" ":"";q=E[4];t=E[5]||"";y=E[7];v="nth-child"===y||"nth-last-child"===y?k.exec("even"===E[8]&&"2n"||"odd"===E[8]&&"2n%1"||!m.test(E[8])&&"0n%"+E[8]||E[8]):E[8];I=[];l=S=0;for(R=r==O;D=n[S++];)switch(P){case " ":T=D.getElementsByTagName(B);for(D=0;w=T[D++];)F&&w.id!==F||C&&-1==(" "+w.className+" ").indexOf(C)||!(!q||x[t]&&(x[t](w,q,E[6])||
"class"===q&&x[t](w,"className",E[6])))||w.yeasss||(u[y]?u[y](w,v):y)||(R&&(w.yeasss=1),I[l++]=w);break;case "~":for(B=B.toLowerCase();(D=D.nextSibling)&&!D.yeasss;)1!=D.nodeType||"*"!==B&&D.nodeName.toLowerCase()!==B||F&&D.id!==F||C&&-1==(" "+D.className+" ").indexOf(C)||!(!q||x[t]&&(x[t](w,q,E[6])||"class"===q&&x[t](w,"className",E[6])))||D.yeasss||(u[y]?u[y](D,v):y)||(R&&(D.yeasss=1),I[l++]=D);break;case "+":for(;(D=D.nextSibling)&&1!=D.nodeType;);!D||D.nodeName.toLowerCase()!==B.toLowerCase()&&
"*"!==B||F&&D.id!==F||C&&-1==(" "+w.className+" ").indexOf(C)||!(!q||x[t]&&(x[t](w,q,E[6])||"class"===q&&x[t](w,"className",E[6])))||D.yeasss||(u[y]?u[y](D,v):y)||(R&&(D.yeasss=1),I[l++]=D);break;case ">":for(T=D.getElementsByTagName(B),r=0;w=T[r++];)w.parentNode!==D||F&&w.id!==F||C&&-1==(" "+w.className+" ").indexOf(C)||!(!q||x[t]&&(x[t](w,q,E[6])||"class"===q&&x[t](w,"className",E[6])))||w.yeasss||(u[y]?u[y](w,v):y)||(R&&(w.yeasss=1),I[l++]=w)}n=I}else P=E;if(N){if(!n.concat){I=[];for(D=0;w=n[D];)I[D++]=
w;n=I}A=n.concat(1==A.length?A[0]:A)}else A=n}for(l=A.length;l--;)A[l].yeasss=A[l].nodeIndex=A[l].nodeIndexLast=null}return A};J.is=function(a,b){var c=J(b,a.parentNode),d,e;d=-1;for(e=c.length;++d<e;)if(c[d]===a)return!0;return!1};return J}(),Ra=function(){var a=document.createTextNode("");return r(a.textContent)?"textContent":"nodeValue"}(),Sa=function(){var a=/\\{/g,b=new X,c=function(a,b,c,h,k){return!b||!r(b)||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new d(a,b,c,h,k)},d=function(a,b,c,d,
k){this.id=W();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=d;this.lang=a.$app?a.$app.lang:null;if(!0===k||!1===k)this.recursive=k;this.watchers=[];this.children=[];this.dataChangeDelegate=n(this.doDataChange,this);this.processed=this.processText(b);this.render()};d.prototype={id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(a,c){return b.on(this.id,
a,c)},unsubscribe:function(a,c){return b.un(this.id,a,c)},getString:function(){null===this.text&&this.render();var b=this.text;return-1!=b.indexOf("\\{")?b.replace(a,"{"):b},render:function(){var a=this.processed,b,c,h;this.children.length||this.createChildren();h=this.children;b=-1;for(c=h.length;++b<c;a=a.replace("---"+b+"---",h[b]instanceof d?h[b].getString():h[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,d,k,m="";b<c;)if(-1!=(d=a.indexOf("{{",b))&&-1!=(k=a.indexOf("}}",
d+2))&&"\\"!=a.substr(d-1,1))m+=a.substring(b,d),k!=d+2&&(m+=this.watcherMatch(a.substring(d+2,k))),b=k+2;else{b!==c&&(m+=a.substring(b));break}b=0;a=m;c=a.length;for(m="";b<c;)if(-1!=(d=a.indexOf("{[",b))&&-1!=(k=a.indexOf("]}",d+2))&&"\\"!=a.substr(d-1,1))m+=a.substring(b,d),k!=d+2&&(m+=this.watcherMatch(a.substring(d+2,k),!0)),b=k+2;else{b!==c&&(m+=a.substring(b));break}return m},watcherMatch:function(a,b){var c=this.watchers;if(b){a=B(a);var d=a.split("|"),k=B(d[0]);"."!=k.substr(0,1)&&(d[0]=
"'"+k+"'");1==d.length&&d.push("l");a=d.join(" | ")}c.push(ca(this.scope,a,this.onDataChange,this,null,S));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?b.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,b=this.children,
d=this.scope,h=this.recursive,k,m,p;k=-1;for(m=a.length;++k<m;)p=a[k].getLastResult(),b.push(h&&c(d,p,this,null,!0)||p)},destroyChildren:function(){var a=this.children,b,c;b=-1;for(c=a.length;++b<c;)a[b]instanceof d&&a[b].destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();b.destroyEvent(this.id);delete this.watchers;
delete this.children;delete this.origin;delete this.processed;delete this.text;delete this.scope;delete this.data;delete this.dataChangeDelegate;delete this.lang;this.changeTmt&&clearTimeout(this.changeTmt);delete this.changeTmt}};d.create=c;return d}(),G=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var e=a.shift();c(function(){e[0].apply(e[1],e[2]);a.length?d():b=!1},0)},e=function(c,e,f){f=f||[];a.push([c,e,f]);b||d()},f=
function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},g=function(a,b){if(a instanceof g)return a;if(!(this instanceof g))return new g(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=R(a))a instanceof g?a.then(n(this.resolve,this),n(this.reject,this)):(new g(c,a)).then(n(this.resolve,this),n(this.reject,this));else if(v(a))try{a.call(b,n(this.resolve,this),n(this.reject,this))}catch(d){this.reject(d)}else this.resolve(a)};
g.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=
R(a)){a instanceof g?a.then(n(this._processResolveValue,this),n(this._processRejectReason,this)):(new g(c,a)).then(n(this._processResolveValue,this),n(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new g,d=this._state;0==d||0!=this._wait?(a&&v(a)?this._fulfills.push([f(a,c),null]):this._fulfills.push([c.resolve,c]),b&&v(b)?this._rejects.push([f(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&v(a)?e(f(a,c),null,[this._value]):c.resolve(this._value):2==d&&(b&&v(b)?e(f(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,
this._value)}catch(c){aa(c)}},done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){aa(c)}},fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:n(this.then,
this),done:n(this.done,this),fail:n(this.fail,this),always:n(this.always,this)}},after:function(a){var b=this;if(R(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};v(a.done)?a.done(c):a.then(c)}return b}};g.fcall=function(a,b,c){return g.resolve(a.apply(b,c||[]))};g.resolve=function(a){var b=new g;b.resolve(a);return b};g.reject=function(a){var b=new g;b.reject(a);return b};g.all=function(a){if(!a.length)return g.resolve(null);
var b=new g,c=a.length,d=Array(c),e=c,f,l,n=function(a,c){d[c]=a;e--;0==e&&b.resolve(d)};for(f=0;f<c;f++)(function(c){l=a[f];l instanceof g?l.done(function(a){n(a,c)}).fail(b.reject,b):R(l)||v(l)?(new g(l)).done(function(a){n(a,c)}).fail(b.reject,b):n(l,c)})(f);return b};g.when=function(){return g.all(arguments)};g.allResolved=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=[],e=c,f,l,n=function(a){d.push(a);s()},s=function(){e--;0==e&&b.resolve(d)};for(f=0;f<c;f++)l=a[f],
l instanceof g?l.done(n).fail(s):R(l)||v(l)?(new g(l)).done(n).fail(s):n(l);return b};g.race=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d,e;for(d=0;d<c&&(e=a[d],e instanceof g?e.done(b.resolve,b).fail(b.reject,b):R(e)||v(e)?(new g(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};g.waterfall=function(a){if(!a.length)return g.resolve(null);for(var b=a.shift(),b=v(b)?g.fcall(b):g.resolve(c),c;c=a.shift();)R(c)?b=b.then(function(a){return function(){return a}}(c)):
v(c)?b=b.then(c):b.resolve(c);return b};g.counter=function(a){var b=new g;b.countdown=function(){a--;0==a&&b.resolve()};return b};return g}(),F=S.add,ba=function(){var a=[],b=[],c=!1,d=!1,e=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return{registerAttributeHandler:function(b,d,e){ra("attr."+b,!0)||(a.push({priority:d,name:b,handler:F("attr."+b,e)}),c=!1)},getAttributeHandlers:function(){c||(a.sort(e),c=!0);return a},registerTagHandler:function(a,c,e){ra("tag."+a,!0)||
(b.push({priority:c,name:a,handler:F("tag."+a,e)}),d=!1)},getTagHandlers:function(){d||(b.sort(e),d=!0);return b}}}(),ab=ba.getAttributeHandlers,Ka=function(){var a=null,b=Sa.create,c=function(a,b,c,d,e,g){var h=[];if(a&&!0!==a){if(a.nodeType){g.countdown+=1;f(a,c,d,e,g);return}h=U(a)}h.length||(h=U(b.childNodes));b=h.length;g.countdown+=b;for(a=-1;++a<b;f(h[a],c,d,e,g));},d=function(a,b){if(b)if(b.nodeType)a.push(b);else if(L(b))for(var c=-1,e=b.length;++c<e;d(a,b[c]));},e=/^(script|template|mjs-template|style)$/i,
f=function(a,b,d,f,g){if(a){var h,l=a.nodeName;g||(g={countdown:1});if(!l||!l.match(e))if(a.nodeType&&(h=b.call(d,a)),!1!==h){if(R(h)){h.done(function(e){!1!==e&&c(e,a,b,d,f,g);0==--g.countdown&&f&&f.call(d)});return}c(h,a,b,d,f,g)}0==--g.countdown&&f&&f.call(d)}},g=new X,h=function(a,b,c){this.id=W();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof Y&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)};h.prototype={id:null,el:null,scope:null,texts:null,parent:null,
destroyed:!1,_observable:null,on:function(a,b,c){return g.on(a+"-"+this.id,b,c)},un:function(a,b,c){return g.un(a+"-"+this.id,b,c)},createChild:function(a){return new h(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b;b=b.$app.inject(a,null,{$scope:e,$node:c,$attrValue:d,$renderer:this},[e,c,d,this]);return a.$stopRenderer?!1:b},processNode:function(c){var e=c.nodeType,f=this.texts,g=this.scope,h,n;if(3==
e){if(n=null!==l(c.parentNode,"mjs-recursive"),h=b(g,c[Ra],null,f.length,n))h.subscribe(this.onTextChange,this),f.push({node:c,tr:h}),this.renderText(f.length-1)}else if(1==e){a||(a=ab());h=[];var r=[],s,u,q,e="tag."+c.tagName.toLowerCase();if(s=ra(e,!0)){q=this.runHandler(s,g,c);if(!1===q)return!1;R(q)?h.push(q):d(r,q)}s=0;for(u=a.length;s<u;s++)if(n=a[s].name,null!==(q=l(c,n))){q=this.runHandler(a[s].handler,g,c,q);l(c,n,null);if(!1===q)return!1;R(q)?h.push(q):d(r,q)}if(h.length){var y=new G;G.all(h).done(function(a){d(r,
a);y.resolve(r)});return y}n=null!==l(c,"mjs-recursive");q=U(c.attributes);s=0;for(u=q.length;s<u;s++)!ra(e,!0)&&(h=b(g,q[s].value,null,f.length,n))&&(l(c,q[s].name,null),h.subscribe(this.onTextChange,this),f.push({node:c,attr:q[s].name,tr:h}),this.renderText(f.length-1));return r.length?r:!0}return!0},process:function(){f(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){g.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},
renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?("value"==c?a.node.value=b:"class"==c?a.node.className=b:"src"==c&&(a.node.src=b),l(a.node,c,b)):a.node[Ra]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&this.parent.un("destroy",this.destroy,this);delete this.texts;delete this.el;delete this.scope;delete this.parent;g.trigger("destroy-"+this.id)}}};return h}(),Ta=function(){var a,b=
function(){this.store={}};b.prototype={store:null,getApi:function(){return{value:n(this.value,this),constant:n(this.constant,this),factory:n(this.factory,this),service:n(this.service,this),provider:n(this.provider,this),resolve:n(this.resolve,this),inject:n(this.inject,this)}},instantiate:function(a,b,e){if(a.__instantiate)return a.__instantiate.apply(null,e);if(b)return a.apply(b,e);b=function(){};b.prototype=a.prototype;b=new b;a=a.apply(b,e);return Z(a)||!1===a?a:b},inject:function(a,b,e,f){e=
e||{};f=f||[];var g=this;if(v(a))if(a.inject)f=T.call(a.inject),f.push(a),a=f;else return g.instantiate(a,b,f);a=T.call(a);f=[];var h=a.pop(),k,m;k=-1;for(m=a.length;++k<m;f.push(g.resolve(a[k],e)));return G.all(f).then(function(a){return g.instantiate(h,b,a)})},value:function(a,b){this.store[a]={type:1,value:b}},constant:function(a,b){var e=this.store;e[a]||(e[a]={type:2,value:b})},factory:function(a,b,e,f){xa(e)&&(f=e,e=null);this.store[a]={type:3,singleton:f,fn:b,context:e}},service:function(a,
b,e){this.store[a]={type:4,singleton:e,fn:b}},provider:function(a,b){this.store[a+"Provider"]={name:a,type:5,fn:b,instance:null}},resolve:function(b,d){var e=this.store,f,g,h;if(void 0!==d[b])return d[b];if(g=e[b]){f=g.type;if(1==f||2==f)return g.value;if(3==f)h=this.inject(g.fn,g.context,d);else if(4==f)h=this.inject(g.fn,null,d);else if(5==f)return g.instance||(g.instance=G.resolve(this.inject(g.fn,null,d)).done(function(a){g.instance=a;e[g.name]={type:3,fn:a.$get,context:a}})),g.instance;g.singleton&&
(g.type=1,g.value=h,3==f&&R(h)&&h.done(function(a){g.value=a}));return d[b]=h}if(e[b+"Provider"])return this.resolve(b+"Provider",d),this.resolve(b,d);if(this===a)throw"Could not provide value for "+b;return a.resolve(b)},destroy:function(){delete this.store;delete this.scope}};b.global=function(){return a};a=new b;return b}(),bb=function(){var a=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;
case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},b=function(a){this.store={};a&&(this.locale=a)};b.prototype={store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var c=this.store;void 0===c[a]&&(c[a]=b)},load:function(a){M(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===c?"-- "+a+" --":c.get(a))},plural:function(b,c){var f=this.get(b),g=a(c,this.locale);return L(f)?f[g]:ia(f)?f[c]?f[c]:1==c&&void 0!=f.one?f.one:0>c&&void 0!=f.negative?f.negative:f.other:f}};var c=new b;b.global=function(){return c};return b}();C("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(a){a=a||{};this._observable=new X;
M(this,this._observable.getApi(),!0,!1);if(a.callback){var b=a.callback,c=b.scope||this;delete b.scope;for(var d in b)if(b.hasOwnProperty(d))this.on(d,b[d],c);delete a.callback}M(this,a,!0,!1)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",this);this._observable.destroy();delete this._observable}},onDestroy:P});C("MetaphorJs.cmp.App","MetaphorJs.cmp.Base",{lang:null,scope:null,renderer:null,cmpListeners:null,
components:null,initialize:function(a,b){var c=b instanceof Y?b:new Y(b),d,e;c.$app=this;this.supr();d=new Ta;e=new X;this.lang=new bb;M(this,d.getApi(),!0,!1);this.destroyProvider=n(d.destroy,d);M(this,e.getApi(),!0,!1);this.destroyObservable=n(e.destroy,e);this.scope=c;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",c.$root);this.value("$lang",this.lang);this.renderer=new Ka(a,c);d=T.call(arguments);
d[1]=c;this.initApp.apply(this,d)},initApp:P,run:function(){this.renderer.process()},getParentCmp:function(a){a=a.parentNode;for(var b;a;){if(b=l(a,"cmp-id"))return this.getCmp(b);a=a.parentNode}return null},onAvailable:function(a,b,c){var d=this.cmpListeners;d[a]||(d[a]=new G);b&&d[a].done(b,c);return d[a]},getCmp:function(a){return this.components[a]||null},registerCmp:function(a){var b=this;b.components[a.id]=a;b.onAvailable(a.id).resolve(a);a.on("destroy",function(a){delete b.cmpListeners[a.id];
delete b.components[a.id]})},destroy:function(){var a;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(a in this)this.hasOwnProperty(a)&&delete this[a]}});var za=function(){var a=function(b){if(3==b.nodeType)return b.parentElement?a(b.parentElement):!0;var c=document.documentElement;return b===c?!0:c.contains(b)};return a}(),N=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=W());var e=a[b];return void 0!==d?(e||(e=a[b]={}),e[c]=d):
e?e[c]:void 0}}(),ga=function(a){var b=document.createDocumentFragment();if(r(a)){var c=document.createElement("div");c.innerHTML=a;a=c.childNodes}if(a.nodeType)b.appendChild(a);else for(var c=-1,d=a.length>>>0;++c!==d;b.appendChild(a[0]));return b},Aa=function(a){var b,c,d;if(L(a)){d=[];b=0;for(c=a.length;b<c;b++)d.push(Aa(a[b]));return d}if(a)switch(a.nodeType){case 1:return a.cloneNode(!0);case 3:return document.createTextNode(a.innerText||a.textContent);case 11:return a.cloneNode(!0)}return null},
Ua=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",e="transitionDuration",f="transform",g=null;(function(){var g=document.createElement("div"),k=!1,m,p,l;if(void 0!==g.style.animationName)k=!0;else for(p=0,l=a.length;p<l;p++)if(m=a[p],void 0!==g.style[m+"AnimationName"]){k=!0;b=m+"AnimationDelay";c=m+"AnimationDuration";d=m+"TransitionDelay";e=m+"TransitionDuration";f=m+"Transform";break}return k})()&&(g={animationDelay:b,animationDuration:c,
transitionDelay:d,transitionDuration:e,transform:f});return function(){return g}}(),cb=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,d){var e,f,g=c.length;for(e=0;e<g;e++)f=a(c[e])+a(d[e]),b=Math.max(f,b);return b},c=Ua(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,f=c?c.transitionDuration:null,g=c?c.transitionDelay:null;return function(a){if(!c)return 0;var k=window.getComputedStyle?window.getComputedStyle(a,null):
a.style;a=0;var m=(k[d]||"").split(","),l=(k[e]||"").split(","),n=(k[f]||"").split(","),k=(k[g]||"").split(",");a=Math.max(a,b(a,m,l));return a=Math.max(a,b(a,n,k))}}(),La=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),ea=function(a,b){b&&(a.className=a.className.replace(La("(?:^|\\s)"+b+"(?!\\S)"),""))},sa=function(a){var b=N(a,"mjsAnimationQueue"),c,d;if(L(b)&&b.length){if(b=b[0])b.stages&&(c=b.position,d=b.stages,ea(a,d[c]),ea(a,d[c]+"-active")),b.deferred&&b.deferred.reject(b.el)}else v(b)?
b(a):"stop"==b&&$(a).stop(!0,!0);N(a,"mjsAnimationQueue",null)},Ma=function(a,b){return b?La("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},ha=function(a,b){b&&!Ma(a,b)&&(a.className+=" "+b)},ka=function(a){var b,c=a?"pageYOffset":"pageXOffset",d=a?"scrollTop":"scrollLeft";a=document;var e=a.body,f=a.documentElement;b=void 0!==window[c]?function(){return window[c]}:f.clientHeight?function(){return f[d]}:function(){return e[d]};return function(a){return a&&1==a.nodeType&&a!==e&&a!==f?a[d]:b()}},db=
ka(!0),eb=ka(!1),da=function(){var a,b;if("undefined"!=typeof window){var c=window;a=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame;b=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelRequestAnimationFrame;if(a)return function(c){var e=a(c);return function(){b(e)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),O=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],
leave:["mjs-leave"],move:["mjs-move"]},b=0,c=Ua(),d=!!c,e=function(a,b,c){var d=function(){(new Date).getTime()-b>=c?a():da(d)};da(d)},f=function k(a,b,c,d,g,l,s,n){var q=function(){var b=N(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==s?!1:(g.reject(a),!0)},r=function(){if(!q()){var d=c;c++;if(c==b.length){g.resolve(a);N(a,"mjsAnimationQueue").shift();var e=N(a,"mjsAnimationQueue");e.length?(e=e[0],f(e.el,e.stages,0,e.start,e.deferred,!1,e.id,e.step)):N(a,"mjsAnimationQueue",null)}else N(a,
"mjsAnimationQueue")[0].position=c,k(a,b,c,null,g,!1,s,n);ea(a,b[d]);ea(a,b[d]+"-active")}},x=function(){q()||(ha(a,b[c]+"-active"),G.resolve(n&&n(a,c,"active")).done(function(){if(!q()){var b=cb(a);b?e(r,(new Date).getTime(),b):da(r)}}))},J=function(){q()||(ha(a,b[c]),G.waterfall([n&&n(a,c,"start"),function(){return d?d(a):null}]).done(function(){!q()&&da(x)}))};l?da(J):J()},g=function(c,e,g,n,t,z){var H=new G,s=N(c,"mjsAnimationQueue")||[],u=++b,q=l(c,"mjs-animate"),y,x,J,ya,Q,A,B;e=e||q;n&&null===
q&&(e=null);if(e){r(e)?"["==e.substr(0,1)?y=(new Function("","return "+e))():(y=a[e],e=t&&t.get("animate."+e,!0)):v(e)?x=e:L(e)&&(r(e[0])?y=e:(J=e[0],ya=e[1]));ia(e)&&(y=e.stages,x=e.fn,J=e.before,ya=e.after,Q=e.options?M({},e.options):{},A=e.context||null,B=e.duration||null,g=g||Q.start);if(d&&y)return s.push({el:c,stages:y,start:g,step:z,deferred:H,position:0,id:u}),N(c,"mjsAnimationQueue",s),1==s.length&&f(c,y,0,g,H,!0,u,z),H;Q=Q||{};g&&(Q.start=function(){g(c)});Q.complete=function(){H.resolve(c)};
B&&(Q.duration=B);if(x&&v(x))return J&&M(c.style,J,!0,!1),g&&g(c),N(c,"mjsAnimationQueue",x.call(A,c,function(){H.resolve(c)})),H;if(window.jQuery){e=$(c);J&&e.css(J);N(c,"mjsAnimationQueue","stop");if(x&&r(x))return e[x](Q),H;if(ya)return e.animate(ya,Q),H}}g?(x=g(c),R(x)?x.done(function(){H.resolve(c)}):H.resolve(c)):H.resolve(c);return H};g.addAnimationType=function(b,c){a[b]=c};g.stop=sa;g.prefixes=c;g.cssAnimations=d;return g}();ca=ja.create;var fb=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:
function(a){return(new Function("return "+a))()}}(),Va=function(a,b){var c,d;if(!a||!r(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},t=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},gb=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,e=/^(?:GET|HEAD)$/i,f=function(a,b,c){var d,
e;if(qa(a)&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(""+a));else if(L(a)&&c)for(d=0,e=a.length;d<e;d++)f(a[d],b,c+"["+d+"]");else if(Z(a))for(d in a)a.hasOwnProperty(d)&&f(a[d],b,c?c+"["+d+"]":d)},g=function(d,g){d.replace(a,"");if(!1===g.cache){var h=(new Date).getTime();return b.test(d)?d.replace(b,"$1_="+h):d+(c.test(d)?"&":"?")+"_="+h}!g.data||window.FormData&&g.data instanceof window.FormData||(r(g.data)?h=g.data:(h=[],f(g.data,h,null),h=h.join("&").replace(/%20/g,"+")),g.data=h,
e.test(g.method)&&(d+=(c.test(d)?"&":"?")+g.data,g.data=null));return d},h={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},k={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,
form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},m={},p=new X,F=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},C=function(a,b,c){var d,e;if(!Z(a)&&!v(a)&&c)d=document.createElement("input"),l(d,"type","hidden"),l(d,"name",c),l(d,"value",a),b.appendChild(d);else if(L(a)&&c)for(d=0,e=a.length;d<e;d++)C(a[d],b,c+"["+d+"]");else if(Z(a))for(d in a)a.hasOwnProperty(d)&&
C(a[d],b,c?c+"["+d+"]":d)},z=function(a){for(var b,c,d="",e=0;e<a.elements.length;e++)if(b=a.elements[e],null!==l(b,"name"))if(c="INPUT"===b.nodeName.toUpperCase()?l(b,"type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return d},H=function(a,b,c){var d=b?b.dataType:null;b=b?b.selector:null;if(!r(a))return a;
c=c||"";if("xml"===d||!d&&0<=c.indexOf("xml"))return a=Va(B(a)),b?Ja(b,a):a;if("html"===d)return a=Va(a,"text/html"),b?Ja(b,a):a;if("fragment"==d){c=document.createDocumentFragment();d=document.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return c}if("json"===d||!d&&0<=c.indexOf("json"))return fb(B(a));("script"===d||!d&&0<=c.indexOf("javascript"))&&F(a);return a+""},s=function(a){var b=d.exec((window?window.location.href:"").toLowerCase())||[],c=d.exec(a.url.toLowerCase());
this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443"))));b=new G;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):z(a.form));a.url=g(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new x(a,
b,this):new q(a,b,this):new y(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){p.trigger("success",a)});b.fail(function(a){p.trigger("error",a)});b.always(function(){p.trigger("end")});p.trigger("start");a.timeout&&(this._timeout=setTimeout(n(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===p.trigger("beforeSend",a,c)&&(this._promise=G.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=G.reject());this._promise||(oa(c.send,c),b.abort=
n(this.abort,this),b.always(this.destroy,this),this._promise=b)};s.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";l(a,"method",this._opt.method);C(this._opt.data,a,null);document.body.appendChild(a);
this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+W();a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=n(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=n(this.jsonpCallback,this));return d},jsonpCallback:function(a){var b;try{b=this.processResponseData(a)}catch(c){this._deferred?this._deferred.reject(c):aa(c)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,
b){var c=this._opt;a=H(a,c,b);p.hasListener("processResponse")&&(a=p.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred,d;if(this._opt.jsonp)if(a){try{F(a)}catch(e){c.reject(e)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else{try{d=this.processResponseData(a,b)}catch(f){c.reject(f)}c.resolve(d)}},destroy:function(){this._timeout&&
clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}};var u=function(a,b){b=b||{};a&&!r(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=l(b.form,"action")),
!b.url))throw"Must provide url";M(b,m,!1,!0);M(b,k,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?l(b.form,"method").toUpperCase()||"GET":"GET";return(new s(b)).promise()};u.setup=function(a){M(m,a,!0,!0)};u.on=function(){p.on.apply(p,arguments)};u.un=function(){p.un.apply(p,arguments)};u.get=function(a,b){b=b||{};b.method="GET";return u(a,b)};u.post=function(a,b){b=b||{};b.method="POST";return u(a,b)};u.load=function(a,b,c){c=c||{};r(b)||(c=b);c.dataType="fragment";return u(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);
a.appendChild(b)})};u.loadScript=function(a){return u(a,{transport:"script"})};u.submit=function(a,b){b=b||{};b.form=a;return u(null,b)};var q=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&t(d,"progress",n(a.progress,a.callbackScope));a.uploadProgress&&d.upload&&t(d.upload,"progress",n(a.uploadProgress,
a.callbackScope));d.onreadystatechange=n(this.onReadyStateChange,this)};q.prototype={_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,c;if(a.xhrFields)for(c in a.xhrFields)b[c]=a.xhrFields[c];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&h[a.dataType]?h[a.dataType]+", */*; q=0.01":h._default);for(c in a.headers)b.setRequestHeader(c,a.headers[c])},
onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=P,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=P;var c;a:{try{c=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse(r(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=P;this._xhr.abort()},
send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}};var y=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};y.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");l(a,"async","async");l(a,"charset","utf-8");l(a,"src",this._opt.url);
t(a,"load",n(this.onLoad,this));t(a,"error",n(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var x=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=
b};x.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+W(),c=this._opt.form;l(a,"id",b);l(a,"name",b);a.style.display="none";document.body.appendChild(a);l(c,"action",this._opt.url);l(c,"target",b);t(a,"load",n(this.onLoad,this));t(a,"error",n(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,
a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return u}(),la=function(){var a=new X,b={},c=function(a){if(!b[a]){var c=document.getElementById(a),d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),
d.innerHTML=c.innerHTML,b[a]=ga(d.childNodes)):b[a]="content"in c?c.content:ga(c.childNodes))}return b[a]},d=function(a){return b[a]?b[a]:b[a]=gb(a,{dataType:"fragment"}).then(function(c){return b[a]=c})},e=function(a){M(this,a,!0,!1);this.id=W();this.tpl&&(this.tpl=B(this.tpl));this.url&&(this.url=B(this.url));a=this.node;var b=this.tpl||this.url;a&&l(a,"mjs-include",null);a||(this.deferRendering=!0);if(b){if(a&&a.firstChild&&N(a,"mjs-transclude",ga(a.childNodes)),"."!=b.substr(0,1)||this.replace||
(this.ownRenderer=!0,this._watcher=ca(this.scope,b,this.onChange,this,null,S)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof Y&&this.scope.$on("destroy",this.onScopeDestroy,this)};e.prototype={_watcher:null,
_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,doRender:function(){this._renderer||(this._renderer=new Ka(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},
startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,e=a._watcher?a._watcher.getLastResult():a.tpl||b,k=new G;(new G(function(a){b?a(c(e)||d(b)):a(c(e)||ga(e))})).done(function(b){a._fragment=b;k.resolve(a.ownRenderer?!1:a.node)}).fail(k.reject,
k);return k},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(Aa(this._fragment),a):a.appendChild(Aa(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new G;this._initial?(this.doApplyTemplate(),b.resolve()):(O(a,"leave",null,!0).done(this.doApplyTemplate,
this).done(b.resolve,b),O(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),delete this._watcher);delete this.tpl}};e.getTemplate=c;e.loadTemplate=d;return e}();C("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",
{id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(a){this.supr(a);this.scope||(this.scope=new Y);a.as&&(this.scope[a.as]=this);this.node&&(this.id=l(this.node,"id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+W();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this);var b=this.template,c=this.templateUrl;
b&&b instanceof la?b instanceof la&&(this.template.node=this.node):this.template=b=new la({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;l(a,"id",this.id);l(a,
"cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):za(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display=
"block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:P,afterRender:P,onShow:P,onHide:P,onParentRendererDestroy:function(){this.destroy()},onDestroy:function(){this.template&&
(this.template.destroy(),delete this.template);this.destroyEl?za(this.node)&&this.node.parentNode.removeChild(this.node):(l(this.node,"cmp-id",null),this.originalId||l(this.node,"id",null));this.destroyScope&&this.scope&&this.scope.$destroy();delete this.scope;delete this.node;this.supr()}});var ta=function(a,b,c,d,e){var f=!1!==b;b=b||{};e=e||[];c=c||b.scope;d=d||b.node;b.scope=b.scope||c;b.node=b.node||d;var g=r(a)?ra(a):a;if(!g)throw"Component "+a+" not found";c&&g.$isolateScope&&(b.scope=c=c.$newIsolated());
var h,k=[];a=g.template||b.template||null;var m=g.templateUrl||b.templateUrl||null,p=c?c.$app:null,n=Ta.global(),t=p?p.inject:n.inject,z=p?p:n,H=d?l(d,"mjs-cloak"):null,s={$node:d||null,$scope:c||null,$config:b||null,$args:e||null};if(g.resolve)for(h in g.resolve)(function(a){var f=new G,m;k.push(f.done(function(c){s[a]=c;b[a]=c;e.push(c)}));m=g.resolve[h];v(m)?f.resolve(m(c,d)):r(m)?f.resolve(t.resolve(m)):f.resolve(t.call(z,m,null,M({},s,b,!1,!1)))})(h);f&&(a||m)&&(b.template=new la({scope:c,node:d,
deferRendering:!0,ownRenderer:!0,tpl:a,url:m}),k.push(b.template.initPromise),d&&d.firstChild&&N(d,"mjs-transclude",ga(d.childNodes)));f&&e.unshift(b);var u;k.length?(u=new G,G.all(k).done(function(){u.resolve(t.call(z,g,null,M({},s,b,!1,!1),e))})):u=G.resolve(t.call(z,g,null,M({},s,b,!1,!1),e));d&&u.isPending()&&null!==H&&(H?ha(d,H):d.style.visibility="hidden",u.then(function(){H?ea(d,H):d.style.visibility=""}));d&&u.then(function(){ea(d,"mjs-cloak")});return u},ma=function(){return!1},Ba=function(){return!0},
na=function(a){if(a instanceof na)return a;if(!(this instanceof na))return new na(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,e=a.button;void 0===this.pageX&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Ba:ma;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};na.prototype={isDefaultPrevented:ma,isPropagationStopped:ma,isImmediatePropagationStopped:ma,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Ba;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=
this.originalEvent;this.isPropagationStopped=Ba;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Ba;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};var Ca=function(){var a=window,b=a.history,c=a.location,d=new X,e={},f={locationChange:[],beforeLocationChange:[]},g=!1,h=/(?:(\w+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,k=!!b.pushState,
m="onhashchange"in a;M(e,d.getApi());var p=function(a){var b=c.protocol+"//"+c.hostname;c.port&&(b+=":"+c.port);a=a.replace(b,"");k||(a=encodeURIComponent(a));return a},n=function(a){a=(""+a).match(h);var b,c;k||(c=a[6],"!"==c.substr(0,1)&&(b=c.substr(1)));b||(b=a[4],a[5]&&(b+="?"+a[5]));return b},r=function(){var a;k?a=c.pathname+c.search:(a=c.hash.substr(1))?("!"==a.substr(0,1)&&(a=a.substr(1)),a=decodeURIComponent(a)):a=c.pathname+c.search;return a},z=function(a,b,c){c=c||r();for(var d,g=-1,h=
f[a].length;++g<h;)if(d=f[a][g].call(null,c),b&&!1===d)return!1;return e.trigger(a,c)},v=function(){if(k)b.origPushState=b.pushState,b.origReplaceState=b.replaceState,t(a,"popstate",function(){z("locationChange")}),b.pushState=function(a,c,d){if(!1===z("beforeLocationChange",!0,d))return!1;b.origPushState(a,c,p(d));z("locationChange")},b.replaceState=function(a,c,d){if(!1===z("beforeLocationChange",!0,d))return!1;b.origReplaceState(a,c,p(d));z("locationChange")};else if(m)b.replaceState=b.pushState=
function(a,b,d){if(!1===z("beforeLocationChange",!0,d))return!1;a=p(d);c.hash=a?"!"+a:""},t(a,"hashchange",function(){z("locationChange")});else{var d=null,f=!1;a.onIframeHistoryChange=function(a){f||(c.hash=a?"!"+a:"",z("locationChange"))};var q=function(a){var b=d.contentWindow.document;b.open();b.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');b.close()};
b.pushState=function(a,b,c){if(!1===z("beforeLocationChange",!0,c))return!1;q(p(c))};b.replaceState=function(a,b,c){if(!1===z("beforeLocationChange",!0,c))return!1;a=p(c);d.contentWindow.hashValue=a};var r=function(){d=document.createElement("iframe");d.src="about:blank";d.style.display="none";document.body.appendChild(d);f=!0;q(p(c.hash.substr(1)));f=!1};g?r():t(a,"load",r)}t(document.documentElement,"click",function(d){d=new na(d||a.event);for(var e=d.target,f;e&&"a"!=e.nodeName.toLowerCase();)e=
e.parentNode;if(e){if(e=(f=l(e,"href"))&&"#"!=f.substr(0,1)&&!l(e,"target"))e=f.match(h),e=e[1]&&c.protocol!=e[1]||e[2]&&c.hostname!=e[2]?!1:e[2]||e[3]?c.port==e[3]:!0;if(e&&n(f)!=n(c))return b.pushState(null,null,n(f)),d.preventDefault(),d.stopPropagation(),!1}return null});b.initPushState=P;e.initPushState=P};t(a,"load",function(){g=!0});b.initPushState=v;b.onBeforeChange=function(a){f.beforeLocationChange.push(a)};b.onChange=function(a){f.locationChange.push(a)};e.pushUrl=function(a){b.pushState(null,
null,a)};e.replaceUrl=function(a){b.replaceState(null,null,a)};e.currentUrl=function(){return r()};e.initPushState=function(){return v()};return e}(),hb=Ca.currentUrl;C("MetaphorJs.cmp.View",{route:null,node:null,scope:null,cmp:null,currentComponent:null,watchable:null,defaultCmp:null,initialize:function(a){M(this,a,!0,!1);(a=this.node)&&a.firstChild&&N(a,"mjs-transclude",ga(a.childNodes));this.cmp||(this.cmp=l(a,"mjs-view-cmp"));this.defaultCmp=l(a,"mjs-view-default");l(a,"mjs-view",null);l(a,"mjs-view-cmp",
null);l(a,"mjs-view-default",null);this.route?(Ca.initPushState(),Ca.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=ca(this.scope,this.cmp,this.onCmpChange,this,null,S),this.onCmpChange())},onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=hb(),b=this.route,c,d,e,f,g;d=0;for(e=b.length;d<e;d++){f=b[d];if(f.reg&&(g=a.match(f.reg))){this.changeRouteComponent(f,
g);return}f["default"]&&!c&&(c=f)}this.clearComponent();c?this.setRouteComponent(c,[]):this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){sa(this.node);this.clearComponent();this.setRouteComponent(a,b)},clearComponent:function(){var a=this,b=a.node;a.currentComponent&&O(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,b){var c=this,d=c.node,e=a.params;
O(d,"enter",function(){var f=b||[],g={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},h,k;a.as&&(g.as=a.as);a.template&&(g.template=a.template);f.shift();if(e)for(h=-1,k=e.length;++h<k;g[e[h]]=f[h]);return ta(a.cmp||"MetaphorJs.cmp.Component",g,g.scope,d,null,f).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;O(c,"enter",function(){var d=Z(a)?a:{},e=(r(a)?a:null)||"MetaphorJs.cmp.Component",f=d.scope||b.scope.$new();d.destroyEl=
!1;return ta(e,d,f,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(Ca.un("locationchange",this.onLocationChange,this),delete this.route);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),delete this.watchable);delete this.scope;delete this.currentComponent}});var K=ba.registerAttributeHandler;K("mjs-app",100,ma);var ua=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value")||a.value;return void 0!=
b?b:B(a.innerText||a.textContent)},select:function(a){for(var b,e=a.options,f=a.selectedIndex,g=(a="select-one"===a.type||0>f)?null:[],h=a?f+1:e.length,k,m=0>f?h:a?f:0;m<h;m++)if(b=e[m],k=b.disabled||b.parentNode.disabled,(b.selected||m===f)&&!k){b=ua(b);if(a)return b;g.push(b)}return g},radio:function(a){return Fa(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return Fa(a.getAttribute("value"))?"on":a.value}};return function(c){var d,e;if((d=b[c.type]||b[c.nodeName.toLowerCase()])&&
void 0!==(e=d(c,"value")))return e;e=c.value;return r(e)?e.replace(a,""):null==e?"":e}}(),Da=Array.prototype.indexOf;Da||(Da=Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=e)return-1;for(c=Math.max(0<=c?c:e-Math.abs(c),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1});var Na=function(){var a={select:function(a,c){for(var d,e,f=a.options,
g=U(c),h=f.length,k,m=-1;h--;)e=f[h],(k=g?-1!=Da.call(g,e.value):!1)?(e.setAttribute("selected","selected"),d=!0):e.removeAttribute("selected"),k||Fa(e.getAttribute("mjs-default-option"))||(m=h);d||(a.selectedIndex=m);return g}};a.radio=a.checkbox=function(a,c){if(L(c)){var d;d=ua(a);d=c?-1!=Da.call(c,d):!1;return a.checked=d}};return function(b,c){if(1===b.nodeType){null===c?c="":1===I(c)&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];d&&void 0!==d(b,c,"value")||(b.value=c)}}}(),ib=function(){var a=
document.createElement("div");return r(a.textContent)?"textContent":"innerText"}(),fa=C("MetaphorJs.view.AttributeHandler",{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=B(c);this.node=b;this.expr=c;this.scope=a;this.watcher=ca(a,c,this.onChange,this,null,S);if(void 0!=this.watcher.getLastResult())this.onChange();a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.destroy()},onChange:function(){},destroy:function(){delete this.node;delete this.scope;
this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)}}),va=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},Oa=navigator.userAgent.toLowerCase(),jb=function(){var a=parseInt((/android (\d+)/.exec(Oa)||[])[1],10)||!1;return function(){return a}}(),Pa=function(){var a=parseInt((/msie (\d+)/.exec(Oa)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(Oa)||[])[1],10)||!1);return function(){return a}}(),Wa=function(){var a=
{};return function(b){if(void 0===a[b]){if("input"==b&&9==Pa())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),wa=function(a,b,c,d){this.el=a;this.cb=b;this.scb=d;this.cbContext=c;this.inputType=b=l(a,"mjs-input-type")||a.type.toLowerCase();this.listeners=[];c=a.type?a.type.toLowerCase():"";this.submittable="input"==a.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==b?this.initRadioInput():"checkbox"==b?this.initCheckboxInput():this.initTextInput()};
wa.prototype={el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,b=this.listeners,c=this.radio,d=this.el,e,f,g,h;e=0;for(f=b.length;e<f;e++)if("radio"==a)for(g=0,h=c.length;g<h;g++)va(c[g],b[e][0],b[e][1]);else va(d,b[e][0],b[e][1]);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var a=this.el,b=a.type,a=a.name,c,d,e;this.onRadioInputChangeDelegate=n(this.onRadioInputChange,
this);if(document.querySelectorAll)c=document.querySelectorAll("input[name="+a+"]");else{var f=document.getElementsByTagName("input"),g;c=[];d=0;for(e=f.length;d<e;d++)g=f[d],g.type==b&&g.name==a&&c.push(g)}this.radio=c;this.listeners.push(["click",this.onRadioInputChangeDelegate]);d=0;for(e=c.length;d<e;d++)t(c[d],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=n(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);
t(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,b=this,c=b.el,d=b.listeners,e;if(!jb()){var f=function(){a=!0},g=function(){a=!1;h()};d.push(["compositionstart",f]);d.push(["compositionend",g]);t(c,"compositionstart",f);t(c,"compositionend",g)}var h=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()};if(Wa("input"))d.push(["input",h]),t(c,"input",h);else{var k=function(a){e||(e=window.setTimeout(function(){h(a);e=null},0))},f=function(a){a=
a||window.event;var c=a.keyCode;if(13==c&&b.submittable&&b.scb)return b.scb.call(b.cbContext,a);91===c||15<c&&19>c||37<=c&&40>=c||k(a)};d.push(["keydown",f]);t(c,"keydown",f);Wa("paste")&&(d.push(["paste",k]),d.push(["cut",k]),t(c,"paste",k),t(c,"cut",k))}d.push(["change",h]);t(c,"change",h)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=this.getValue();this.cb&&this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=
this.el;this.cb&&this.cb.call(this.cbContext,a.checked?l(a,"value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;a=a.target||a.srcElement;this.cb&&this.cb.call(this.cbContext,a.value)},setValue:function(a){var b=this.inputType,c,d;if("radio"==b)for(b=this.radio,c=0,d=b.length;c<d;c++)b[c].checked=b[c].value==a;else"checkbox"==b?(b=this.el,b.checked=!0===a||a==b.value):Na(this.el,a)},getValue:function(){var a=this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return a[b].value;
return null}return"checkbox"==a?this.el.checked?l(this.el,"value")||!0:!1:this.processValue(ua(this.el))}};wa.getValue=ua;wa.setValue=Na;K("mjs-bind",1E3,C(null,fa,{isInput:!1,input:null,lockInput:null,recursive:!1,textRenderer:null,initialize:function(a,b,c){var d=b.nodeName.toLowerCase(),e=b.type;this.isInput="input"!=d&&"textarea"!=d&&"select"!=d||"submit"==e||"reset"==e||"button"==e?!1:!0;this.recursive=null!==l(b,"mjs-recursive");this.lockInput=null!==l(b,"mjs-lock-input");l(b,"mjs-recursive",
null);l(b,"mjs-lock-input",null);this.isInput&&(this.input=new wa(b,this.onInputChange,this));this.recursive?(this.scope=a,this.node=b,this.textRenderer=new Sa(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),a instanceof Y&&a.$on("destroy",this.onScopeDestroy,this)):this.supr(a,b,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=
this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?this.input.setValue(a):this.node[ib]=a},destroy:function(){this.textRenderer&&(this.textRenderer.destroy(),delete this.textRenderer);this.input&&(this.input.destroy(),delete this.input);this.supr()}}));K("mjs-bind-html",1E3,C(null,"attr.mjs-bind",{updateElement:function(a){this.node.innerHTML=a}}));(function(){var a=function(a,c,d,e){if(null!==d){if(d==Ma(a,c))return;d=!d}else d=Ma(a,c);d?e?O(a,[c+"-remove"],
null,!0).done(function(){ea(a,c)}):ea(a,c):e?O(a,[c+"-add"],null,!0).done(function(){ha(a,c)}):ha(a,c)};K("mjs-class",1E3,C(null,fa,{initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),d;sa(b);if(r(c))a(b,c,null,!this.initial);else if(L(c)){var e;d=-1;for(e=c.length;++d<e;a(b,c[d],!0,!this.initial));}else for(d in c)a(b,d,c[d]?!0:!1,!this.initial);this.initial=!1}}))})();K("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=
function(a,c,d,e){var f,g,h,k,m,p;p=N(c,"config")||{};l(c,"mjs-cmp",null);d=d.split(" ");h=0;for(k=d.length;h<k;h++)m=d[h],""!=m&&"as"!=m&&(f?g=m:f=m);e=M({scope:a,node:c,as:g,parentRenderer:e,destroyScope:!0},p,!1,!1);ta(f,e,a,c);return!1};a.$breakScope=!0;K("mjs-cmp",200,a)})();var Xa=ja.createGetter;K("mjs-config",50,function(a,b,c){l(b,"mjs-config",null);N(b,"config",Xa(c)(a))});var kb=function(){var a=/(auto|scroll)/,b,c=window.getComputedStyle?function(a,b){return getComputedStyle(a,null)[b]}:
function(a,b){return a.currentStyle?""+a.currentStyle[b]:""+a.style[b]},d=function(a){return c(a,"overflow")+c(a,"overflowY")+c(a,"overflowY")};return function(c){b||(b=document.body);for(;c&&c!==b;){if(a.test(d(c)))return c;c=c.parentNode}return window}}(),ka=function(a,b,c){l(b,"mjs-each",null);l(b,"mjs-include",null);this.parseExpr(c);this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.watcher=ca(a,this.model,
this.onChange,this,null,S);c=N(b,"config")||{};this.animateMove=!c.buffered&&c.animateMove&&O.cssAnimations;this.animate=!c.buffered&&null!==l(b,"mjs-animate");(this.trackBy=l(b,"mjs-track-by"))?"$"!=this.trackBy&&(this.trackByWatcher=ca(a,this.trackBy,this.onChangeTrackBy,this,null,S)):this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);l(b,"mjs-track-by",null);this.griDelegate=n(this.scopeGetRawIndex,this);this.parentEl.removeChild(b);c.buffered&&this.initBuffering(c);this.render(U(this.watcher.getValue()))};
ka.prototype={model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,animate:!1,trackByFn:null,griDelegate:null,buffered:!1,itemSize:null,itemsOffsite:1,bufferState:null,scrollOffset:0,horizontal:!1,eventTmt:null,scrollBusy:!1,onResizeDelegate:null,onScrollDelegate:null,onScopeDestroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.destroy();delete this.renderers;delete this.tpl;delete this.prevEl;
delete this.nextEl;delete this.parentEl;this.supr()},onChangeTrackBy:function(a){this.trackByFn=null;this.trackBy=a},getTrackByFunction:function(){var a;if(!this.trackByFn)if((a=this.trackBy)&&"$"!=a)v(a)?this.trackByFn=a:this.trackByFn=function(b){return b&&!qa(b)?b[a]:void 0};else return function(a){return qa(a)?a:void 0};return this.trackByFn},scopeGetRawIndex:function(a){if(void 0===a)return-1;var b=this.watcher.getUnfilteredValue(),c=this.getTrackByFunction(),d,e;d=0;for(e=b.length;d<e;d++)if(c(b[d])===
a)return d;return-1},doUpdate:function(a,b,c,d){var e=this.renderers;a=a||0;var f=e.length;b=b||f-1;var g=this.watcher.getLastResult(),h=this.getTrackByFunction();for(b>f-1&&(b=f-1);a<=b;a++)c&&e[a].action!=c||this.renderItem(a,e,g,h,d)},renderItem:function(a,b,c,d,e){c=c||this.watcher.getLastResult();b=b||this.renderers;d=d||this.getTrackByFunction();var f=b[a],g=f.scope;b=b.length-1;var h=!(a%2);e&&f.rendered||(g.$index=a,g.$first=0===a,g.$last=a===b,g.$even=h,g.$odd=!h,g.$trackId=d(c[a]),g.$getRawIndex=
this.griDelegate,f.renderer?g.$check():(f.renderer=new Ka(f.el,g),f.renderer.process(),f.rendered=!0))},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,f=this.buffered,g=document.createDocumentFragment(),h,k,m;k=0;for(m=a.length;k<m;k++)h=c.cloneNode(!0),b.push(this.createItem(h,a,k)),b[k].attached=!f,f||g.appendChild(h);f?(this.getScrollOffset(),this.updateScrollBuffer()):(this.doUpdate(),d.insertBefore(g,e))},getListItem:function(a,b){return a[b]},createItem:function(a,
b,c){var d=this.itemName,e=this.scope.$new();e[d]=this.getListItem(b,c);return{index:c,action:"enter",el:a,scope:e,attached:!1,rendered:!1}},onChange:function(a){var b=this,c=b.renderers;a=a.prescription||[];var d=b.tpl,e=0,f=U(b.watcher.getValue()),g=null,h=b.animateMove,k=b.animate,m=[],l=b.itemName,n=c.slice(),r=!1,t,v,s,u,q,y;a=b.watcher.getMovePrescription(a,b.getTrackByFunction());s=0;for(u=a.length;s<u;s++)t=a[s],1===I(t)?(v=t,t=c[v],v!=e&&null===g&&(g=s),t.action="move",t.scope[l]=b.getListItem(f,
s),r=h,m.push(t),c[v]=null,e++):(null===g&&(g=s),q=b.createItem(d.cloneNode(!0),f,s),m.push(q));b.renderers=m;if(k){b.doUpdate(g,null,"enter");r&&(y=b.calculateTranslates(m,n,c));a=[];var x=new G,B=new G,C=G.counter(m.length),d=function(){C.countdown();return x};s=0;for(u=c.length;s<u;s++)if(q=c[s])q.scope.$destroy(),sa(q.el),a.push(O(q.el,"leave",null,!0,S).done(function(a){a.style.visibility="hidden"}));s=0;for(u=m.length;s<u;s++)q=m[s],sa(q.el),"enter"==q.action?a.push(O(q.el,"enter",d,!0,S)):
a.push(b.moveAnimation(q.el,r?y[s][0]:null,r?y[s][1]:null,d,B));C.done(function(){da(function(){B.resolve();b.applyDomPositions(c);r||b.doUpdate(g,null,"move");da(function(){x.resolve()})})});G.all(a).always(function(){da(function(){b.doUpdate(g||0);b.removeOldElements(c);if(r)for(b.doUpdate(g,null,"move"),s=0,u=m.length;s<u;s++)q=m[s],q.el.style[O.prefixes.transform]=null,q.el.style[O.prefixes.transform]=""})})}else b.applyDomPositions(),b.buffered?(!b.bufferState&&b.getBufferState(),b.doUpdate(b.bufferState.first,
b.bufferState.last)):b.doUpdate(g||0),b.removeOldElements(c)},removeOldElements:function(a){var b,c,d,e=this.parentEl;b=0;for(c=a.length;b<c;b++)(d=a[b])&&d.attached&&e.removeChild(d.el)},applyDomPositions:function(a){var b=this.renderers,c=this.parentEl,d=this.prevEl,e=this.buffered,f=e?this.getBufferState(!0):null,d=d?d.nextSibling:c.firstChild,g,h,k,m,l;h=0;for(k=b.length;h<k;h++)l=b[h],m=l.el,!e||h>=f.first&&h<=f.last?((g=a&&a[h]?a[h].el.nextSibling:0<h?b[h-1].el.nextSibling||d:d)&&m.nextSibling!==
g?c.insertBefore(m,g):g||c.appendChild(m),l.attached=!0):(e&&h<f.first||h>f.last)&&l.attached&&(c.removeChild(m),l.attached=!1);e&&this.updateScrollGhosts(f)},getNodePositions:function(a,b,c){for(var d=[],e,f,g,h={};a.firstChild;)a.removeChild(a.firstChild);e=0;for(f=b.length;e<f;e++)c&&c[e]&&(g=c[e].el.cloneNode(!0),a.appendChild(g)),g=b[e].el.cloneNode(!0),a.appendChild(g),d.push(g);e=0;for(f=d.length;e<f;e++)a=d[e],(c=b[e].renderer)&&(h[c.id]={left:a.offsetLeft,top:a.offsetTop});return h},calculateTranslates:function(a,
b,c){var d=this.parentEl,e=d.parentNode,f=d.cloneNode(!0),g=d.offsetWidth,h=[],k=0,l=0,n;n=f.style;n.position="absolute";n.left="-10000px";n.visibility="hidden";n.width=g+"px";e.insertBefore(f,d);n.width=g-(f.offsetWidth-g)+"px";b=this.getNodePositions(f,b);c=this.getNodePositions(f,a,c);d=this.getNodePositions(f,a);e.removeChild(f);e=0;for(f=a.length;e<f;e++)g=a[e].el,n=a[e].renderer,n=n.id,0==e&&(k=g.offsetLeft,l=g.offsetTop),h.push([{left:d[n].left-k-(c[n].left-k),top:d[n].top-l-(c[n].top-l)},
b[n]?{left:b[n].left-k-(c[n].left-k),top:b[n].top-l-(c[n].top-l)}:null]);return h},moveAnimation:function(a,b,c,d,e){var f=a.style;e.done(function(){c&&(f[O.prefixes.transform]="translateX("+c.left+"px) translateY("+c.top+"px)")});return O(a,"move",d,!0,S,function(a,c,d){0==c&&"start"!=d&&b&&(f[O.prefixes.transform]="translateX("+b.left+"px) translateY("+b.top+"px)")})},initBuffering:function(a){var b=this.parentEl,c=this.prevEl,d,e,f,g={fontSize:0,lineHeight:0,padding:0,paddingTop:0,paddingLeft:0,
paddingBottom:0,paddingRight:0,margin:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0};this.buffered=!0;this.itemSize=a.itemSize;this.ofsTopEl=d=document.createElement(a.stubTag||"div");this.ofsBotEl=e=document.createElement(a.stubTag||"div");this.scrollEl=kb(this.parentEl);this.itemsOffsite=a.itemsOffsite||5;this.horizontal=a.horizontal||!1;ha(d,"mjs-buffer-top");ha(e,"mjs-buffer-bottom");for(f in g)d.style[f]=g[f],e.style[f]=g[f];b.insertBefore(d,c?c.nextSibling:b.firstChild);b.insertBefore(e,
this.nextEl);this.prevEl=d;this.nextEl=e;this.onResizeDelegate=n(this.onResize,this);this.onScrollDelegate=n(this.onScroll,this);t(this.scrollEl,"scroll",this.onScrollDelegate);t(window,"resize",this.onResizeDelegate)},getScrollOffset:function(){for(var a=this.scrollEl,b=this.ofsTopEl,c=this.horizontal?"offsetLeft":"offsetTop",d=0;b&&b!==a;)d+=b[c]||0,b=b.parentNode;return this.scrollOffset=d},getBufferState:function(a){var b=this.scrollEl,c=this.horizontal,d=document.documentElement,d=b===window?
window[c?"innerWidth":"innerHeight"]||d[c?"clientWidth":"clientHeight"]:b[c?"offsetWidth":"offsetHeight"],e=c?eb(b):db(b),b=this.itemSize,c=this.itemsOffsite,f=a?this.getScrollOffset():this.scrollOffset;a=this.renderers.length;e=Math.max(0,e-f);e=parseInt(e/b,10);0>e&&(e=0);d=e+parseInt(d/b,10);e=e>c?e-c:0;d+=c;d>a-1&&(d=a-1);return e>d?this.bufferState:this.bufferState={first:e,last:d,ot:e*b,ob:(a-d-1)*b}},updateScrollGhosts:function(a){var b=this.horizontal;this.ofsTopEl.style[b?"width":"height"]=
a.ot+"px";this.ofsBotEl.style[b?"width":"height"]=a.ob+"px"},onResize:function(){this.runBufferedEvent()},onScroll:function(){this.runBufferedEvent()},runBufferedEvent:function(){var a=this;a.scrollBusy?(a.eventTmt&&(clearTimeout(a.eventTmt),a.eventTmt=null),a.eventTmt=setTimeout(function(){a.eventTmt=null;a.runBufferedEvent()},10)):a.updateScrollBuffer()},updateScrollBuffer:function(){this.scrollBusy=!0;var a=this,b=a.bufferState,c=a.parentEl,d=a.renderers,e=a.ofsBotEl,f=a.getBufferState(!1),g,h,
k;f?da(function(){if(!b||f.last<b.first||f.first>b.last){if(b)for(h=b.first,k=b.last;h<=k;h++)c.removeChild(d[h].el),d[h].attached=!1;g=document.createDocumentFragment();h=f.first;for(k=f.last;h<=k;h++)d[h].rendered||a.renderItem(h),g.appendChild(d[h].el),d[h].attached=!0;c.insertBefore(g,e)}else{if(b.first<f.first)for(h=b.first,k=f.first;h<k;h++)c.removeChild(d[h].el),d[h].attached=!1;else if(b.first>f.first){g=document.createDocumentFragment();h=f.first;for(k=b.first;h<k;h++)d[h].rendered||a.renderItem(h),
g.appendChild(d[h].el),d[h].attached=!0;c.insertBefore(g,d[b.first].el)}if(b.last<f.last){g=document.createDocumentFragment();h=b.last+1;for(k=f.last;h<=k;h++)d[h].rendered||a.renderItem(h),g.appendChild(d[h].el),d[h].attached=!0;c.insertBefore(g,e)}else if(b.last>f.last)for(h=f.last+1,k=b.last;h<=k;h++)c.removeChild(d[h].el),d[h].attached=!1}a.updateScrollGhosts(f);a.scrollBusy=!1;oa(function(){(!b||b.first<f.first)&&a.doUpdate(f.last,f.last+(f.last-f.first),null,!0)})}):a.scrollBusy=!1},parseExpr:function(a){a=
a.split(" ");var b,c,d,e,f;b=0;for(c=a.length;b<c;b++)if(f=a[b],""!=f&&"in"!=f)if(e){d=a.slice(b).join(" ");break}else e=f;this.model=d;this.itemName=e||"item"},destroy:function(){this.trackByWatcher&&(this.trackByWatcher.unsubscribeAndDestroy(),delete this.trackByWatcher);this.buffered&&(va(this.scrollEl,"scroll",this.onScrollDelegate),va(window,"resize",this.onResizeDelegate));this.supr()}};ka.$stopRenderer=!0;K("mjs-each",100,ka);var Ya=ja.createFunc;(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),
b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=a;"enter"==b&&(b="keyup");K("mjs-"+a,1E3,function(c,g,h){var k=Ya(h);l(g,"mjs-"+a,null);t(g,b,function(b){b=new na(b||window.event);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;k(c);delete c.$event;c.$root.$check();b.preventDefault();return!1})})})(a[b])})();K("mjs-show",500,C(null,fa,{initial:!0,initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,c=function(){b.display=a?"":"none"};this.initial?c():O(this.node,
a?"show":"hide",function(){a&&(b.display="")},!0).done(c)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));K("mjs-hide",500,C(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));K("mjs-if",500,C(null,fa,{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;
delete this.parentEl;this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},f=function(){c.removeChild(d)};b?za(d)||(a.initial?e():O(d,"enter",e,!0)):za(d)&&(a.initial?f():O(d,"leave",null,!0).done(f));a.initial=!1}}));K("mjs-ignore",0,ma);K("mjs-include",900,function(a,b,c,d){a=new la({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});K("mjs-init",
250,function(a,b,c){l(b,"mjs-init",null);Ya(c)(a)});K("mjs-model",1E3,C(null,fa,{inProg:!1,input:null,binding:null,initialize:function(a,b,c){this.node=b;this.input=new wa(b,this.onInputChange,this);this.binding=l(b,"mjs-data-binding")||"both";var d=this.input.getValue();this.supr(a,b,c);a=this.watcher.getLastResult();if("scope"!=this.binding&&this.watcher&&(d||a&&this.watcher.hasInputPipes()))this.onInputChange(a||d)},onInputChange:function(a){var b=this.scope;"scope"!=this.binding&&(a&&r(a)&&-1!=
a.indexOf("\\{")&&(a=a.replace(/\\{/g,"{")),this.watcher.setValue(a),this.inProg=!0,b instanceof Y?b.$root.$check():this.watcher.checkAll(),this.inProg=!1)},destroy:function(){this.input.destroy();delete this.input;this.supr()},onChange:function(){var a=this.watcher.getLastResult(),b;"input"==this.binding||this.inProg||((b=Pa())&&8>b?oa(this.input.setValue,this.input,[a]):this.input.setValue(a))}}));K("mjs-options",100,C(null,fa,{model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,
fragment:null,initialize:function(a,b,c){this.parseExpr(c);l(b,"mjs-options",null);this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&l(this.defOption,"mjs-default-option","");try{this.watcher=ca(a,this.model,this.onChange,this,null,S)}catch(d){aa(d)}this.render(U(this.watcher.getValue()))},onChange:function(){this.render(U(this.watcher.getValue()))},renderOption:function(a,b,c){var d=this.groupEl||this.fragment,
e=Pa();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=document.createElement("optgroup"),l(d,"label",a.group),a.disabledGroup&&l(d,"disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=document.createElement("option");l(b,"value",a.value);b.text=a.name;e&&9>e&&(b.innerHTML=a.name);a.disabled&&l(b,"disabled","disabled");d.appendChild(b)},render:function(a){var b=
this.node,c=ua(b),d=this.defOption,e=this.scope.$new(),f,g;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);f=0;for(g=a.length;f<g;f++)this.renderOption(a[f],f,e);d&&b.insertBefore(d,b.firstChild);e.$destroy();b.appendChild(this.fragment);this.fragment=null;Na(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=Xa(a)}}));
(function(){var a="selected checked disabled readonly required open".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){K("mjs-"+a,1E3,C(null,fa,{initialize:function(b,c,g){this.supr(b,c,g);l(c,"mjs-"+a,null);this.onChange()},onChange:function(){this.watcher.getLastResult()?l(this.node,a,a):l(this.node,a,null)}}))})(a[b])})();var lb=function(){var a={},b=0;return function(c){if(a[c])return G.resolve(c);1E3<b&&(a={},b=0);var d=document.createElement("img"),e=d.style,f=new G;t(d,"load",function(){a[c]=
!0;b++;document.body.removeChild(d);f.resolve(c)});e.position="absolute";e.visibility="hidden";e.left="-10000px";e.top="0";d.src=c;document.body.appendChild(d);return f}}();K("mjs-src",1E3,C(null,fa,{initialize:function(a,b,c){this.supr(a,b,c);l(b,"mjs-src",null)},onChange:function(){var a=this,b=a.watcher.getLastResult();oa(function(){lb(b).done(function(){a&&a.node&&(a.node.src=b,l(a.node,"src",b))})})}}));var Za=function(a){var b;a:{for(var c=a,d;c;){d=N(c,"mjs-transclude");if(void 0!==d){b=d;
break a}c=c.parentNode}b=void 0}if(b){a.firstChild&&N(a,"mjs-transclude",ga(a.childNodes));c=a.parentNode;d=a.nextSibling;b=Aa(b);var e=U(b.childNodes);c.removeChild(a);c.insertBefore(b,d);return e}return null};K("mjs-transclude",1E3,function(a,b){return Za(b)});K("mjs-view",200,function(a,b,c){l(b,"mjs-view",null);ta(c||"MetaphorJs.cmp.View",{scope:a,node:b},a,b);return!1});ba=ba.registerTagHandler;ba("mjs-include",900,function(a,b,c,d){return(new la({scope:a,node:b,tpl:l(b,"src"),parentRenderer:d,
replace:!0})).initPromise});ba("mjs-transclude",900,function(a,b){return Za(b)});var mb=function(){var a=function(a,b,c){if(v(b))return b(a,c);if(""===b||void 0===b)return!0;if(void 0!==a){if(xa(a))return a===b;if(b instanceof RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},b=function(b,c,f){if(qa(b))return void 0===c.$?!0:a(b,c.$,f);var g,h;for(g in c)if("$"==g)for(h in b){if(a(b[h],
c.$,f))return!0}else if(a(b[g],c[g],f))return!0;return!1},c=function(a,c,f){ia(c)||(c={$:c});var g=[],h,k;h=-1;for(k=a.length;++h<k;)b(a[h],c,f)&&g.push(a[h]);return g};c.compare=b;return c}();F("filter.filter",function(a,b,c,d){return mb(a,c,d)});F("filter.fromList",function(a,b,c){c=c||", ";return a&&a.length?(L(a)||(a=U(a)),a.join(c)):""});F("filter.l",function(a,b){return b.$app.lang.get(a)});F("filter.limitTo",function(a,b,c){b=r(a);if(!L(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):
parseInt(c,10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});F("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});F("filter.lowercase",function(a){return a.toLowerCase()});var nb={};F("filter.moment",function(a,b,c){c=nb[c]||c;
return moment(a).format(c)});var ob={};F("filter.numeral",function(a,b,c){c=ob[c]||c;return numeral(a).format(c)});F("filter.p",function(a,b,c){return b.$app.lang.plural(a,parseInt(c,10)||0)});var pb=function(a,b,c){c||(c="asc");a=a.slice();a.sort(function(a,c){var f=typeof a,g=a,h=c;if(f!=typeof c)return 0;"object"==f&&(v(b)?(g=b(a),h=b(c)):(g=a[b],h=c[b]));if("number"==typeof g)return g-h;g=(""+g).toLowerCase();h=(""+h).toLowerCase();return g===h?0:g>h?1:-1});return"desc"==c?a.reverse():a};F("filter.sortBy",
function(a,b,c,d){return pb(a,c,d)});F("filter.toArray",function(a){return U(a)});F("filter.toList",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=La(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=B(a[b]));return a});F("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});F("filter.uppercase",function(a){return a.toUpperCase()});var qb=function(a){var b=!1,c=!0,d=window,e=d.document,
f=e.documentElement,g=function(c){if("readystatechange"!=c.type||"complete"==e.readyState)va("load"==c.type?d:e,c.type,g),!b&&(b=!0)&&a.call(d,c.type||c)},h=function(){try{f.doScroll("left")}catch(a){setTimeout(h,50);return}g("poll")};if("complete"==e.readyState)a.call(d,"lazy");else{if(e.createEventObject&&f.doScroll){try{c=!d.frameElement}catch(k){}c&&h()}t(e,"DOMContentLoaded",g);t(e,"readystatechange",g);t(d,"load",g)}},rb=function(a,b,c,d){l(a,"mjs-app",null);try{var e=ta(b||"MetaphorJs.cmp.App",
!1,c,a,[a,c]);return d?e.then(function(a){a.run();return a}):e}catch(f){return aa(f),G.reject(f)}};(function(){qb(function(){var a=Ja("[mjs-app]"),b,c,d,e=function(a){a.run()};b=-1;for(c=a.length;++b<c;)d=a[b],rb(d,l(d,"mjs-app")).done(e)})})()})();
