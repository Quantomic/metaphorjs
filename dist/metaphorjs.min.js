(function(){var g=Array.prototype.slice,q=Function.prototype.bind?function(a,c){return a.bind(c)}:function(a,c){return function(){a.apply(c,arguments)}},m=function(a){return a&&a.constructor===Object},h=function(){var a=!1,c=!0,b=g.call(arguments),d=b.shift(),f,e,v;"boolean"==typeof b[b.length-1]&&(a=b.pop());"boolean"==typeof b[b.length-1]&&(c=a,a=b.pop());for(;f=b.shift();)for(e in f)if(f.hasOwnProperty(e)&&"undefined"!=typeof(v=f[e]))if(c)if(d[e]&&m(d[e])&&m(v))h(d[e],v,a,c);else{if(!0===a||"undefined"==
typeof d[e]||null===d[e])m(v)?(d[e]={},h(d[e],v,a,!1)):d[e]=v}else if(!0===a||"undefined"==typeof d[e]||null===d[e])d[e]=v;return d},k=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),l=Array.prototype.indexOf,n=Object.prototype.toString,f={},b=function(a){return f[a]||(f[a]=new RegExp("(?:^|\\s)"+a+"(?!\\S)",""))},e=function(a,c){return c?b(c).test(a.className):!1},d=["0",
"0","0"],a=function(){for(var a=d.length,c;a;){a--;c=d[a].charCodeAt(0);if(57==c)return d[a]="A",d.join("");if(90==c)d[a]="0";else return d[a]=String.fromCharCode(c+1),d.join("")}d.unshift("0");return d.join("")},c={};"undefined"!=typeof window?window.MetaphorJs||(window.MetaphorJs={}):global.MetaphorJs||(global.MetaphorJs={});MetaphorJs.bind=q;MetaphorJs.addListener=function(a,c,b){a.attachEvent?a.attachEvent("on"+c,b):a.addEventListener(c,b,!1)};MetaphorJs.removeListener=function(a,c,b){a.detachEvent?
a.detachEvent("on"+c,b):a.removeEventListener(c,b,!1)};MetaphorJs.extend=h;MetaphorJs.trim=k;MetaphorJs.inArray=function(a,c){return c?l.call(c,a):-1};MetaphorJs.isArray=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&"[object Array]"==n.call(a)||!1};MetaphorJs.toArray=function(a){for(var c=[],b=-1,d=a.length>>>0;++b!==d;c[b]=a[b]);return c};MetaphorJs.addClass=function(a,c){c&&!e(a,c)&&(a.className+=" "+c)};MetaphorJs.removeClass=function(a,c){c&&(a.className=a.className.replace(b(c),
""))};MetaphorJs.hasClass=e;MetaphorJs.nextUid=a;MetaphorJs.data=function(p,b,d){p=p._mjsId||(p._mjsId=a());var e=c[p];return"undefined"!=typeof d?(e||(e=c[p]={}),e[b]=d):e?e[b]:void 0};MetaphorJs.isPlainObject=m;MetaphorJs.isThenable=function(a){var c;return a&&"function"==typeof(c=a.then)?c:!1}})();
(function(){var g=window.MetaphorJs,q=g.extend,m=g.addListener,h=g.removeListener,k=g.isArray,l=[],n=[],f=!1,b=!1,e=function(a,c){return a.priority<c.priority?-1:a.priority>c.priority?1:0},d,a=function(c){var b,d,e;if(k(c)){e=[];b=0;for(d=c.length;b<d;b++)e.push(a(c[b]));return e}switch(c.nodeType){case 1:return c.cloneNode(!0);case 3:return document.createTextNode(c.innerText||c.textContent);case 11:return c.cloneNode(!0);default:return null}},c=function(a,c,b){setTimeout(function(){a.apply(c,b||
[])},0)};q(g,{VERSION:"0.1",registerAttributeHandler:function(a,c,b){d||(d=MetaphorJs.add);l.push({priority:c,name:a,handler:d("attr."+a,b)});f=!1},registerTagHandler:function(a,c,e){d||(d=MetaphorJs.add);n.push({priority:c,name:a,handler:d("tag."+a,e)});b=!1},getAttributeHandlers:function(){f||(l.sort(e),f=!0);return l},getTagHandlers:function(){b||(n.sort(e),b=!0);return n},numberFormats:{},dateFormats:{},emptyFn:function(){},clone:a,isVisible:function(a){return!(0>=a.offsetWidth||0>=a.offsetHeight)},
isInjectable:function(a){return a.length&&"function"==typeof a[a.length-1]},async:c,asyncError:function(a){c(function(){throw a;})},onReady:function(a){var c=!1,b=!0,d=window,e=d.document,f=e.documentElement,g=function(b){if("readystatechange"!=b.type||"complete"==e.readyState)h("load"==b.type?d:e,b.type,g),!c&&(c=!0)&&a.call(d,b.type||b)},l=function(){try{f.doScroll("left")}catch(a){setTimeout(l,50);return}g("poll")};if("complete"==e.readyState)a.call(d,"lazy");else{if(e.createEventObject&&f.doScroll){try{b=
!d.frameElement}catch(k){}b&&l()}m(e,"DOMContentLoaded",g);m(e,"readystatechange",g);m(d,"load",g)}},toFragment:function(a){var c=document.createDocumentFragment();if("string"==typeof a){var b=document.createElement("div");b.innerHTML=a;a=b.childNodes}if(a.nodeType)c.appendChild(a);else for(var b=-1,d=a.length>>>0;++b!==d;c.appendChild(a[0]));return c},app:function(a,c,b){try{return MetaphorJs.create(c||"MetaphorJs.cmp.App",a,b)}catch(d){MetaphorJs.error(d)}},error:function(a){var c=a.stack||Error().stack;
setTimeout(function(){"undefined"!=typeof console&&console.log&&(console.log(a),c&&console.log(c))},0)}})})();
(function(){var g=/\r/g,q=MetaphorJs.trim,m=MetaphorJs.toArray,h=MetaphorJs.inArray,k=MetaphorJs.isArray,l=function(f){var b,e;if((b=n[f.type]||n[f.nodeName.toLowerCase()])&&"get"in b&&void 0!==(e=b.get(f,"value")))return e;e=f.value;return"string"===typeof e?e.replace(g,""):null==e?"":e},n={option:{get:function(f){var b=f.getAttribute("value");return null!=b?b:q(f.innerText||f.textContent)}},select:{get:function(f){for(var b,e=f.options,d=f.selectedIndex,a=(f="select-one"===f.type||0>d)?null:[],
c=f?d+1:e.length,p,u=0>d?c:f?d:0;u<c;u++)if(b=e[u],p=b.disabled||null!==b.getAttribute("disabled")||e.parentNode.disabled,(b.selected||u===d)&&!p){b=l(b);if(f)return b;a.push(b)}return a},set:function(f,b){for(var e,d,a=f.options,c=m(b),p=a.length;p--;)if(d=a[p],d.selected=h(d.value,c))e=!0;e||(f.selectedIndex=-1);return c}}};n.radio=n.checkbox={set:function(f,b){if(k(b))return f.checked=0<=h(l(f),b)},get:function(f){return null===f.getAttribute("value")?"on":f.value}};MetaphorJs.getValue=l;MetaphorJs.setValue=
function(f,b){if(1===f.nodeType){null==b?b="":"number"===typeof b&&(b+="");var e=n[f.type]||n[f.nodeName.toLowerCase()];e&&"set"in e&&void 0!==e.set(this,b,"value")||(f.value=b)}}})();
(function(){var g=function(){return!1},q=function(){return!0},m=function(h){if(h instanceof m)return h;if(!(this instanceof m))return new m(h);for(var k in h)if(!this[k])try{this[k]=h[k]}catch(l){}this.originalEvent=h;this.type=h.type;!this.target&&h.srcElement&&(this.target=h.srcElement);var n,f=h.button;"undefined"==typeof this.pageX&&null!=h.clientX&&(n=this.target?this.target.ownerDocument||document:document,k=n.documentElement,n=n.body,this.pageX=h.clientX+(k&&k.scrollLeft||n&&n.scrollLeft||
0)-(k&&k.clientLeft||n&&n.clientLeft||0),this.pageY=h.clientY+(k&&k.scrollTop||n&&n.scrollTop||0)-(k&&k.clientTop||n&&n.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=h.defaultPrevented||void 0===h.defaultPrevented&&!1===h.returnValue?q:g;this.timeStamp=h&&h.timeStamp||(new Date).getTime()};m.prototype={isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=
q;g&&g.preventDefault&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=q;g&&g.stopPropagation&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=q;g&&g.stopImmediatePropagation&&g.stopImmediatePropagation();this.stopPropagation()}};window.MetaphorJs||(window.MetaphorJs={});MetaphorJs.normalizeEvent=function(g){return new m(g)}})();
(function(){var g=MetaphorJs.extend,q=MetaphorJs.bind,m=MetaphorJs.addListener,h=MetaphorJs.removeListener,k=MetaphorJs.getValue,l=MetaphorJs.setValue,n=function(f,b,e,d){this.el=f;this.cb=b;this.scb=d;this.cbContext=e;this.inputType=b=f.getAttribute("mjs-input-type")||f.type.toLowerCase();this.listeners=[];e=f.type?f.type.toLowerCase():"";this.submittable="input"==f.nodeName.toLowerCase()&&"radio"!=e&&"checkbox"!=e;"radio"==b?this.initRadioInput():"checkbox"==b?this.initCheckboxInput():this.initTextInput()};
g(n.prototype,{el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var f=this.inputType,b=this.listeners,e=this.radio,d=this.el,a,c,p,u;a=0;for(c=b.length;a<c;a++)if("radio"==f)for(p=0,u=e.length;p<u;p++)h(e[p],b[a][0],b[a][1]);else h(d,b[a][0],b[a][1]);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var f=this.el,b=f.type,f=f.name,e,d,a;this.onRadioInputChangeDelegate=q(this.onRadioInputChange,
this);if(document.querySelectorAll)e=document.querySelectorAll("input[name="+f+"]");else{var c=document.getElementsByTagName("input"),p;e=[];d=0;for(a=c.length;d<a;d++)p=c[d],p.type==b&&p.name==f&&e.push(p)}this.radio=e;this.listeners.push(["click",this.onRadioInputChangeDelegate]);d=0;for(a=e.length;d<a;d++)m(e[d],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=q(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);
m(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var f=MetaphorJs.browser,b=!1,e=this,d=e.el,a=e.listeners,c;if(!f.android){var p=function(){b=!0},u=function(){b=!1;g()};a.push(["compositionstart",p]);a.push(["compositionend",u]);m(d,"compositionstart",p);m(d,"compositionend",u)}var g=e.onTextInputChangeDelegate=function(){if(!b)e.onTextInputChange()};if(f.hasEvent("input"))a.push(["input",g]),m(d,"input",g);else{var t=function(a){c||(c=window.setTimeout(function(){g(a);
c=null},0))},p=function(a){a=a||window.event;var c=a.keyCode;if(13==c&&e.submittable&&e.scb)return e.scb.call(e.callbackContext,a);91===c||15<c&&19>c||37<=c&&40>=c||t(a)};a.push(["keydown",p]);m(d,"keydown",p);f.hasEvent("paste")&&(a.push(["paste",t]),a.push(["cut",t]),m(d,"paste",t),m(d,"cut",t))}a.push(["change",g]);m(d,"change",g)},onTextInputChange:function(){var f=this.el.value;switch(this.inputType){case "number":f=parseInt(f,10)}this.cb.call(this.cbContext,f)},onCheckboxInputChange:function(){var f=
this.el;this.cb.call(this.cbContext,f.checked?f.getAttribute("value")||!0:!1)},onRadioInputChange:function(f){f=f||window.event;this.cb.call(this.cbContext,(f.target||f.srcElement).value)},setValue:function(f){var b=this.inputType,e,d;if("radio"==b)for(b=this.radio,e=0,d=b.length;e<d;e++){if(b[e].value==f){b[e].checked=!0;break}}else"checkbox"==b?(b=this.el,b.checked=!0===f||f==b.value):l(this.el,f)},getValue:function(){var f=this.inputType,b,e;if("radio"==f){f=this.radio;b=0;for(e=f.length;b<e;b++)if(f[b].checked)return f[b].value;
return null}return"checkbox"==f?this.el.checked?this.el.getAttribute("value")||!0:!1:k(this.el)}});window.MetaphorJs||(window.MetaphorJs={});MetaphorJs.lib||(MetaphorJs.lib={});MetaphorJs.lib.Input=n})();
(function(){var g="undefined"!=typeof window?window:global,q={},m=function(h,k){if(q[h]||k)return q[h];var f=h.split("."),b,e=f.length,d,a=g;for(b=0;b<e;b++){d=f[b];if(!a[d])return null;a=a[d]}return a},h=function(h,k){var f;f=h.split(".");var b,e=f.pop();b=f.join(".");var d=f.length,a,c=g;if(q[b])f=[q[b],e];else{for(b=0;b<d;b++)a=f[b],c[a]||(c[a]={}),c=c[a];f=[c,e]}f[0][f[1]]=k;return q[h]=k},k=function(g,h){return q[g]=h};h("MetaphorJs.ns",{register:h,exists:function(g){return q[g]?!0:!1},get:m,
add:k,remove:function(g){delete q[g]}});MetaphorJs.r=h;MetaphorJs.g=m;MetaphorJs.add=k;"undefined"!=typeof module&&(module.exports=MetaphorJs.ns)})();
(function(){var g;if("undefined"!=typeof global)try{g=require("metaphorjs-namespace")}catch(q){g=global.MetaphorJs.ns}else g=window.MetaphorJs.ns;var m={}.undefined,h=Array.prototype.slice,k=function(a,c){return f(function(){},a,c)},l=function(a,c,b){return function(){var d=m,e=this.supr;this.supr=a.prototype[c]||function(){};try{d=b.apply(this,arguments)}catch(f){}this.supr=e;return d}},n=function(a,c,b){for(var d in c)c.hasOwnProperty(d)&&(a[d]="function"===typeof c[d]&&b.prototype&&"function"===
typeof b.prototype[d]?l(b,d,c[d]):c[d])},f=function(a,c,b){var d=function(){};d.prototype=a.prototype;d=new d;b=b||function(){this.initialize&&this.initialize.apply(this,arguments)};n(d,c,a);b.prototype=d;b.prototype.constructor=b;b.prototype.getClass=function(){return this.__proto__.constructor.__class};b.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};b.__instantiate=function(a){return function(){var c=function(){},b;c.prototype=a.prototype;c=new c;b=a.prototype.constructor.apply(c,
arguments);return"object"==typeof b?b:c}}(b);return b},b=function(a,c,b,d,e,h){null===a&&(a="");"function"==typeof a?(e=b,"string"==typeof c?(e=d,d=b):(d=c,b=a,c=null),a=null):"string"!=typeof a&&(e=c,d=a,a=b=c=null);"string"!=typeof c&&"function"!=typeof c&&(e=d,d=b,b=c,c=null);"function"!=typeof b&&(e=d,d=b,b=null);d=d||{};var v=c&&"string"==typeof c?g.get(c):c;if(c&&!v)throw Error(c+" not found");c=v?f(v,d,b):k(d,b);c.__isMetaphorClass=!0;c.__parent=v;c.__parentClass=v?v.__class:null;c.__class=
a;if(e)for(var l in e)e.hasOwnProperty(l)&&(c[l]=e[l]);a&&(h?g.add(a,c):g.register(a,c));e&&e.alias&&g.add(e.alias,c);return c},e=function(a,c,d,e,f){return b(a,c,d,e,f,!0)},d=function(a){var c=g.get(a),b=h.call(arguments,1);if(!c)throw Error(a+" not found");return c.__instantiate.apply(this,b)},a=function(a,c){var b="string"==typeof c?g.get(c):c;return b?a instanceof b:!1},c=function(a,c){var b=a,d=g.get;"string"!=typeof c&&(c=c.getClass?c.getClass():c.prototype.constructor.__class);for("string"==
typeof a&&(b=d(a));b;){if(b.prototype.constructor.__class==c)return!0;b&&(b=b.getParentClass?d(b.getParentClass()):b.__parent)}return!1};"undefined"!=typeof global?module.exports={define:b,d:b,defineCache:e,dc:e,create:d,c:d,is:a,isSubclass:c}:(MetaphorJs.define=MetaphorJs.d=b,MetaphorJs.defineCache=MetaphorJs.dc=e,MetaphorJs.create=MetaphorJs.c=d,MetaphorJs.is=a,MetaphorJs.isSubclass=MetaphorJs.iss=c)})();
(function(){var g="undefined"!=typeof window?window.setTimeout:global.setTimeout,q=function(a){var c;return!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof(c=a.then)?!1:c},m=Function.prototype.bind?function(a,c){return a.bind(c)}:function(a,c){return function(){a.apply(c,arguments)}},h=[],k=!1,l="undefined"!=typeof process?process.nextTick:function(a){g(a,0)},n=function(){k=!0;var a=h.shift();l(function(){a[0].apply(a[1],a[2]);h.length?n():k=!1},0)},f=function(a,c,b){b=b||[];h.push([a,
c,b]);k||n()},b=function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},e=function(a,c){return function(b){try{c.resolve(a(b))}catch(d){c.reject(d)}}},d=function(a,c){if(a instanceof d)return a;if(!(this instanceof d))return new d(a,c);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if("undefined"!=typeof a)if(q(a)||"function"!=typeof a)this.resolve(a);else try{a.call(c,m(this.resolve,this),m(this.reject,this))}catch(b){this.reject(b)}};b(d.prototype,{_state:0,_fulfills:null,
_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,c){var b;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(b=q(a)){a instanceof d?a.then(m(this._processResolveValue,
this),m(this._processRejectReason,this)):(new d(b,a)).then(m(this._processResolveValue,this),m(this._processRejectReason,this));return}}catch(e){0==this._state&&this._doReject(e);return}c.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,c;c=a.shift();)f(c[0],c[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;
this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,c;c=a.shift();)f(c[0],c[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,c){var b=new d,g=this._state;
0==g||0!=this._wait?(a&&"function"==typeof a?this._fulfills.push([e(a,b),null]):this._fulfills.push([b.resolve,b]),c&&"function"==typeof c?this._rejects.push([e(c,b),null]):this._rejects.push([b.reject,b])):1==g?a&&"function"==typeof a?f(e(a,b),null,[this._value]):b.resolve(this._value):2==g&&(c&&"function"==typeof c?f(e(c,b),null,[this._reason]):b.reject(this._reason));return b},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,c;c=a.shift();)c[0].call(c[1]||null,
this._value)},done:function(a,c){var b=this._state;1==b&&0==this._wait?a.call(c||null,this._value):0==b&&this._dones.push([a,c]);return this},_fail:function(){for(var a=this._fails,c;c=a.shift();)c[0].call(c[1]||null,this._reason)},fail:function(a,c){var b=this._state;2==b&&0==this._wait?a.call(c||null,this._reason):0==b&&this._fails.push([a,c]);return this},always:function(a,c){this.done(a,c);this.fail(a,c);return this},promise:function(){return{then:m(this.then,this),done:m(this.done,this),fail:m(this.fail,
this),always:m(this.always,this)}},after:function(a){var c=this;if(q(a)){c._wait++;var b=function(){c._wait--;0==c._wait&&0!=c._state&&(1==c._state?c._callResolveHandlers():c._callRejectHandlers())};"function"==typeof a.done?a.done(b):a.then(b)}return c}});b(d,{resolve:function(a){return new d(a)},reject:function(a){var c=new d;c.reject(a);return c},all:function(a){if(!a.length)return d.resolve(null);var c=new d,b=a.length,e=Array(b),f=b,g,s,h=function(a,b){e[b]=a;f--;0==f&&c.resolve(e)};for(g=0;g<
b;g++)(function(b){s=a[g];s instanceof d?s.done(function(a){h(a,b)}).fail(c.reject,c):q(s)||"function"==typeof s?(new d(s)).done(function(a){h(a,b)}).fail(c.reject,c):h(s,b)})(g);return c},when:function(){return d.all(arguments)},allResolved:function(a){if(!a.length)return d.resolve(null);var c=new d,b=a.length,e=[],f=b,g,s,h=function(a){e.push(a);k()},k=function(){f--;0==f&&c.resolve(e)};for(g=0;g<b;g++)s=a[g],s instanceof d?s.done(h).fail(k):q(s)||"function"==typeof s?(new d(s)).done(h).fail(k):
h(s);return c},race:function(a){if(!a.length)return d.resolve(null);var c=new d,b=a.length,e,f;for(e=0;e<b&&(f=a[e],f instanceof d?f.done(c.resolve,c).fail(c.reject,c):q(f)||"function"==typeof f?(new d(f)).done(c.resolve,c).fail(c.reject,c):c.resolve(f),c.isPending());e++);return c}});"undefined"==typeof global?(window.Promise||(window.Promise=d),window.MetaphorJs&&(MetaphorJs.r?MetaphorJs.r("MetaphorJs.lib.Promise",d):(MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Promise=d))):"undefined"!=typeof module&&
(module.exports=d)})();
(function(){"undefined"==typeof window&&(global.window=global);if(window.Promise)g=window.Promise;else{var g;if("undefined"!=typeof global)try{g=require("metaphorjs-promise")}catch(q){global.Promise&&(g=global.Promise)}else window.MetaphorJs&&MetaphorJs.lib&&MetaphorJs.lib.Promise&&(g=MetaphorJs.lib.Promise)}var m=window.MetaphorJs&&MetaphorJs.nextUid?MetaphorJs.nextUid:function(){return Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10)},h=function(a,c){for(var b in c)c.hasOwnProperty(b)&&
(a[b]=c[b])},k=Array.prototype.slice,l="undefined"!=typeof process?process.nextTick:function(a){window.setTimeout(a,0)},n=Function.prototype.bind?function(a,c){return a.bind(c)}:function(a,c){return function(){a.apply(c,arguments)}},f=function(){this.events={}};h(f.prototype,{createEvent:function(a,c){a=a.toLowerCase();var d=this.events;d[a]||(d[a]=new b(a,c));return d[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,c,d,e){a=a.toLowerCase();var f=this.events;f[a]||
(f[a]=new b(a));return f[a].on(c,d,e)},once:function(a,c,b,d){d=d||{};d.limit=1;return this.on(a,c,b,d)},un:function(a,c,b){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(c,b)},hasListener:function(a,c,b){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(c,b):!1},removeAllListeners:function(a){var c=this.events;c[a]&&c[a].removeAllListeners()},triggerAsync:function(){var a=arguments[0],c=this.events,a=a.toLowerCase();if(!c[a])return[];a=c[a];return a.triggerAsync.apply(a,k.call(arguments,
1))},trigger:function(){var a=arguments[0],c=this.events,a=a.toLowerCase();if(!c[a])return null;a=c[a];return a.trigger.apply(a,k.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var c=this.events;c[a]&&c[a].suspend()},suspendAllEvents:function(){var a=this.events,c;for(c in a)a[c].suspend()},resumeEvent:function(a){a=a.toLowerCase();var c=this.events;c[a]&&c[a].resume()},resumeAllEvents:function(){var a=this.events,c;for(c in a)a[c].resume()},destroyEvent:function(a){var c=this.events;
c[a]&&(c[a].removeAllListeners(),c[a].destroy(),delete c[a])},destroy:function(a){var c=this.events;if(a)a=a.toLowerCase(),c[a]&&(c[a].destroy(),delete c[a]);else{for(var b in c)c[b].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners triggerAsync trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),c={},b,d=-1,e=a.length;++d<e;b=a[d],c[b]=n(this[b],this));this.api=c}return this.api}});
var b=function(a,c){this.name=a;this.listeners=[];this.map={};this.hash=m();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=c||!1};h(b.prototype,{getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,c,b){if(!a)return null;c=c||null;b=b||{};var d=this.uni,e=c||a;if(e[d]&&!b.allowDupes)return null;var f=++this.lid,g=b.first||!1;e[d]=f;a={fn:a,scope:c,uniScope:e,id:f,called:0,limit:b.limit||0,start:b.start||1,count:0,append:b.append,
prepend:b.prepend};g?this.listeners.unshift(a):this.listeners.push(a);this.map[f]=a;return f},once:function(a,c,b){b=b||{};b.once=!0;return this.on(a,c,b)},un:function(a,c){var b=-1,d=this.uni,e=this.listeners,f;f=a==parseInt(a)?a:(c||a)[d];if(!f)return!1;for(var g=0,h=e.length;g<h;g++)if(e[g].id==f){b=g;delete e[g].uniScope[d];break}if(-1==b)return!1;e.splice(b,1);delete this.map[f];return!0},hasListener:function(a,c){var b=this.listeners,d;if(a){c=c||a;d=a==parseInt(a)?a:c[this.uni];if(!d)return!1;
for(var e=0,f=b.length;e<f;e++)if(b[e].id==d)return!0;return!1}return 0<b.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,d,e;d=0;for(e=a.length;d<e;d++)delete a[d].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var d;a.append||a.prepend?(d=k.call(b),a.prepend&&(d=a.prepend.concat(d)),a.append&&(d=d.concat(a.append))):d=b;return d},triggerAsync:function(){if("undefined"==typeof g)throw Error("Promises are not defined");
var a=this,b=a.listeners,d=a.returnResult,e=k.call(arguments),f=[],h=[],s,w,v;if(a.suspended||0==b.length)return g.resolve(null);w=0;for(v=b.length;w<v;w++)f.push(b[w]);for(w=function(b){s=a._prepareArgs(b,e);return new g(function(c,d){l(function(){try{c(b.fn.apply(b.scope,s))}catch(e){d(e)}b.called++;b.called==b.limit&&a.un(b.id)},0)})};(b=f.shift())&&(!b||!a.map[b.id]||(b.count++,b.count<b.start||(h.push(w(b)),"first"!=d))););return"last"==d?[h.pop()]:h},trigger:function(){var a=this.listeners,
b=this.returnResult;if(this.suspended||0==a.length)return null;var d="all"==b?[]:null,e=[],f,g;if("first"==b)e.push(a[0]);else for(f=0,g=a.length;f<g;f++)e.push(a[f]);for(;a=e.shift();)if(a&&this.map[a.id]&&(a.count++,!(a.count<a.start))){f=a.fn.apply(a.scope,this._prepareArgs(a,arguments));a.called++;a.called==a.limit&&this.un(a.id);"all"==b&&d.push(f);if("first"==b)return f;"last"==b&&(d=f);if(!1==b&&!1===f)break}if(b)return d}});var e=window.MetaphorJs;if(e&&e.VERSION){var d=new f;h(MetaphorJs,
d.getApi())}e&&e.r?e.r("MetaphorJs.lib.Observable",f):(window.MetaphorJs=window.MetaphorJs||{},MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Observable=f);"undefined"!=typeof global&&(module.exports=f)})();
(function(){"undefined"==typeof window&&(global.window=global);var g;if("undefined"!=typeof global)try{g=require("metaphorjs-observable")}catch(q){global.Observable&&(g=global.Observable)}else window.MetaphorJs&&MetaphorJs.lib&&MetaphorJs.lib.Observable&&(g=MetaphorJs.lib.Observable);var m=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,h={},k=window.MetaphorJs&&MetaphorJs.nextUid?MetaphorJs.nextUid:function(){var a;a=Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10);return h[a]?
k():h[a]=a},l=Object.prototype.toString,n=function(a){return"[object Array]"===l.call(a)},f=function(a){return"[object Date]"===l.call(a)},b=function(a){return"[object RegExp]"===l.call(a)},e=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},d=function(a,c){if(e(a))throw Error("Cannot copy window object");if(c){if(a===c)throw Error("Objects are identical");if(n(a))for(var g=c.length=0;g<a.length;g++)c.push(d(a[g]));else{for(g in c)delete c[g];for(g in a)c[g]=d(a[g])}}else(c=a)&&
(n(a)?c=d(a,[]):f(a)?c=new Date(a.getTime()):b(a)?c=new RegExp(a.source):null!=a&&"object"===typeof a&&(c=d(a,{})));return c},a=function(c,d){if(c===d)return!0;if(null===c||null===d)return!1;if(c!==c&&d!==d)return!0;var g=typeof c,z;if(g==typeof d&&"object"==g)if(n(c)){if(!n(d))return!1;if((g=c.length)==d.length){for(z=0;z<g;z++)if(!a(c[z],d[z]))return!1;return!0}}else{if(f(c))return f(d)&&c.getTime()==d.getTime();if(b(c)&&b(d))return c.toString()==d.toString();if(e(c)||e(d)||n(d))return!1;g={};for(z in c)if(("$"!==
z.charAt(0)||"object"!=typeof c[z])&&"function"!==typeof c[z]){if(!a(c[z],d[z]))return!1;g[z]=!0}for(z in d)if(!g.hasOwnProperty(z)&&"$"!==z.charAt(0)&&void 0!==d[z]&&"function"!==typeof d[z])return!1;return!0}return!1},c=function(b,c){var d=b.length,e=c.length,f=Array(d+1),g=Array(d+1),r,x,C,h,s=0;if(d==e&&0==d)return{changes:0,distance:0,prescription:[]};for(r=0;r<=d;r++)f[r]=Array(e+1),g[r]=Array(e+1),f[r][0]=r,g[r][0]="D";for(r=0;r<=e;r++)f[0][r]=r,g[0][r]="I";for(r=1;r<=d;r++)for(x=1;x<=e;x++)C=
a(b[r-1],c[x-1])?0:1,f[r][x-1]<f[r-1][x]&&f[r][x-1]<f[r-1][x-1]+C?(f[r][x]=f[r][x-1]+1,g[r][x]="I"):f[r-1][x]<f[r-1][x-1]+C?(f[r][x]=f[r-1][x]+1,g[r][x]="D"):(f[r][x]=f[r-1][x-1]+C,g[r][x]=1==C?"R":"-");h=[];r=d;x=e;do C=g[r][x],h.push(C),"-"!=C&&s++,"R"==C||"-"==C?(r--,x--):"D"==C?r--:x--;while(0!=r||0!=x);return{changes:s/h.length,distance:f[d][e],prescription:h.reverse()}},p=window.MetaphorJs?MetaphorJs.trim:function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():
a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),u,A=window.MetaphorJs?MetaphorJs.ns.get:null,t=function(a,b,c,d,e){u||(u=new g);var f=k(),r;n(a)&&null===b?r="array":("string"!=typeof b&&(d=c,c=b,b=null,r="object"),"string"==typeof a&&(d=c,c=b,b=a,a=null),b&&a&&(r=a.hasOwnProperty(b)?"attr":"expr"),b&&!a&&(r="expr"));if(c)u.on(f,c,d||this,{append:[e],allowDupes:!0});this.code=b=this._processPipes(b,a);this.getterFn="expr"==r?y(b):null;this.id=f;this.type=r;
this.obj=a;this.itv=null;this.curr=this._getValue()};(function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(t.prototype,{code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,arraySlice:!1,pipes:null,_addPipe:function(a,b,c){var d=b.shift(),e=null,f=[],r;A&&(e=A("filter."+d,!0));e||(e=window[d]||c[d]);if("function"==typeof e){d=-1;for(r=b.length;++d<r;f.push(s(c,b[d],self.check,self)));a.push([e,b,f])}},_processPipes:function(a,b){for(var c=0,d=a.length,e=[],
f,r,g,C=!1,h=a;c<d;)if(-1!=(f=a.indexOf("|",c)))r=a.charAt(f-1),g=a.charAt(f+1),"|"!=r&&"'"!=r&&'"'!=r&&"|"!=g&&"'"!=g&&'"'!=g&&(C?(c=p(a.substring(c,f)).split(":"),this._addPipe(e,c,b)):(C=!0,h=p(a.substring(0,f)))),c=f+1;else{C&&(c=p(a.substr(c)).split(":"),this._addPipe(e,c,b));break}e.length&&(this.pipes=e);return h},_checkCode:function(){var a=this._getValue(),b=!1,d=this.curr;if(n(d)&&n(a))return b=c(d,a),b.changes?(this.curr=a.slice(),u.trigger(this.id,b,a,d),!0):!1;a!==d&&(this.curr=a,u.trigger(this.id,
a,d),b=!0);return b},_checkObject:function(){var b=this.obj,c=this.curr;return a(c,b)?!1:(this.curr=d(b),u.trigger(this.id,b,c),!0)},_checkArray:function(){var a=this.curr,b=this.obj,d=c(a,b);return d.changes?(this.curr=b.slice(),u.trigger(this.id,d,b,a),!0):!1},_getValue:function(){var a;switch(this.type){case "attr":a=this.obj[this.code];break;case "expr":try{a=this.getterFn(this.obj)}catch(b){if(window.MetaphorJs)MetaphorJs.asyncError(b);else throw b;}"undefined"==typeof a&&(a="");break;case "object":a=
d(this.obj);break;case "array":a=this.obj}n(a)&&(a=a.slice());var c=this.pipes;if(c){var e,f,g,r=c.length,x=this.obj,C,h;for(e=0;e<r;e++){g=c[e][1];f=[];C=-1;for(h=g.length;++C<h;f.push(H(g[C],x)));f.unshift(a);f.push(x);a=c[e][0].apply(null,f)}}return a},addListener:function(a,b,c){return u.on(this.id,a,b,c)},removeListener:function(a,b){return u.un(this.id,a,b)},getValue:function(){return this._getValue()},setValue:function(a){var b=this.type;if("attr"==b)this.obj[this.code]=a;else if("expr"==b)this.setterFn||
(this.setterFn=F(this.code)),this.setterFn(this.obj,a);else if("array"==b)this.obj=a;else throw"Cannot set value";},check:function(){switch(this.type){case "expr":case "attr":return this._checkCode();case "object":return this._checkObject();case "array":return this._checkArray()}return!1},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&
(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,b){var c=this.id;u.un(c,a,b);return u.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b,c,d,e,f;this.itv&&this.clearInterval();if(a)for(b=-1,c=a.length;++b<c;)for(f=a[b][2],d=-1,e=f.length;++d<e;)f[d].unsubscribeAndDestroy(this.check,this);this.pipes=this.obj=this.curr=null;u.destroyEvent(this.id);this.obj&&delete this.obj.$$watchers[this.code]}});var s=function(a,b,c,d,e){b=w(a,p(b));return a?(a.$$watchers||
(a.$$watchers={$checkAll:function(){var a,b=0;for(a in this)"$"!=a.charAt(0)&&this[a].check()?b++:"$"==a.charAt(0)&&this[a]instanceof t&&this[a].check()&&b++;return b},$destroyAll:function(){for(var a in this)if("$"!=a.charAt(0)||this[a]instanceof t)this[a].destroy(),delete this[a]}}),a.$$watchers[b]?a.$$watchers[b].addListener(c,d,{append:[e],allowDupes:!0}):a.$$watchers[b]=new t(a,b,c,d,e),a.$$watchers[b]):new t(a,b,c,d,e)},w=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==
b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},v=Function,E=function(a){var b=a.stack||Error().stack;"undefined"!=typeof console&&console.log&&(console.log(a),b&&console.log(b))};"undefined"!=typeof window&&(window.watchableError=E);"undefined"!=typeof global&&(global.watchableError=E);var D={},y=function(a){return D[a]?D[a]:D[a]=new v("____","".concat("try {","return ",a.replace(m,"$1____.$3"),";} catch (e) { watchableError(e); }"))},I={},F=function(a){if(!I[a]){var b=a.replace(m,
"$1____.$3");return I[a]=new v("____","$$$$","".concat("try {",b," = $$$$",";} catch (e) { watchableError(e); }"))}return I[a]},J={},H=function(a,b){return y(a)(b)};t.create=s;t.unsubscribeAndDestroy=function(a,b,c,d){b=p(b);(a=a.$$watchers)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&delete a[b]};t.normalizeExpr=w;t.prepareCode=function(a){return a.replace(m,"$1____.$3")};t.createGetter=y;t.createSetter=F;t.createFunc=function(a){return J[a]?J[a]:J[a]=new v("____","".concat("try {",a.replace(m,"$1____.$3"),
";} catch (e) { watchableError(e); }"))};t.eval=H;window.MetaphorJs&&MetaphorJs.r&&MetaphorJs.r("MetaphorJs.lib.Watchable",t);"undefined"!=typeof global&&(module.exports=t)})();
(function(){var g,q;if("undefined"!=typeof global)try{g=require("metaphorjs-promise"),q=require("metaphorjs-observable")}catch(m){g=global.MetaphorJs.lib.Promise,q=global.MetaphorJs.lib.Observable}else g=window.MetaphorJs.lib.Promise,q=window.MetaphorJs.lib.Observable;var h=MetaphorJs.extend,k=MetaphorJs.bind,l=MetaphorJs.addListener,n=MetaphorJs.trim,f=MetaphorJs.isArray,b;"undefined"!=typeof window&&(b=document.querySelectorAll||function(a){var b=document,c=b.documentElement.firstChild,d=b.createElement("STYLE");
c.appendChild(d);b.__qsaels=[];d.sheet?d.sheet.insertRule(a+"{x:expression(document.__qsaels.push(this))}",0):d.styleSheet&&(d.styleSheet.cssText=a+"{x:expression(document.__qsaels.push(this))}");window.scrollBy(0,0);return b.__qsaels});var e=/#.*$/,d=/([?&])_=[^&]*/,a=/\?/,c=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,p=/^(?:GET|HEAD)$/i,u=0,A=function(a,b){setTimeout(function(){a.call(b)},0)},t=function(a,b){var c,d;if(!a||"string"!==typeof a)return null;try{d=new DOMParser,c=d.parseFromString(a,
b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},s=function(a,b,c){var d,e;if("string"==typeof a&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a));else if(f(a)&&c)for(d=0,e=a.length;d<e;d++)s(a[d],b,c+"["+d+"]");else if("object"==typeof a)for(d in a)a.hasOwnProperty(d)&&s(a[d],b,c?c+"["+d+"]":d)},w=function(b,c){b.replace(e,"");if(!1===c.cache){var f=(new Date).getTime();return d.test(b)?b.replace(d,"$1_="+f):b+(a.test(b)?
"&":"?")+"_="+f}!c.data||window.FormData&&c.data instanceof window.FormData||("string"!=typeof c.data?(f=[],s(c.data,f,null),f=f.join("&").replace(/%20/g,"+")):f=c.data,c.data=f,p.test(c.method)&&(b+=(a.test(b)?"&":"?")+c.data,c.data=null));return b},v={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},E={url:null,data:null,method:"GET",headers:null,username:null,password:null,
cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},D={},y=new q,I=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},F=function(a,b,c){var d,e;if("object"!=
typeof a&&"function"!=typeof a&&c)d=document.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",a),b.appendChild(d);else if(f(a)&&c)for(d=0,e=a.length;d<e;d++)F(a[d],b,c+"["+d+"]");else if("object"==typeof a)for(d in a)a.hasOwnProperty(d)&&F(a[d],b,c?c+"["+d+"]":d)},J=function(a){for(var b,c,d="",e=0;e<a.elements.length;e++)if(b=a.elements[e],b.hasAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT",
"FILE"===c)for(c=0;c<b.files.length;d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&"CHECKBOX"!==c||b.checked)d+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return d},H=function(){},L=function(a,c,d){var e=c?c.dataType:null;c=c?c.selector:null;if("string"!=typeof a)return a;d=d||"";if("xml"===e||!e&&0<=d.indexOf("xml"))return a=t(n(a)),c?b.call(a,c):a;if("html"===e)return a=t(a,"text/html"),c?b.call(a,c):a;if("fragment"==e){d=document.createDocumentFragment();
e=document.createElement("div");for(e.innerHTML=a;e.firstChild;)d.appendChild(e.firstChild);return d}if("json"===e||!e&&0<=d.indexOf("json"))return a=n(a),JSON.parse(a);("script"===e||!e&&0<=d.indexOf("javascript"))&&I(a);return a+""},K=function(a){var b=c.exec(("undefined"!=typeof window?window.location.href:"").toLowerCase())||[],d=c.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!d||d[1]===b[1]&&d[2]===b[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")));b=new g;
"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||"undefined"!=typeof window&&window.FormData||"iframe"==a.transport||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):J(a.form));a.url=w(a.url,a);d=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new G(a,b,this):new z(a,b,this):new M(a,b,this);this._deferred=b;this._transport=d;b.done(function(a){y.trigger("success",
a)});b.fail(function(a){y.trigger("error",a)});b.always(function(){y.trigger("end")});y.trigger("start");a.timeout&&(this._timeout=setTimeout(k(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===y.trigger("beforeSend",a,d)&&(this._promise=g.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,d)&&(this._promise=g.reject());this._promise||(A(d.send,d),a=b.promise(),a.abort=k(this.abort,this),b.always(this.destroy,this),this._promise=a)};h(K.prototype,{_jsonpName:null,_transport:null,
_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);F(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var b=this._opt,c=b.jsonpParam||
"callback",d=b.jsonpCallback||"jsonp_"+ ++u;b.url+=(a.test(b.url)?"&":"?")+c+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=k(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=k(this.jsonpCallback,this));return d},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},processResponseData:function(a,b){var c=this._opt;a=L(a,c,b);y.hasListener("processResponse")&&(a=y.trigger("processResponse",a,this._deferred));
c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred;if(this._opt.jsonp)if(a){try{I(a)}catch(d){c.reject(d)}c.isPending()&&c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else try{c.resolve(this.processResponseData(a,b))}catch(e){c.reject(e)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);
this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0);var B=function(a,b){b=b||{};a&&"string"!=typeof a?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";h(b,D,!1);h(b,E,!1);b.method=b.method?b.method.toUpperCase():
b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new K(b)).promise()};B.setup=function(a){h(D,a,!0)};B.on=function(){y.on.apply(y,arguments)};B.un=function(){y.un.apply(y,arguments)};B.get=function(a,b){b=b||{};b.method="GET";return B(a,b)};B.post=function(a,b){b=b||{};b.method="POST";return B(a,b)};B.load=function(a,b,c){c=c||{};"string"!=typeof b&&(c=b);c.dataType="fragment";return B(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};
B.loadScript=function(a){return B(a,{transport:"script"})};B.submit=function(a,b){b=b||{};b.form=a;return B(null,b)};var z=function(a,b,c){var d;if(!(window.XMLHttpRequest&&(d=new XMLHttpRequest)||(d=new ActiveXObject("Msxml2.XMLHTTP"))||(d=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=d;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&l(d,"progress",k(a.progress,a.callbackScope));a.uploadProgress&&d.upload&&l(d.upload,"progress",k(a.uploadProgress,a.callbackScope));
try{var e;if(a.xhrFields)for(e in a.xhrFields)d[e]=a.xhrFields[e];a.data&&a.contentType&&d.setRequestHeader("Content-Type",a.contentType);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.setRequestHeader("Accept",a.dataType&&v[a.dataType]?v[a.dataType]+", */*; q=0.01":v._default);for(e in a.headers)d.setRequestHeader(e,a.headers[e])}catch(f){}d.onreadystatechange=k(this.onReadyStateChange,this)};h(z.prototype,{_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,
b=this._deferred;if(0===a.readyState)a.onreadystatechange=H,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=H;var c;a:{try{c=!a.status&&"undefined"!=typeof location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(d){}c=!1}c?this._ajax.processResponse("string"==typeof a.responseText?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=H;this._xhr.abort()},send:function(){var a=
this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}},!0);var M=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};h(M.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);
l(a,"load",k(this.onLoad,this));l(a,"error",k(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}},!0);var G=function(a,b,c){this._opt=a;this._ajax=
c;this._deferred=b};h(G.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++u,c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);l(a,"load",k(this.onLoad,this));l(a,"error",k(this.onError,this));this._el=a;try{c.submit()}catch(d){this._deferred.reject(d)}},onLoad:function(){var a=this._el;this._opt&&
!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}},!0);"undefined"!=typeof global?module.exports=B:window.MetaphorJs?MetaphorJs.ajax=B:window.MetaphorJs=
{ajax:B}})();
(function(){var g=[],q=!1,m=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/,h=function(b,d,a){b.attachEvent?b.attachEvent("on"+d,a):b.addEventListener(d,a,!1)},k=!!history.pushState,l="onhashchange"in window,n=function(b){var d=location.protocol+"//"+location.hostname;location.port&&(d+=":"+location.port);b=b.replace(d,"");k||(b=encodeURIComponent(b));return b},f=function(){var b;k?b=location.pathname+location.search:(b=location.hash.substr(1))?("!"==
b.substr(0,1)&&(b=b.substr(1)),b=decodeURIComponent(b)):b=location.pathname+location.search;return b},b=function(){var b=f();if(g.length)for(var d=-1,a=g.length;++d<a;g[d].call(null,b));window.MetaphorJs&&MetaphorJs.triggerAsync("locationchange",b)};h(window,"load",function(){q=!0});history.initPushState=function(){if(k)history.origPushState=history.pushState,history.origReplaceState=history.replaceState,h(window,"popstate",b),history.pushState=function(a,c,d){history.origPushState(a,c,n(d));b()},
history.replaceState=function(a,c,d){history.origReplaceState(a,c,n(d));b()};else if(l)history.replaceState=history.pushState=function(a,b,c){a=n(c);location.hash=a?"!"+a:""},h(window,"hashchange",b);else{var e=null,d=!1;window.onIframeHistoryChange=function(a){d||(location.hash=a?"!"+a:"",b())};var a=function(a){var b=e.contentWindow.document;b.open();b.write("<html><head><title>"+document.title+'</title><script type="text/javascript">var hashValue = "'+a+'";window.top.onIframeHistoryChange(hashValue);\x3c/script></head><body>&nbsp;</body></html>');
b.close()};history.pushState=function(b,c,d){a(n(d))};history.replaceState=function(a,b,c){a=n(c);e.contentWindow.hashValue=a};var c=function(){e=document.createElement("iframe");e.src="about:blank";e.style.display="none";document.body.appendChild(e);d=!0;a(n(location.hash.substr(1)));d=!1};q?c():h(window,"load",c)}h(document.documentElement,"click",function(a){a=a||window.event;for(var b=a.target||a.srcElement,c;b&&"a"!=b.nodeName.toLowerCase();)b=b.parentNode;if(b){c=b.getAttribute("href");var d;
if(d=c&&"#"!=c.substr(0,1))c=c.match(m),d=c[1]&&location.protocol!=c[1]||c[2]&&location.hostname!=c[2]?!1:c[2]||c[3]?location.port!=c[3]?!1:!0:!0;if(d&&!b.getAttribute("target"))return history.pushState(null,null,b.getAttribute("href")),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}});history.initPushState=function(){}};window.MetaphorJs?(MetaphorJs.pushUrl=function(b){history.pushState(null,null,b)},MetaphorJs.replaceUrl=function(b){history.replaceState(null,null,
b)},MetaphorJs.currentUrl=function(){return f()}):history.onchange=function(b){g.push(b)}})();
(function(){var g=window.MetaphorJs,q=g.extend,m=g.lib.Promise,h=g.isThenable,k=Array.prototype.slice,l=g.bind,n,f=function(b){b&&(this.store={$rootScope:{type:1,value:b.$root},$app:{type:1,value:b.$app}})};q(f.prototype,{store:null,getApi:function(){return{value:l(this.value,this),constant:l(this.constant,this),factory:l(this.factory,this),service:l(this.service,this),provider:l(this.provider,this),resolve:l(this.resolve,this),inject:l(this.inject,this)}},instantiate:function(b,e){var d=function(){},
a;d.prototype=b.prototype;d=new d;a=b.prototype.constructor.apply(d,e);return"object"==typeof a?a:d},inject:function(b,e,d,a,c){a=a||{};c=c||[];if("function"==typeof b)if(b.inject)c=k.call(b.inject),c.push(b),b=c;else return d||b.__isMetaphorClass?this.instantiate(b,c):b.apply(e,c);b=k.call(b);var f=this;c=[];var g=b.pop(),h,l;h=-1;for(l=b.length;++h<l;c.push(f.resolve(b[h],a)));return m.all(c).then(function(a){return d||g.__isMetaphorClass?f.instantiate(g,a):g.apply(e,a)})},value:function(b,e){this.store[b]=
{type:1,value:e}},constant:function(b,e){var d=this.store;d[b]||(d[b]={type:2,value:e})},factory:function(b,e,d,a){"boolean"==typeof d&&(a=d,d=null);this.store[b]={type:3,singleton:a,fn:e,context:d}},service:function(b,e,d){this.store[b]={type:4,singleton:d,fn:e}},provider:function(b,e){this.store[b+"Provider"]={name:b,type:5,fn:e,instance:null}},resolve:function(b,e){var d=this.store,a,c,f;if(e[b])return e[b];if(c=d[b]){a=c.type;if(1==a||2==a)return c.value;if(3==a)f=this.inject(c.fn,c.context,!1,
e);else if(4==a)f=this.inject(c.fn,null,!0,e);else if(5==a)return c.instance||(c.instance=m.resolve(this.inject(c.fn,null,!0,e)).done(function(a){c.instance=a;d[c.name]={type:3,fn:a.$get,context:a}})),c.instance;c.singleton&&(c.type=1,c.value=f,3==a&&h(f)&&f.done(function(a){c.value=a}));return e[b]=f}if(d[b+"Provider"])return this.resolve(b+"Provider",e),this.resolve(b,e);if(this===n)throw"Could not provide value for "+b;return n.resolve(b)},destroy:function(){delete this.store;delete this.scope}});
g.r("MetaphorJs.lib.Provider",f);f.global=function(){return n};n=new f})();
(function(){var g=MetaphorJs.lib.Observable,q=MetaphorJs.extend;MetaphorJs.d("MetaphorJs.cmp.Base",{destroyed:!1,_observable:null,initialize:function(m){m=m||{};this._observable=new g;q(this,this._observable.getApi());if(m.callback){var h=m.callback,k=h.scope||this;delete h.scope;for(var l in h)if(h.hasOwnProperty(l))this.on(l,h[l],k);delete m.callback}q(this,m,!0)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",
this);this._observable.destroy();delete this._observable}},onDestroy:MetaphorJs.emptyFn})})();
(function(){var g=window.MetaphorJs,q=g.g,m=g.lib.Promise,h=g.data,k=g.isThenable,l=g.isArray,n=g.extend,f={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=["Moz","Webkit","ms","O","Khtml"],e="animationDelay",d="animationDuration",a="transitionDelay",c="transitionDuration",p=0,u=function(){var f=document.createElement("div"),g=!1,h,s,k;if(void 0!==f.style.animationName)g=!0;else for(s=0,k=b.length;s<k;s++)if(h=b[s],void 0!==f.style[h+"AnimationName"]){g=
!0;e=h+"AnimationDelay";d=h+"AnimationDuration";a=h+"TransitionDelay";c=h+"TransitionDuration";break}return g}(),A=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},t=function(a,b,c){var d=function(){(new Date).getTime()-b>=c?a():A(d)};A(d)},s=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},w=function(a,b,c){var d,e,f=b.length;for(d=0;d<f;d++)e=s(b[d])+s(c[d]),a=Math.max(e,a);return a},v=function(b){var f=window.getComputedStyle?
window.getComputedStyle(b,null):b.style;b=0;var g=(f[d]||"").split(","),h=(f[e]||"").split(","),s=(f[c]||"").split(","),f=(f[a]||"").split(",");b=Math.max(b,w(b,g,h));return b=Math.max(b,w(b,s,f))},E=function F(a,b,c,d,e,f,g){var s=function(){var b=h(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==g?!1:(e.reject(a),!0)},r=function(){if(!s()){var d=c;c++;if(c==b.length){e.resolve(a);h(a,"mjsAnimationQueue").shift();var f=h(a,"mjsAnimationQueue");f.length?(f=f[0],E(f.el,f.stages,0,f.start,f.deferred,
!1,f.id)):h(a,"mjsAnimationQueue",null)}else h(a,"mjsAnimationQueue")[0].position=c,F(a,b,c,null,e);y(a,b[d]);y(a,b[d]+"-active")}},l=function(){if(!s()){D(a,b[c]+"-active");var d=v(a);d?t(r,(new Date).getTime(),d):r()}},w=function(){if(!s()){D(a,b[c]);var f;d&&(f=d(a),d=null);k(f)?f.done(l):A(l)}};f?A(w):w()},D=MetaphorJs.addClass,y=MetaphorJs.removeClass;MetaphorJs.stopAnimation=function(a){var b=h(a,"mjsAnimationQueue"),c;l(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,y(a,c[b]),y(a,
c[b]+"-active")):"function"==typeof b?b(a):"stop"==b&&$(a).stop(!0,!0);h(a,"mjsAnimationQueue",null)};MetaphorJs.animate=function(a,b,c,d){var e=new m,g=h(a,"mjsAnimationQueue")||[],z=++p,s=a.getAttribute("mjs-animate"),G,r,w,v,t,y,D;b=b||s;d&&null===s&&(b=null);if(b){"string"==typeof b?"["==b.substr(0,1)?G=(new Function("","return "+b))():(G=f[b],b=q&&q("animate."+b,!0)):"function"==typeof b?r=b:l(b)&&("string"==typeof b[0]?G=b:(w=b[0],v=b[1]));b&&b.constructor===Object&&(G=b.stages,r=b.fn,w=b.before,
v=b.after,t=b.options||{},y=b.context||null,D=b.duration||null,c=c||t.start);if(u&&G)return g.push({el:a,stages:G,start:c,deferred:e,position:0,id:z}),h(a,"mjsAnimationQueue",g),1==g.length&&E(a,G,0,c,e,!0,z),e;if(r&&"function"==typeof r)return w&&n(a.style,w,!0),c&&c(a),h(a,"mjsAnimationQueue",r.call(y,a,function(){e.resolve(a)})),e;if(window.jQuery){if(r&&"string"==typeof r)return c&&c(a),$(a)[r](D,function(){e.resolve(a)}),h(a,"mjsAnimationQueue","stop"),e;if(v)return b=$(a),w&&b.css(w),c&&(t.start=
function(){c(a)}),t.complete=function(){e.resolve(a)},b.animate(v,t),h(a,"mjsAnimationQueue","stop"),e}}c?(w=c(a),k(w)?w.done(function(){e.resolve(a)}):e.resolve(a)):e.resolve(a);return e};MetaphorJs.animate.getAnimationDuration=v;MetaphorJs.animate.addAnimationType=function(a,b){f[a]=b}})();
(function(){var g=MetaphorJs.lib.Observable,q=MetaphorJs.lib.Watchable,m=MetaphorJs.extend,h;h=MetaphorJs.d("MetaphorJs.view.Scope",{$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$checking:!1,$$destroyed:!1,initialize:function(h){this.$$observable=new g;m(this,h,!0);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)},$new:function(){return new h({$parent:this,
$root:this.$root,$app:this.$app})},$on:function(g,h,n){return this.$$observable.on(g,h,n)},$un:function(g,h,n){return this.$$observable.un(g,h,n)},$watch:function(g,h,n){q.create(this,g,h,n,null)},$unwatch:function(g,h,n){q.unsubscribeAndDestroy(this,g,h,n)},$get:function(g){for(var h=this;h;){if(void 0!=h[g])return h[g];h=h.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$check:function(){var g;this.$$checking||(this.$$checking=!0,this.$$watchers&&
(g=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",g))},$destroy:function(){this.$$observable.trigger("destroy");this.$$observable.destroy();delete this.$$observable;delete this.$app;delete this.$root;delete this.$parent;this.$$watchers&&(this.$$watchers.$destroyAll(),delete this.$$watchers);this.$$destroyed=!0}})})();
(function(){var g=navigator.userAgent.toLowerCase(),q=parseInt((/msie (\d+)/.exec(g)||[])[1],10),m=parseInt((/android (\d+)/.exec(g)||[])[1],10),h={};isNaN(q)&&(q=parseInt((/trident\/.*; rv:(\d+)/.exec(g)||[])[1],10));window.MetaphorJs||(window.MetaphorJs={});MetaphorJs.browser={android:m,hasEvent:function(g){if("input"==g&&9==q)return!1;if(void 0===h[g]){var l=document.createElement("div");h[g]="on"+g in l}return h[g]}}})();
(function(){var g=MetaphorJs.nextUid,q=MetaphorJs.view.Scope,m=MetaphorJs.lib.Watchable,h=MetaphorJs.lib.Observable,k=MetaphorJs.isThenable,l=MetaphorJs.toArray,n=MetaphorJs.getAttributeHandlers,f=null,b=MetaphorJs.g,e=m.create,d=m.unsubscribeAndDestroy,a,c="string"==typeof document.createTextNode("").textContent?"textContent":"nodeValue",p=function(a,b,c,d,e,f){var g=[];if(a&&!0!==a){if(a.nodeType){f.countdown+=1;A(a,c,d,e,f);return}g=l(a)}g.length||(g=l(b.childNodes));b=g.length;f.countdown+=b;
for(a=-1;++a<b;A(g[a],c,d,e,f));},u=/^(script|template|mjs-template|style)$/i,A=function(a,b,c,d,e){var f;if(!a.nodeName.match(u)){try{f=b.call(c,a)}catch(g){MetaphorJs.error(g)}if(!1!==f){if(k(f)){f.done(function(f){!1!==f&&p(f,a,b,c,d,e);0==--e.countdown&&d&&d.call(c)});return}p(f,a,b,c,d,e)}}0==--e.countdown&&d&&d.call(c)},t=new h;a=MetaphorJs.d("MetaphorJs.view.Renderer",{id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,_observable:null,initialize:function(a,b,c){this.id=g();this.el=
a;this.scope=b;this.texts=[];this.parent=c;b instanceof q&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)},on:function(a,b,c){return t.on(a+"-"+this.id,b,c)},un:function(a,b,c){return t.un(a+"-"+this.id,b,c)},createChild:function(b){return new a(b,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?new q({$app:b.$app}):a.$breakScope?b.$new():b;b=b.$app;var f={$scope:e,$node:c,$attrValue:d,$renderer:this};c=[e,c,d,this];return a.__isMetaphorClass?
(c=b.inject(a,null,!0,f,c),a.$stopRenderer?!1:k(c)?c.then(function(a){return a.$returnToRenderer}):c.$returnToRenderer):b.inject(a,null,!1,f,c)},processNode:function(a){var d=a.nodeType,e=this.texts,g=this.scope,h;if(3==d)g={watchers:[],node:a,text:"",inx:h=e.length},this.processText(g,a[c]),0<g.watchers.length&&(e.push(g),this.renderText(h));else if(1==d){f||(f=n());var t=a.attributes,p,l,k,d="tag."+a.tagName.toLowerCase();if(p=b(d,!0))if((k=this.runHandler(p,g,a))||!1===k)return k;p=0;for(l=f.length;p<
l;p++)if(h=f[p].name,null!==(k=a.getAttribute(h))&&(k=this.runHandler(f[p].handler,g,a,k),a.removeAttribute(h),k||!1===k))return k;p=0;for(l=t.length;p<l;p++)b(d,!0)||(g={watchers:[],node:a,attr:t[p].name,text:"",inx:h=e.length},this.processText(g,t[p].value),0<g.watchers.length&&(e.push(g),this.renderText(h)))}return!0},process:function(){A(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){t.trigger("rendered-"+this.id,this)},processText:function(a,
b){for(var c=0,d=b.length,e,f,g=[];c<d;)if(-1!=(e=b.indexOf("{{",c))&&-1!=(f=b.indexOf("}}",e+2)))g.push(b.substring(c,e)),g.push(this.watcherMatch(a,b.substring(e+2,f))),c=f+2;else{c!==d&&g.push(b.substring(c));break}return a.text=g.join("")},watcherMatch:function(a,b){var c=a.watchers;c.push({watcher:e(this.scope,b,this.onDataChange,this,a.inx)});return"---"+(c.length-1)+"---"},onDataChange:function(a,b,c){this.renderText(c)},render:function(){var a=this.texts.length,b;for(b=0;b<a;b++)this.renderText(b)},
renderText:function(a){a=this.texts[a];var b=a.text,d=a.watchers,e=d.length,f=a.attr,g,h;for(g=0;g<e;g++)h=d[g].watcher.getLastResult(),b=b.replace("---"+g+"---",h);f?(a.node.setAttribute(f,b),"value"==f&&(a.node.value=b),"class"==f&&(a.node.className=b)):a.node[c]=b},destroy:function(){var a=this.texts,b,c,e,f,g;if(!this.destroyed){this.destroyed=!0;c=0;for(e=a.length;c<e;c++)for(b=a[c].watchers,f=0,g=b.length;f<g;f++)d(this.scope,b[f].watcher.code,this.onDataChange,this);this.parent&&this.parent.un("destroy",
this.destroy,this);t.trigger("destroy-"+this.id);this.parent=this.scope=this.el=this.texts=null}}},{eachNode:A});MetaphorJs.onReady(function(){var a=MetaphorJs.app,b;if(document.querySelectorAll)for(var c=document.querySelectorAll("[mjs-app]"),d=-1,e=c.length;++d<e;a(c[d]).run());else A(document.documentElement,function(c){b=c.getAttribute("mjs-app");if(null!==b)return a(c,b),!1})})})();
(function(){var g=window.MetaphorJs,q=g.data,m=g.toFragment,h=g.lib.Watchable.create,k=g.view.Renderer,l=g.clone,n=g.view.Scope,f=g.animate,b=g.lib.Promise,e=g.extend,d=g.nextUid,a=g.trim,c=new g.lib.Observable,p={},u=function(a){if(!p[a]){var b=document.getElementById(a),c;b&&(c=b.tagName.toLowerCase(),"script"==c?(c=document.createElement("div"),c.innerHTML=b.innerHTML,p[a]=m(c.childNodes)):p[a]="content"in b?b.content:m(b.childNodes))}return p[a]},A=function(a){return p[a]?p[a]:p[a]=MetaphorJs.ajax(a,
{dataType:"fragment"}).then(function(b){return p[a]=b})};g.define("MetaphorJs.view.Template",{_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,initialize:function(b){e(this,b,!0);this.id=d();this.tpl&&(this.tpl=a(this.tpl));this.url&&(this.url=a(this.url));b=this.node;var c=this.tpl||this.url;b&&b.removeAttribute("mjs-include");b||(this.deferRendering=!0);
if(c){if(b&&b.firstChild&&q(b,"mjs-transclude",m(b.childNodes)),"."!=c.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=h(this.scope,c,this.onChange,this)),this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof
n&&this.scope.$on("destroy",this.onScopeDestroy,this)},doRender:function(){this._renderer||(this._renderer=new k(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){c.trigger("rendered-"+this.id,this)},on:function(a,b,d){return c.on(a+"-"+this.id,b,d)},un:function(a,b,d){return c.un(a+"-"+this.id,b,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?
this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,c=a.url,d=a._watcher?a._watcher.getLastResult():a.tpl||c,e=new b;(new b(function(a){c?a(u(d)||A(c)):a(u(d)||m(d))})).done(function(b){a._fragment=b;e.resolve(!a.ownRenderer)}).fail(e.reject,e);return e},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=
this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(l(this._fragment),a):a.appendChild(l(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,c=new b;this._initial?(this.doApplyTemplate(),c.resolve()):(f(a,"leave",null,!0).done(this.doApplyTemplate,this).done(c.resolve,c),f(a,"enter",null,!0));this._initial=!1;return c},onParentRendererDestroy:function(){this._renderer.destroy();this.destroy();delete this._renderer},onScopeDestroy:function(){this.destroy();
delete this._renderer},destroy:function(){delete this.node;delete this.scope;delete this.initPromise;this._watcher&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),delete this._watcher);delete this.tpl}},{getTemplate:u,loadTemplate:A})})();
(function(){var g=window.MetaphorJs,q=g.extend,m=g.nextUid,h=g.emptyFn,k=g.ns.get,l=g.lib.Promise,n=g.view.Template,f=g.toFragment,b=g.data,e=g.view.Scope;MetaphorJs.define("MetaphorJs.cmp.Component","MetaphorJs.cmp.Base",{id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,initialize:function(b){this.scope||(this.scope=new e);this.supr(b);b.as&&(this.scope[b.as]=this);this.node&&(this.id=
this.node.getAttribute("id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+m();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this);var a=this.template,c=this.templateUrl;a&&a instanceof n?a instanceof n&&(this.template.node=this.node):this.template=a=new n({scope:this.scope,node:this.node,deferRendering:!a,ownRenderer:!0,tpl:a,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();
this.autoRender&&(a.initPromise?a.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var b=this.node;b.setAttribute("id",this.id);b.setAttribute("cmp-id",this.id);this.hidden&&(b.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):
this.node.parentNode||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},
isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:h,afterRender:h,onShow:h,onHide:h,onParentRendererDestroy:function(){this.destroy()},onDestroy:function(){this.template&&(this.template.destroy(),delete this.template);this.destroyEl?this.node.parentNode&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&
this.scope.$destroy();delete this.scope;delete this.node;this.supr()}});MetaphorJs.resolveComponent=function(d,a,c,g,h){a=a||{};h=h||[];c=c||a.scope||new e;g=g||a.node;a.scope=a.scope||c;a.node=a.node||g;if(!c.$app)throw"Cannot resolve component outside app's scope";var m="string"==typeof d?k(d):d,t,s=[];d=m.template||a.template||null;var w=m.templateUrl||a.templateUrl||null,v=c.$app,E={$node:g,$scope:c,$app:v};if(m.resolve)for(t in m.resolve)(function(b){var d=new l,e;s.push(d.done(function(c){a[b]=
c}));e=m.resolve[t];"function"==typeof e?d.resolve(e(c,g)):d.resolve(v.inject(e,null,!1,q({},E,a)))})(t);if(d||w)a.template=new n({scope:c,node:g,deferRendering:!0,ownRenderer:!0,tpl:d,url:w}),s.push(a.template.initPromise),g&&g.firstChild&&b(g,"mjs-transclude",f(g.childNodes));h.unshift(a);if(s.length){var D=new l;l.all(s).done(function(){a.$config=a;D.resolve(v.inject(m,null,!0,a,h))});return D}a.$config=a;return l.resolve(v.inject(m,null,!0,a,h))}})();
(function(){var g=window.MetaphorJs,q=g.view.Scope,m=g.view.Renderer,h=g.lib.Provider,k=g.lib.Observable,l=g.lib.Promise,n=g.bind,f=g.extend;MetaphorJs.define("MetaphorJs.cmp.App","MetaphorJs.cmp.Base",{scope:null,renderer:null,cmpListeners:null,components:null,initialize:function(b,e){var d=e instanceof q?e:new q(e),a,c;d.$app=this;this.supr();a=new h(d);c=new k;f(this,a.getApi());this.destroyProvider=n(a.destroy,a);f(this,c.getApi());this.destroyObservable=n(c.destroy,c);this.scope=d;this.cmpListeners=
{};this.components={};this.renderer=new m(b,d);this.factory("$parentCmp",["$node",this.getParentCmp],this)},run:function(){this.renderer.process()},getParentCmp:function(b){b=b.parentNode;for(var e;b;){if(e=b.getAttribute("cmp-id"))return this.getCmp(e);b=b.parentNode}return null},onAvailable:function(b,e,d){var a=this.cmpListeners;a[b]||(a[b]=new l);e&&a[b].done(e,d);return a[b]},getCmp:function(b){return this.components[b]||null},registerCmp:function(b){var e=this;e.onAvailable(b.id).resolve(b);
e.components[b.id]=b;b.on("destroy",function(b){delete e.cmpListeners[b.id];delete e.components[b.id]})},destroy:function(){var b;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(b in this)this.hasOwnProperty(b)&&delete this[b]}})})();
(function(){var g=window.MetaphorJs,q=g.data,m=g.currentUrl,h=g.toFragment,k=g.animate,l=g.lib.Scope,n=g.extend,f=g.stopAnimation,b=g.resolveComponent,e=g.lib.Watchable.create;MetaphorJs.define("MetaphorJs.cmp.View",{route:null,node:null,scope:null,cmp:null,currentComponent:null,watchable:null,defaultCmp:null,initialize:function(b){n(this,b,!0);(b=this.node)&&b.firstChild&&q(b,"mjs-transclude",h(b.childNodes));this.cmp||(this.cmp=b.getAttribute("mjs-view-cmp"));this.defaultCmp=b.getAttribute("mjs-view-default");
b.removeAttribute("mjs-view");b.removeAttribute("mjs-view-cmp");b.removeAttribute("mjs-view-default");this.route?(history.initPushState(),MetaphorJs.on("locationchange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=e(this.scope,this.cmp,this.onCmpChange,this),this.onCmpChange())},onCmpChange:function(){var b=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();b&&this.setComponent(b)},onLocationChange:function(){var b=m(),a=this.route,c,e,f,g,h;e=
0;for(f=a.length;e<f;e++){g=a[e];if(h=b.match(g.reg)){this.changeRouteComponent(g,h);return}g["default"]&&!c&&(c=g)}c?this.setRouteComponent(c,[]):this.clearComponent();!c&&this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(b,a){f(this.node);this.clearComponent();this.setRouteComponent(b,a)},clearComponent:function(){var b=this,a=b.node;b.currentComponent&&k(a,"leave",null,!0).done(function(){b.currentComponent.destroy();for(b.currentComponent=null;a.firstChild;)a.removeChild(a.firstChild)})},
setRouteComponent:function(d,a){var c=this,e=c.node,f=d.params;k(e,"enter",function(){var g=a||[],h={destroyEl:!1,node:e,scope:d.isolateScope?new l({$app:c.scope.$app}):c.scope.$new()},k,m;d.as&&(h.as=d.as);d.template&&(h.template=d.template);g.shift();if(f)for(k=-1,m=f.length;++k<m;h[f[k]]=g[k]);return b(d.cmp||"MetaphorJs.cmp.Component",h,h.scope,e,null,g).done(function(a){c.currentComponent=a})},!0)},setComponent:function(d){var a=this,c=a.node;k(c,"enter",function(){var e="object"==typeof d?d:
{},f=("string"==typeof d?d:null)||"MetaphorJs.cmp.Component",g=e.scope||a.scope.$new();e.destroyEl=!1;return b(f,e,g,c).done(function(b){a.currentComponent=b})},!0)},destroy:function(){this.clearComponent();this.route&&(MetaphorJs.un("locationchange",this.onLocationChange,this),delete this.route);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),delete this.watchable);delete this.scope;delete this.currentComponent}})})();
(function(){var g=window.MetaphorJs,q=g.view.Scope,m=g.trim,h=g.define,k=g.ns.get,l=g.lib.Watchable,n=g.view.Renderer,f=g.data,b=g.toArray,e=g.toFragment,d=g.clone,a=g.addListener,c=g.normalizeEvent,p=g.registerAttributeHandler,u=g.registerTagHandler,A=g.async,t=l.create,s=l.createGetter,w=g.animate,v=g.addClass,E=g.removeClass,D=g.hasClass,y=g.stopAnimation,I=g.isArray,F=g.view.Template,J=g.lib.Input,H,L=function(a,b){for(var c;a;){c=f(a,b);if(void 0!=c)return c;a=a.parentNode}};MetaphorJs.d("MetaphorJs.view.AttributeHandler",
{watcher:null,scope:null,node:null,expr:null,initialize:function(a,b,c){c=m(c);this.node=b;this.expr=c;this.scope=a;this.watcher=t(a,c,this.onChange,this);this.onChange();a instanceof q&&a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){delete this.node;delete this.scope;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),delete this.watcher)},onChange:function(){}});p("mjs-bind",1E3,h(null,"MetaphorJs.view.AttributeHandler",{isInput:!1,initialize:function(a,b,
c){var d=b.tagName.toLowerCase();this.isInput="input"==d||"textarea"==d;this.supr(a,b,c)},onChange:function(){var a=this.watcher.getLastResult();this.isInput?this.node.value=a:this.node.textContent=a}}));p("mjs-bind-html",1E3,h(null,"MetaphorJs.view.AttributeHandler",{onChange:function(){this.node.innerHTML=this.watcher.getLastResult()}}));p("mjs-model",1E3,h(null,"MetaphorJs.view.AttributeHandler",{inProg:!1,input:null,initialize:function(a,b,c){this.node=b;this.input=new J(b,this.onInputChange,
this);this.supr(a,b,c)},onInputChange:function(a){var b=this.scope;this.watcher.setValue(a);this.inProg=!0;b instanceof q?b.$root.$check():this.watcher.checkAll();this.inProg=!1},onScopeDestroy:function(){this.input.destroy();delete this.input;this.supr()},onChange:function(){var a=this.watcher.getLastResult();this.inProg||this.input.setValue(a)}}));p("mjs-show",500,h(null,"MetaphorJs.view.AttributeHandler",{initial:!0,initialize:function(a,b,c){this.supr(a,b,c)},runAnimation:function(a){var b=this.node.style,
c=function(){b.display=a?"":"none"};this.initial?c():w(this.node,a?"show":"hide",function(){a&&(b.display="")},!0).done(c)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));p("mjs-hide",500,h(null,"attr.mjs-show",{onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));p("mjs-if",500,h(null,"MetaphorJs.view.AttributeHandler",{parentEl:null,prevEl:null,el:null,initial:!0,initialize:function(a,b,c){this.parentEl=
b.parentNode;this.prevEl=b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){delete this.prevEl;delete this.parentEl;this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,e=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},f=function(){c.removeChild(d)};b?d.parentNode||(a.initial?e():w(d,"enter",e,!0)):d.parentNode&&(a.initial?f():w(d,"leave",null,!0).done(f));a.initial=!1}}));p("mjs-each",100,h(null,"MetaphorJs.view.AttributeHandler",
{model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;try{this.watcher=t(a,this.model,this.onChange,this)}catch(d){MetaphorJs.error(d)}this.parentEl.removeChild(b);this.render(this.watcher.getValue())},onScopeDestroy:function(){var a=
this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.destroy();delete this.renderers;delete this.tpl;delete this.prevEl;delete this.nextEl;delete this.parentEl;this.supr()},doUpdate:function(a,b){for(var c=this.renderers,d=b,e=c.length,f=e-1,g=!(d%2),h,k;d<e;d++)h=c[d],k=h.scope,k.$index=d,k.$first=0===d,k.$last=d===f,k.$even=g,k.$odd=!g,g=!g,h.renderer?k.$check():(h.renderer=new n(h.el,h.scope),h.renderer.process())},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,e=this.nextEl,
f=document.createDocumentFragment(),g,h,k;h=0;for(k=a.length;h<k;h++)g=c.cloneNode(!0),f.appendChild(g),b.push(this.createItem(g,a,h));d.insertBefore(f,e);this.doUpdate(a,0)},createItem:function(a,b,c){var d=this.itemName,e=this.scope.$new();e[d]=b[c];return{el:a,scope:e}},onChange:function(a){var b=this,c=b.renderers;a=a.prescription;var d=b.tpl,e=0,f=b.parentEl,g=b.watcher.getValue(),h=null,k,l,m,n;l=0;for(m=a.length;l<m;l++)n=a[l],"-"==n?(c[e].scope.$index=e,e++):(null===h&&(h=0<l?l-1:0),"I"!=
n&&c[e]&&(k=c[e],k.scope instanceof q&&k.scope.$destroy(),k.renderer.destroy(),w(k.el,"leave",null,!0).done(function(a){a.parentNode&&a.parentNode.removeChild(a)})),"D"==n?c.splice(e,1):(k=d.cloneNode(!0),w(k,"enter",function(a){return function(d){0<a?f.insertBefore(d,c[a-1].el.nextSibling):b.prevEl?f.insertBefore(d,b.prevEl.nextSibling):f.appendChild(d)}}(e),!0),"R"==n?c[l]=b.createItem(k,g,e):"I"==n&&(l<c.length?c.splice(l,0,b.createItem(k,g,e)):c.push(b.createItem(k,g,e))),e++));b.doUpdate(g,h)},
parseExpr:function(a){a=a.split(" ");var b,c,d,e,f;b=0;for(c=a.length;b<c;b++)if(f=a[b],""!=f&&"in"!=f)if(e){d=a.slice(b).join(" ");break}else e=f;this.model=d;this.itemName=e||"item"}},{$stopRenderer:!0}));p("mjs-each-in-store",100,h(null,"attr.mjs-each",{store:null,initialize:function(a,b,c){this.parseExpr(c);b.removeAttribute("mjs-each-in-store");b.removeAttribute("mjs-include");this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=
b;this.scope=a;this.store=a=s(this.model)(a);this.parentEl.removeChild(b);this.initWatcher();this.render(this.watcher.getValue());A(this.bindStore,this,[a,"on"])},onScopeDestroy:function(){this.bindStore(this.store,"un");delete this.store;this.supr()},initWatcher:function(){this.watcher=t(this.store,".items",null);this.watcher.addListener(this.onChange,this)},resetWatcher:function(){this.watcher.setValue(this.store.items)},bindStore:function(a,b){a[b]("load",this.onStoreUpdate,this);a[b]("update",
this.onStoreUpdate,this);a[b]("add",this.onStoreUpdate,this);a[b]("remove",this.onStoreUpdate,this);a[b]("replace",this.onStoreUpdate,this);a[b]("filter",this.onStoreFilter,this);a[b]("clearfilter",this.onStoreFilter,this);a[b]("clear",this.onStoreClear,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},onStoreFilter:function(){this.resetWatcher();this.onStoreUpdate()},onStoreClear:function(){this.resetWatcher();this.onStoreUpdate()},onStoreDestroy:function(){this.onStoreClear();
this.watcher.unsubscribeAndDestroy(this.onChange,this);delete this.watcher}},{$stopRenderer:!0}));p("mjs-include",900,function(a,b,c,d){a=new F({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});u("mjs-include",900,function(a,b,c,d){return(new F({scope:a,node:b,tpl:b.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});p("mjs-transclude",1E3,function(a,c){var g=L(c,"mjs-transclude");if(g){c.firstChild&&f(c,"mjs-transclude",e(c.childNodes));var h=c.parentNode,
k=c.nextSibling,g=d(g),l=b(g.childNodes);h.removeChild(c);h.insertBefore(g,k);return l}return null});u("mjs-transclude",900,function(a,c){var g=L(c,"mjs-transclude");if(g){c.firstChild&&f(c,"mjs-transclude",e(c.childNodes));var h=c.parentNode,k=c.nextSibling,g=d(g),l=b(g.childNodes);h.removeChild(c);h.insertBefore(g,k);return l}return null});var K=function(a,b,c,d){if(null!==c){if(c==D(a,b))return;c=!c}else c=D(a,b);c?d?w(a,[b+"-remove"],null,!0).done(function(){E(a,b)}):E(a,b):d?w(a,[b+"-add"],null,
!0).done(function(){v(a,b)}):v(a,b)};p("mjs-class",1E3,h(null,"MetaphorJs.view.AttributeHandler",{initial:!0,onChange:function(){var a=this.node,b=this.watcher.getLastResult(),c;y(a);if("string"==typeof b)K(a,b,null,!this.initial);else if(I(b)){var d;c=-1;for(d=b.length;++c<d;K(a,b[c],!0,!this.initial));}else for(c in b)K(a,c,b[c]?!0:!1,!this.initial);this.initial=!1}}));for(var g="click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste enter".split(" "),
B=l.createFunc,l=0,u=g.length;l<u;l++)(function(b){var d=b;"enter"==d&&(d="keyup");p("mjs-"+b,1E3,function(e,f,g){var h=B(g);a(f,d,function(a){a=a||window.event;a=c(a);if("enter"==b&&13!=a.keyCode)return null;e.$event=a;try{h(e)}catch(d){MetaphorJs.error(d)}delete e.$event;e instanceof q?e.$root.$check():e.$$watchers&&e.$$watchers.$checkAll();a.preventDefault();return!1})})})(g[l]);g="selected checked disabled readonly required open".split(" ");l=0;for(u=g.length;l<u;l++)(function(a){p("mjs-"+a,1E3,
h(null,"MetaphorJs.view.AttributeHandler",{onChange:function(){this.watcher.getLastResult()?this.node.setAttribute(a,!0):this.node.removeAttribute(a)}}))})(g[l]);l=function(a,b,c,d){H||(H=MetaphorJs.resolveComponent);var e,f,g,h,k;b.removeAttribute("mjs-cmp");c=c.split(" ");g=0;for(h=c.length;g<h;g++)k=c[g],""!=k&&"as"!=k&&(e?f=k:e=k);H(e,{scope:a,node:b,as:f,parentRenderer:d,destroyScope:!0},a,b);return!1};l.$breakScope=!0;p("mjs-cmp",200,l);p("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",
function(a,b,c){a&&(a[c]=b)}]);p("mjs-view",200,function(a,b,c){b.removeAttribute("mjs-view");c=k(c||"MetaphorJs.cmp.View");a.$app.inject(c,null,!0,{$scope:a,$node:b,$app:a.$app},[{scope:a,node:b}]);return!1});p("mjs-init",250,function(a,b,c){b.removeAttribute("mjs-init");B(c)(a)});p("mjs-app",0,function(){return!1})})();
(function(){var g=MetaphorJs.add,q=MetaphorJs.numberFormats,m=MetaphorJs.dateFormats;g("filter.toUpper",function(f){return f.toUpperCase()});g("filter.toLower",function(f){return f.toLowerCase()});g("filter.limitTo",function(f,b){var e=typeof f;if(!MetaphorJs.isArray(f)&&"string"!=e)return f;b=Infinity===Math.abs(Number(b))?Number(b):parseInt(b,10);if("string"==e)return b?0<=b?f.slice(0,b):f.slice(b,f.length):"";var e=[],d,a;b>f.length?b=f.length:b<-f.length&&(b=-f.length);0<b?(d=0,a=b):(d=f.length+
b,a=f.length);for(;d<a;d++)e.push(f[d]);return e});g("filter.ucfirst",function(f){return f.substr(0,1).toUpperCase()+f.substr(1)});var h=MetaphorJs.numberFormats;g("filter.numeral",function(f,b){b=h[b]||b;b=q[b]||b;return numeral(f).format(b)});var k=MetaphorJs.dateFormats;g("filter.moment",function(f,b){b=k[b]||b;b=m[b]||b;return moment(f).format(b)});var l=function(f,b,e){if(""===b||"undefined"==typeof b)return!0;if("undefined"!=typeof f){if("boolean"==typeof f)return f===b;if(e instanceof RegExp)return b.test(""+
f);if("strict"==e)return""+f===""+b;if(!0===e||null===e||"undefined"==typeof e)return-1!=""+f.indexOf(b);if(!1===e)return-1==""+f.indexOf(b)}return!1},n=function(f,b,e){if("object"!=typeof f)return"undefined"==typeof b.$?!0:l(f,b.$,e);var d,a;for(d in b)if("$"==d)for(a in f){if(l(f[a],b.$,e))return!0}else if(l(f[d],b[d],e))return!0;return!1};g("filter.filter",function(f,b,e,d){e&&!d&&(e=null);"object"!=typeof b&&(b={$:b});d=[];var a,c;a=-1;for(c=f.length;++a<c;)n(f[a],b,e)&&d.push(f[a]);return d});
g("filter.sortBy",function(f,b,e,d){e&&!d&&(e="asc");f=f.slice();f.sort(function(a,c){var d=typeof a;return d!=typeof c?0:"object"==d?a[b]>c[b]?1:a[b]<c[b]?-1:0:a>c?1:a<c?-1:0});return"desc"==e?f.reverse():f})})();
