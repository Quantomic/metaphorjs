'use strict';define("metaphorjs","metaphorjs-observable metaphorjs-promise metaphorjs-ajax metaphorjs-animate metaphorjs-input metaphorjs-class metaphorjs-namespace metaphorjs-select metaphorjs-validator metaphorjs-watchable metaphorjs-dialog metaphorjs-history".split(" "),function(ha,w,vb,A,pa,wb,xb,qa,yb,Fa,zb,ra){function H(){}function x(e,a){return e.getAttribute?e.getAttribute(a):null}function S(e){return"object"==typeof e&&3===Q(e)&&!e.nodeType&&e.constructor===Object}function ia(e){return!0===
e||!1===e}function B(e){return"object"==typeof e&&5===Q(e)}function M(e){if(e&&void 0!=!e.length&&e!==""+e){for(var a=[],b=-1,c=e.length>>>0;++b!==c;a[b]=e[b]);return a}return e?[e]:[]}function F(e){return"function"==typeof e}function T(e){if(!e||!e.then)return!1;var a,b;return"object"!=(b=typeof e)&&"function"!=b?!1:F(a=e.then)?a:!1}function C(e){return"string"==typeof e||e===""+e}function Wa(e){var a={},b,c,d=e.attributes;e=0;for(b=d.length;e<b;e++)c=d[e],a[c.name]=c.value;return a}function Ga(e){if(null===
e||"object"!=typeof e)return!1;e=Q(e);return 2<e||-1==e}function N(e){var a=document.createDocumentFragment();if(C(e)){var b=document.createElement("div");b.innerHTML=e;e=b.childNodes}if(e.nodeType)a.appendChild(e);else for(var b=-1,c=e.length>>>0;++b!==c;a.appendChild(e[0]));return a}function Ha(e){return Ia("(?:^|\\s)"+e+"(?!\\S)")}function U(e,a){a&&(e.className=e.className.replace(Ha(a),""))}function sa(e,a,b,c){setTimeout(function(){e.apply(a,b||[])},c||0)}function ta(e){return 1===Q(e)}function K(e){var a=
e.stack||Error().stack;if("undefined"!=typeof console&&console.log)sa(function(){console.log(e);a&&console.log(a)});else throw e;}function ua(e){e=Q(e);return 3>e&&-1<e}function Xa(e){return e.replace(Ab,function(a){return a.charAt(1).toUpperCase()})}function D(e,a,b){var c=G(e,"config"),d;if(c)return c;c={};if(b||null!==(b=x(e,"mjs-config")))for(d in e.removeAttribute("mjs-config"),a=b?va(b)(a||{}):{},a)c[d]=a[d];a=Ya(e);for(d in a)b=a[d],c[d]=""===b?!0:b;G(e,"config",c);return c}function wa(e,a){return a?
Ha(a).test(e.className):!1}function xa(e,a){a&&!wa(e,a)&&(e.className+=" "+a)}function da(e,a,b,c,d){var g=!1!==a;a=a||{};d=d||[];b=b||a.scope;c=c||a.node;a.scope=a.scope||b;a.node=a.node||c;var h=C(e)?V(e):e;if(!h)throw"Component "+e+" not found";b&&h.$isolateScope&&(a.scope=b=b.$newIsolated());var l,k=[];e=h.template||a.template||null;var m=h.templateUrl||a.templateUrl||null,f=b?b.$app:null,Za=Ja.global(),s=f?f.inject:Za.inject,z=f?f:Za,n=c?x(c,"mjs-cloak"):null,v={$node:c||null,$scope:b||null,
$config:a||null,$args:d||null};if(h.resolve)for(l in h.resolve)(function(g){var e=new w,m;k.push(e.done(function(b){v[g]=b;a[g]=b;d.push(b)}));m=h.resolve[l];F(m)?e.resolve(m(b,c)):C(m)?e.resolve(s.resolve(m)):e.resolve(s.call(z,m,null,u({},v,a,!1,!1)))})(l);g&&(e||m)&&(a.template=new W({scope:b,node:c,deferRendering:!0,ownRenderer:!0,shadow:h.$shadow,tpl:e,url:m}),k.push(a.template.initPromise),c&&c.firstChild&&G(c,"mjs-transclude",N(c.childNodes)));g&&d.unshift(a);var r;k.length?(r=new w,w.all(k).done(function(){r.resolve(s.call(z,
h,null,u({},v,a,!1,!1),d))})):r=w.resolve(s.call(z,h,null,u({},v,a,!1,!1),d));c&&r.isPending()&&null!==n&&(n?xa(c,n):c.style.visibility="hidden",r.then(function(){n?U(c,n):c.style.visibility=""}));c&&r.then(function(){U(c,"mjs-cloak")});return r}function X(){return!1}function Ka(e){var a=e.nodeName.toLowerCase();e=e.type;return"input"!=a&&"textarea"!=a&&"select"!=a||"submit"==e||"reset"==e||"button"==e?!1:!0}function ja(){return!0}function La(e){return new ea(e)}function Y(e,a,b){e.attachEvent?e.attachEvent("on"+
a,b):e.addEventListener(a,b,!1)}function $a(e,a){for(var b;e;){b=G(e,a);if(void 0!==b)return b;e=e.parentNode}}function Ma(e){var a=$a(e,"mjs-transclude");if(a){e.firstChild&&G(e,"mjs-transclude",N(e.childNodes));var b=e.parentNode,c=e.nextSibling,a=ya(a),d=M(a.childNodes);b.removeChild(e);b.insertBefore(a,c);return d}return null}function ab(e,a,b){b||(b="asc");e=e.slice();e.sort(function(b,d){var g=typeof b,e=b,l=d;if(g!=typeof d)return 0;"object"==g&&(F(a)?(e=a(b),l=a(d)):(e=b[a],l=d[a]));if("number"==
typeof e)return e-l;e=(""+e).toLowerCase();l=(""+l).toLowerCase();return e===l?0:e>l?1:-1});return"desc"==b?e.reverse():e}function za(e){return 10===Q(e)}function Aa(e){return 9===Q(e)}function Ba(e){return e===window||e&&e.document&&e.location&&e.alert&&e.setInterval}function Na(e,a,b){var c,d=e.childNodes;if(!1!==a.call(b,e))for(e=-1,c=d.length>>>0;++e!==c;Na(d[e],a,b));}function ka(e){var a={top:0,left:0};if(!fa(e)||e===window)return a;e.getBoundingClientRect&&(a=e.getBoundingClientRect());return{top:a.top+
bb()-I.clientTop,left:a.left+cb()-I.clientLeft}}function db(e){for(e=e.offsetParent||I;e&&e!=I&&"static"==O(e,"position");)e=e.offsetParent;return e||I}function Oa(e,a,b){e.detachEvent?e.detachEvent("on"+a,b):e.removeEventListener(a,b,!1)}function eb(e){var a=!1,b=!0,c=window,d=c.document,g=d.documentElement,h=function(b){if("readystatechange"!=b.type||"complete"==d.readyState)Oa("load"==b.type?c:d,b.type,h),!a&&(a=!0)&&e.call(c,b.type||b)},l=function(){try{g.doScroll("left")}catch(a){setTimeout(l,
50);return}h("poll")};if("complete"==d.readyState)e.call(c,"lazy");else{if(d.createEventObject&&g.doScroll){try{b=!c.frameElement}catch(k){}b&&l()}Y(d,"DOMContentLoaded",h);Y(d,"readystatechange",h);Y(c,"load",h)}}function fb(e,a,b,c){try{var d=da(a||"MetaphorJs.App",!1,b,e,[e,b]);return!1!==c?d.done(function(a){a.run()}):d}catch(g){return K(g),w.reject(g)}}var Bb=pa.getValue,Cb=pa.setValue,Pa=qa.is,f={},E=new xb(f,"MetaphorJs"),gb=new wb(E),q=gb.define,Z=Array.prototype.slice,Db=Object.prototype.toString,
Q=function(){var e={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(a){if(!a){if(null===a)return 6;if(void 0===a)return 7}var b=e[Db.call(a)];return void 0===b?-1:1==b&&isNaN(a)?8:b}}(),u=function(){return function a(){var b=!1,c=!1,d=Z.call(arguments),g=d.shift(),h,l,k;ia(d[d.length-1])&&(b=d.pop());ia(d[d.length-1])&&(c=b,b=d.pop());for(;d.length;)if(h=d.shift())for(l in h)if(h.hasOwnProperty(l)&&
void 0!==(k=h[l]))if(c)if(g[l]&&S(g[l])&&S(k))a(g[l],k,b,c);else{if(!0===b||void 0==g[l])S(k)?(g[l]={},a(g[l],k,b,!0)):g[l]=k}else if(!0===b||void 0==g[l])g[l]=k;return g}}(),J=function(e){this.$$observable=new ha;this.$$historyWatchers={};u(this,e,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};u(J.prototype,{$app:null,$parent:null,$root:null,$isRoot:!1,$$observable:null,$$watchers:null,
$$historyWatchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new J({$parent:this,$root:this.$root,$app:this.$app})},$newIsolated:function(){return new J({$app:this.$app})},$on:function(e,a,b){return this.$$observable.on(e,a,b)},$un:function(e,a,b){return this.$$observable.un(e,a,b)},$watch:function(e,a,b){return Fa.create(this,e,a,b,null)},$unwatch:function(e,a,b){return Fa.unsubscribeAndDestroy(this,e,a,b)},$watchHistory:function(e,a){this.$$historyWatchers[a]||(this.$$historyWatchers[a]=
e,f.history.on("change-"+a,this.$$onHistoryChange,this))},$unwatchHistory:function(e){this.$$historyWatchers[e]||(delete this.$$historyWatchers[e],f.history.un("change-"+e,this.$$onHistoryChange,this))},$get:function(e){for(var a=this;a;){if(void 0!==a[e])return a[e];a=a.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$$onHistoryChange:function(e,a,b){this.$$historyWatchers[b]&&(a=this.$$historyWatchers[b],this[a]=e,this.$check())},$check:function(){var e;
this.$$checking||(this.$$checking=!0,this.$$watchers&&(e=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",e),0<e&&this.$check())},$destroy:function(){var e,a;this.$$observable.trigger("destroy");this.$$observable.destroy();this.$$watchers&&this.$$watchers.$destroyAll();for(e in this.$$historyWatchers)this.$unwatchHistory(e);for(a in this)this.hasOwnProperty(a)&&(this[a]=null);this.$$destroyed=!0}},!0,!1);var L=function(){var e=["0","0","0"];return function(){for(var a=
e.length,b;a;){a--;b=e[a].charCodeAt(0);if(57==b)return e[a]="A",e.join("");if(90==b)e[a]="0";else return e[a]=String.fromCharCode(b+1),e.join("")}e.unshift("0");return e.join("")}}(),V=E.get,Qa=function(){var e=document.createTextNode("");return C(e.textContent)?"textContent":"nodeValue"}(),aa=function(){return String.prototype.trim?function(e){return C(e)?e.trim():e}:function(e){return C(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}(),P=Fa.create,p=E.add,n=function(){var e=[],a=!1,b=function(a,
b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return q({$class:"Directive",watcher:null,scope:null,node:null,expr:null,autoOnChange:!0,$init:function(a,b,g){var e;g=aa(g);this.node=b;this.expr=g;this.scope=a;this.watcher=P(a,g,this.onChange,this,null,E);if(this.autoOnChange&&void 0!=(e=this.watcher.getLastResult()))this.onChange(e,void 0);a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.$destroy()},onChange:function(){},destroy:function(){this.watcher&&this.watcher.unsubscribeAndDestroy(this.onChange,
this);this.$super()}},{registerAttribute:function(b,d,g){V("attr."+b,!0)||(e.push({priority:d,name:b,handler:p("attr."+b,g)}),a=!1)},getAttributes:function(){a||(e.sort(b),a=!0);return e},registerTag:function(a,b){V("tag."+a,!0)||p("tag."+a,b)}})}(),ba=Function.prototype.bind?function(e,a){return e.bind(a)}:function(e,a){return function(){return e.apply(a,arguments)}},Ra=function(){var e=/\\{/g,a=new ha,b=function(a,b,e,l,k){return!b||!b.indexOf||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new c(a,
b,e,l,k)},c=q({$class:"TextRenderer",id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,$init:function(a,b,c,e,k){this.id=L();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=e;this.lang=a.$app?a.$app.lang:null;if(!0===k||!1===k)this.recursive=k;this.watchers=[];this.children=[];this.dataChangeDelegate=ba(this.doDataChange,this);this.processed=this.processText(b);
this.render()},subscribe:function(b,c){return a.on(this.id,b,c)},unsubscribe:function(b,c){return a.un(this.id,b,c)},getString:function(){null===this.text&&this.render();var a=this.text;return-1!=a.indexOf("\\{")?a.replace(e,"{"):a},render:function(){var a=this.processed,b,e,l;this.children.length||this.createChildren();l=this.children;b=-1;for(e=l.length;++b<e;a=a.replace("---"+b+"---",l[b]instanceof c?l[b].getString():l[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,e,k,
m="";b<c;)if(-1!=(e=a.indexOf("{{",b))&&-1!=(k=a.indexOf("}}",e+2))&&"\\"!=a.substr(e-1,1))m+=a.substring(b,e),k!=e+2&&(m+=this.watcherMatch(a.substring(e+2,k))),b=k+2;else{b!==c&&(m+=a.substring(b));break}b=0;a=m;c=a.length;for(m="";b<c;)if(-1!=(e=a.indexOf("{[",b))&&-1!=(k=a.indexOf("]}",e+2))&&"\\"!=a.substr(e-1,1))m+=a.substring(b,e),k!=e+2&&(m+=this.watcherMatch(a.substring(e+2,k),!0)),b=k+2;else{b!==c&&(m+=a.substring(b));break}return m},watcherMatch:function(a,b){var c=this.watchers;if(b){a=
aa(a);var e=a.split("|"),k=aa(e[0]);"."!=k.substr(0,1)&&(e[0]="'"+k+"'");1==e.length&&e.push("l");a=e.join(" | ")}c.push(P(this.scope,a,this.onDataChange,this,null,E));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?a.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=
this.watchers,c=this.children,e=this.scope,l=this.recursive,k,m,f;k=-1;for(m=a.length;++k<m;)f=a[k].getLastResult(),c.push(l&&b(e,f,this,null,!0)||f)},destroyChildren:function(){var a=this.children,b,e;b=-1;for(e=a.length;++b<e;)a[b]instanceof c&&a[b].$destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();a.destroyEvent(this.id);
this.changeTmt&&clearTimeout(this.changeTmt)}},{create:b});return c}(),Ca=Array.prototype.indexOf;Ca||(Ca=Array.prototype.indexOf=function(e,a){var b;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),d=c.length>>>0;if(0===d)return-1;b=+a||0;Infinity===Math.abs(b)&&(b=0);if(b>=d)return-1;for(b=Math.max(0<=b?b:d-Math.abs(b),0);b<d;){if(b in c&&c[b]===e)return b;b++}return-1});var ga=function(){var e=null,a=Ra.create,b=function(a,b,c,d,e,h){var f=[];if(a&&!0!==a){if(a.nodeType){h.countdown+=
1;g(a,c,d,e,h);return}f=Z.call(a)}f.length||(f=M(b.childNodes));b=f.length;h.countdown+=b;for(a=-1;++a<b;g(f[a],c,d,e,h));},c=function(a,b){if(b)if(b.nodeType)a.push(b);else if(B(b))for(var d=-1,e=b.length;++d<e;c(a,b[d]));},d={script:!0,template:!0,"mjs-template":!0,style:!0},g=function(a,c,e,g,h){if(a){var f;f=a.nodeName;h||(h={countdown:1});if(!f||!d[f.toLowerCase()])if(f=c.call(e,a),!1!==f){if(T(f)){f.done(function(d){!1!==d&&b(d,a,c,e,g,h);0==--h.countdown&&g&&g.call(e)});return}b(f,a,c,e,g,
h)}0==--h.countdown&&g&&g.call(e)}},h=new ha;return q({$class:"Renderer",id:null,el:null,scope:null,texts:null,parent:null,$init:function(a,b,c){this.id=L();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof J&&b.$on("destroy",this.$destroy,this);if(c)c.on("destroy",this.$destroy,this)},on:function(a,b,c){return h.on(a+"-"+this.id,b,c)},once:function(a,b,c){return h.once(a+"-"+this.id,b,c)},un:function(a,b,c){return h.un(a+"-"+this.id,b,c)},createChild:function(a){return new ga(a,this.scope,
this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b,g=b.$app;c=g.inject(a,null,{$scope:e,$node:c,$attrValue:d,$renderer:this},[e,c,d,this]);g&&a.$registerBy&&c&&(T(c)?c.done(function(c){g.registerCmp(c,b,a.$registerBy)}):g.registerCmp(c,b,a.$registerBy));return a.$stopRenderer?!1:c},processNode:function(b){var d=b.nodeType,g=this.texts,h=this.scope,f,s;if(3==d){if(f=null!==x(b.parentNode,"mjs-recursive"),d=a(h,b[Qa],
null,g.length,f))d.subscribe(this.onTextChange,this),g.push({node:b,tr:d}),this.renderText(g.length-1)}else if(1==d){e||(e=n.getAttributes());var d=[],z=[],R,v,r;s="tag."+b.tagName.toLowerCase();if(s=V(s,!0)){v=this.runHandler(s,h,b);if(!1===v)return!1;T(v)?d.push(v):c(z,v)}R=Wa(b);s=0;for(f=e.length;s<f;s++)if(r=e[s].name,void 0!==(v=R[r])){b.removeAttribute(r);v=this.runHandler(e[s].handler,h,b,v);R[r]=null;if(!1===v)return!1;T(v)?d.push(v):c(z,v)}if(d.length){var q=new w;w.all(d).done(function(a){c(z,
a);q.resolve(z)});return q}f=void 0!==R["mjs-recursive"];delete R["mjs-recursive"];for(s in R)null!==R[s]&&(d=a(h,R[s],null,g.length,f))&&(b.removeAttribute(s),d.subscribe(this.onTextChange,this),g.push({node:b,attr:s,tr:d}),this.renderText(g.length-1));return z.length?z:!0}return!0},process:function(){g(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){h.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=
this.texts[a];var b=a.tr.getString(),c=a.attr;c?("value"==c?a.node.value=b:"class"==c?a.node.className=b:"src"==c&&(a.node.src=b),a.node.setAttribute(c,b)):a.node[Qa]=b},destroy:function(){var a=this.texts,b,c;b=-1;for(c=a.length;++b<c;a[b].tr.$destroy());this.parent&&this.parent.un("destroy",this.$destroy,this);h.trigger("destroy-"+this.id)}})}(),hb=function(){var e=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;
case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},a=function(a){this.store={};a&&(this.locale=a)};u(a.prototype,{store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var e=this.store;void 0===e[a]&&(e[a]=b)},load:function(a){u(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===b?"-- "+a+" --":b.get(a))},plural:function(a,b){var g=this.get(a),h=e(b,this.locale);return B(g)?g[h]:S(g)?g[b]?g[b]:1==b&&void 0!=g.one?g.one:0>b&&void 0!=g.negative?g.negative:g.other:g},destroy:function(){this.store=null}},!0,!1);var b=new a;a.global=function(){return b};return a}(),Sa=E.add("mixin.Observable",{$$observable:null,$beforeInit:function(e){this.$$observable=
new ha;if(e&&e.callback){var a=e.callback,b=a.context,c;a.context=null;for(c in a)if(a[c])this.$$observable.on(c,a[c],b||this);e.callback=null}},on:function(){var e=this.$$observable;return e.on.apply(e,arguments)},un:function(){var e=this.$$observable;return e.un.apply(e,arguments)},once:function(){var e=this.$$observable;return e.once.apply(e,arguments)},trigger:function(){var e=this.$$observable;return e.trigger.apply(e,arguments)},$beforeDestroy:function(){this.$$observable.trigger("beforedestroy",
this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null}}),ib=function(e,a){var b=function(){},c;b.prototype=e.prototype;b=new b;c=e.apply(b,a);return Ga(c)||!1===c?c:b},Ja=function(){var e,a=function(){this.store={}};u(a.prototype,{store:null,instantiate:function(a,c,d,e){return a.$instantiate?a.$instantiate.apply(a,d):e?ib(a,d):a.apply(c,d)},inject:function(a,c,d,e,h){d=d||{};e=e||[];var l=this;if(F(a))if(a.inject)e=Z.call(a.inject),
e.push(a),a=e;else return l.instantiate(a,c,e,h);a=Z.call(a);e=[];var f=a.pop(),m,t;m=-1;for(t=a.length;++m<t;e.push(l.resolve(a[m],d)));return w.all(e).then(function(a){return l.instantiate(f,c,a,h)})},value:function(a,c){this.store[a]={type:1,value:c}},constant:function(a,c){var d=this.store;d[a]||(d[a]={type:2,value:c})},factory:function(a,c,d,e){ia(d)&&(e=d,d=null);this.store[a]={type:3,singleton:e,fn:c,context:d}},service:function(a,c,d){this.store[a]={type:4,singleton:d,fn:c}},provider:function(a,
c){this.store[a+"Provider"]={name:a,type:5,fn:c,instance:null}},resolve:function(a,c){var d=this.store,g,h,l;if(void 0!==c[a])return c[a];if(h=d[a]){g=h.type;if(1==g||2==g)return h.value;if(3==g)l=this.inject(h.fn,h.context,c);else if(4==g)l=this.inject(h.fn,null,c,null,!0);else if(5==g)return h.instance||(h.instance=w.resolve(this.inject(h.fn,null,c)).done(function(a){h.instance=a;d[h.name]={type:3,fn:a.$get,context:a}})),h.instance;h.singleton&&(h.type=1,h.value=l,3==g&&T(l)&&l.done(function(a){h.value=
a}));return c[a]=l}if(d[a+"Provider"])return this.resolve(a+"Provider",c),this.resolve(a,c);if(this===e)throw"Could not provide value for "+a;return e.resolve(a)},destroy:function(){this.scope=this.store=null}},!0,!1);a.global=function(){return e};e=new a;return a}(),jb={$$provider:null,$beforeInit:function(){this.$$provider=new Ja},value:function(){var e=this.$$provider;return e.value.apply(e,arguments)},constant:function(){var e=this.$$provider;return e.constant.apply(e,arguments)},factory:function(){var e=
this.$$provider;return e.factory.apply(e,arguments)},service:function(){var e=this.$$provider;return e.service.apply(e,arguments)},provider:function(){var e=this.$$provider;return e.provider.apply(e,arguments)},resolve:function(){var e=this.$$provider;return e.resolve.apply(e,arguments)},inject:function(){var e=this.$$provider;return e.inject.apply(e,arguments)},$afterDestroy:function(){this.$$provider.destroy();this.$$provider=null}};q({$class:"App",$mixins:[Sa,jb],lang:null,scope:null,renderer:null,
cmpListeners:null,components:null,$init:function(e,a){var b=a instanceof J?a:new J(a),c;e.removeAttribute("mjs-app");b.$app=this;this.$super();this.lang=new hb;this.scope=b;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",b.$root);this.value("$lang",this.lang);this.renderer=new ga(e,b);c=Z.call(arguments);c[1]=b;this.initApp.apply(this,c)},initApp:H,run:function(){this.renderer.process()},getParentCmp:function(e){e=
e.parentNode;for(var a;e;){if(a=x(e,"cmp-id"))return this.getCmp(a);e=e.parentNode}return null},onAvailable:function(e,a,b){var c=this.cmpListeners,d=this.components;c[e]||(c[e]=new w);a&&c[e].done(a,b);d[e]&&c[e].resolve(d[e]);return c[e]},getCmp:function(e){return this.components[e]||null},registerCmp:function(e,a,b){var c=this,d=e[b];b=function(){delete c.cmpListeners[d];delete c.components[d]};c.components[d]=e;c.cmpListeners[d]&&c.cmpListeners[d].resolve(e);if(e.on)e.on("destroy",b);a.$on("$destroy",
b)},destroy:function(){this.renderer.$destroy();this.scope.$destroy();this.lang.destroy();this.$super()}});var I=document.documentElement,fa=function(){return function a(b){return b===window?!0:3==b.nodeType?b.parentElement?a(b.parentElement):!0:b===I?!0:I.contains(b)}}(),G=function(){var e={};return function(a,b,c){a=a._mjsid||(a._mjsid=L());var d=e[a];return void 0!==c?(d||(d=e[a]={}),d[b]=c):d?d[b]:void 0}}(),ya=function a(b){var c,d,g;if(B(b)){g=[];c=0;for(d=b.length;c<d;c++)g.push(a(b[c]));return g}if(b)switch(b.nodeType){case 1:return b.cloneNode(!0);
case 3:return document.createTextNode(b.innerText||b.textContent);case 11:return b.cloneNode(!0)}return null},kb=!!I.createShadowRoot,W=function(){var a=new ha,b={},c=function(a){if(!b[a]){var c=document.getElementById(a),d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),d.innerHTML=c.innerHTML,b[a]=N(d.childNodes)):b[a]="content"in c?c.content:N(c.childNodes))}return b[a]},d=function(a){return b[a]?b[a]:b[a]=vb(a,{dataType:"fragment"}).then(function(c){return b[a]=c})};
return q({$class:"Template",_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,_originalNode:null,_intendedShadow:!1,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,shadow:!1,$init:function(a){u(this,a,!0,!1);kb||(this._intendedShadow=this.shadow,this.shadow=!1);this.id=L();this.tpl&&(this.tpl=aa(this.tpl));this.url&&(this.url=aa(this.url));var b=this.node;a=this.tpl||this.url;b&&b.removeAttribute("mjs-include");
this.shadow&&(this._originalNode=b,this.node=b=b.createShadowRoot());b||(this.deferRendering=!0);if(a){if(b&&b.firstChild&&!this.shadow&&G(b,"mjs-transclude",N(b.childNodes)),"."==a.substr(0,1)?(b=a.substr(1,1),b=!("."==b||"/"==b)):b=!1,b&&!this.replace?(this.ownRenderer=!0,this._watcher=P(this.scope,a,this.onChange,this,null,E)):this.shadow?this.ownRenderer=!0:this.replace&&(this.ownRenderer=!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,
this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof J&&this.scope.$on("destroy",this.onScopeDestroy,this)},doRender:function(){this._renderer||(this._renderer=new ga(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+"-"+
this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,l=a._watcher?a._watcher.getLastResult():a.tpl||b,f=new w;(new w(function(a){b?a(c(l)||d(b)):a(c(l)||N(l))})).done(function(b){a._fragment=
b;f.resolve(a.ownRenderer?!1:a.node)}).fail(f.reject,f);return f},onChange:function(){this._renderer&&(this._renderer.$destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this._intendedShadow&&this.makeTranscludes();this.replace?a.parentNode.replaceChild(ya(this._fragment),a):a.appendChild(ya(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,
b=new w;this._initial?(this.doApplyTemplate(),b.resolve()):(A(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),A(a,"enter",null,!0));this._initial=!1;return b},makeTranscludes:function(){var a=this._fragment,b=qa("content",a),c,d,f,t,n,s;n=0;for(s=b.length;n<s;n++)f=document.createElement("mjs-transclude"),c=b[n],d=c.nextSibling,(t=x(c,"select"))&&f.setAttribute("select",t),a.removeChild(c),a.insertBefore(f,d)},onParentRendererDestroy:function(){this._renderer.$destroy();this.$destroy()},
onScopeDestroy:function(){this.$destroy()},destroy:function(){this.shadow&&this._originalNode.createShadowRoot();this._watcher&&this._watcher.unsubscribeAndDestroy(this.onChange,this)}},{getTemplate:c,loadTemplate:d})}(),lb=q({$class:"MetaphorJs.Component",$mixins:[Sa],id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,$init:function(a){this.$super(a);u(this,a,!0,!1);this.scope||(this.scope=
new J);a.as&&(this.scope[a.as]=this);this.node&&(this.id=x(this.node,"id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+L();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this,this.scope,"id");var b=this.template,c=this.templateUrl;b&&b instanceof W?b instanceof W&&(this.template.node=this.node):this.template=b=new W({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c,shadow:this.constructor.$shadow});
if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",
this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):fa(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",
this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:H,afterRender:H,onShow:H,onHide:H,onParentRendererDestroy:function(){this.$destroy()},destroy:function(){this.template&&this.template.$destroy();this.destroyEl?fa(this.node)&&this.node.parentNode.removeChild(this.node):
(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();this.$super()}}),Ia=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),la=function(a){var b=G(a,"mjsAnimationQueue"),c,d;if(B(b)&&b.length){if(b=b[0])b.stages&&(c=b.position,d=b.stages,U(a,d[c]),U(a,d[c]+"-active")),b.deferred&&b.deferred.reject(b.el)}else F(b)?b(a):"stop"==b&&$(a).stop(!0,!0);G(a,"mjsAnimationQueue",null)},y=function(a){a=
a||{};this._queue=[];this._map={};this.id="$$"+L();for(var b in a)this[b]=a[b]};y.REPLACE=1;y.ONCE=2;y.MULTIPLE=3;y.ONCE_EVER=3;u(y.prototype,{_queue:null,_map:null,_nextRequested:!1,_running:!1,length:0,id:null,async:!0,auto:!0,thenable:!1,stack:!1,context:null,mode:y.MULTIPLE,add:function(a,b,c,d,g,h){var l=this.id,f=a[l]||L();b={id:f,fn:a,context:b,args:c,async:h};d=d||this.mode;if(d==y.ONCE_EVER&&a[l])return a[l];a[l]=f;if(this._map[f])if(d==y.REPLACE)this.remove(f);else if(d==y.ONCE)return f;
this._queue[g?"unshift":"push"](b);this._map[f]=b;this.length=this._queue.length;this.auto&&this.next();return f},append:function(a,b,c,d,g){return this.add(a,b,c,d,!1,g)},prepend:function(a,b,c,d,g){return this.add(a,b,c,d,!0,g)},remove:function(a){var b=this._queue,c,d;c=0;for(d=b.length;c<d;c++)if(b[c].id==a){b.splice(c,1);break}delete this._map[a]},next:function(){var a=this,b;if(a._running)a._nextRequested=!0;else if(a._nextRequested=!1,b=a._queue[a.stack?"pop":"shift"](),a.length=a._queue.length,
b)if(a._running=!0,delete a._map[b.id],a.async||b.async){var c=0;ta(b.async)?c=b.async:ta(a.async)&&(c=a.async);sa(function(){try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(c){throw K(c),a._finish(),c;}},null,null,c)}else try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(d){throw K(d),a._finish(),d;}},_processResult:function(a){var b=this;b.thenable&&T(a)?a.then(function(){b._finish()},function(){b._finish()}):b._finish();return a},_finish:function(){this._running=
!1;(this.auto||this._nextRequested)&&this.next()},destroy:function(){this.context=this._map=this._queue=null;this._running=this._nextRequested=!1;this.next=H}},!0,!1);var ma=function(){var a,b;if("undefined"!=typeof window){var c=window;a=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame;b=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelRequestAnimationFrame;if(a)return function(c){var g=a(c);return function(){b(g)}}}return function(a){var b=
setTimeout(a,0);return function(){clearTimeout(b)}}}(),Ta=function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,b=Function,c=function(a,b){return function(c){var d=Z.call(arguments),g;d.push(null);d.push(a);if(b){for(g=a.apply(null,d);(void 0===g||"number"==typeof g&&isNaN(g))&&!c.$isRoot;)c=c.$parent,d[0]=c,g=a.apply(null,d);return g}return a.apply(null,d)}},d={},g=0,h={},f=0,k={},m=0,t=function(){1E3<=g&&(d={});1E3<=f&&(h={});1E3<=m&&(k={})};return{createGetter:function(h){try{return d[h]?d[h]:(g++,
d[h]=c(new b("____","$$interceptor","$$itself","".concat("try {","return ",h.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(f){return K(f),H}},createSetter:function(d){try{if(!h[d]){f++;var g=d.replace(a,"$1____.$3");return h[d]=c(new b("____","$$$$","$$interceptor","$$itself","".concat("try {",g," = $$$$",";} catch (thrownError) { return undefined; }")))}return h[d]}catch(k){return K(k),H}},createFunc:function(d){try{return k[d]?k[d]:(m++,k[d]=c(new b("____","$$interceptor",
"$$itself","".concat("try {",d.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(g){return K(g),H}},resetCache:t,enableResetCacheInterval:function(){setTimeout(t,1E4)}}}(),va=Ta.createGetter,Ab=/-./g,Ya=function(){return document.documentElement.dataset?function(a){return a.dataset}:function(a){var b;if(void 0!==(b=G(a,"data")))return b;b=a.attributes;var c={},d,g,h;d=0;for(g=b.length;d<g;d++)h=b[d].name,0===h.indexOf("data-")&&(c[Xa(h.substr(5))]=b[d].value);b=c;G(a,
"data",b);return b}}(),Ua=q({$class:"ListRenderer",id:null,model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,animate:!1,trackByFn:null,griDelegate:null,queue:null,buffered:!1,bufferPlugin:null,$constructor:function(a,b,c){a=D(b,a);this.animateMove=!a.buffered&&a.animateMove&&A.cssAnimations;this.animate=!a.buffered&&(null!==x(b,"mjs-animate")||a.animate);this.id=a.id||L();b.removeAttribute("mjs-animate");this.animate&&
this.animateMove&&this.$plugins.push("ListAnimatedMove");a.observable&&this.$plugins.push("Observable");a.buffered&&(this.buffered=!0,this.$plugins.push("ListBuffered"))},$init:function(a,b,c){b.removeAttribute("mjs-include");this.parseExpr(c);this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.queue=new y({async:!1,auto:!0,thenable:!0,stack:!1,context:this,mode:y.ONCE});this.parentEl.removeChild(b);this.afterInit(a,
b);this.queue.add(this.render,this,[M(this.watcher.getLastResult())])},afterInit:function(a,b){var c=D(b,a);this.watcher=P(a,this.model,this.onChange,this,null,E);(this.trackBy=c.trackBy)&&"$"!=this.trackBy?this.trackByWatcher=P(a,this.trackBy,this.onChangeTrackBy,this,null,E):"$"==this.trackBy||this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);this.griDelegate=ba(this.scopeGetRawIndex,this)},trigger:H,render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,g=this.nextEl,
h=this.buffered,f=document.createDocumentFragment(),k,m,t;m=0;for(t=a.length;m<t;m++)k=c.cloneNode(!0),b.push(this.createItem(k,a,m)),h||(f.appendChild(k),b[m].attached=!0);h?(this.bufferPlugin.getScrollOffset(),this.bufferPlugin.updateScrollBuffer()):(this.doUpdate(),d.insertBefore(f,g));this.trigger("render",this)},doUpdate:function(a,b,c,d){var g=this.renderers;a=a||0;var h=g.length;b=b||h-1;var f=this.watcher.getLastResult(),k=this.getTrackByFunction();for(b>h-1&&(b=h-1);a<=b;a++)c&&g[a].action!=
c||this.renderItem(a,g,f,k,d)},renderItem:function(a,b,c,d,g){c=c||this.watcher.getLastResult();b=b||this.renderers;d=d||this.getTrackByFunction();var h=b[a],f=h.scope;b=b.length-1;var k=!(a%2);g&&h.rendered||(f.$index=a,f.$first=0===a,f.$last=a===b,f.$even=k,f.$odd=!k,f.$trackId=d(c[a]),f.$getRawIndex=this.griDelegate,h.renderer?f.$check():(h.renderer=new ga(h.el,f),h.renderer.process(),h.rendered=!0))},createItem:function(a,b,c){var d=this.itemName,g=this.scope.$new();g[d]=this.getListItem(b,c);
return{index:c,action:"enter",el:a,scope:g,attached:!1,rendered:!1}},onChange:function(a,b){this.queue.prepend(this.applyChanges,this,[b],y.REPLACE)},applyChanges:function(a){var b=this,c=b.renderers,d=b.tpl,g=0,h=M(b.watcher.getLastResult()),f=null,k=b.animateMove,m=b.animate,t=[],n=b.itemName,s=c.slice(),z=!1,q,v,r,u,p,x;a=b.watcher.getMovePrescription(a,b.getTrackByFunction(),h);r=0;for(u=a.length;r<u;r++)q=a[r],ta(q)?(v=q,q=c[v],v!=g&&null===f&&(f=r),q.action="move",q.scope[n]=b.getListItem(h,
r),z=k,t.push(q),c[v]=null,g++):(null===f&&(f=r),p=b.createItem(d.cloneNode(!0),h,r),t.push(p));b.renderers=t;if(m){b.doUpdate(f,null,"enter");z&&(x=b.calculateTranslates(t,s,c));var d=[],y=new w,B=new w,C=new w,D=w.counter(t.length),g=function(){D.countdown();return y};r=0;for(u=c.length;r<u;r++)if(p=c[r])p.scope.$destroy(),la(p.el),d.push(A(p.el,"leave",null,!1,E).done(function(a){a.style.visibility="hidden"}));r=0;for(u=t.length;r<u;r++)p=t[r],la(p.el),"enter"==p.action?d.push(A(p.el,"enter",g,
!1,E)):d.push(b.moveAnimation(p.el,z?x[r][0]:null,z?x[r][1]:null,g,B));D.done(function(){ma(function(){B.resolve();b.applyDomPositions(c);z||b.doUpdate(f,null,"move");ma(function(){y.resolve()});b.trigger("change",b)})});w.all(d).always(function(){ma(function(){b.doUpdate(f||0);b.removeOldElements(c);if(z)for(b.doUpdate(f,null,"move"),r=0,u=t.length;r<u;r++)p=t[r],p.el.style[A.prefixes.transform]=null,p.el.style[A.prefixes.transform]="";C.resolve()})});return C}b.buffered?(b.bufferPlugin.getScrollOffset(),
b.removeOldElements(c),b.queue.append(b.bufferPlugin.updateScrollBuffer,b.bufferPlugin,[!0])):(b.applyDomPositions(),b.doUpdate(f||0),b.removeOldElements(c));b.trigger("change",b)},removeOldElements:function(a){var b,c,d,g=this.parentEl;b=0;for(c=a.length;b<c;b++)(d=a[b])&&d.attached&&(d.attached=!1,g.removeChild(d.el))},applyDomPositions:function(a){var b=this.renderers,c=this.parentEl,d=this.prevEl,d=d?d.nextSibling:c.firstChild,g,h,f,k,m;h=0;for(f=b.length;h<f;h++)m=b[h],k=m.el,(g=a&&a[h]?a[h].el.nextSibling:
0<h?b[h-1].el.nextSibling||d:d)&&k.nextSibling!==g?c.insertBefore(k,g):g||c.appendChild(k),m.attached=!0},getListItem:function(a,b){return a[b]},onChangeTrackBy:function(a){this.trackByFn=null;this.trackBy=a},getTrackByFunction:function(){var a;this.trackByFn||((a=this.trackBy)&&"$"!=a?F(a)?this.trackByFn=a:this.trackByFn=function(b){return b&&!ua(b)?b[a]:void 0}:this.trackByFn=function(a){return ua(a)?a:void 0});return this.trackByFn},scopeGetRawIndex:function(a){if(void 0===a)return-1;var b=this.watcher.getUnfilteredValue(),
c=this.getTrackByFunction(),d,g;d=0;for(g=b.length;d<g;d++)if(c(b[d])===a)return d;return-1},getNodePositions:function(a,b,c){return{}},calculateTranslates:function(a,b,c){return[]},moveAnimation:function(a,b,c,d,g){return A(a,"move",d,!1,E)},scrollTo:function(){},parseExpr:function(a){a=a.split(" ");var b,c,d,g,h;b=0;for(c=a.length;b<c;b++)if(h=a[b],""!=h&&"in"!=h)if(g){d=a.slice(b).join(" ");break}else g=h;this.model=d;this.itemName=g||"item"},destroy:function(){var a=this.renderers,b,c;b=0;for(c=
a.length;b<c;b++)a[b].renderer.$destroy();this.trackByWatcher&&this.trackByWatcher.unsubscribeAndDestroy();this.queue.destroy();this.watcher.unsubscribeAndDestroy(this.onChange,this)}},{$stopRenderer:!0,$registerBy:"id"}),mb=ra.currentUrl;q({$class:"View",route:null,node:null,scope:null,cmp:null,id:null,currentComponent:null,watchable:null,defaultCmp:null,$init:function(a){u(this,a,!0,!1);a=this.node;var b=D(a,this.scope);u(this,b,!0,!1);a&&a.firstChild&&G(a,"mjs-transclude",N(a.childNodes));this.id||
(this.id=L());this.scope.$app.registerCmp(this,this.scope,"id");this.route?(ra.initPushState(),ra.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=P(this.scope,this.cmp,this.onCmpChange,this,null,E),this.onCmpChange())},onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=mb(),b=this.route,c,d,g,h,f;d=0;for(g=b.length;d<g;d++){h=b[d];if(h.reg&&
(f=a.match(h.reg))){this.changeRouteComponent(h,f);return}h["default"]&&!c&&(c=h)}this.clearComponent();c?this.setRouteComponent(c,[]):this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){la(this.node);this.clearComponent();this.setRouteComponent(a,b)},clearComponent:function(){var a=this,b=a.node;a.currentComponent&&A(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,
b){var c=this,d=c.node,g=a.params;A(d,"enter",function(){var h=b||[],f={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,m;a.as&&(f.as=a.as);a.template&&(f.template=a.template);h.shift();if(g)for(k=-1,m=g.length;++k<m;f[g[k]]=h[k]);return da(a.cmp||"MetaphorJs.Component",f,f.scope,d,null,h).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;A(c,"enter",function(){var d=Ga(a)?a:{},g=(C(a)?a:null)||"MetaphorJs.Component",h=d.scope||
b.scope.$new();d.destroyEl=!1;return da(g,d,h,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(ra.un("locationchange",this.onLocationChange,this),this.route=null);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),this.watchable=null);this.currentComponent=this.scope=null;this.$super()}});n.registerAttribute("mjs-app",100,X);var nb=function(){var a=document.createElement("div");return C(a.textContent)?"textContent":"innerText"}();
n.registerAttribute("mjs-bind",1E3,q({$extends:n,isInput:!1,input:null,lockInput:null,recursive:!1,textRenderer:null,$init:function(a,b,c){var d=D(b,a);this.isInput=Ka(b);this.recursive=d.recursive||null!==x(b,"mjs-recursive");this.lockInput=d.lockInput;b.removeAttribute("mjs-recursive");this.isInput&&(this.input=new pa(b,this.onInputChange,this));this.recursive?(this.scope=a,this.node=b,this.textRenderer=new Ra(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),
this.onTextRendererChange(),a instanceof J&&a.$on("destroy",this.onScopeDestroy,this)):this.$super(a,b,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?this.input.setValue(a):this.node[nb]=a},destroy:function(){this.textRenderer&&(this.textRenderer.$destroy(),this.textRenderer=null);this.input&&
(this.input.destroy(),this.input=null);this.$super()}}));n.registerAttribute("mjs-bind-html",1E3,q({$extends:"attr.mjs-bind",updateElement:function(a){this.node.innerHTML=a}}));(function(){var a=function(a,c,d,g){if(null!==d){if(d==wa(a,c))return;d=!d}else d=wa(a,c);d?g?A(a,[c+"-remove"],null,!0).done(function(){U(a,c)}):U(a,c):g?A(a,[c+"-add"],null,!0).done(function(){xa(a,c)}):xa(a,c)};n.registerAttribute("mjs-class",1E3,q({$extends:n,initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),
d=this.watcher.getPrevValue(),g;la(b);if(C(c))d&&a(b,d,!1,!1),a(b,c,null,!this.initial);else if(B(c))for(g=-1,d=c.length;++g<d;a(b,c[g],!0,!this.initial));else for(g in c)a(b,g,c[g]?!0:!1,!this.initial);this.initial=!1}}))})();n.registerAttribute("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=function(a,c,d,g){var h,f,k,m,t,n=D(c,a);d=d.split(" ");k=0;for(m=d.length;k<m;k++)t=d[k],""!=t&&"as"!=t&&(h?f=t:h=t);g=u({scope:a,node:c,as:f,parentRenderer:g,
destroyScope:!0},n,!1,!1);f=V(h,!0);da(h,g,a,c);return!!f.$shadow};a.$breakScope=!0;n.registerAttribute("mjs-cmp",200,a)})();n.registerAttribute("mjs-config",50,function(a,b,c){D(b,a,c)});n.registerAttribute("mjs-each",100,Ua);var Da=Ta.createFunc,ea=function(a){if(a instanceof ea)return a;if(!(this instanceof ea))return new ea(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,g=a.button;void 0===
this.pageX&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===g||(this.which=g&1?1:g&2?3:g&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ja:X;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};
u(ea.prototype,{isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ja;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ja;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ja;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();
this.stopPropagation()}},!0,!1);(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove keydown keyup keypress submit focus blur copy cut paste enter".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=a;"enter"==b&&(b="keyup");n.registerAttribute("mjs-"+a,1E3,function(c,f,k){var m=Da(k);Y(f,b,function(b){b=La(b||window.event);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;m(c);c.$event=null;c.$root.$check();b.preventDefault();return!1})})})(a[b])})();n.registerAttribute("mjs-show",
500,q({$extends:n,initial:!0,display:"",$init:function(a,b,c){this.display=D(b,a).display||"";this.$super(a,b,c)},runAnimation:function(a){var b=this,c=b.node.style,d=function(){c.display=a?b.display:"none"};b.initial?d():A(b.node,a?"show":"hide",function(){a&&(c.display=b.display)},!0).done(d)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));n.registerAttribute("mjs-hide",500,q({$extends:"attr.mjs-show",onChange:function(){var a=this.watcher.getLastResult();
this.runAnimation(!a);this.initial=!1}}));n.registerAttribute("mjs-if",500,q({$extends:n,parentEl:null,prevEl:null,el:null,initial:!0,$init:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=b.previousSibling;this.$super(a,b,c)},onScopeDestroy:function(){this.parentEl=this.prevEl=null;this.$super()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,g=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},f=function(){c.removeChild(d)};
b?fa(d)||(a.initial?g():A(d,"enter",g,!0)):fa(d)&&(a.initial?f():A(d,"leave",null,!0).done(f));a.initial=!1}}));n.registerAttribute("mjs-ignore",0,X);n.registerAttribute("mjs-include",900,function(a,b,c,d){a=new W({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});n.registerAttribute("mjs-init",250,function(a,b,c){Da(c)(a)});var Ea=navigator.userAgent.toLowerCase(),na=function(){var a=parseInt((/msie (\d+)/.exec(Ea)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(Ea)||
[])[1],10)||!1);return function(){return a}}();n.registerAttribute("mjs-model",1E3,q({$extends:n,inProg:!1,input:null,binding:null,autoOnChange:!1,$init:function(a,b,c){var d=D(b,a);this.node=b;this.input=new pa(b,this.onInputChange,this);this.binding=d.binding||"both";this.$super(a,b,c);a=this.input.getValue();b=this.watcher.getLastResult();if(b!=a)if("input"!=this.binding&&void 0!=b)this.onChange(b);else if("scope"!=this.binding&&void 0!=a)this.onInputChange(a)},onInputChange:function(a){var b=
this.scope;"scope"!=this.binding&&(a&&C(a)&&-1!=a.indexOf("\\{")&&(a=a.replace(/\\{/g,"{")),this.watcher.getLastResult()!=a&&(this.watcher.setValue(a),this.inProg=!0,b instanceof J?b.$root.$check():this.watcher.checkAll(),this.inProg=!1))},destroy:function(){this.input.destroy();this.$super()},onChange:function(){var a=this.watcher.getLastResult(),b;"input"==this.binding||this.inProg||((b=na())&&8>b?sa(this.input.setValue,this.input,[a]):this.input.setValue(a))}}));n.registerAttribute("mjs-options",
100,q({$extends:n,model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,fragment:null,$init:function(a,b,c){this.parseExpr(c);this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&this.defOption.setAttribute("mjs-default-option","");try{this.watcher=P(a,this.model,this.onChange,this,null,E)}catch(d){K(d)}this.render(M(this.watcher.getValue()))},onChange:function(){this.render(M(this.watcher.getValue()))},
renderOption:function(a,b,c){var d=this.groupEl||this.fragment,g=na();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=document.createElement("optgroup"),d.setAttribute("label",a.group),a.disabledGroup&&d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;g&&9>g&&(b.innerHTML=
a.name);a.disabled&&b.setAttribute("disabled","disabled");d.appendChild(b)},render:function(a){var b=this.node,c=Bb(b),d=this.defOption,g=this.scope.$new(),f=na(),l,k,m,n;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);m=0;for(n=a.length;m<n;m++)this.renderOption(a[m],m,g);d&&b.insertBefore(d,b.firstChild);g.$destroy();f&&8>f&&(k=b.nextSibling,l=b.parentNode,l.removeChild(b));b.appendChild(this.fragment);this.fragment=
null;f&&8>f&&l.insertBefore(b,k);Cb(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=va(a)}}));(function(){var a="selected checked disabled readonly open required".split(" "),b,c,d=q({$extends:n,propName:null,$init:function(a,b,c,d){this.propName=d;this.$super(a,b,c)},onChange:function(a){var b=this.propName;a?this.node.setAttribute(b,b):this.node.removeAttribute(b)}});b=0;for(c=a.length;b<
c;b++)(function(a){n.registerAttribute("mjs-"+a,1E3,function(b,c,f){return new d(b,c,f,a)})})(a[b])})();var ob=function(){var a={},b=0;return function(c){if(a[c])return w.resolve(c);1E3<b&&(a={},b=0);var d=document.createElement("img"),g=d.style,f=new w;Y(d,"load",function(){a[c]=!0;b++;document.body.removeChild(d);f.resolve(c)});g.position="absolute";g.visibility="hidden";g.left="-10000px";g.top="0";d.src=c;document.body.appendChild(d);return f}}();n.registerAttribute("mjs-src",1E3,q({$extends:n,
queue:null,usePreload:!0,$constructor:function(a,b,c){D(b,a).deferred&&this.$plugins.push("SrcDeferred");this.$super(a,b,c)},$init:function(a,b,c){D(b,a).noPreload&&(this.usePreload=!1);this.queue=new y({auto:!0,async:!0,mode:y.ONCE,thenable:!0});this.$super(a,b,c)},onChange:function(){this.queue.add(this.doChange,this)},doChange:function(){var a=this,b=a.watcher.getLastResult();if(a.usePreload)return ob(b).done(function(){a&&a.node&&ma(function(){a.node.src=b;a.node.setAttribute("src",b)})});a.node.src=
b;a.node.setAttribute("src",b)},destroy:function(){this.queue.destroy();this.$super()}}));n.registerAttribute("mjs-transclude",1E3,function(a,b){return Ma(b)});n.registerAttribute("mjs-view",200,function(a,b,c){da(c||"MetaphorJs.View",{scope:a,node:b},a,b);return!1});n.registerTag("mjs-include",function(a,b,c,d){return(new W({scope:a,node:b,tpl:x(b,"src"),parentRenderer:d,replace:!0})).initPromise});n.registerTag("mjs-transclude",function(a,b){return Ma(b)});var pb=function(){var a=function(a,b,c){if(F(b))return b(a,
c);if(""===b||void 0===b)return!0;if(void 0!==a){if(ia(a))return a===b;if(b instanceof RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},b=function(b,c,f){if(ua(b))return void 0===c.$?!0:a(b,c.$,f);var l,k;for(l in c)if("$"==l)for(k in b){if(a(b[k],c.$,f))return!0}else if(a(b[l],c[l],f))return!0;return!1},c=function(a,c,f){S(c)||(c={$:c});var l=[],k,m;k=-1;for(m=a.length;++k<m;)b(a[k],
c,f)&&l.push(a[k]);return l};c.compare=b;return c}();p("filter.filter",function(a,b,c,d){return pb(a,c,d)});p("filter.join",function(a,b,c){c=c||", ";return a&&a.length?(B(a)||(a=M(a)),a.join(c)):""});p("filter.l",function(a,b){return b.$app.lang.get(a)});p("filter.limitTo",function(a,b,c){b=C(a);if(!B(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:
(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});p("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});p("filter.lowercase",function(a){return a.toLowerCase()});var qb={};p("filter.moment",function(a,b,c){c=qb[c]||c;return moment(a).format(c)});var rb={};p("filter.numeral",function(a,b,c){c=rb[c]||c;return numeral(a).format(c)});p("filter.p",function(a,
b,c){return b.$app.lang.plural(a,parseInt(c,10)||0)});p("filter.sortBy",function(a,b,c,d){return ab(a,c,d)});p("filter.split",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=Ia(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=aa(a[b]));return a});p("filter.toArray",function(a){return M(a)});p("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});p("filter.uppercase",function(a){return a.toUpperCase()});
var sb=function(){return function b(c,d){if(c===d)return!0;if(null===c||null===d)return!1;if(c!==c&&d!==d)return!0;var g=typeof c,f;if(g==typeof d&&"object"==g)if(B(c)){if(!B(d))return!1;if((g=c.length)==d.length){for(f=0;f<g;f++)if(!b(c[f],d[f]))return!1;return!0}}else{if(za(c))return za(d)&&c.getTime()==d.getTime();if(Aa(c)&&Aa(d))return c.toString()==d.toString();if(Ba(c)||Ba(d)||B(d))return!1;g={};for(f in c)if("$"!=f.charAt(0)&&!F(c[f])){if(!b(c[f],d[f]))return!1;g[f]=!0}for(f in d)if(!g.hasOwnProperty(f)&&
"$"!=f.charAt(0)&&void 0!==d[f]&&!F(d[f]))return!1;return!0}return!1}}(),Eb=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==na())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),Fb=function(){var a=parseInt((/android (\d+)/.exec(Ea)||[])[1],10)||!1;return function(){return a}}(),Gb=function(){return function b(c,d){if(Ba(c))throw Error("Cannot copy window object");if(d){if(c===d)throw Error("Objects are identical");if(B(c))for(var f=
d.length=0,h=c.length;f<h;f++)d.push(b(c[f]));else{for(f in d)delete d[f];for(f in c)c.hasOwnProperty(f)&&("$"==f.charAt(0)||F(c[f])?d[f]=c[f]:d[f]=b(c[f]))}}else(d=c)&&(B(c)?d=b(c,[]):za(c)?d=new Date(c.getTime()):Aa(c)?d=new RegExp(c.source):S(c)&&(d=b(c,{})));return d}}(),Pa=qa.is,oa={},O=function(){return window.getComputedStyle?function(a,b,c){if(a===window)return b?c?0:null:{};a=getComputedStyle(a,null);b=b?a[b]:a;return c?parseFloat(b)||0:b}:function(a,b,c){a=a.currentStyle||a.style||{};b=
b?a[b]:a;return c?parseFloat(b)||0:b}}(),tb=function(){var a;return function(){if(void 0===a){var b=document.createElement("div"),c=document.createElement("div"),d=document.body;c.style&&window.getComputedStyle?(b.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",b.appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
c.innerHTML="",d.appendChild(b),c="4px"===window.getComputedStyle(c,null).width,d.removeChild(b),a=c):a=!1}return a}}(),ca=function(a,b){var c=/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,d=["Top","Right","Bottom","Left"],f=a?"inner"==a?"padding":"":"content";return function(a,l){if(a===window)return a.document.documentElement["client"+b];if(9===a.nodeType){var k=a.documentElement;return Math.max(a.body["scroll"+b],k["scroll"+b],a.body["offset"+b],k["offset"+b],k["client"+b])}a:{var m=b.toLowerCase(),
n=f||(!0===l?"margin":"border"),k=O(a),q=!0,s="width"===m?a.offsetWidth:a.offsetHeight,p="border-box"===k.boxSizing;if(0>=s||null==s){s=a.style[m];if(c.test(s)){k=s;break a}q=p&&(tb()||s===a.style[m]);s=parseFloat(s)||0}n=n||(p?"border":"content");m=n===(q?"border":"content")?4:"width"===m?1:0;for(p=0;4>m;m+=2)"margin"===n&&(p+=parseFloat(k[n+d[m]])),q?("content"===n&&(p-=parseFloat(k["padding"+d[m]])),"margin"!==n&&(p-=parseFloat(k["border"+d[m]+"Width"]))):(p+=parseFloat(k["padding"+d[m]]),"padding"!==
n&&(p+=parseFloat(k["border"+d[m]+"Width"])));k=s+p}return k}},Hb=ca("","Height"),Ib=ca("inner","Height"),Jb=ca("inner","Width"),Va=function(a){var b,c=a?"pageYOffset":"pageXOffset",d=a?"scrollTop":"scrollLeft";a=document;var f=a.body,h=a.documentElement;b=void 0!==window[c]?function(){return window[c]}:h.clientHeight?function(){return h[d]}:function(){return f[d]};return function(a){return a&&a!==window?a&&1==a.nodeType&&a!==f&&a!==h?a[d]:b():b()}},bb=Va(!0),cb=Va(!1),Kb=ca("outer","Height"),Lb=
ca("outer","Width"),Mb=function(){var a=/(auto|scroll)/,b,c=function(a){a=O(a);return a.overflow+a.overflowY+a.overflowY};return function(d){b||(b=document.body);for(;d&&d!==b;){if(a.test(c(d)))return d;d=d.parentNode}return window}}(),Nb=ca("","Width"),Ob=function(){var a=Object.prototype.toString,b=Function.prototype.toString,c=/^\[object .+?Constructor\]$/,d=RegExp("^"+String(a).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(f){var h=
typeof f;return"function"==h?!("prototype"in f)||d.test(b.call(f)):f&&"object"==h&&c.test(a.call(f))||!1}}(),Pb=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),ub=Ua.$extend({store:null,$constructor:function(a,b,c){var d=D(b,a);d.pullNext&&(d.buffered&&(d.bufferedPullNext=!0,d.buffered=!1),this.$plugins.push("ListPullNext"));this.$super(a,b,c)},afterInit:function(a,b,c){this.store=a=va(this.model)(a);this.watcher=P(a,
".current",this.onChange,this,null,E);this.trackByFn=ba(a.getRecordId,a);this.griDelegate=ba(a.indexOfId,a);this.bindStore(a,"on")},bindStore:function(a,b){a[b]("update",this.onStoreUpdate,this);a[b]("clear",this.onStoreUpdate,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},getListItem:function(a,b){return this.store.getRecordData(a[b])},onStoreDestroy:function(){this.onStoreUpdate();this.watcher.unsubscribeAndDestroy(this.onChange,this);this.watcher=
null},destroy:function(){this.bindStore(this.store,"un");this.$super()}},{$stopRenderer:!0,$registerBy:"id"});n.registerAttribute("mjs-each-in-store",100,ub);q({$class:"DialogComponent",$extends:lb,dialog:null,dialogPreset:null,dialogCfg:null,initComponent:function(){this.$super();this._createDialog();this._oldShow=this.show;this._oldHide=this.hide},_getDialogCfg:function(){return u({},this.dialogCfg,{render:{el:this.node,keepInDOM:!0}},!0,!0)},_createDialog:function(){this.dialog=new zb(this.dialogPreset,
this._getDialogCfg());this.dialog.on("show",this._oldShow,this);this.dialog.on("hide",this._oldHide,this);this.dialog.on("destroy",this.onDialogDestroy,this)},show:function(){this.dialog.show()},hide:function(){this.dialog.hide()},onDialogDestroy:function(){this.destroying||(this.dialog=null,this.$destroy())},destroy:function(){this.destroying=!0;this.dialog&&this.dialog.destroy();this.$super()}});q({$class:"MetaphorJs.ValidatorComponent",node:null,scope:null,validator:null,scopeState:null,$init:function(a,
b,c){this.node=a;this.scope=b;this.scopeState={};this.validator=this.createValidator();this.initScope();this.initScopeState();this.initValidatorEvents();c.once("rendered",this.validator.check,this.validator)},createValidator:function(){var a=this.node,b={},c;if(c=D(a).submit)b.callback=b.callback||{},b.callback.submit=function(a,b){return function(){try{return a(b)}catch(c){K(c)}}}(Da(c),this.scope);return new yb(a,b)},initValidatorEvents:function(){var a=this.validator;a.on("fieldstatechange",this.onFieldStateChange,
this);a.on("statechange",this.onFormStateChange,this);a.on("displaystatechange",this.onDisplayStateChange,this);a.on("reset",this.onFormReset,this)},initScope:function(){var a=this.scope,b=this.node,b=x(b,"name")||x(b,"id")||"$form";a[b]=this.scopeState},initScopeState:function(){var a=this.node,b=this.scopeState,c,d,f;a.elements?c=a.elements:(c=[],Na(a,function(a){Ka(a)&&c.push(a)}));a=-1;for(f=c.length;++a<f;)d=c[a],(d=x(d,"name")||x(d,"id"))&&!b[d]&&(b[d]={$error:null,$invalid:null,$pristine:!0,
$errorMessage:null});b.$invalid=!1;b.$pristine=!0;b.$submit=ba(this.validator.onSubmit,this.validator);b.$reset=ba(this.validator.reset,this.validator);window.formState=b},onDisplayStateChange:function(a,b){if(b){b=this.scopeState;var c,d;for(c in b)d=b[c],d.$real&&(b[c]=d.$real);b.$invalid=!a.isValid();b.$pristine=!1;this.scope.$check()}else this.onFormReset(a)},onFormReset:function(a){a=this.scopeState;var b,c;for(b in a)c=a[b],c.$error=null,c.$errorMessage=null,c.$invalid=null,c.$pristine=!0;a.$invalid=
!1;a.$pristine=!0;this.scope.$check()},onFormStateChange:function(a,b){var c=this.scopeState;c.$invalid=!1===b&&a.isDisplayStateEnabled();c.$pristine=!1;this.scope.$check()},onFieldStateChange:function(a,b,c){var d=this.scopeState,f=b.getName();a=a.isDisplayStateEnabled();b={$error:b.getErrorRule(),$errorMessage:b.getError(),$invalid:!1===c,$pristine:null===b.getExactValidState()};a?d[f]=b:d[f].$real=b;this.scope.$check()}});n.registerAttribute("mjs-validate",250,["$scope","$node","$attrValue","$renderer",
function(a,b,c,d){c=c||"MetaphorJs.ValidatorComponent";var f=V(c);f?new f(b,a,d):K(Error("Class '"+c+"' not found"))}]);f.ns=E;f.cs=gb;f.defineClass=q;f.emptyFn=H;f.slice=Z;f.getAttr=x;f.undf=void 0;f.varType=Q;f.isPlainObject=S;f.isBool=ia;f.extend=u;f.Scope=J;f.nextUid=L;f.isArray=B;f.toArray=M;f.isFunction=F;f.isThenable=T;f.nsGet=V;f.isString=C;f.nodeTextProp=Qa;f.trim=aa;f.createWatchable=P;f.nsAdd=p;f.Directive=n;f.bind=ba;f.isNull=function(a){return null===a};f.TextRenderer=Ra;f.setAttr=function(a,
b,c){return a.setAttribute(b,c)};f.removeAttr=function(a,b){return a.removeAttribute(b)};f.getAttrMap=Wa;f.aIndexOf=Ca;f.Renderer=ga;f.Text=hb;f.ObservableMixin=Sa;f.isObject=Ga;f.instantiate=ib;f.Provider=Ja;f.ProviderMixin=jb;f.documentElement=I;f.isAttached=fa;f.data=G;f.toFragment=N;f.clone=ya;f.shadowRootSupported=kb;f.Template=W;f.Component=lb;f.getRegExp=Ia;f.getClsReg=Ha;f.removeClass=U;f.stopAnimation=la;f.async=sa;f.isNumber=ta;f.strUndef="undefined";f.error=K;f.Queue=y;f.isPrimitive=ua;
f.raf=ma;f.functionFactory=Ta;f.createGetter=va;f.toCamelCase=Xa;f.getNodeData=Ya;f.getNodeConfig=D;f.ListRenderer=Ua;f.hasClass=wa;f.addClass=xa;f.resolveComponent=da;f.currentUrl=mb;f.returnFalse=X;f.isField=Ka;f.elemTextProp=nb;f.createFunc=Da;f.returnTrue=ja;f.DomEvent=ea;f.normalizeEvent=La;f.addListener=Y;f.uaString=Ea;f.isIE=na;f.preloadImage=ob;f.parentData=$a;f.transclude=Ma;f.filterArray=pb;f.dateFormats=qb;f.numberFormats=rb;f.sortArray=ab;f.inArray=function(a,b){return b?-1!=Ca.call(b,
a):!1};f.isDate=za;f.isRegExp=Aa;f.isWindow=Ba;f.equals=sb;f.levenshteinArray=function(a,b){var c=a.length,d=b.length,f=Array(c+1),h=Array(c+1),l,k,m,n,p=0;if(c==d&&0==c)return{changes:0,distance:0,prescription:[]};for(l=0;l<=c;l++)f[l]=Array(d+1),h[l]=Array(d+1),f[l][0]=l,h[l][0]="D";for(l=0;l<=d;l++)f[0][l]=l,h[0][l]="I";for(l=1;l<=c;l++)for(k=1;k<=d;k++)m=sb(a[l-1],b[k-1])?0:1,f[l][k-1]<f[l-1][k]&&f[l][k-1]<f[l-1][k-1]+m?(f[l][k]=f[l][k-1]+1,h[l][k]="I"):f[l-1][k]<f[l-1][k-1]+m?(f[l][k]=f[l-1][k]+
1,h[l][k]="D"):(f[l][k]=f[l-1][k-1]+m,h[l][k]=1==m?"R":"-");n=[];l=c;k=d;do m=h[l][k],n.push(m),"-"!=m&&p++,"R"==m||"-"==m?(l--,k--):"D"==m?l--:k--;while(0!=l||0!=k);return{changes:p/n.length,distance:f[c][d],prescription:n.reverse()}};f.browserHasEvent=Eb;f.isAndroid=Fb;f.compile=function(a,b){var c=document.createElement("div");c.innerHTML=a;c=N(c.childNodes);(new ga(c,b)).process();return c};f.copy=Gb;f.is=Pa;f.delegates=oa;f.delegate=function(a,b,c,d){var f=b+"-"+c,h=function(a){a=La(a);return Pa(a.target,
b)?d(a):null};oa[f]||(oa[f]=[]);oa[f].push({el:a,ls:h,fn:d});Y(a,c,h)};f.eachNode=Na;f.getStyle=O;f.boxSizingReliable=tb;f.getDimensions=ca;f.getHeight=Hb;f.getInnerHeight=Ib;f.getInnerWidth=Jb;f.getScrollTopOrLeft=Va;f.getScrollTop=bb;f.getScrollLeft=cb;f.getOffset=ka;f.getOffsetParent=db;f.getOuterHeight=Kb;f.getOuterWidth=Lb;f.getPosition=function(a,b){var c,d,f={top:0,left:0};if(a===window||a===I)return f;if("fixed"==O(a,"position"))d=a.getBoundingClientRect();else{if(b)return c=ka(a),d=ka(b),
c={left:c.left-d.left,top:c.top-d.top},0>c.left&&(c.left=0),0>c.top&&(c.top=0),c;c=db(a);d=ka(a);c!==I&&(f=ka(c));f.top+=O(c,"borderTopWidth",!0);f.left+=O(c,"borderLeftWidth",!0)}return{top:d.top-f.top-O(a,"marginTop",!0),left:d.left-f.left-O(a,"marginLeft",!0)}};f.getScrollParent=Mb;f.getWidth=Nb;f.isSubmittable=function(a){var b=a.type?a.type.toLowerCase():"";return"input"==a.nodeName.toLowerCase()&&"radio"!=b&&"checkbox"!=b};f.isVisible=function(a){return!(0>=a.offsetWidth||0>=a.offsetHeight)};
f.removeListener=Oa;f.onReady=eb;f.undelegate=function(a,b,c,d){var f,h;if(h=oa[b+"-"+c])for(b=-1,f=h.length;++b<f;)h[b].el===a&&h[b].fn===d&&Oa(a,c,h[b].ls)};f.initApp=fb;f.intercept=function(a,b,c,d,f,h){f=f||"before";return function(){var l,k;if("instead"==f)return b.apply(c||d,arguments);"before"==f?(l=b.apply(c||d,arguments),k=!1!==l?a.apply(d||c,arguments):null):(k=a.apply(d||c,arguments),l=b.apply(c||d,arguments));return h?l:k}};f.isInjectable=function(a){return a&&(a.length&&F(a[a.length-
1])||a.inject)};f.isNative=Ob;f.isUndefined=function(a){return"undefined"==typeof a};f.parseJSON=Pb;f.parseXML=function(a,b){var c,d;if(!a||!C(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(f){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c};f.run=function(){eb(function(){var a=qa("[mjs-app]"),b,c,d;b=-1;for(c=a.length;++b<c;)d=a[b],fb(d,x(d,"mjs-app"),null,!0)})};f.ucfirst=function(a){return a.substr(0,1).toUpperCase()+a.substr(1)};
f.StoreRenderer=ub;return f});
