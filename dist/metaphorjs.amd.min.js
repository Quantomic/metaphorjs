'use strict';define("metaphorjs","metaphorjs-observable metaphorjs-promise metaphorjs-ajax metaphorjs-animate metaphorjs-input metaphorjs-class metaphorjs-namespace metaphorjs-select metaphorjs-validator metaphorjs-watchable metaphorjs-dialog metaphorjs-history".split(" "),function(L,w,Da,y,la,$a,ab,Ea,bb,sa,cb,X){function fa(e){return"object"==typeof e&&3===R(e)&&!e.nodeType&&e.constructor===Object}function ma(e){return!0===e||!1===e}function G(){}function S(e){return"object"==typeof e&&5===R(e)}
function D(e){return"string"==typeof e||e===""+e}function M(e){if(e&&void 0!=!e.length&&e!==""+e){for(var a=[],b=-1,c=e.length>>>0;++b!==c;a[b]=e[b]);return a}return e?[e]:[]}function T(e){return"function"==typeof e}function Y(e){if(!e||!e.then)return!1;var a,b;return"object"!=(b=typeof e)&&"function"!=b?!1:T(a=e.then)?a:!1}function ta(e,a,b,c){setTimeout(function(){e.apply(a,b||[])},c||0)}function I(e){var a=e.stack||Error().stack;if("undefined"!=typeof console&&console.log)ta(function(){console.log(e);
a&&console.log(a)});else throw e;}function db(e){var a={},b,c,d=e.attributes;e=0;for(b=d.length;e<b;e++)c=d[e],a[c.name]=c.value;return a}function Fa(e){if(null===e||"object"!=typeof e)return!1;e=R(e);return 2<e||-1==e}function U(e){var a=document.createDocumentFragment();if(D(e)){var b=document.createElement("div");b.innerHTML=e;e=b.childNodes}if(e.nodeType)a.appendChild(e);else for(var b=-1,c=e.length>>>0;++b!==c;a.appendChild(e[0]));return a}function Z(e,a){a&&(e.className=e.className.replace(ua("(?:^|\\s)"+
a+"(?!\\S)"),""))}function va(e,a){return a?ua("(?:^|\\s)"+a+"(?!\\S)").test(e.className):!1}function ga(e,a){a&&!va(e,a)&&(e.className+=" "+a)}function aa(e,a,b,c,d){var f=!1!==a;a=a||{};d=d||[];b=b||a.scope;c=c||a.node;a.scope=a.scope||b;a.node=a.node||c;var g=D(e)?ha(e):e;if(!g)throw"Component "+e+" not found";b&&g.$isolateScope&&(a.scope=b=b.$newIsolated());var h,k=[];e=g.template||a.template||null;var l=g.templateUrl||a.templateUrl||null,m=b?b.$app:null,q=Ga.global(),r=m?m.inject:q.inject,v=
m?m:q,E=c?c.getAttribute("mjs-cloak"):null,na={$node:c||null,$scope:b||null,$config:a||null,$args:d||null};if(g.resolve)for(h in g.resolve)(function(f){var e=new w,l;k.push(e.done(function(b){na[f]=b;a[f]=b;d.push(b)}));l=g.resolve[h];T(l)?e.resolve(l(b,c)):D(l)?e.resolve(r.resolve(l)):e.resolve(r.call(v,l,null,n({},na,a,!1,!1)))})(h);f&&(e||l)&&(a.template=new ba({scope:b,node:c,deferRendering:!0,ownRenderer:!0,tpl:e,url:l}),k.push(a.template.initPromise),c&&c.firstChild&&B(c,"mjs-transclude",U(c.childNodes)));
f&&d.unshift(a);var p;k.length?(p=new w,w.all(k).done(function(){p.resolve(r.call(v,g,null,n({},na,a,!1,!1),d))})):p=w.resolve(r.call(v,g,null,n({},na,a,!1,!1),d));c&&p.isPending()&&null!==E&&(E?ga(c,E):c.style.visibility="hidden",p.then(function(){E?Z(c,E):c.style.visibility=""}));c&&p.then(function(){Z(c,"mjs-cloak")});return p}function eb(e){return e.replace(fb,function(a){return a.charAt(1).toUpperCase()})}function N(e,a,b){var c=B(e,"config"),d;if(c)return c;c={};if(b||null!==(b=e.getAttribute("mjs-config")))for(d in e.removeAttribute("mjs-config"),
a=b?wa(b)(a||{}):{},a)c[d]=a[d];a=gb(e);for(d in a)b=a[d],c[d]=""===b?!0:b;B(e,"config",c);return c}function ca(){return!1}function Ha(e){var a=e.nodeName.toLowerCase();e=e.type;return"input"!=a&&"textarea"!=a&&"select"!=a||"submit"==e||"reset"==e||"button"==e?!1:!0}function xa(e){e=R(e);return 3>e&&-1<e}function F(e,a,b){e.attachEvent?e.attachEvent("on"+a,b):e.addEventListener(a,b,!1)}function V(e,a,b){e.detachEvent?e.detachEvent("on"+a,b):e.removeEventListener(a,b,!1)}function oa(e){var a={top:0,
left:0};if(!ia(e)||e===window)return a;e.getBoundingClientRect&&(a=e.getBoundingClientRect());return{top:a.top+pa()-J.clientTop,left:a.left+qa()-J.clientLeft}}function Ia(e,a){var b,c,d={top:0,left:0};if(e===window||e===J)return d;if("fixed"==O(e,"position"))c=e.getBoundingClientRect();else{if(a)return d=oa(e),b=oa(a),d={left:d.left-b.left,top:d.top-b.top},0>d.left&&(d.left=0),0>d.top&&(d.top=0),d;for(b=e.offsetParent||J;b&&b!=J&&"static"==O(b,"position");)b=b.offsetParent;b=b||J;c=oa(e);b!==J&&(d=
oa(b));d.top+=O(b,"borderTopWidth",!0);d.left+=O(b,"borderLeftWidth",!0)}return{top:c.top-d.top-O(e,"marginTop",!0),left:c.left-d.left-O(e,"marginLeft",!0)}}function ra(){return!0}function Ja(e){var a;a:{for(var b=e,c;b;){c=B(b,"mjs-transclude");if(void 0!==c){a=c;break a}b=b.parentNode}a=void 0}if(a){e.firstChild&&B(e,"mjs-transclude",U(e.childNodes));b=e.parentNode;c=e.nextSibling;a=ya(a);var d=M(a.childNodes);b.removeChild(e);b.insertBefore(a,c);return d}return null}function hb(e,a,b){b||(b="asc");
e=e.slice();e.sort(function(b,d){var f=typeof b,g=b,e=d;if(f!=typeof d)return 0;"object"==f&&(T(a)?(g=a(b),e=a(d)):(g=b[a],e=d[a]));if("number"==typeof g)return g-e;g=(""+g).toLowerCase();e=(""+e).toLowerCase();return g===e?0:g>e?1:-1});return"desc"==b?e.reverse():e}function Ka(e){var a=!1,b=!0,c=window,d=c.document,f=d.documentElement,g=function(b){if("readystatechange"!=b.type||"complete"==d.readyState)V("load"==b.type?c:d,b.type,g),!a&&(a=!0)&&e.call(c,b.type||b)},h=function(){try{f.doScroll("left")}catch(a){setTimeout(h,
50);return}g("poll")};if("complete"==d.readyState)e.call(c,"lazy");else{if(d.createEventObject&&f.doScroll){try{b=!c.frameElement}catch(k){}b&&h()}F(d,"DOMContentLoaded",g);F(d,"readystatechange",g);F(c,"load",g)}}function La(e,a,b,c){e.removeAttribute("mjs-app");try{var d=aa(a||"MetaphorJs.cmp.App",!1,b,e,[e,b]);return!1!==c?d.done(function(a){a.run();return a}):d}catch(f){return I(f),w.reject(f)}}function Ma(e,a,b){var c,d=e.childNodes;if(!1!==a.call(b,e))for(e=-1,c=d.length>>>0;++e!==c;Ma(d[e],
a,b));}var ib=la.getValue,jb=la.setValue,kb=X.pushUrl,t={lib:{},cmp:{},view:{}},C=new ab(t,"MetaphorJs"),Na=new $a(C),x=Na.define,s=Function.prototype.bind?function(e,a){return e.bind(a)}:function(e,a){return function(){return e.apply(a,arguments)}},da=Array.prototype.slice,lb=Object.prototype.toString,R=function(){var e={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(a){if(!a){if(null===
a)return 6;if(void 0===a)return 7}var b=e[lb.call(a)];return void 0===b?-1:1==b&&isNaN(a)?8:b}}(),n=function(){return function a(){var b=!1,c=!1,d=da.call(arguments),f=d.shift(),g,h,k;ma(d[d.length-1])&&(b=d.pop());ma(d[d.length-1])&&(c=b,b=d.pop());for(;d.length;)if(g=d.shift())for(h in g)if(g.hasOwnProperty(h)&&void 0!==(k=g[h]))if(c)if(f[h]&&fa(f[h])&&fa(k))a(f[h],k,b,c);else{if(!0===b||void 0==f[h])fa(k)?(f[h]={},a(f[h],k,b,!0)):f[h]=k}else if(!0===b||void 0==f[h])f[h]=k;return f}}(),K=function(){var e=
["0","0","0"];return function(){for(var a=e.length,b;a;){a--;b=e[a].charCodeAt(0);if(57==b)return e[a]="A",e.join("");if(90==b)e[a]="0";else return e[a]=String.fromCharCode(b+1),e.join("")}e.unshift("0");return e.join("")}}(),H=function(e){this.$$observable=new L;this.$$historyWatchers={};n(this,e,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};n(H.prototype,{$app:null,$parent:null,
$root:null,$isRoot:!1,$$observable:null,$$watchers:null,$$historyWatchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new H({$parent:this,$root:this.$root,$app:this.$app})},$newIsolated:function(){return new H({$app:this.$app})},$on:function(e,a,b){return this.$$observable.on(e,a,b)},$un:function(e,a,b){return this.$$observable.un(e,a,b)},$watch:function(e,a,b){return sa.create(this,e,a,b,null)},$unwatch:function(e,a,b){return sa.unsubscribeAndDestroy(this,e,a,b)},$watchHistory:function(e,
a){this.$$historyWatchers[a]||(this.$$historyWatchers[a]=e,t.history.on("change-"+a,this.$$onHistoryChange,this))},$unwatchHistory:function(e){this.$$historyWatchers[e]||(delete this.$$historyWatchers[e],t.history.un("change-"+e,this.$$onHistoryChange,this))},$get:function(e){for(var a=this;a;){if(void 0!==a[e])return a[e];a=a.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$$onHistoryChange:function(e,a,b){this.$$historyWatchers[b]&&(a=this.$$historyWatchers[b],
this[a]=e,this.$check())},$check:function(){var e;this.$$checking||(this.$$checking=!0,this.$$watchers&&(e=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",e),0<e&&this.$check())},$destroy:function(){var e;this.$$observable.trigger("destroy");this.$$observable.destroy();this.$parent=this.$root=this.$app=this.$$observable=null;this.$$watchers&&(this.$$watchers.$destroyAll(),this.$$watchers=null);for(e in this.$$historyWatchers)this.$unwatchHistory(e);
this.$$historyWatchers=null;this.$$destroyed=!0}},!0,!1);var ha=C.get,Oa=function(){var e=document.createTextNode("");return D(e.textContent)?"textContent":"nodeValue"}(),W=function(){return String.prototype.trim?function(e){return D(e)?e.trim():e}:function(e){return D(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}(),P=sa.create,Pa=function(){var e=/\\{/g,a=new L,b=function(a,b,g,e,k){return!b||!b.indexOf||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new c(a,b,g,e,k)},c=function(a,b,c,e,k){this.id=
K();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=e;this.lang=a.$app?a.$app.lang:null;if(!0===k||!1===k)this.recursive=k;this.watchers=[];this.children=[];this.dataChangeDelegate=s(this.doDataChange,this);this.processed=this.processText(b);this.render()};n(c.prototype,{id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,subscribe:function(b,c){return a.on(this.id,
b,c)},unsubscribe:function(b,c){return a.un(this.id,b,c)},getString:function(){null===this.text&&this.render();var a=this.text;return-1!=a.indexOf("\\{")?a.replace(e,"{"):a},render:function(){var a=this.processed,b,g,e;this.children.length||this.createChildren();e=this.children;b=-1;for(g=e.length;++b<g;a=a.replace("---"+b+"---",e[b]instanceof c?e[b].getString():e[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,e,k,l="";b<c;)if(-1!=(e=a.indexOf("{{",b))&&-1!=(k=a.indexOf("}}",
e+2))&&"\\"!=a.substr(e-1,1))l+=a.substring(b,e),k!=e+2&&(l+=this.watcherMatch(a.substring(e+2,k))),b=k+2;else{b!==c&&(l+=a.substring(b));break}b=0;a=l;c=a.length;for(l="";b<c;)if(-1!=(e=a.indexOf("{[",b))&&-1!=(k=a.indexOf("]}",e+2))&&"\\"!=a.substr(e-1,1))l+=a.substring(b,e),k!=e+2&&(l+=this.watcherMatch(a.substring(e+2,k),!0)),b=k+2;else{b!==c&&(l+=a.substring(b));break}return l},watcherMatch:function(a,b){var c=this.watchers;if(b){a=W(a);var e=a.split("|"),k=W(e[0]);"."!=k.substr(0,1)&&(e[0]=
"'"+k+"'");1==e.length&&e.push("l");a=e.join(" | ")}c.push(P(this.scope,a,this.onDataChange,this,null,C));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?a.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,c=this.children,e=
this.scope,h=this.recursive,k,l,m;k=-1;for(l=a.length;++k<l;)m=a[k].getLastResult(),c.push(h&&b(e,m,this,null,!0)||m)},destroyChildren:function(){var a=this.children,b,e;b=-1;for(e=a.length;++b<e;)a[b]instanceof c&&a[b].destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){var b;this.destroyChildren();this.destroyWatchers();a.destroyEvent(this.id);this.changeTmt&&
clearTimeout(this.changeTmt);for(b in this)this.hasOwnProperty(b)&&(this[b]=null)}},!0,!1);c.create=b;return c}(),B=function(){var e={};return function(a,b,c){a=a._mjsid||(a._mjsid=K());var d=e[a];return void 0!==c?(d||(d=e[a]={}),d[b]=c):d?d[b]:void 0}}(),z=C.add,za=function(){var e=[],a=[],b=!1,c=!1,d=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return{registerAttributeHandler:function(a,c,d){ha("attr."+a,!0)||(e.push({priority:c,name:a,handler:z("attr."+a,d)}),b=!1)},
getAttributeHandlers:function(){b||(e.sort(d),b=!0);return e},registerTagHandler:function(b,d,e){ha("tag."+b,!0)||(a.push({priority:d,name:b,handler:z("tag."+b,e)}),c=!1)},getTagHandlers:function(){c||(a.sort(d),c=!0);return a}}}(),mb=za.getAttributeHandlers,Qa=Array.prototype.indexOf;Qa||(Qa=Array.prototype.indexOf=function(e,a){var b;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),d=c.length>>>0;if(0===d)return-1;b=+a||0;Infinity===Math.abs(b)&&(b=0);if(b>=
d)return-1;for(b=Math.max(0<=b?b:d-Math.abs(b),0);b<d;){if(b in c&&c[b]===e)return b;b++}return-1});var Aa=function(){var e=null,a=Pa.create,b=function(a,b,c,d,e,g){var h=[];if(a&&!0!==a){if(a.nodeType){g.countdown+=1;f(a,c,d,e,g);return}h=da.call(a)}h.length||(h=M(b.childNodes));b=h.length;g.countdown+=b;for(a=-1;++a<b;f(h[a],c,d,e,g));},c=function(a,b){if(b)if(b.nodeType)a.push(b);else if(S(b))for(var d=-1,e=b.length;++d<e;c(a,b[d]));},d={script:!0,template:!0,"mjs-template":!0,style:!0},f=function(a,
c,e,g,f){if(a){var h;h=a.nodeName;f||(f={countdown:1});if(!h||!d[h.toLowerCase()])if(h=c.call(e,a),!1!==h){if(Y(h)){h.done(function(d){!1!==d&&b(d,a,c,e,g,f);0==--f.countdown&&g&&g.call(e)});return}b(h,a,c,e,g,f)}0==--f.countdown&&g&&g.call(e)}},g=new L,h=function(a,b,c){this.id=K();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof H&&b.$on("destroy",this.destroy,this);if(c)c.on("destroy",this.destroy,this)};n(h.prototype,{id:null,el:null,scope:null,texts:null,parent:null,destroyed:!1,
_observable:null,on:function(a,b,c){return g.on(a+"-"+this.id,b,c)},once:function(a,b,c){return g.once(a+"-"+this.id,b,c)},un:function(a,b,c){return g.un(a+"-"+this.id,b,c)},createChild:function(a){return new h(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var e=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b,g=b.$app;c=g.inject(a,null,{$scope:e,$node:c,$attrValue:d,$renderer:this},[e,c,d,this]);g&&a.$registerBy&&c&&(Y(c)?c.done(function(c){g.registerCmp(c,
b,a.$registerBy)}):g.registerCmp(c,b,a.$registerBy));return a.$stopRenderer?!1:c},processNode:function(b){var d=b.nodeType,g=this.texts,f=this.scope,h,v;if(3==d){if(h=null!==b.parentNode.getAttribute("mjs-recursive"),d=a(f,b[Oa],null,g.length,h))d.subscribe(this.onTextChange,this),g.push({node:b,tr:d}),this.renderText(g.length-1)}else if(1==d){e||(e=mb());var d=[],E=[],n,p,u;v="tag."+b.tagName.toLowerCase();if(v=ha(v,!0)){p=this.runHandler(v,f,b);if(!1===p)return!1;Y(p)?d.push(p):c(E,p)}n=db(b);v=
0;for(h=e.length;v<h;v++)if(u=e[v].name,void 0!==(p=n[u])){b.removeAttribute(u);p=this.runHandler(e[v].handler,f,b,p);delete n[u];if(!1===p)return!1;Y(p)?d.push(p):c(E,p)}if(d.length){var t=new w;w.all(d).done(function(a){c(E,a);t.resolve(E)});return t}h=void 0!==n["mjs-recursive"];delete n["mjs-recursive"];for(v in n)if(d=a(f,n[v],null,g.length,h))b.removeAttribute(v),d.subscribe(this.onTextChange,this),g.push({node:b,attr:v,tr:d}),this.renderText(g.length-1);return E.length?E:!0}return!0},process:function(){f(this.el,
this.processNode,this,this.onProcessingFinished,{countdown:1})},onProcessingFinished:function(){g.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?("value"==c?a.node.value=b:"class"==c?a.node.className=b:"src"==c&&(a.node.src=b),a.node.setAttribute(c,b)):a.node[Oa]=b},destroy:function(){var a=this.texts,b,c;if(!this.destroyed){this.destroyed=!0;b=-1;for(c=a.length;++b<c;a[b].tr.destroy());this.parent&&
this.parent.un("destroy",this.destroy,this);this.parent=this.scope=this.el=this.texts=null;g.trigger("destroy-"+this.id)}}},!0,!1);return h}(),nb=function(e,a){var b=function(){},c;b.prototype=e.prototype;b=new b;c=e.apply(b,a);return Fa(c)||!1===c?c:b},Ga=function(){var e,a=function(){this.store={}};n(a.prototype,{store:null,getApi:function(){return{value:s(this.value,this),constant:s(this.constant,this),factory:s(this.factory,this),service:s(this.service,this),provider:s(this.provider,this),resolve:s(this.resolve,
this),inject:s(this.inject,this)}},instantiate:function(a,c,d,e){return a.$instantiate?a.$instantiate.apply(a,d):e?nb(a,d):a.apply(c,d)},inject:function(a,c,d,e,g){d=d||{};e=e||[];var h=this;if(T(a))if(a.inject)e=da.call(a.inject),e.push(a),a=e;else return h.instantiate(a,c,e,g);a=da.call(a);e=[];var k=a.pop(),l,m;l=-1;for(m=a.length;++l<m;e.push(h.resolve(a[l],d)));return w.all(e).then(function(a){return h.instantiate(k,c,a,g)})},value:function(a,c){this.store[a]={type:1,value:c}},constant:function(a,
c){var d=this.store;d[a]||(d[a]={type:2,value:c})},factory:function(a,c,d,e){ma(d)&&(e=d,d=null);this.store[a]={type:3,singleton:e,fn:c,context:d}},service:function(a,c,d){this.store[a]={type:4,singleton:d,fn:c}},provider:function(a,c){this.store[a+"Provider"]={name:a,type:5,fn:c,instance:null}},resolve:function(a,c){var d=this.store,f,g,h;if(void 0!==c[a])return c[a];if(g=d[a]){f=g.type;if(1==f||2==f)return g.value;if(3==f)h=this.inject(g.fn,g.context,c);else if(4==f)h=this.inject(g.fn,null,c,null,
!0);else if(5==f)return g.instance||(g.instance=w.resolve(this.inject(g.fn,null,c)).done(function(a){g.instance=a;d[g.name]={type:3,fn:a.$get,context:a}})),g.instance;g.singleton&&(g.type=1,g.value=h,3==f&&Y(h)&&h.done(function(a){g.value=a}));return c[a]=h}if(d[a+"Provider"])return this.resolve(a+"Provider",c),this.resolve(a,c);if(this===e)throw"Could not provide value for "+a;return e.resolve(a)},destroy:function(){this.scope=this.store=null}},!0,!1);a.global=function(){return e};e=new a;return a}(),
ob=function(){var e=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},a=function(a){this.store={};a&&(this.locale=a)};n(a.prototype,{store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var e=this.store;void 0===e[a]&&(e[a]=b)},load:function(a){n(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===b?"-- "+a+" --":b.get(a))},plural:function(a,b){var f=this.get(a),g=e(b,this.locale);return S(f)?f[g]:fa(f)?f[b]?f[b]:1==b&&void 0!=f.one?f.one:0>b&&void 0!=f.negative?f.negative:f.other:f}},!0,!1);var b=new a;a.global=function(){return b};return a}();x({$class:"MetaphorJs.cmp.Base",destroyed:!1,_observable:null,$init:function(e){e=e||{};this.$$observable=
new L;n(this,this.$$observable.getApi(),!0,!1);if(e.callback){var a=e.callback,b=a.scope||this;delete a.scope;for(var c in a)if(a.hasOwnProperty(c))this.on(c,a[c],b);delete e.callback}n(this,e,!0,!1)},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null;this.supr()}},onDestroy:G});x({$class:"MetaphorJs.cmp.App",$extends:"MetaphorJs.cmp.Base",lang:null,
scope:null,renderer:null,cmpListeners:null,components:null,$init:function(e,a){var b=a instanceof H?a:new H(a),c,d;b.$app=this;this.supr();c=new Ga;d=new L;this.lang=new ob;n(this,c.getApi(),!0,!1);this.destroyProvider=s(c.destroy,c);n(this,d.getApi(),!0,!1);this.destroyObservable=s(d.destroy,d);this.scope=b;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",b.$root);this.value("$lang",this.lang);this.renderer=
new Aa(e,b);c=da.call(arguments);c[1]=b;this.initApp.apply(this,c)},initApp:G,run:function(){this.renderer.process()},getParentCmp:function(e){e=e.parentNode;for(var a;e;){if(a=e.getAttribute("cmp-id"))return this.getCmp(a);e=e.parentNode}return null},onAvailable:function(e,a,b){var c=this.cmpListeners,d=this.components;c[e]||(c[e]=new w);a&&c[e].done(a,b);d[e]&&c[e].resolve(d[e]);return c[e]},getCmp:function(e){return this.components[e]||null},registerCmp:function(e,a,b){var c=this,d=e[b];b=function(){delete c.cmpListeners[d];
delete c.components[d]};c.components[d]=e;c.cmpListeners[d]&&c.cmpListeners[d].resolve(e);if(e.on)e.on("destroy",b);a.$on("$destroy",b)},destroy:function(){var e;this.destroyObservable();this.destroyProvider();this.renderer.destroy();this.scope.$destroy();for(e in this)this.hasOwnProperty(e)&&(this[e]=null);this.supr()}});var J=document.documentElement,ia=function(){return function a(b){return b===window?!0:3==b.nodeType?b.parentElement?a(b.parentElement):!0:b===J?!0:J.contains(b)}}(),ya=function a(b){var c,
d,f;if(S(b)){f=[];c=0;for(d=b.length;c<d;c++)f.push(a(b[c]));return f}if(b)switch(b.nodeType){case 1:return b.cloneNode(!0);case 3:return document.createTextNode(b.innerText||b.textContent);case 11:return b.cloneNode(!0)}return null},ba=function(){var a=new L,b={},c=function(a){if(!b[a]){var c=document.getElementById(a),d;c&&(d=c.tagName.toLowerCase(),"script"==d?(d=document.createElement("div"),d.innerHTML=c.innerHTML,b[a]=U(d.childNodes)):b[a]="content"in c?c.content:U(c.childNodes))}return b[a]},
d=function(a){return b[a]?b[a]:b[a]=Da(a,{dataType:"fragment"}).then(function(c){return b[a]=c})},f=function(a){n(this,a,!0,!1);this.id=K();this.tpl&&(this.tpl=W(this.tpl));this.url&&(this.url=W(this.url));a=this.node;var b=this.tpl||this.url;a&&a.removeAttribute("mjs-include");a||(this.deferRendering=!0);if(b){if(a&&a.firstChild&&B(a,"mjs-transclude",U(a.childNodes)),"."!=b.substr(0,1)||this.replace||(this.ownRenderer=!0,this._watcher=P(this.scope,b,this.onChange,this,null,C)),this.replace&&(this.ownRenderer=
!1),this.initPromise=this.resolveTemplate(),this.deferRendering&&this.ownRenderer||this.initPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof H&&this.scope.$on("destroy",this.onScopeDestroy,this)};n(f.prototype,{_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,scope:null,node:null,tpl:null,url:null,
ownRenderer:!1,initPromise:null,parentRenderer:null,deferRendering:!1,replace:!1,doRender:function(){this._renderer||(this._renderer=new Aa(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=
!1;if(this.initPromise)return this.initPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,f=a._watcher?a._watcher.getLastResult():a.tpl||b,l=new w;(new w(function(a){b?a(c(f)||d(b)):a(c(f)||U(f))})).done(function(b){a._fragment=b;l.resolve(a.ownRenderer?!1:a.node)}).fail(l.reject,l);return l},onChange:function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,
this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this.replace?a.parentNode.replaceChild(ya(this._fragment),a):a.appendChild(ya(this._fragment));this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new w;this._initial?(this.doApplyTemplate(),b.resolve()):(y(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),y(a,"enter",null,!0));this._initial=!1;return b},onParentRendererDestroy:function(){this._renderer.destroy();
this.destroy();this._renderer=null},onScopeDestroy:function(){this.destroy();this._renderer=null},destroy:function(){var a;this._watcher&&this._watcher.unsubscribeAndDestroy(this.onChange,this);for(a in this)this.hasOwnProperty(a)&&(this[a]=null)}},!0,!1);f.getTemplate=c;f.loadTemplate=d;return f}();x({$class:"MetaphorJs.cmp.Component",$extends:"MetaphorJs.cmp.Base",id:null,originalId:!1,node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,
templateUrl:null,tag:null,$init:function(a){this.supr(a);this.scope||(this.scope=new H);a.as&&(this.scope[a.as]=this);this.node&&(this.id=this.node.getAttribute("id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+K();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this,this.scope,"id");var b=this.template,c=this.templateUrl;b&&b instanceof ba?b instanceof ba&&(this.template.node=this.node):this.template=b=new ba({scope:this.scope,
node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=document.createElement(this.tag||"div")},_initElement:function(){var a=this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||
(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):ia(this.node)||document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===
this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:G,afterRender:G,onShow:G,onHide:G,onParentRendererDestroy:function(){this.destroy()},destroy:function(){this.template&&this.template.destroy();this.destroyEl?ia(this.node)&&this.node.parentNode.removeChild(this.node):
(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();this.supr()}});var ua=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),ja=function(a){var b=B(a,"mjsAnimationQueue"),c,d;if(S(b)&&b.length){if(b=b[0])b.stages&&(c=b.position,d=b.stages,Z(a,d[c]),Z(a,d[c]+"-active")),b.deferred&&b.deferred.reject(b.el)}else T(b)?b(a):"stop"==b&&$(a).stop(!0,!0);B(a,"mjsAnimationQueue",null)},Ra=X.currentUrl,
Sa=function(){var a=/(^|[^a-z0-9_$])(\.)([^0-9])/ig,b=Function,c=function(a,b){return function(c){var d=da.call(arguments),f;d.push(null);d.push(a);if(b){for(f=a.apply(null,d);(void 0===f||"number"==typeof f&&isNaN(f))&&!c.$isRoot;)c=c.$parent,d[0]=c,f=a.apply(null,d);return f}return a.apply(null,d)}},d={},f=0,g={},h=0,k={},l=0,m=function(){1E3<=f&&(d={});1E3<=h&&(g={});1E3<=l&&(k={})};return{createGetter:function(g){try{return d[g]?d[g]:(f++,d[g]=c(new b("____","$$interceptor","$$itself","".concat("try {",
"return ",g.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(h){return I(h),G}},createSetter:function(d){try{if(!g[d]){h++;var f=d.replace(a,"$1____.$3");return g[d]=c(new b("____","$$$$","$$interceptor","$$itself","".concat("try {",f," = $$$$",";} catch (thrownError) { return undefined; }")))}return g[d]}catch(k){return I(k),G}},createFunc:function(d){try{return k[d]?k[d]:(l++,k[d]=c(new b("____","$$interceptor","$$itself","".concat("try {",d.replace(a,"$1____.$3"),
";} catch (thrownError) { return undefined; }"))))}catch(f){return I(f),G}},resetCache:m,enableResetCacheInterval:function(){setTimeout(m,1E4)}}}(),wa=Sa.createGetter,fb=/-./g,gb=function(){return document.documentElement.dataset?function(a){return a.dataset}:function(a){var b;if(void 0!==(b=B(a,"data")))return b;b=a.attributes;var c={},d,f,g;d=0;for(f=b.length;d<f;d++)g=b[d].name,0===g.indexOf("data-")&&(c[eb(g.substr(5))]=b[d].value);b=c;B(a,"data",b);return b}}();x({$class:"MetaphorJs.cmp.View",
route:null,node:null,scope:null,cmp:null,id:null,currentComponent:null,watchable:null,defaultCmp:null,$init:function(a){n(this,a,!0,!1);a=this.node;var b=N(a,this.scope);n(this,b,!0,!1);a&&a.firstChild&&B(a,"mjs-transclude",U(a.childNodes));this.id||(this.id=K());this.scope.$app.registerCmp(this,this.scope,"id");this.route?(X.initPushState(),X.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=P(this.scope,this.cmp,this.onCmpChange,this,null,C),this.onCmpChange())},
onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=Ra(),b=this.route,c,d,f,g,h;d=0;for(f=b.length;d<f;d++){g=b[d];if(g.reg&&(h=a.match(g.reg))){this.changeRouteComponent(g,h);return}g["default"]&&!c&&(c=g)}this.clearComponent();c?this.setRouteComponent(c,[]):this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){ja(this.node);this.clearComponent();this.setRouteComponent(a,
b)},clearComponent:function(){var a=this,b=a.node;a.currentComponent&&y(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,b){var c=this,d=c.node,f=a.params;y(d,"enter",function(){var g=b||[],h={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},k,l;a.as&&(h.as=a.as);a.template&&(h.template=a.template);g.shift();if(f)for(k=-1,l=f.length;++k<l;h[f[k]]=g[k]);
return aa(a.cmp||"MetaphorJs.cmp.Component",h,h.scope,d,null,g).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;y(c,"enter",function(){var d=Fa(a)?a:{},f=(D(a)?a:null)||"MetaphorJs.cmp.Component",g=d.scope||b.scope.$new();d.destroyEl=!1;return aa(f,d,g,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(X.un("locationchange",this.onLocationChange,this),this.route=null);this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,
this),this.watchable=null);this.currentComponent=this.scope=null;this.supr()}});var u=za.registerAttributeHandler;u("mjs-app",100,ca);var pb=function(){var a=document.createElement("div");return D(a.textContent)?"textContent":"innerText"}(),Q=x({$class:"MetaphorJs.view.AttributeHandler",watcher:null,scope:null,node:null,expr:null,autoOnChange:!0,$init:function(a,b,c){var d;c=W(c);this.node=b;this.expr=c;this.scope=a;this.watcher=P(a,c,this.onChange,this,null,C);if(this.autoOnChange&&void 0!=(d=this.watcher.getLastResult()))this.onChange(d,
void 0);a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.destroy()},onChange:function(){},destroy:function(){this.scope=this.node=null;this.watcher&&(this.watcher.unsubscribeAndDestroy(this.onChange,this),this.watcher=null);this.supr()}});u("mjs-bind",1E3,x({$extends:Q,isInput:!1,input:null,lockInput:null,recursive:!1,textRenderer:null,$init:function(a,b,c){this.isInput=Ha(b);this.recursive=null!==b.getAttribute("mjs-recursive");this.lockInput=null!==b.getAttribute("mjs-lock-input");
b.removeAttribute("mjs-recursive");b.removeAttribute("mjs-lock-input");this.isInput&&(this.input=new la(b,this.onInputChange,this));this.recursive?(this.scope=a,this.node=b,this.textRenderer=new Pa(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),a instanceof H&&a.$on("destroy",this.onScopeDestroy,this)):this.supr(a,b,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},
onChange:function(){var a=this.watcher.getLastResult();this.updateElement(a)},updateElement:function(a){this.isInput?this.input.setValue(a):this.node[pb]=a},destroy:function(){this.textRenderer&&(this.textRenderer.destroy(),this.textRenderer=null);this.input&&(this.input.destroy(),this.input=null);this.supr()}}));u("mjs-bind-html",1E3,x({$extends:"attr.mjs-bind",updateElement:function(a){this.node.innerHTML=a}}));(function(){var a=function(a,c,d,f){if(null!==d){if(d==va(a,c))return;d=!d}else d=va(a,
c);d?f?y(a,[c+"-remove"],null,!0).done(function(){Z(a,c)}):Z(a,c):f?y(a,[c+"-add"],null,!0).done(function(){ga(a,c)}):ga(a,c)};u("mjs-class",1E3,x({$extends:Q,initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),d=this.watcher.getPrevValue(),f;ja(b);if(D(c))d&&a(b,d,!1,!1),a(b,c,null,!this.initial);else if(S(c))for(f=-1,d=c.length;++f<d;a(b,c[f],!0,!this.initial));else for(f in c)a(b,f,c[f]?!0:!1,!this.initial);this.initial=!1}}))})();u("mjs-cmp-prop",200,["$parentCmp","$node",
"$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=function(a,c,d,f){var g,h,k,l,m,q=N(c,a);d=d.split(" ");k=0;for(l=d.length;k<l;k++)m=d[k],""!=m&&"as"!=m&&(g?h=m:g=m);f=n({scope:a,node:c,as:h,parentRenderer:f,destroyScope:!0},q,!1,!1);aa(g,f,a,c);return!1};a.$breakScope=!0;u("mjs-cmp",200,a)})();u("mjs-config",50,function(a,b,c){N(b,a,c)});var A=function(a){a=a||{};this._queue=[];this._map={};this.id="$$"+K();for(var b in a)this[b]=a[b]};A.REPLACE=1;A.ONCE=2;A.MULTIPLE=3;A.ONCE_EVER=
3;n(A.prototype,{_queue:null,_map:null,_nextRequested:!1,_running:!1,length:0,id:null,async:!0,auto:!0,thenable:!1,stack:!1,context:null,mode:A.MULTIPLE,add:function(a,b,c,d,f,g){var h=this.id,k=a[h]||K();b={id:k,fn:a,context:b,args:c,async:g};d=d||this.mode;if(d==A.ONCE_EVER&&a[h])return a[h];a[h]=k;if(this._map[k])if(d==A.REPLACE)this.remove(k);else if(d==A.ONCE)return k;this._queue[f?"unshift":"push"](b);this._map[k]=b;this.length=this._queue.length;this.auto&&this.next();return k},append:function(a,
b,c,d,f){return this.add(a,b,c,d,!1,f)},prepend:function(a,b,c,d,f){return this.add(a,b,c,d,!0,f)},remove:function(a){var b=this._queue,c,d;c=0;for(d=b.length;c<d;c++)if(b[c].id==a){b.splice(c,1);break}delete this._map[a]},next:function(){var a=this,b;if(a._running)a._nextRequested=!0;else if(a._nextRequested=!1,b=a._queue[a.stack?"pop":"shift"](),a.length=a._queue.length,b)if(a._running=!0,delete a._map[b.id],a.async||b.async){var c=0;1===R(b.async)?c=b.async:1===R(a.async)&&(c=a.async);ta(function(){try{a._processResult(b.fn.apply(b.context||
a.context,b.args||[]))}catch(c){throw I(c),a._finish(),c;}},null,null,c)}else try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(d){throw I(d),a._finish(),d;}},_processResult:function(a){var b=this;b.thenable&&Y(a)?a.then(function(){b._finish()},function(){b._finish()}):b._finish();return a},_finish:function(){this._running=!1;(this.auto||this._nextRequested)&&this.next()},destroy:function(){this.context=this._map=this._queue=null;this._running=this._nextRequested=!1;this.next=
G}},!0,!1);var ea=function(){var a,b;if("undefined"!=typeof window){var c=window;a=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame;b=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelRequestAnimationFrame;if(a)return function(c){var f=a(c);return function(){b(f)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),O=function(){return window.getComputedStyle?function(a,b,c){if(a===window)return b?
c?0:null:{};a=getComputedStyle(a,null);b=b?a[b]:a;return c?parseFloat(b)||0:b}:function(a,b,c){a=a.currentStyle||a.style||{};b=b?a[b]:a;return c?parseFloat(b)||0:b}}(),Ba=function(){var a=/(auto|scroll)/,b,c=function(a){a=O(a);return a.overflow+a.overflowY+a.overflowY};return function(d){b||(b=document.body);for(;d&&d!==b;){if(a.test(c(d)))return d;d=d.parentNode}return window}}(),Ta=function(a){var b,c=a?"pageYOffset":"pageXOffset",d=a?"scrollTop":"scrollLeft";a=document;var f=a.body,g=a.documentElement;
b=void 0!==window[c]?function(){return window[c]}:g.clientHeight?function(){return g[d]}:function(){return f[d]};return function(a){return a&&a!==window?a&&1==a.nodeType&&a!==f&&a!==g?a[d]:b():b()}},pa=Ta(!0),qa=Ta(!1),Ua=x(function(a,b,c){this.commonInit(a,b,c);this.init(a,b,c);this.queue.add(this.render,this,[M(this.watcher.getLastResult())])},{id:null,observable:null,model:null,itemName:null,tpl:null,renderers:null,parentEl:null,prevEl:null,nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,
animate:!1,trackByFn:null,griDelegate:null,queue:null,buffered:!1,itemSize:null,itemsOffsite:1,bufferState:null,scrollOffset:0,horizontal:!1,bufferEventDelegate:null,topStub:null,botStub:null,commonInit:function(a,b,c){b.removeAttribute("mjs-include");this.parseExpr(c);this.tpl=b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=b;this.scope=a;this.queue=new A({async:!1,auto:!0,thenable:!0,stack:!1,context:this,mode:A.ONCE});a=N(b,a);this.animateMove=
!a.buffered&&a.animateMove&&y.cssAnimations;this.animate=!a.buffered&&(null!==b.getAttribute("mjs-animate")||a.animate);b.removeAttribute("mjs-animate");this.id=a.id||K();a.observable&&(this.observable=new L,n(this,this.observable.getApi(),!0,!1));this.parentEl.removeChild(b);a.buffered&&this.initBuffering(a)},init:function(a,b){var c=B(b,"config")||{};this.watcher=P(a,this.model,this.onChange,this,null,C);(this.trackBy=c.trackBy)&&"$"!=this.trackBy?this.trackByWatcher=P(a,this.trackBy,this.onChangeTrackBy,
this,null,C):"$"==this.trackBy||this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);this.griDelegate=s(this.scopeGetRawIndex,this)},triggerIf:function(){this.observable&&this.trigger.apply(null,arguments)},render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,f=this.nextEl,g=this.buffered,h=document.createDocumentFragment(),k,l,m;l=0;for(m=a.length;l<m;l++)k=c.cloneNode(!0),b.push(this.createItem(k,a,l)),g||(h.appendChild(k),b[l].attached=!0);g?(this.getScrollOffset(),this.updateScrollBuffer()):
(this.doUpdate(),d.insertBefore(h,f));this.triggerIf("render",this)},doUpdate:function(a,b,c,d){var f=this.renderers;a=a||0;var g=f.length;b=b||g-1;var h=this.watcher.getLastResult(),k=this.getTrackByFunction();for(b>g-1&&(b=g-1);a<=b;a++)c&&f[a].action!=c||this.renderItem(a,f,h,k,d)},renderItem:function(a,b,c,d,f){c=c||this.watcher.getLastResult();b=b||this.renderers;d=d||this.getTrackByFunction();var g=b[a],h=g.scope;b=b.length-1;var k=!(a%2);f&&g.rendered||(h.$index=a,h.$first=0===a,h.$last=a===
b,h.$even=k,h.$odd=!k,h.$trackId=d(c[a]),h.$getRawIndex=this.griDelegate,g.renderer?h.$check():(g.renderer=new Aa(g.el,h),g.renderer.process(),g.rendered=!0))},createItem:function(a,b,c){var d=this.itemName,f=this.scope.$new();f[d]=this.getListItem(b,c);return{index:c,action:"enter",el:a,scope:f,attached:!1,rendered:!1}},onChange:function(a,b){this.queue.prepend(this.applyChanges,this,[b],A.REPLACE)},applyChanges:function(a){var b=this,c=b.renderers,d=b.tpl,f=0,g=M(b.watcher.getLastResult()),h=null,
k=b.animateMove,l=b.animate,m=[],q=b.itemName,r=c.slice(),v=!1,n,u,p,t,s,x;a=b.watcher.getMovePrescription(a,b.getTrackByFunction(),g);p=0;for(t=a.length;p<t;p++)n=a[p],1===R(n)?(u=n,n=c[u],u!=f&&null===h&&(h=p),n.action="move",n.scope[q]=b.getListItem(g,p),v=k,m.push(n),c[u]=null,f++):(null===h&&(h=p),s=b.createItem(d.cloneNode(!0),g,p),m.push(s));b.renderers=m;if(l){b.doUpdate(h,null,"enter");v&&(x=b.calculateTranslates(m,r,c));var d=[],z=new w,A=new w,B=new w,D=w.counter(m.length),f=function(){D.countdown();
return z};p=0;for(t=c.length;p<t;p++)if(s=c[p])s.scope.$destroy(),ja(s.el),d.push(y(s.el,"leave",null,!1,C).done(function(a){a.style.visibility="hidden"}));p=0;for(t=m.length;p<t;p++)s=m[p],ja(s.el),"enter"==s.action?d.push(y(s.el,"enter",f,!1,C)):d.push(b.moveAnimation(s.el,v?x[p][0]:null,v?x[p][1]:null,f,A));D.done(function(){ea(function(){A.resolve();b.applyDomPositions(c);v||b.doUpdate(h,null,"move");ea(function(){z.resolve()});b.triggerIf("change",b)})});w.all(d).always(function(){ea(function(){b.doUpdate(h||
0);b.removeOldElements(c);if(v)for(b.doUpdate(h,null,"move"),p=0,t=m.length;p<t;p++)s=m[p],s.el.style[y.prefixes.transform]=null,s.el.style[y.prefixes.transform]="";B.resolve()})});return B}b.buffered?(b.getScrollOffset(),b.removeOldElements(c),b.queue.append(b.updateScrollBuffer,b,[!0])):(b.applyDomPositions(),b.doUpdate(h||0),b.removeOldElements(c));b.triggerIf("change",b)},removeOldElements:function(a){var b,c,d,f=this.parentEl;b=0;for(c=a.length;b<c;b++)(d=a[b])&&d.attached&&(d.attached=!1,f.removeChild(d.el))},
applyDomPositions:function(a){var b=this.renderers,c=this.parentEl,d=this.prevEl,d=d?d.nextSibling:c.firstChild,f,g,h,k,l;g=0;for(h=b.length;g<h;g++)l=b[g],k=l.el,(f=a&&a[g]?a[g].el.nextSibling:0<g?b[g-1].el.nextSibling||d:d)&&k.nextSibling!==f?c.insertBefore(k,f):f||c.appendChild(k),l.attached=!0},getListItem:function(a,b){return a[b]},onChangeTrackBy:function(a){this.trackByFn=null;this.trackBy=a},getTrackByFunction:function(){var a;this.trackByFn||((a=this.trackBy)&&"$"!=a?T(a)?this.trackByFn=
a:this.trackByFn=function(b){return b&&!xa(b)?b[a]:void 0}:this.trackByFn=function(a){return xa(a)?a:void 0});return this.trackByFn},scopeGetRawIndex:function(a){if(void 0===a)return-1;var b=this.watcher.getUnfilteredValue(),c=this.getTrackByFunction(),d,f;d=0;for(f=b.length;d<f;d++)if(c(b[d])===a)return d;return-1},getNodePositions:function(a,b,c){for(var d=[],f,g,h,k={};a.firstChild;)a.removeChild(a.firstChild);f=0;for(g=b.length;f<g;f++)c&&c[f]&&(h=c[f].el.cloneNode(!0),a.appendChild(h)),h=b[f].el.cloneNode(!0),
a.appendChild(h),d.push(h);f=0;for(g=d.length;f<g;f++)a=d[f],(c=b[f].renderer)&&(k[c.id]={left:a.offsetLeft,top:a.offsetTop});return k},calculateTranslates:function(a,b,c){var d=this.parentEl,f=d.parentNode,g=d.cloneNode(!0),h=d.offsetWidth,k=[],l=0,m=0,q;q=g.style;q.position="absolute";q.left="-10000px";q.visibility="hidden";q.width=h+"px";f.insertBefore(g,d);q.width=h-(g.offsetWidth-h)+"px";b=this.getNodePositions(g,b);c=this.getNodePositions(g,a,c);d=this.getNodePositions(g,a);f.removeChild(g);
f=0;for(g=a.length;f<g;f++)h=a[f].el,q=a[f].renderer,q=q.id,0==f&&(l=h.offsetLeft,m=h.offsetTop),k.push([{left:d[q].left-l-(c[q].left-l),top:d[q].top-m-(c[q].top-m)},b[q]?{left:b[q].left-l-(c[q].left-l),top:b[q].top-m-(c[q].top-m)}:null]);return k},moveAnimation:function(a,b,c,d,f){var g=a.style;f.done(function(){c&&(g[y.prefixes.transform]="translateX("+c.left+"px) translateY("+c.top+"px)")});return y(a,"move",d,!1,C,function(a,c,d){0==c&&"start"!=d&&b&&(g[y.prefixes.transform]="translateX("+b.left+
"px) translateY("+b.top+"px)")})},initScrollParent:function(a){this.scrollEl=Ba(this.parentEl)},initScrollStubs:function(a){var b=this.parentEl,c=this.prevEl,d,f,g={fontSize:0,lineHeight:0,padding:0,paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,margin:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0};this.topStub=d=document.createElement(a.stub||"div");this.botStub=a=document.createElement(a.stub||"div");ga(d,"mjs-buffer-top");ga(a,"mjs-buffer-bottom");for(f in g)d.style[f]=g[f],
a.style[f]=g[f];b.insertBefore(d,c?c.nextSibling:b.firstChild);b.insertBefore(a,this.nextEl);this.prevEl=d;this.nextEl=a},initBuffering:function(a){this.buffered=!0;this.itemSize=a.itemSize;this.itemsOffsite=a.itemsOffsite||5;this.horizontal=a.horizontal||!1;this.initScrollParent(a);this.initScrollStubs(a);this.bufferEventDelegate=s(this.bufferUpdateEvent,this);F(this.scrollEl,"scroll",this.bufferEventDelegate);F(window,"resize",this.bufferEventDelegate)},getScrollOffset:function(){var a=Ia(this.topStub,
this.scrollEl);return this.scrollOffset=this.horizontal?a.left:a.top},getBufferState:function(a){var b=this.scrollEl,c=this.horizontal,d=document.documentElement,d=b===window?window[c?"innerWidth":"innerHeight"]||d[c?"clientWidth":"clientHeight"]:b[c?"offsetWidth":"offsetHeight"],f=c?qa(b):pa(b),b=this.itemSize,c=this.itemsOffsite,g=a?this.getScrollOffset():this.scrollOffset;a=this.renderers.length;var h,f=Math.max(0,f+g),g=Math.ceil(f/b);0>g&&(g=0);f=g;h=d=g+Math.ceil(d/b);g=g>c?g-c:0;h+=c;h>a-1&&
(h=a-1);return g>h?this.bufferState:this.bufferState={first:g,last:h,viewFirst:f,viewLast:d,ot:g*b,ob:(a-h-1)*b}},updateStubs:function(a){var b=this.horizontal;this.topStub.style[b?"width":"height"]=a.ot+"px";this.botStub.style[b?"width":"height"]=a.ob+"px"},bufferUpdateEvent:function(){this.queue.add(this.updateScrollBuffer,this)},updateScrollBuffer:function(a){var b=this,c=b.bufferState,d=b.parentEl,f=b.renderers,g=b.botStub,h=b.getBufferState(!1),k=new w,l,m,q,r;if(!h)return null;c&&h.first==c.first&&
h.last==c.last||b.triggerIf("bufferchange",b,h,c);ea(function(){if(a||!c||h.last<c.first||h.first>c.last){if(c)for(m=c.first,q=c.last;m<=q;m++)(r=f[m])&&r.attached&&(d.removeChild(r.el),r.attached=!1);l=document.createDocumentFragment();m=h.first;for(q=h.last;m<=q;m++)if(r=f[m])r.rendered||b.renderItem(m),l.appendChild(r.el),r.attached=!0;d.insertBefore(l,g)}else{if(c.first<h.first)for(m=c.first,q=h.first;m<q;m++)(r=f[m])&&r.attached&&(d.removeChild(r.el),r.attached=!1);else if(c.first>h.first){l=
document.createDocumentFragment();m=h.first;for(q=c.first;m<q;m++)if(r=f[m])r.rendered||b.renderItem(m),l.appendChild(r.el),r.attached=!0;d.insertBefore(l,f[c.first].el)}if(c.last<h.last){l=document.createDocumentFragment();m=c.last+1;for(q=h.last;m<=q;m++)if(r=f[m])r.rendered||b.renderItem(m),l.appendChild(r.el),r.attached=!0;d.insertBefore(l,g)}else if(c.last>h.last)for(m=h.last+1,q=c.last;m<=q;m++)(r=f[m])&&r.attached&&(d.removeChild(r.el),r.attached=!1)}b.updateStubs(h);b.triggerIf("bufferupdate",
b);b.onBufferStateChange(h,c);k.resolve()});return k},scrollTo:function(a){var b=this.itemSize,c=this.scrollEl||Ba(this.parentEl),d=this.horizontal,f=d?"scrollLeft":"scrollTop",g=new w,h;this.buffered&&this.queue.append(function(){ea(function(){h=b*a;c===window?window.scrollTo(d?h:qa(),d?pa():h):c[f]=h;g.resolve()});return g});return g},onBufferStateChange:function(a,b){},parseExpr:function(a){a=a.split(" ");var b,c,d,f,g;b=0;for(c=a.length;b<c;b++)if(g=a[b],""!=g&&"in"!=g)if(f){d=a.slice(b).join(" ");
break}else f=g;this.model=d;this.itemName=f||"item"},destroy:function(){var a=this.renderers,b=this.parentEl,c,d;c=0;for(d=a.length;c<d;c++)a[c].renderer.destroy();this.trackByWatcher&&this.trackByWatcher.unsubscribeAndDestroy();this.buffered&&(b.removeChild(this.topStub),b.removeChild(this.botStub),V(this.scrollEl,"scroll",this.bufferEventDelegate),V(window,"resize",this.bufferEventDelegate));this.queue.destroy();this.watcher.unsubscribeAndDestroy(this.onChange,this);this.observable&&(this.trigger("destroy",
this),this.observable.destroy());for(c in this)this.hasOwnProperty(c)&&(this[c]=null)}},{$stopRenderer:!0,$registerBy:"id"});u("mjs-each",100,Ua);var Ca=Sa.createFunc,ka=function(a){if(a instanceof ka)return a;if(!(this instanceof ka))return new ka(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,f=a.button;void 0===this.pageX&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:
document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ra:ca;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};n(ka.prototype,{isDefaultPrevented:ca,isPropagationStopped:ca,isImmediatePropagationStopped:ca,
preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ra;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ra;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ra;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove keydown keyup keypress submit focus blur copy cut paste enter".split(" "),
b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=a;"enter"==b&&(b="keyup");u("mjs-"+a,1E3,function(c,h,k){var l=Ca(k);h.removeAttribute("mjs-"+a);F(h,b,function(b){b=new ka(b||window.event);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;l(c);delete c.$event;c.$root.$check();b.preventDefault();return!1})})})(a[b])})();u("mjs-show",500,x({$extends:Q,initial:!0,display:"",$init:function(a,b,c){this.display=N(b,a).display||"";this.supr(a,b,c)},runAnimation:function(a){var b=this,c=b.node.style,
d=function(){c.display=a?b.display:"none"};b.initial?d():y(b.node,a?"show":"hide",function(){a&&(c.display=b.display)},!0).done(d)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));u("mjs-hide",500,x({$extends:"attr.mjs-show",onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));u("mjs-if",500,x({$extends:Q,parentEl:null,prevEl:null,el:null,initial:!0,$init:function(a,b,c){this.parentEl=b.parentNode;this.prevEl=
b.previousSibling;this.supr(a,b,c)},onScopeDestroy:function(){this.parentEl=this.prevEl=null;this.supr()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,f=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},g=function(){c.removeChild(d)};b?ia(d)||(a.initial?f():y(d,"enter",f,!0)):ia(d)&&(a.initial?g():y(d,"leave",null,!0).done(g));a.initial=!1}}));u("mjs-ignore",0,ca);u("mjs-include",900,function(a,b,c,d){a=new ba({scope:a,node:b,
url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});u("mjs-init",250,function(a,b,c){b.removeAttribute("mjs-init");Ca(c)(a)});var Va=navigator.userAgent.toLowerCase(),Wa=function(){var a=parseInt((/msie (\d+)/.exec(Va)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(Va)||[])[1],10)||!1);return function(){return a}}();u("mjs-model",1E3,x({$extends:Q,inProg:!1,input:null,binding:null,autoOnChange:!1,$init:function(a,b,c){var d=N(b,a);this.node=b;this.input=new la(b,this.onInputChange,
this);this.binding=d.binding||"both";this.supr(a,b,c);a=this.input.getValue();b=this.watcher.getLastResult();if(b!=a)if("input"!=this.binding&&void 0!=b)this.onChange(b);else if("scope"!=this.binding&&void 0!=a)this.onInputChange(a)},onInputChange:function(a){var b=this.scope;"scope"!=this.binding&&(a&&D(a)&&-1!=a.indexOf("\\{")&&(a=a.replace(/\\{/g,"{")),this.watcher.getLastResult()!=a&&(this.watcher.setValue(a),this.inProg=!0,b instanceof H?b.$root.$check():this.watcher.checkAll(),this.inProg=!1))},
destroy:function(){this.input.destroy();this.input=null;this.supr()},onChange:function(){var a=this.watcher.getLastResult(),b;"input"==this.binding||this.inProg||((b=Wa())&&8>b?ta(this.input.setValue,this.input,[a]):this.input.setValue(a))}}));u("mjs-options",100,x({$extends:Q,model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,fragment:null,$init:function(a,b,c){this.parseExpr(c);this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);
this.defOption&&this.defOption.setAttribute("mjs-default-option","");try{this.watcher=P(a,this.model,this.onChange,this,null,C)}catch(d){I(d)}this.render(M(this.watcher.getValue()))},onChange:function(){this.render(M(this.watcher.getValue()))},renderOption:function(a,b,c){var d=this.groupEl||this.fragment,f=Wa();c.item=a;c.$index=b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=document.createElement("optgroup"),d.setAttribute("label",a.group),
a.disabledGroup&&d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;f&&9>f&&(b.innerHTML=a.name);a.disabled&&b.setAttribute("disabled","disabled");d.appendChild(b)},render:function(a){var b=this.node,c=ib(b),d=this.defOption,f=this.scope.$new(),g,h;this.fragment=document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);
g=0;for(h=a.length;g<h;g++)this.renderOption(a[g],g,f);d&&b.insertBefore(d,b.firstChild);f.$destroy();b.appendChild(this.fragment);this.fragment=null;jb(b,c)},parseExpr:function(a){var b=a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=wa(a)}}));(function(){var a="selected checked disabled readonly open required".split(" "),b,c;b=0;for(c=a.length;b<c;b++)(function(a){u("mjs-"+a,1E3,x({$extends:Q,onChange:function(b){b?this.node.setAttribute(a,
a):this.node.removeAttribute(a)}}))})(a[b])})();var qb=function(){var a={},b=0;return function(c){if(a[c])return w.resolve(c);1E3<b&&(a={},b=0);var d=document.createElement("img"),f=d.style,g=new w;F(d,"load",function(){a[c]=!0;b++;document.body.removeChild(d);g.resolve(c)});f.position="absolute";f.visibility="hidden";f.left="-10000px";f.top="0";d.src=c;document.body.appendChild(d);return g}}(),Xa=document.body,rb=function(){var a;return function(){if(void 0===a){var b=document.createElement("div"),
c=document.createElement("div");c.style&&window.getComputedStyle?(b.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",b.appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",c.innerHTML="",Xa.appendChild(b),c="4px"===window.getComputedStyle(c,null).width,Xa.removeChild(b),a=c):a=!1}return a}}(),Ya=function(a,b){var c=
/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,d=["Top","Right","Bottom","Left"],f=a?"inner"==a?"padding":"":"content";return function(a,h){if(a===window)return a.document.documentElement["client"+b];if(9===a.nodeType){var k=a.documentElement;return Math.max(a.body["scroll"+b],k["scroll"+b],a.body["offset"+b],k["offset"+b],k["client"+b])}a:{var l=b.toLowerCase(),m=f||(!0===h?"margin":"border"),k=O(a),q=!0,r="width"===l?a.offsetWidth:a.offsetHeight,n="border-box"===k.boxSizing;if(0>=r||null==
r){r=a.style[l];if(c.test(r)){k=r;break a}q=n&&(rb()||r===a.style[l]);r=parseFloat(r)||0}m=m||(n?"border":"content");l=m===(q?"border":"content")?4:"width"===l?1:0;for(n=0;4>l;l+=2)"margin"===m&&(n+=parseFloat(k[m+d[l]])),q?("content"===m&&(n-=parseFloat(k["padding"+d[l]])),"margin"!==m&&(n-=parseFloat(k["border"+d[l]+"Width"]))):(n+=parseFloat(k["padding"+d[l]]),"padding"!==m&&(n+=parseFloat(k["border"+d[l]+"Width"])));k=r+n}return k}},sb=Ya("","Width"),tb=Ya("","Height");u("mjs-src",1E3,x({$extends:Q,
scrollEl:null,scrollDelegate:null,resizeDelegate:null,position:null,sw:null,sh:null,queue:null,checkVisibility:!0,usePreload:!0,$init:function(a,b,c){var d=N(b,a);d.deferred?(this.scrollEl=Ba(b),this.scrollDelegate=s(this.onScroll,this),this.resizeDelegate=s(this.onResize,this),F(this.scrollEl,"scroll",this.scrollDelegate),F(window,"resize",this.resizeDelegate)):this.checkVisibility=!1;d.noPreload&&(this.usePreload=!1);this.queue=new A({auto:!0,async:!0,mode:A.ONCE});this.supr(a,b,c)},isVisible:function(){if(!this.checkVisibility)return!0;
var a=this.scrollEl,b=pa(a),c=qa(a),d=this.sw,f=this.sh,g;this.position||(this.position=Ia(this.node,a));d||(d=this.sw=sb(a),f=this.sh=tb(a));a=this.position.top;g=this.position.left;return a>b&&a<b+f&&g>c&&g<c+d},onScroll:function(){this.queue.add(this.changeIfVisible,this)},onResize:function(){this.sw=this.position=null;this.queue.add(this.changeIfVisible,this)},onChange:function(){this.queue.add(this.changeIfVisible,this)},changeIfVisible:function(){var a=this;if(a.isVisible()){var b=a.watcher.getLastResult();
a.stopWatching();a.usePreload?qb(b).done(function(){a&&a.node&&ea(function(){a.node.src=b;a.node.setAttribute("src",b)})}):(a.node.src=b,a.node.setAttribute("src",b))}},stopWatching:function(){this.scrollEl&&(V(this.scrollEl,"scroll",this.scrollDelegate),V(window,"resize",this.resizeDelegate),this.scrollEl=this.resizeDelegate=this.scrollDelegate=null,this.queue.destroy(),this.queue=null,this.checkVisibility=!1)},destroy:function(){this.stopWatching();this.supr()}}));u("mjs-transclude",1E3,function(a,
b){return Ja(b)});u("mjs-view",200,function(a,b,c){b.removeAttribute("mjs-view");aa(c||"MetaphorJs.cmp.View",{scope:a,node:b},a,b);return!1});var Za=za.registerTagHandler;Za("mjs-include",900,function(a,b,c,d){return(new ba({scope:a,node:b,tpl:b.getAttribute("src"),parentRenderer:d,replace:!0})).initPromise});Za("mjs-transclude",900,function(a,b){return Ja(b)});var ub=function(){var a=function(a,b,c){if(T(b))return b(a,c);if(""===b||void 0===b)return!0;if(void 0!==a){if(ma(a))return a===b;if(b instanceof
RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},b=function(b,c,g){if(xa(b))return void 0===c.$?!0:a(b,c.$,g);var h,k;for(h in c)if("$"==h)for(k in b){if(a(b[k],c.$,g))return!0}else if(a(b[h],c[h],g))return!0;return!1},c=function(a,c,g){fa(c)||(c={$:c});var h=[],k,l;k=-1;for(l=a.length;++k<l;)b(a[k],c,g)&&h.push(a[k]);return h};c.compare=b;return c}();z("filter.filter",function(a,b,c,
d){return ub(a,c,d)});z("filter.join",function(a,b,c){c=c||", ";return a&&a.length?(S(a)||(a=M(a)),a.join(c)):""});z("filter.l",function(a,b){return b.$app.lang.get(a)});z("filter.limitTo",function(a,b,c){b=D(a);if(!S(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});z("filter.linkify",function(a,
b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});z("filter.lowercase",function(a){return a.toLowerCase()});var vb={};z("filter.moment",function(a,b,c){c=vb[c]||c;return moment(a).format(c)});var wb={};z("filter.numeral",function(a,b,c){c=wb[c]||c;return numeral(a).format(c)});z("filter.p",function(a,b,c){return b.$app.lang.plural(a,parseInt(c,10)||0)});z("filter.sortBy",function(a,b,c,d){return hb(a,
c,d)});z("filter.split",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=ua(c.substring(1,c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=W(a[b]));return a});z("filter.toArray",function(a){return M(a)});z("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});z("filter.uppercase",function(a){return a.toUpperCase()});var xb=Ua.$extend({store:null,pullNext:!1,pullNextDelegate:null,init:function(a,
b,c){this.store=c=wa(this.model)(a);this.watcher=P(c,".current",this.onChange,this,null,C);this.trackByFn=s(c.getRecordId,c);this.griDelegate=s(c.indexOfId,c);this.bindStore(c,"on");a=N(b,a);!a.buffered&&a.pullNext&&this.initPullNext(a)},bindStore:function(a,b){a[b]("update",this.onStoreUpdate,this);a[b]("clear",this.onStoreUpdate,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},getListItem:function(a,b){return this.store.getRecordData(a[b])},onStoreDestroy:function(){this.onStoreUpdate();
this.watcher.unsubscribeAndDestroy(this.onChange,this);this.watcher=null},initBuffering:function(a){this.supr(a);this.pullNext=a.pullNext||!1},initPullNext:function(a){this.pullNext=!0;this.itemSize=a.itemSize;this.initScrollParent();this.getScrollOffset();this.pullNextDelegate=s(this.pullNextEvent,this);F(this.scrollEl,"scroll",this.pullNextDelegate);F(window,"resize",this.pullNextDelegate)},pullNextEvent:function(){this.queue.append(this.updateStoreOnScroll,this)},updateStoreOnScroll:function(){var a=
this.bufferState,b=this.getBufferState(),c=this.store.getLength();a&&b.first==a.first&&b.last==a.last||this.triggerIf("bufferchange",this,b,a);c-b.last<(b.last-b.first)/3&&!this.store.loading&&(this.store.addNextPage(),this.triggerIf("pull",this))},onBufferStateChange:function(a,b){var c=this.store.getLength();this.supr(a,b);this.pullNext&&c-a.last<(a.last-a.first)/3&&!this.store.loading&&(this.store.addNextPage(),this.triggerIf("pull",this))},destroy:function(){this.bindStore(this.store,"un");this.store=
null;this.pullNext&&!this.buffered&&(V(this.scrollEl,"scroll",this.pullNextDelegate),V(window,"resize",this.pullNextDelegate));this.pullNextDelegate=null;this.supr()}},{$stopRenderer:!0,$registerBy:"id"});u("mjs-each-in-store",100,xb);x({$class:"MetaphorJs.cmp.Dialog",$extends:"MetaphorJs.cmp.Component",dialog:null,dialogPreset:null,dialogCfg:null,initComponent:function(){this.supr();this._createDialog();this._oldShow=this.show;this._oldHide=this.hide},_getDialogCfg:function(){return n({},this.dialogCfg,
{render:{el:this.node,keepInDOM:!0}},!0,!0)},_createDialog:function(){this.dialog=new cb(this.dialogPreset,this._getDialogCfg());this.dialog.on("show",this._oldShow,this);this.dialog.on("hide",this._oldHide,this);this.dialog.on("destroy",this.onDialogDestroy,this)},show:function(){this.dialog.show()},hide:function(){this.dialog.hide()},onDialogDestroy:function(){this.destroying||(this.dialog=null,this.destroy())},destroy:function(){this.destroying=!0;this.dialog&&this.dialog.destroy();this.dialogPreset=
this.dialogCfg=this.dialog=null;this.supr();this.destroying=!1}});x({$class:"MetaphorJs.view.Validator",node:null,scope:null,validator:null,scopeState:null,$init:function(a,b,c){this.node=a;this.scope=b;this.scopeState={};this.validator=this.createValidator();this.initScope();this.initScopeState();this.initValidatorEvents();c.once("rendered",this.validator.check,this.validator)},createValidator:function(){var a=this.node,b={},c;if(c=a.getAttribute("mjs-validator-submit"))b.callback=b.callback||{},
b.callback.submit=function(a,b){return function(){try{return a(b)}catch(c){I(c)}}}(Ca(c),this.scope),a.removeAttribute("mjs-validator-submit");return new bb(a,b)},initValidatorEvents:function(){var a=this.validator;a.on("fieldstatechange",this.onFieldStateChange,this);a.on("statechange",this.onFormStateChange,this);a.on("displaystatechange",this.onDisplayStateChange,this);a.on("reset",this.onFormReset,this)},initScope:function(){var a=this.scope,b=this.node,b=b.getAttribute("name")||b.getAttribute("id")||
"$form";a[b]=this.scopeState},initScopeState:function(){var a=this.node,b=this.scopeState,c,d,f;a.elements?c=a.elements:(c=[],Ma(a,function(a){Ha(a)&&c.push(a)}));a=-1;for(f=c.length;++a<f;)d=c[a],(d=d.getAttribute("name")||d.getAttribute("id"))&&!b[d]&&(b[d]={$error:null,$invalid:null,$pristine:!0,$errorMessage:null});b.$invalid=!1;b.$pristine=!0;b.$submit=s(this.validator.onSubmit,this.validator);b.$reset=s(this.validator.reset,this.validator);window.formState=b},onDisplayStateChange:function(a,
b){if(b){b=this.scopeState;var c,d;for(c in b)d=b[c],d.$real&&(b[c]=d.$real);b.$invalid=!a.isValid();b.$pristine=!1;this.scope.$check()}else this.onFormReset(a)},onFormReset:function(a){a=this.scopeState;var b,c;for(b in a)c=a[b],c.$error=null,c.$errorMessage=null,c.$invalid=null,c.$pristine=!0;a.$invalid=!1;a.$pristine=!0;this.scope.$check()},onFormStateChange:function(a,b){var c=this.scopeState;c.$invalid=!1===b&&a.isDisplayStateEnabled();c.$pristine=!1;this.scope.$check()},onFieldStateChange:function(a,
b,c){var d=this.scopeState,f=b.getName();a=a.isDisplayStateEnabled();b={$error:b.getErrorRule(),$errorMessage:b.getError(),$invalid:!1===c,$pristine:null===b.getExactValidState()};a?d[f]=b:d[f].$real=b;this.scope.$check()}});u("mjs-validate",250,["$scope","$node","$attrValue","$renderer",function(a,b,c,d){c=c||"MetaphorJs.view.Validator";var f=ha(c);f?new f(b,a,d):I(Error("Class '"+c+"' not found"))}]);t.onReady=Ka;t.initApp=La;t.ns=C;t.cs=Na;t.resolveComponent=aa;t.animate=y;t.stopAnimation=ja;t.ajax=
Da;t.select=Ea;t.bind=s;t.extend=n;t.trim=W;t.pushUrl=kb;t.currentUrl=Ra;t.history=X;t.run=function(){Ka(function(){var a=Ea("[mjs-app]"),b,c,d;b=-1;for(c=a.length;++b<c;)d=a[b],La(d,d.getAttribute("mjs-app"),null,!0)})};t.lib.Promise=w;t.lib.Observable=L;return t});
