'use strict';define("metaphorjs","metaphorjs-observable metaphorjs-promise metaphorjs-ajax metaphorjs-animate metaphorjs-input metaphorjs-class metaphorjs-namespace metaphorjs-select metaphorjs-validator metaphorjs-watchable metaphorjs-dialog metaphorjs-history".split(" "),function(ea,v,jb,E,la,kb,lb,ya,mb,za,nb,ma){function H(){}function u(e,a){return e.getAttribute?e.getAttribute(a):null}function O(e){return"object"==typeof e&&3===P(e)&&!e.nodeType&&e.constructor===Object}function fa(e){return!0===
e||!1===e}function C(e){return"object"==typeof e&&5===P(e)}function F(e){if(e&&void 0!=!e.length&&e!==""+e){for(var a=[],b=-1,c=e.length>>>0;++b!==c;a[b]=e[b]);return a}return e?[e]:[]}function G(e){return"function"==typeof e}function S(e){if(!e)return!1;var a,b;return"object"!=(b=typeof e)&&"function"!=b?!1:G(a=e.then)?a:!1}function I(e){return"string"==typeof e||e===""+e}function Aa(e){var a={},b,c,d=e.attributes;e=0;for(b=d.length;e<b;e++)c=d[e],a[c.name]=c.value;return a}function Ba(e){if(null===
e||"object"!=typeof e)return!1;e=P(e);return 2<e||-1==e}function z(e){var a=window.document.createDocumentFragment(),b,c;I(e)&&(b=window.document.createElement("div"),b.innerHTML=e,e=b.childNodes);if(!e)return a;if(e.nodeType)a.appendChild(e);else if(e.item)for(b=-1,c=e.length>>>0;++b!==c;a.appendChild(e[0]));else for(b=-1,c=e.length;++b!==c;a.appendChild(e[b]));return a}function Ca(e){return Da("(?:^|\\s)"+e+"(?!\\S)")}function T(e,a){a&&(e.className=e.className.replace(Ca(a),""))}function na(e,
a,b,c){setTimeout(function(){e.apply(a,b||[])},c||0)}function oa(e){return 1===P(e)}function K(e){var a=e.stack||Error().stack;if("undefined"!=typeof console&&console.log)na(function(){console.log(e);a&&console.log(a)});else throw e;}function pa(e){e=P(e);return 3>e&&-1<e}function Na(e){return e.replace(ob,function(a){return a.charAt(1).toUpperCase()})}function D(e,a,b){var c=B(e,"config"),d;if(c)return c;c={};if(b||null!==(b=u(e,"mjs-config")))for(d in e.removeAttribute("mjs-config"),a=b?N(b)(a||
{}):{},a)c[d]=a[d];a=Oa(e);for(d in a)b=a[d],c[d]=""===b?!0:b;B(e,"config",c);return c}function qa(e,a){return a?Ca(a).test(e.className):!1}function ra(e,a){a&&!qa(e,a)&&(e.className+=" "+a)}function Y(e,a,b,c,d){var f=!1!==a;a=a||{};d=d||[];b=b||a.scope;c=c||a.node;a.scope=a.scope||b;a.node=a.node||c;var h=I(e)?Q(e):e;if(!h)throw"Component "+e+" not found";b&&h.$isolateScope&&(a.scope=b=b.$newIsolated());var n,l=[];e=h.template||a.template||null;var m=h.templateUrl||a.templateUrl||null,g=b?b.$app:
null,Pa=Ea.global(),r=g?g.inject:Pa.inject,k=g?g:Pa,w=c?u(c,"mjs-cloak"):null,y={$node:c||null,$scope:b||null,$config:a||null,$args:d||null};if(h.resolve)for(n in h.resolve)(function(f){var e=new v,m;l.push(e.done(function(b){y[f]=b;a[f]=b;d.push(b)}));m=h.resolve[n];G(m)?e.resolve(m(b,c)):I(m)?e.resolve(r.resolve(m)):e.resolve(r.call(k,m,null,s({},y,a,!1,!1)))})(n);f&&(e||m)&&(a.template=new U({scope:b,node:c,deferRendering:!0,ownRenderer:!0,shadow:h.$shadow,tpl:e,url:m}),l.push(a.template.initPromise),
c&&c.firstChild&&B(c,"mjs-transclude",z(c.childNodes)));f&&d.unshift(a);var q;l.length?(q=new v,v.all(l).done(function(){q.resolve(r.call(k,h,null,s({},y,a,!1,!1),d))})):q=v.resolve(r.call(k,h,null,s({},y,a,!1,!1),d));c&&q.isPending()&&null!==w&&(w?ra(c,w):c.style.visibility="hidden",q.then(function(){w?T(c,w):c.style.visibility=""}));c&&q.then(function(){T(c,"mjs-cloak")});return q}function V(){return!1}function Fa(e){var a=e.nodeName.toLowerCase();e=e.type;return"input"!=a&&"textarea"!=a&&"select"!=
a||"submit"==e||"reset"==e||"button"==e?!1:!0}function ha(){return!0}function Qa(e){return new aa(e)}function ba(e,a,b){e.attachEvent?e.attachEvent("on"+a,b):e.addEventListener(a,b,!1)}function Ra(e,a){for(var b;e;){b=B(e,a);if(void 0!==b)return b;e=e.parentNode}}function Ga(e,a){var b=Ra(e,"mjs-transclude");if(b){e.firstChild&&B(e,"mjs-transclude",z(e.childNodes));var c=e.parentNode,d=e.nextSibling,b=sa(b),f=F(b.childNodes);a?(c.removeChild(e),c.insertBefore(b,d)):e.appendChild(b);return f}return null}
function Sa(e,a,b){b||(b="asc");e=e.slice();e.sort(function(b,d){var f=typeof b,h=b,e=d;if(f!=typeof d)return 0;"object"==f&&(G(a)?(h=a(b),e=a(d)):(h=b[a],e=d[a]));if("number"==typeof h)return h-e;h=(""+h).toLowerCase();e=(""+e).toLowerCase();return h===e?0:h>e?1:-1});return"desc"==b?e.reverse():e}function ta(e){return 9===P(e)}function ua(e){return 10===P(e)}function Ha(e){return e===window||e&&e.document&&e.location&&e.alert&&e.setInterval}function Ta(e,a,b,c){try{var d=Y(a||"MetaphorJs.App",!1,
b,e,[e,b]);return!1!==c?d.done(function(a){a.run()}):d}catch(f){return K(f),v.reject(f)}}function Ua(e,a,b){e.detachEvent?e.detachEvent("on"+a,b):e.removeEventListener(a,b,!1)}function Va(e,a){var b=!1,c=!0,d=a||window,f,h,n=function(a){if("readystatechange"!=a.type||"complete"==h.readyState)Ua("load"==a.type?d:h,a.type,n),!b&&(b=!0)&&e.call(d,a.type||a)},l=function(){try{f.doScroll("left")}catch(a){setTimeout(l,50);return}n("poll")};h=d.document;f=h.documentElement;if("complete"==h.readyState)e.call(d,
"lazy");else{if(h.createEventObject&&f.doScroll){try{c=!d.frameElement}catch(m){}c&&l()}ba(h,"DOMContentLoaded",n);ba(h,"readystatechange",n);ba(d,"load",n)}}function Ia(e,a,b){var c,d=e.childNodes;if(!1!==a.call(b,e))for(e=-1,c=d.length>>>0;++e!==c;Ia(d[e],a,b));}var pb=la.getValue,qb=la.setValue,g={},p=new lb(g,"MetaphorJs"),ca=new kb(p),x=ca.define,R=Array.prototype.slice,rb=Object.prototype.toString,P=function(){var e={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,
"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(a){if(!a){if(null===a)return 6;if(void 0===a)return 7}var b=e[rb.call(a)];return void 0===b?-1:1==b&&isNaN(a)?8:b}}(),s=function(){return function a(){var b=!1,c=!1,d=R.call(arguments),f=d.shift(),h,n,l;fa(d[d.length-1])&&(b=d.pop());fa(d[d.length-1])&&(c=b,b=d.pop());for(;d.length;)if(h=d.shift())for(n in h)if(h.hasOwnProperty(n)&&void 0!==(l=h[n]))if(c)if(f[n]&&O(f[n])&&O(l))a(f[n],l,b,c);else{if(!0===
b||void 0==f[n])O(l)?(f[n]={},a(f[n],l,b,!0)):f[n]=l}else if(!0===b||void 0==f[n])f[n]=l;return f}}(),J=function(e){this.$$observable=new ea;this.$$historyWatchers={};s(this,e,!0,!1);this.$parent?(this.$parent.$on("check",this.$$onParentCheck,this),this.$parent.$on("destroy",this.$$onParentDestroy,this)):(this.$root=this,this.$isRoot=!0)};s(J.prototype,{$app:null,$parent:null,$root:null,$isRoot:!1,$level:0,$$observable:null,$$watchers:null,$$historyWatchers:null,$$checking:!1,$$destroyed:!1,$new:function(){return new J({$parent:this,
$root:this.$root,$app:this.$app,$level:this.$level+1})},$newIsolated:function(){return new J({$app:this.$app,$level:self.$level+1})},$on:function(e,a,b){return this.$$observable.on(e,a,b)},$un:function(e,a,b){return this.$$observable.un(e,a,b)},$watch:function(e,a,b){return za.create(this,e,a,b,null)},$unwatch:function(e,a,b){return za.unsubscribeAndDestroy(this,e,a,b)},$watchHistory:function(e,a){this.$$historyWatchers[a]||(this.$$historyWatchers[a]=e,g.history.on("change-"+a,this.$$onHistoryChange,
this))},$unwatchHistory:function(e){this.$$historyWatchers[e]||(delete this.$$historyWatchers[e],g.history.un("change-"+e,this.$$onHistoryChange,this))},$get:function(e){for(var a=this;a;){if(void 0!==a[e])return a[e];a=a.$parent}},$$onParentDestroy:function(){this.$destroy()},$$onParentCheck:function(){this.$check()},$$onHistoryChange:function(e,a,b){this.$$historyWatchers[b]&&(a=this.$$historyWatchers[b],this[a]=e,this.$check())},$check:function(){var e;this.$$checking||(this.$$checking=!0,this.$$watchers&&
(e=this.$$watchers.$checkAll()),this.$$checking=!1,this.$$destroyed||this.$$observable.trigger("check",e),0<e&&this.$check())},$destroy:function(){var e,a;this.$$observable.trigger("destroy");this.$$observable.destroy();this.$$watchers&&this.$$watchers.$destroyAll();for(e in this.$$historyWatchers)this.$unwatchHistory(e);for(a in this)this.hasOwnProperty(a)&&(this[a]=null);this.$$destroyed=!0}},!0,!1);var L=function(){var e=["0","0","0"];return function(){for(var a=e.length,b;a;){a--;b=e[a].charCodeAt(0);
if(57==b)return e[a]="A",e.join("");if(90==b)e[a]="0";else return e[a]=String.fromCharCode(b+1),e.join("")}e.unshift("0");return e.join("")}}(),Q=p.get,W=function(){return String.prototype.trim?function(e){return I(e)?e.trim():e}:function(e){return I(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}(),M=za.create,t=p.add,k=function(){var e=[],a=!1,b=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return x({$class:"Directive",watcher:null,scope:null,node:null,expr:null,autoOnChange:!0,
$init:function(a,b,f){var h;f=W(f);this.node=b;this.expr=f;this.scope=a;this.watcher=M(a,f,this.onChange,this,null,p);if(this.autoOnChange&&void 0!=(h=this.watcher.getLastResult()))this.onChange(h,void 0);a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.$destroy()},onChange:function(){},destroy:function(){this.watcher&&this.watcher.unsubscribeAndDestroy(this.onChange,this);this.$super()}},{registerAttribute:function(b,d,f){Q("attr."+b,!0)||(e.push({priority:d,name:b,handler:t("attr."+
b,f)}),a=!1)},getAttributes:function(){a||(e.sort(b),a=!0);return e},registerTag:function(a,b){Q("tag."+a,!0)||t("tag."+a,b)}})}(),X=Function.prototype.bind?function(e,a){return e.bind(a)}:function(e,a){return function(){return e.apply(a,arguments)}},Wa=function(e,a,b){var c=e.length,d=a.length,f=0,h=0,n=!1,l=!1,m=[],g;if(!d)return[e];for(;f<c;f++)if(g=e.charAt(f),"\\"==g)f++;else if('"'==g)n=!n;else if("'"==g)l=!l;else if(!n&&!l&&(1==d&&g==a||1<d&&e.substring(f,f+d)==a)){if(e.substr(f-1,d)!=a&&e.substr(f+
1,d)!=a||b)m.push(e.substring(h,f).replace("\\"+a,a)),h=f+d;f+=d-1}m.push(e.substring(h).replace("\\"+a,a));return m},Ja=function(){var e=/\\{/g,a=new ea,b=function(a,b,h,e,l){return!b||!b.indexOf||-1==b.indexOf("{{")&&-1==b.indexOf("{[")?null:new c(a,b,h,e,l)},c=x({$class:"TextRenderer",id:null,parent:null,isRoot:null,scope:null,origin:"",processed:null,text:null,watchers:null,children:null,data:null,recursive:!1,dataChangeDelegate:null,changeTmt:null,lang:null,$init:function(a,b,c,e,l){this.id=
L();this.origin=b;this.scope=a;this.parent=c;this.isRoot=!c;this.data=e;this.lang=a.$app?a.$app.lang:null;if(!0===l||!1===l)this.recursive=l;this.watchers=[];this.children=[];this.dataChangeDelegate=X(this.doDataChange,this);this.processed=this.processText(b);this.render()},subscribe:function(b,c){return a.on(this.id,b,c)},unsubscribe:function(b,c){return a.un(this.id,b,c)},getString:function(){null===this.text&&this.render();var a=this.text;return-1!=a.indexOf("\\{")?a.replace(e,"{"):a},render:function(){var a=
this.processed,b,e,n;this.children.length||this.createChildren();n=this.children;b=-1;for(e=n.length;++b<e;a=a.replace("---"+b+"---",n[b]instanceof c?n[b].getString():n[b]));return this.text=a},processText:function(a){for(var b=0,c=a.length,e,l,m="";b<c;)if(-1!=(e=a.indexOf("{{",b))&&-1!=(l=a.indexOf("}}",e+2))&&"\\"!=a.substr(e-1,1))m+=a.substring(b,e),l!=e+2&&(m+=this.watcherMatch(a.substring(e+2,l))),b=l+2;else{b!==c&&(m+=a.substring(b));break}b=0;a=m;c=a.length;for(m="";b<c;)if(-1!=(e=a.indexOf("{[",
b))&&-1!=(l=a.indexOf("]}",e+2))&&"\\"!=a.substr(e-1,1))m+=a.substring(b,e),l!=e+2&&(m+=this.watcherMatch(a.substring(e+2,l),!0)),b=l+2;else{b!==c&&(m+=a.substring(b));break}return m},watcherMatch:function(a,b){var c=this.watchers;if(b){a=W(a);var e=Wa(a,"|"),l=W(e[0]);"."!=l.substr(0,1)&&(e[0]="'"+l+"'");1==e.length&&e.push("l");a=e.join(" | ")}c.push(M(this.scope,a,this.onDataChange,this,null,p));return"---"+(c.length-1)+"---"},onDataChange:function(){this.changeTmt||(this.changeTmt=setTimeout(this.dataChangeDelegate,
0))},doDataChange:function(){this.destroyChildren();this.triggerChange();this.changeTmt=null},triggerChange:function(){this.text=null;this.isRoot?a.trigger(this.id,this,this.data):this.parent.triggerChange()},createChildren:function(){var a=this.watchers,c=this.children,e=this.scope,n=this.recursive,l,m,g;l=-1;for(m=a.length;++l<m;)g=a[l].getLastResult(),void 0===g&&(g=""),c.push(n&&b(e,g,this,null,!0)||g)},destroyChildren:function(){var a=this.children,b,e;b=-1;for(e=a.length;++b<e;)a[b]instanceof
c&&a[b].$destroy();this.children=[]},destroyWatchers:function(){var a=this.watchers,b,c;b=-1;for(c=a.length;++b<c;a[b].unsubscribeAndDestroy(this.onDataChange,this));this.watchers=[]},destroy:function(){this.destroyChildren();this.destroyWatchers();a.destroyEvent(this.id);this.changeTmt&&clearTimeout(this.changeTmt)}},{create:b});return c}(),Ka=Array.prototype.indexOf;Ka||(Ka=Array.prototype.indexOf=function(e,a){var b;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),
d=c.length>>>0;if(0===d)return-1;b=+a||0;Infinity===Math.abs(b)&&(b=0);if(b>=d)return-1;for(b=Math.max(0<=b?b:d-Math.abs(b),0);b<d;){if(b in c&&c[b]===e)return b;b++}return-1});var da=function(){var e=null,a=Ja.create,b=function(a,b,c,d,e,h){var g=[];if(a&&!0!==a){if(a.nodeType){h.countdown+=1;f(a,c,d,e,h);return}g=R.call(a)}g.length||(g=F(b.childNodes||b));b=g.length;h.countdown+=b;for(a=-1;++a<b;f(g[a],c,d,e,h));},c=function(a,b){if(b)if(b.nodeType)a.push(b);else if(C(b))for(var d=-1,f=b.length;++d<
f;c(a,b[d]));},d={script:!0,template:!0,"mjs-template":!0,style:!0},f=function(a,c,f,e,h){if(a){var g;g=a.nodeName;h||(h={countdown:1});if(!g||!d[g.toLowerCase()])if(g=c.call(f,a),!1!==g){if(S(g)){g.done(function(d){!1!==d&&b(d,a,c,f,e,h);0==--h.countdown&&e&&e.call(f)});return}b(g,a,c,f,e,h)}0==--h.countdown&&e&&e.call(f)}},h=new ea;return x({$class:"Renderer",id:null,el:null,scope:null,texts:null,parent:null,$init:function(a,b,c){this.id=L();this.el=a;this.scope=b;this.texts=[];this.parent=c;b instanceof
J&&b.$on("destroy",this.$destroy,this);if(c)c.on("destroy",this.$destroy,this)},on:function(a,b,c){return h.on(a+"-"+this.id,b,c)},once:function(a,b,c){return h.once(a+"-"+this.id,b,c)},un:function(a,b,c){return h.un(a+"-"+this.id,b,c)},createChild:function(a){return new da(a,this.scope,this)},getEl:function(){return this.el},runHandler:function(a,b,c,d){var f=a.$isolateScope?b.$newIsolated():a.$breakScope?b.$new():b,e=b.$app;c=e.inject(a,null,{$scope:f,$node:c,$attrValue:d,$renderer:this},[f,c,d,
this]);e&&a.$registerBy&&c&&(S(c)?c.done(function(c){e.registerCmp(c,b,a.$registerBy)}):e.registerCmp(c,b,a.$registerBy));return a.$stopRenderer?!1:c},processNode:function(b){var d=b.nodeType,f=this.texts,h=this.scope,g,r;if(3==d){if(g=null!==u(b.parentNode,"mjs-recursive"),d=a(h,b.textContent||b.nodeValue,null,f.length,g))d.subscribe(this.onTextChange,this),f.push({node:b,tr:d}),this.renderText(f.length-1)}else if(1==d){e||(e=k.getAttributes());var d=[],Z=[],w,y,q;r="tag."+b.tagName.toLowerCase();
if(r=Q(r,!0)){y=this.runHandler(r,h,b);if(!1===y)return!1;S(y)?d.push(y):c(Z,y)}w=Aa(b);r=0;for(g=e.length;r<g;r++)if(q=e[r].name,void 0!==(y=w[q])){b.removeAttribute(q);y=this.runHandler(e[r].handler,h,b,y);w[q]=null;if(!1===y)return!1;S(y)?d.push(y):c(Z,y)}if(d.length){var p=new v;v.all(d).done(function(a){c(Z,a);p.resolve(Z)});return p}g=void 0!==w["mjs-recursive"];delete w["mjs-recursive"];for(r in w)null!==w[r]&&(d=a(h,w[r],null,f.length,g))&&(b.removeAttribute(r),d.subscribe(this.onTextChange,
this),f.push({node:b,attr:r,tr:d}),this.renderText(f.length-1));return Z.length?Z:!0}return!0},process:function(){this.el.nodeType?f(this.el,this.processNode,this,this.onProcessingFinished,{countdown:1}):b(null,this.el,this.processNode,this,this.onProcessingFinished,{countdown:0})},onProcessingFinished:function(){h.trigger("rendered-"+this.id,this)},onTextChange:function(a,b){this.renderText(b)},renderText:function(a){a=this.texts[a];var b=a.tr.getString(),c=a.attr;c?("value"==c?a.node.value=b:"class"==
c?a.node.className=b:"src"==c&&(a.node.src=b),a.node.setAttribute(c,b)):(a.node.textContent=b,a.node.nodeValue=b)},destroy:function(){var a=this.texts,b,c;b=-1;for(c=a.length;++b<c;a[b].tr.$destroy());this.parent&&this.parent.un("destroy",this.$destroy,this);h.trigger("destroy-"+this.id)}})}(),Xa=function(){var e=function(a,b){"pt_BR"==b&&(b="xbr");3<b.length&&(b=b.substr(0,-b.lastIndexOf("_")));switch(b){case "bo":case "dz":case "id":case "ja":case "jv":case "ka":case "km":case "kn":case "ko":case "ms":case "th":case "tr":case "vi":case "zh":return 0;
case "af":case "az":case "bn":case "bg":case "ca":case "da":case "de":case "el":case "en":case "eo":case "es":case "et":case "eu":case "fa":case "fi":case "fo":case "fur":case "fy":case "gl":case "gu":case "ha":case "he":case "hu":case "is":case "it":case "ku":case "lb":case "ml":case "mn":case "mr":case "nah":case "nb":case "ne":case "nl":case "nn":case "no":case "om":case "or":case "pa":case "pap":case "ps":case "pt":case "so":case "sq":case "sv":case "sw":case "ta":case "te":case "tk":case "ur":case "zu":return 1==
a?0:1;case "am":case "bh":case "fil":case "fr":case "gun":case "hi":case "ln":case "mg":case "nso":case "xbr":case "ti":case "wa":return 0==a||1==a?0:1;case "be":case "bs":case "hr":case "ru":case "sr":case "uk":return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2;case "cs":case "sk":return 1==a?0:2<=a&&4>=a?1:2;case "ga":return 1==a?0:2==a?1:2;case "lt":return 1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2;case "sl":return 1==a%100?0:2==a%100?1:3==a%100||4==a%100?2:3;
case "mk":return 1==a%10?0:1;case "mt":return 1==a?0:0==a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3;case "lv":return 0==a?0:1==a%10&&11!=a%100?1:2;case "pl":return 1==a?0:2<=a%10&&4>=a%10&&(12>a%100||14<a%100)?1:2;case "cy":return 1==a?0:2==a?1:8==a||11==a?2:3;case "ro":return 1==a?0:0==a||0<a%100&&20>a%100?1:2;case "ar":return 0==a?0:1==a?1:2==a?2:3<=a&&10>=a?3:11<=a&&99>=a?4:5;default:return 0}},a=function(a){this.store={};a&&(this.locale=a)};s(a.prototype,{store:null,locale:"en",setLocale:function(a){this.locale=
a},set:function(a,b){var f=this.store;void 0===f[a]&&(f[a]=b)},load:function(a){s(this.store,a,!1,!1)},get:function(a){return this.store[a]||(this===b?"-- "+a+" --":b.get(a))},plural:function(a,b){var f=this.get(a),h=e(b,this.locale);return C(f)?f[h]:O(f)?f[b]?f[b]:1==b&&void 0!=f.one?f.one:0>b&&void 0!=f.negative?f.negative:f.other:f},destroy:function(){this.store=null}},!0,!1);var b=new a;a.global=function(){return b};return a}(),La=p.add("mixin.Observable",{$$observable:null,$beforeInit:function(e){this.$$observable=
new ea;if(e&&e.callback){var a=e.callback,b=a.context,c;a.context=null;for(c in a)if(a[c])this.$$observable.on(c,a[c],b||this);e.callback=null}},on:function(){var e=this.$$observable;return e.on.apply(e,arguments)},un:function(){var e=this.$$observable;return e.un.apply(e,arguments)},once:function(){var e=this.$$observable;return e.once.apply(e,arguments)},trigger:function(){var e=this.$$observable;return e.trigger.apply(e,arguments)},$beforeDestroy:function(){this.$$observable.trigger("beforedestroy",
this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null}}),Ya=function(e,a){var b=function(){},c;b.prototype=e.prototype;b=new b;c=e.apply(b,a);return Ba(c)||!1===c?c:b},Ea=function(){var e,a=function(){this.store={}};s(a.prototype,{store:null,instantiate:function(a,c,d,f){return a.$instantiate?a.$instantiate.apply(a,d):f?Ya(a,d):a.apply(c,d)},inject:function(a,c,d,f,e){d=d||{};f=f||[];var n=this;if(G(a))if(a.inject)f=R.call(a.inject),
f.push(a),a=f;else return n.instantiate(a,c,f,e);a=R.call(a);f=[];var g=a.pop(),m,ga;m=-1;for(ga=a.length;++m<ga;f.push(n.resolve(a[m],d)));return v.all(f).then(function(a){return n.instantiate(g,c,a,e)})},value:function(a,c){this.store[a]={type:1,value:c}},constant:function(a,c){var d=this.store;d[a]||(d[a]={type:2,value:c})},factory:function(a,c,d,f){fa(d)&&(f=d,d=null);this.store[a]={type:3,singleton:f,fn:c,context:d}},service:function(a,c,d){this.store[a]={type:4,singleton:d,fn:c}},provider:function(a,
c){this.store[a+"Provider"]={name:a,type:5,fn:c,instance:null}},resolve:function(a,c){var d=this.store,f,h,n;if(void 0!==c[a])return c[a];if(h=d[a]){f=h.type;if(1==f||2==f)return h.value;if(3==f)n=this.inject(h.fn,h.context,c);else if(4==f)n=this.inject(h.fn,null,c,null,!0);else if(5==f)return h.instance||(h.instance=v.resolve(this.inject(h.fn,null,c)).done(function(a){h.instance=a;d[h.name]={type:3,fn:a.$get,context:a}})),h.instance;h.singleton&&(h.type=1,h.value=n,3==f&&S(n)&&n.done(function(a){h.value=
a}));return c[a]=n}if(d[a+"Provider"])return this.resolve(a+"Provider",c),this.resolve(a,c);if(this===e)throw"Could not provide value for "+a;return e.resolve(a)},destroy:function(){this.scope=this.store=null}},!0,!1);a.global=function(){return e};e=new a;return a}(),Za={$$provider:null,$beforeInit:function(){this.$$provider=new Ea},value:function(){var e=this.$$provider;return e.value.apply(e,arguments)},constant:function(){var e=this.$$provider;return e.constant.apply(e,arguments)},factory:function(){var e=
this.$$provider;return e.factory.apply(e,arguments)},service:function(){var e=this.$$provider;return e.service.apply(e,arguments)},provider:function(){var e=this.$$provider;return e.provider.apply(e,arguments)},resolve:function(){var e=this.$$provider;return e.resolve.apply(e,arguments)},inject:function(){var e=this.$$provider;return e.inject.apply(e,arguments)},$afterDestroy:function(){this.$$provider.destroy();this.$$provider=null}},$a=function(){var e=[],a=function(a){var c,d,f,h;c=0;for(d=e.length;c<
d;c++)f=e[c],f.$destroy?f.$destroy():f.destroy&&f.destroy();e=null;ca&&ca.destroy&&(ca.destroy(),ca=null);p&&p.destroy&&(p.destroy(),p=null);for(h in g)g[h]=null;g=null;if(a)for(h in window)window.hasOwnProperty(h)&&(window[h]=null)};a.collect=function(a){e.push(a)};return a}();x({$class:"App",$mixins:[La,Za],lang:null,scope:null,renderer:null,cmpListeners:null,components:null,$init:function(e,a){var b=a instanceof J?a:new J(a),c;$a.collect(this);e.removeAttribute("mjs-app");b.$app=this;this.$super();
this.lang=new Xa;this.scope=b;this.cmpListeners={};this.components={};this.factory("$parentCmp",["$node",this.getParentCmp],this);this.value("$app",this);this.value("$rootScope",b.$root);this.value("$lang",this.lang);this.renderer=new da(e,b);c=R.call(arguments);c[1]=b;this.initApp.apply(this,c)},initApp:H,run:function(){this.renderer.process()},getParentCmp:function(e){e=e.parentNode;for(var a;e;){if(a=u(e,"cmp-id"))return this.getCmp(a);e=e.parentNode}return null},onAvailable:function(e,a,b){var c=
this.cmpListeners,d=this.components;c[e]||(c[e]=new v);a&&c[e].done(a,b);d[e]&&c[e].resolve(d[e]);return c[e]},getCmp:function(e){return this.components[e]||null},registerCmp:function(e,a,b){var c=this,d=e[b];b=function(){delete c.cmpListeners[d];delete c.components[d]};c.components[d]=e;c.cmpListeners[d]&&c.cmpListeners[d].resolve(e);if(e.on)e.on("destroy",b);a.$on("$destroy",b)},destroy:function(){this.renderer.$destroy();this.scope.$destroy();this.lang.destroy();this.$super()}});var ia=function(){return function a(b){if(b===
window)return!0;if(3==b.nodeType)return b.parentElement?a(b.parentElement):!0;var c=window.document.documentElement;return b===c?!0:c.contains(b)}}(),B=function(){var e={};return function(a,b,c){a=a._mjsid||(a._mjsid=L());var d=e[a];return void 0!==c?(d||(d=e[a]={}),d[b]=c):d?d[b]:void 0}}(),sa=function a(b){var c,d,f;if(C(b)){f=[];c=0;for(d=b.length;c<d;c++)f.push(a(b[c]));return f}if(b)switch(b.nodeType){case 1:return b.cloneNode(!0);case 3:return window.document.createTextNode(b.innerText||b.textContent);
case 11:return b.cloneNode(!0)}return null},ab=function(){var a,b=function(b){var d={},f=[];0==arguments.length&&(b=!0);return{addFinder:function(a,b,c){f[c?"unshift":"push"]({fn:a,context:b})},add:function(a,f,g){if(d[a]&&!1===d[a].rewritable)return d[a];d[a]={rewritable:"undefined"!=typeof g?g:b,value:f};return f},get:function(a){if(d[a])return d[a].value;if(f.length){var b,c,g;b=0;for(c=f.length;b<c;b++)if(g=f[b].fn.call(f[b].context,a,this),void 0!==g)return this.add(a,g,!0)}},remove:function(a){var b=
d[a];b&&!0===b.rewritable&&delete d[a];return b?b.value:void 0},exists:function(a){return!!d[a]},eachEntry:function(a,b){for(var c in d)a.call(b,d[c].value,c)},destroy:function(){this===a&&(a=null);this.remove=this.exists=this.destroy=this.get=this.add=b=d=null}}};b.global=function(){a||(a=new b(!0));return a};return b}(),U=function(){var a=new ea,b=new ab,c=function(a){var c=b.get(a);"string"==typeof c&&(c=z(c),b.add(a,c));return c},d=function(a){return b.exists(a)?b.get(a):b.add(a,jb(a,{dataType:"fragment"}).then(function(c){return b.add(a,
c)}))};b.addFinder(function(a){a=window.document.getElementById(a);var b;if(a)return b=a.tagName.toLowerCase(),"script"==b?(b=window.document.createElement("div"),b.innerHTML=a.innerHTML,z(b.childNodes)):"content"in a?a.content:z(a.childNodes)});return x({$class:"Template",_watcher:null,_tpl:null,_renderer:null,_initial:!0,_fragment:null,_id:null,_originalNode:null,_intendedShadow:!1,scope:null,node:null,tpl:null,url:null,ownRenderer:!1,initPromise:null,tplPromise:null,parentRenderer:null,deferRendering:!1,
replace:!1,shadow:!1,$init:function(a){s(this,a,!0,!1);window.document.documentElement.createShadowRoot||(this._intendedShadow=this.shadow,this.shadow=!1);this.id=L();this.tpl&&(this.tpl=W(this.tpl));this.url&&(this.url=W(this.url));var b=this.node;a=this.tpl||this.url;b&&b.removeAttribute("mjs-include");this.shadow&&(this._originalNode=b,this.node=b=b.createShadowRoot());b||(this.deferRendering=!0);if(a){if(b&&b.firstChild&&!this.shadow&&B(b,"mjs-transclude",z(b.childNodes)),"."==a.substr(0,1)?(b=
a.substr(1,1),b=!("."==b||"/"==b)):b=!1,b&&(this._watcher=M(this.scope,a,this.onChange,this,null,p)),this._watcher&&!this.replace?this.ownRenderer=!0:this.shadow?this.ownRenderer=!0:this.replace&&(this.ownRenderer=!1),this.resolveTemplate(),this._watcher&&this.replace&&(this._watcher.unsubscribeAndDestroy(this.onChange,this),this._watcher=null),this.deferRendering&&this.ownRenderer||this.tplPromise.done(this.applyTemplate,this),this.ownRenderer&&this.parentRenderer)this.parentRenderer.on("destroy",
this.onParentRendererDestroy,this)}else!this.deferRendering&&this.ownRenderer&&this.doRender();this.scope instanceof J&&this.scope.$on("destroy",this.onScopeDestroy,this)},doRender:function(){this._renderer||(this._renderer=new da(this.node,this.scope),this._renderer.on("rendered",this.onRendered,this),this._renderer.process())},onRendered:function(){a.trigger("rendered-"+this.id,this)},on:function(b,c,d){return a.on(b+"-"+this.id,c,d)},un:function(b,c,d){return a.un(b+"-"+this.id,c,d)},startRendering:function(){var a=
this.tpl||this.url;if(this.deferRendering&&this.node){this.deferRendering=!1;if(this.tplPromise)return this.tplPromise.done(a?this.applyTemplate:this.doRender,this),this.initPromise;a?this.applyTemplate():this.doRender()}return null},resolveTemplate:function(){var a=this,b=a.url,n=a._watcher?a._watcher.getLastResult():a.tpl||b;a.initPromise=new v;a.tplPromise=new v;a.ownRenderer&&a.initPromise.resolve(!1);(new v(function(a){b?a(c(n)||d(b)):a(c(n)||z(n))})).done(function(b){a._fragment=b;a.tplPromise.resolve()}).fail(a.initPromise.reject,
a.initPromise).fail(a.tplPromise.reject,a.tplPromise)},onChange:function(){this._renderer&&(this._renderer.$destroy(),this._renderer=null);this.resolveTemplate().done(this.applyTemplate,this)},doApplyTemplate:function(){for(var a=this.node;a.firstChild;)a.removeChild(a.firstChild);this._intendedShadow&&this.makeTranscludes();if(this.replace){var b=sa(this._fragment),c=B(a,"mjs-transclude"),d=R.call(b.childNodes);if(c){var g=ya("[mjs-transclude], mjs-transclude",b);g.length&&B(g[0],"mjs-transclude",
c)}a.parentNode.replaceChild(b,a);this.node=d;this.initPromise.resolve(d)}else a.appendChild(sa(this._fragment)),this.initPromise.resolve(this.node);this.ownRenderer&&this.doRender()},applyTemplate:function(){var a=this.node,b=new v;this._initial?(this.doApplyTemplate(),b.resolve()):(E(a,"leave",null,!0).done(this.doApplyTemplate,this).done(b.resolve,b),E(a,"enter",null,!0));this._initial=!1;return b},makeTranscludes:function(){var a=this._fragment,b=ya("content",a),c,d,g,ga,k,r;k=0;for(r=b.length;k<
r;k++)g=window.document.createElement("mjs-transclude"),c=b[k],d=c.nextSibling,(ga=u(c,"select"))&&g.setAttribute("select",ga),a.removeChild(c),a.insertBefore(g,d)},onParentRendererDestroy:function(){this._renderer.$destroy();this.$destroy()},onScopeDestroy:function(){this.$destroy()},destroy:function(){this.shadow&&this._originalNode.createShadowRoot();this._watcher&&this._watcher.unsubscribeAndDestroy(this.onChange,this)}},{cache:b})}(),bb=x({$class:"MetaphorJs.Component",$mixins:[La],id:null,originalId:!1,
node:null,renderTo:null,autoRender:!0,rendered:!1,hidden:!1,destroyEl:!0,destroyScope:!1,scope:null,template:null,templateUrl:null,tag:null,$init:function(a){this.$super(a);s(this,a,!0,!1);this.scope||(this.scope=new J);a.as&&(this.scope[a.as]=this);this.node&&(this.id=u(this.node,"id"))&&(this.originalId=!0);this.id=this.id||"cmp-"+L();this.node||this._createNode();this.initComponent.apply(this,arguments);this.scope.$app&&this.scope.$app.registerCmp(this,this.scope,"id");var b=this.template,c=this.templateUrl;
b&&b instanceof U?b instanceof U&&(this.template.node=this.node):this.template=b=new U({scope:this.scope,node:this.node,deferRendering:!b,ownRenderer:!0,tpl:b,url:c,shadow:this.constructor.$shadow});if(this.parentRenderer)this.parentRenderer.on("destroy",this.onParentRendererDestroy,this);this._initElement();this.autoRender&&(b.initPromise?b.initPromise.done(this.render,this):this.render())},_createNode:function(){this.node=window.document.createElement(this.tag||"div")},_initElement:function(){var a=
this.node;a.setAttribute("id",this.id);a.setAttribute("cmp-id",this.id);this.hidden&&(a.style.display="none")},render:function(){this.rendered||(this.trigger("render",this),this.template.on("rendered",this.onRenderingFinished,this),this.template.startRendering())},onRenderingFinished:function(){this.renderTo?this.renderTo.appendChild(this.node):ia(this.node)||window.document.body.appendChild(this.node);this.rendered=!0;this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===
this.trigger("beforeshow",this))return!1;this.node.style.display="block";this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.node.style.display="none";this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},getEl:function(){return this.node},initComponent:H,afterRender:H,onShow:H,
onHide:H,onParentRendererDestroy:function(){this.$destroy()},destroy:function(){this.template&&this.template.$destroy();this.destroyEl?ia(this.node)&&this.node.parentNode.removeChild(this.node):(this.node.removeAttribute("cmp-id"),this.originalId||this.node.removeAttribute("id"));this.destroyScope&&this.scope&&this.scope.$destroy();this.$super()}}),Da=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),ja=function(a){var b=B(a,"mjsAnimationQueue"),c,d;if(C(b)&&b.length){if(b=
b[0])b.stages&&(c=b.position,d=b.stages,T(a,d[c]),T(a,d[c]+"-active")),b.deferred&&b.deferred.reject(b.el)}else G(b)?b(a):"stop"==b&&$(a).stop(!0,!0);B(a,"mjsAnimationQueue",null)},A=function(a){a=a||{};this._queue=[];this._map={};this.id="$$"+L();for(var b in a)this[b]=a[b]};A.REPLACE=1;A.ONCE=2;A.MULTIPLE=3;A.ONCE_EVER=3;s(A.prototype,{_queue:null,_map:null,_nextRequested:!1,_running:!1,length:0,id:null,async:!0,auto:!0,thenable:!1,stack:!1,context:null,mode:A.MULTIPLE,add:function(a,b,c,d,f,h){var g=
this.id,l=a[g]||L();b={id:l,fn:a,context:b,args:c,async:h};d=d||this.mode;if(d==A.ONCE_EVER&&a[g])return a[g];a[g]=l;if(this._map[l])if(d==A.REPLACE)this.remove(l);else if(d==A.ONCE)return l;this._queue[f?"unshift":"push"](b);this._map[l]=b;this.length=this._queue.length;this.auto&&this.next();return l},append:function(a,b,c,d,f){return this.add(a,b,c,d,!1,f)},prepend:function(a,b,c,d,f){return this.add(a,b,c,d,!0,f)},remove:function(a){var b=this._queue,c,d;c=0;for(d=b.length;c<d;c++)if(b[c].id==
a){b.splice(c,1);break}delete this._map[a]},next:function(){var a=this,b;if(a._running)a._nextRequested=!0;else if(a._nextRequested=!1,b=a._queue[a.stack?"pop":"shift"](),a.length=a._queue.length,b)if(a._running=!0,delete a._map[b.id],a.async||b.async){var c=0;oa(b.async)?c=b.async:oa(a.async)&&(c=a.async);na(function(){try{a._processResult(b.fn.apply(b.context||a.context,b.args||[]))}catch(c){throw K(c),a._finish(),c;}},null,null,c)}else try{a._processResult(b.fn.apply(b.context||a.context,b.args||
[]))}catch(d){throw K(d),a._finish(),d;}},_processResult:function(a){var b=this;b.thenable&&S(a)?a.then(function(){b._finish()},function(){b._finish()}):b._finish();return a},_finish:function(){this._running=!1;(this.auto||this._nextRequested)&&this.next()},destroy:function(){this.context=this._map=this._queue=null;this._running=this._nextRequested=!1;this.next=H}},!0,!1);var ka=function(){var a,b;if("undefined"!=typeof window){var c=window;a=c.requestAnimationFrame||c.webkitRequestAnimationFrame||
c.mozRequestAnimationFrame;b=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelRequestAnimationFrame;if(a)return function(c){var f=a(c);return function(){b(f)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),Ma=function(){var a=/(^|[^a-z0-9_$\]\)'"])(\.)([^0-9])/ig,b=Function,c=function(a,b){return function(c){var d=R.call(arguments),f;d.push(null);d.push(a);if(b){for(f=a.apply(null,d);(void 0===f||"number"==typeof f&&isNaN(f))&&
!c.$isRoot;)c=c.$parent,d[0]=c,f=a.apply(null,d);return f}return a.apply(null,d)}},d={},f=0,h={},g=0,l={},m=0,k=function(){1E3<=f&&(d={});1E3<=g&&(h={});1E3<=m&&(l={})};return{createGetter:function(h){try{return d[h]?d[h]:(f++,d[h]=c(new b("____","$$interceptor","$$itself","".concat("try {","return ",h.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(g){return K(g),H}},createSetter:function(d){try{if(!h[d]){g++;var f=d.replace(a,"$1____.$3");return h[d]=c(new b("____",
"$$$$","$$interceptor","$$itself","".concat("try {",f," = $$$$",";} catch (thrownError) { return undefined; }")))}return h[d]}catch(l){return K(l),H}},createFunc:function(d){try{return l[d]?l[d]:(m++,l[d]=c(new b("____","$$interceptor","$$itself","".concat("try {",d.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(f){return K(f),H}},resetCache:k,enableResetCacheInterval:function(){setTimeout(k,1E4)}}}(),N=Ma.createGetter,ob=/-./g,Oa=function(){return function(a){if(a.dataset)return a.dataset;
var b;if(void 0!==(b=B(a,"data")))return b;b=a.attributes;var c={},d,f,h;d=0;for(f=b.length;d<f;d++)h=b[d].name,0===h.indexOf("data-")&&(c[Na(h.substr(5))]=b[d].value);b=c;B(a,"data",b);return b}}(),cb=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",f="transitionDuration",h="transform",g=null,l=null,m=!1;return function(){if(!m){var k=window.document.createElement("div"),p=!1,r,v,w;if(void 0!==k.style.animationName)p=!0;else for(v=0,
w=a.length;v<w;v++)if(r=a[v],void 0!==k.style[r+"AnimationName"]){p=!0;b=r+"AnimationDelay";c=r+"AnimationDuration";d=r+"TransitionDelay";f=r+"TransitionDuration";h=r+"Transform";break}p&&("ontransitionend"in window?g="transitionend":"onwebkittransitionend"in window&&(g="webkitTransitionEnd"));l=p?{animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:f,transform:h,transitionend:g}:{};m=!0}return l}}(),va=x({$class:"ListRenderer",id:null,model:null,itemName:null,tpl:null,renderers:null,
parentEl:null,prevEl:null,nextEl:null,trackBy:null,trackByWatcher:null,animateMove:!1,animate:!1,trackByFn:null,griDelegate:null,tagMode:!1,queue:null,buffered:!1,bufferPlugin:null,$constructor:function(a,b,c){a=D(b,a);this.tagMode="mjs-each"==b.nodeName.toLowerCase();this.animateMove=!this.tagMode&&!a.buffered&&a.animateMove&&E.cssAnimationSupported();this.animate=!this.tagMode&&!a.buffered&&(null!==u(b,"mjs-animate")||a.animate);this.id=a.id||L();b.removeAttribute("mjs-animate");this.animate&&this.animateMove&&
this.$plugins.push("ListAnimatedMove");a.observable&&this.$plugins.push("Observable");this.tagMode&&(a.buffered=!1);a.buffered&&(this.buffered=!0,this.$plugins.push("ListBuffered"))},$init:function(a,b,c){b.removeAttribute("mjs-include");this.tagMode&&(c=u(b,"value"));this.parseExpr(c);this.tpl=this.tagMode?z(b.childNodes):b;this.renderers=[];this.prevEl=b.previousSibling;this.nextEl=b.nextSibling;this.parentEl=b.parentNode;this.node=null;this.scope=a;this.queue=new A({async:!1,auto:!0,thenable:!0,
stack:!1,context:this,mode:A.ONCE});this.parentEl.removeChild(b);this.afterInit(a,b);this.queue.add(this.render,this,[F(this.watcher.getLastResult())])},afterInit:function(a,b){var c=D(b,a);this.watcher=M(a,this.model,this.onChange,this,null,p);(this.trackBy=c.trackBy)&&"$"!=this.trackBy?this.trackByWatcher=M(a,this.trackBy,this.onChangeTrackBy,this,null,p):"$"==this.trackBy||this.watcher.hasInputPipes()||(this.trackBy="$$"+this.watcher.id);this.griDelegate=X(this.scopeGetRawIndex,this)},trigger:H,
render:function(a){var b=this.renderers,c=this.tpl,d=this.parentEl,f=this.nextEl,h=this.buffered,g=window.document.createDocumentFragment(),l,m,k;m=0;for(k=a.length;m<k;m++)l=c.cloneNode(!0),b.push(this.createItem(l,a,m)),h||(g.appendChild(l),b[m].attached=!0);h?(this.bufferPlugin.getScrollOffset(),this.bufferPlugin.updateScrollBuffer()):(d.insertBefore(g,f),this.doUpdate());this.trigger("render",this)},doUpdate:function(a,b,c,d){var f=this.renderers;a=a||0;var h=f.length;b=b||h-1;var g=this.watcher.getLastResult(),
l=this.getTrackByFunction();for(b>h-1&&(b=h-1);a<=b;a++)c&&f[a].action!=c||this.renderItem(a,f,g,l,d)},renderItem:function(a,b,c,d,f){c=c||this.watcher.getLastResult();b=b||this.renderers;d=d||this.getTrackByFunction();var h=b[a],g=h.scope;b=b.length-1;var l=!(a%2);f&&h.rendered||(g.$index=a,g.$first=0===a,g.$last=a===b,g.$even=l,g.$odd=!l,g.$trackId=d(c[a]),g.$getRawIndex=this.griDelegate,h.renderer?g.$check():(h.renderer=new da(h.el,g),h.renderer.process(),h.rendered=!0))},createItem:function(a,
b,c){var d=this.itemName,f=this.scope.$new(),h=this.tagMode;f[d]=this.getListItem(b,c);a=h?F(a.childNodes):a;return{index:c,action:"enter",el:a,firstEl:h?a[0]:a,lastEl:h?a[a.length-1]:a,scope:f,attached:!1,rendered:!1}},onChange:function(a,b){this.queue.prepend(this.applyChanges,this,[b],A.REPLACE)},applyChanges:function(a){var b=this,c=b.renderers,d=b.tpl,f=0,h=F(b.watcher.getLastResult()),g=null,l=b.animateMove,m=b.animate,k=[],x=b.itemName,r=c.slice(),u=!1,w,y,q,t,s,z;a=b.watcher.getMovePrescription(a,
b.getTrackByFunction(),h);q=0;for(t=a.length;q<t;q++)w=a[q],oa(w)?(y=w,w=c[y],y!=f&&null===g&&(g=q),w.action="move",w.scope[x]=b.getListItem(h,q),u=l,k.push(w),c[y]=null,f++):(null===g&&(g=q),s=b.createItem(d.cloneNode(!0),h,q),k.push(s));b.renderers=k;if(m){b.doUpdate(g,null,"enter");u&&(z=b.calculateTranslates(k,r,c));var d=[],A=new v,B=new v,C=new v,D=v.counter(k.length),f=function(){D.countdown();return A};q=0;for(t=c.length;q<t;q++)if(s=c[q])s.scope.$destroy(),ja(s.el),d.push(E(s.el,"leave",
null,!1,p).done(function(a){a.style.visibility="hidden"}));q=0;for(t=k.length;q<t;q++)s=k[q],ja(s.el),"enter"==s.action?d.push(E(s.el,"enter",f,!1,p)):d.push(b.moveAnimation(s.el,u?z[q][0]:null,u?z[q][1]:null,f,B));D.done(function(){ka(function(){B.resolve();b.applyDomPositions(c);u||b.doUpdate(g,null,"move");ka(function(){A.resolve()});b.trigger("change",b)})});v.all(d).always(function(){ka(function(){var a=cb();b.doUpdate(g||0);b.removeOldElements(c);if(u)for(b.doUpdate(g,null,"move"),q=0,t=k.length;q<
t;q++)s=k[q],s.el.style[a.transform]=null,s.el.style[a.transform]="";C.resolve()})});return C}b.buffered?(b.bufferPlugin.getScrollOffset(),b.removeOldElements(c),b.queue.append(b.bufferPlugin.updateScrollBuffer,b.bufferPlugin,[!0])):(b.applyDomPositions(),b.doUpdate(g||0),b.removeOldElements(c));b.trigger("change",b)},removeOldElements:function(a){var b,c,d,f,h,g=this.parentEl;b=0;for(c=a.length;b<c;b++)if((d=a[b])&&d.attached)if(d.attached=!1,self.tagMode)for(f=0,h=d.el.length;f<h;f++)g.removeChild(d.el[f]);
else g.removeChild(d.el)},applyDomPositions:function(a){var b=this.renderers,c=this.parentEl,d=this.prevEl,f=this.tagMode,d=d?d.nextSibling:c.firstChild,h,g,l,m,k;g=0;for(l=b.length;g<l;g++)k=b[g],m=k.el,h=a&&a[g]?a[g].lastEl.nextSibling:0<g?b[g-1].lastEl.nextSibling||d:d,k.firstEl!==h&&(h&&k.lastEl.nextSibling!==h?c.insertBefore(f?z(m):m,h):h||c.appendChild(f?z(m):m)),k.attached=!0},getListItem:function(a,b){return a[b]},onChangeTrackBy:function(a){this.trackByFn=null;this.trackBy=a},getTrackByFunction:function(){var a;
this.trackByFn||((a=this.trackBy)&&"$"!=a?G(a)?this.trackByFn=a:this.trackByFn=function(b){return b&&!pa(b)?b[a]:void 0}:this.trackByFn=function(a){return pa(a)?a:void 0});return this.trackByFn},scopeGetRawIndex:function(a){if(void 0===a)return-1;var b=this.watcher.getUnfilteredValue(),c=this.getTrackByFunction(),d,f;d=0;for(f=b.length;d<f;d++)if(c(b[d])===a)return d;return-1},getNodePositions:function(a,b,c){return{}},calculateTranslates:function(a,b,c){return[]},moveAnimation:function(a,b,c,d,f){return E(a,
"move",d,!1,p)},scrollTo:function(){},parseExpr:function(a){a=a.split(" ");var b,c,d,f,h;b=0;for(c=a.length;b<c;b++)if(h=a[b],""!=h&&"in"!=h)if(f){d=a.slice(b).join(" ");break}else f=h;this.model=d;this.itemName=f||"item"},destroy:function(){var a=this.renderers,b,c;b=0;for(c=a.length;b<c;b++)a[b].renderer.$destroy();this.trackByWatcher&&this.trackByWatcher.unsubscribeAndDestroy();this.queue.destroy();this.watcher.unsubscribeAndDestroy(this.onChange,this)}},{$stopRenderer:!0,$registerBy:"id"}),db=
ma.current;x({$class:"View",route:null,node:null,scope:null,cmp:null,id:null,currentComponent:null,watchable:null,defaultCmp:null,$init:function(a){s(this,a,!0,!1);a=this.node;var b=D(a,this.scope);s(this,b,!0,!1);a&&a.firstChild&&B(a,"mjs-transclude",z(a.childNodes));this.id||(this.id=L());this.scope.$app.registerCmp(this,this.scope,"id");this.route?(ma.init(),ma.on("locationChange",this.onLocationChange,this),this.onLocationChange()):this.cmp&&(this.watchable=M(this.scope,this.cmp,this.onCmpChange,
this,null,p),this.onCmpChange())},onCmpChange:function(){var a=this.watchable.getLastResult()||this.defaultCmp;this.clearComponent();a&&this.setComponent(a)},onLocationChange:function(){var a=db(),b=this.route,c,d,f,h,g;d=0;for(f=b.length;d<f;d++){h=b[d];if(h.reg&&(g=a.match(h.reg))){this.changeRouteComponent(h,g);return}h["default"]&&!c&&(c=h)}this.clearComponent();c?this.setRouteComponent(c,[]):this.defaultCmp&&this.setComponent(this.defaultCmp)},changeRouteComponent:function(a,b){ja(this.node);
this.clearComponent();this.setRouteComponent(a,b)},clearComponent:function(){var a=this,b=a.node;a.currentComponent&&E(b,"leave",null,!0).done(function(){a.currentComponent.destroy();for(a.currentComponent=null;b.firstChild;)b.removeChild(b.firstChild)})},setRouteComponent:function(a,b){var c=this,d=c.node,f=a.params;E(d,"enter",function(){var h=b||[],g={destroyEl:!1,node:d,scope:a.$isolateScope?c.scope.$newIsolated():c.scope.$new()},l,k;a.as&&(g.as=a.as);a.template&&(g.template=a.template);h.shift();
if(f)for(l=-1,k=f.length;++l<k;g[f[l]]=h[l]);return Y(a.cmp||"MetaphorJs.Component",g,g.scope,d,null,h).done(function(a){c.currentComponent=a})},!0)},setComponent:function(a){var b=this,c=b.node;E(c,"enter",function(){var d=Ba(a)?a:{},f=(I(a)?a:null)||"MetaphorJs.Component",h=d.scope||b.scope.$new();d.destroyEl=!1;return Y(f,d,h,c).done(function(a){b.currentComponent=a})},!0)},destroy:function(){this.clearComponent();this.route&&(ma.un("locationchange",this.onLocationChange,this),this.route=null);
this.watchable&&(this.watchable.unsubscribeAndDestroy(this.onCmpChange,this),this.watchable=null);this.currentComponent=this.scope=null;this.$super()}});k.registerAttribute("mjs-app",100,V);k.registerAttribute("mjs-bind",1E3,x({$extends:k,isInput:!1,input:null,lockInput:null,recursive:!1,textRenderer:null,$init:function(a,b,c){var d=D(b,a);this.isInput=Fa(b);this.recursive=d.recursive||null!==u(b,"mjs-recursive");this.lockInput=d.lockInput;b.removeAttribute("mjs-recursive");this.isInput&&(this.input=
new la(b,this.onInputChange,this));this.recursive?(this.scope=a,this.node=b,this.textRenderer=new Ja(a,"{{"+c+"}}",null,null,!0),this.textRenderer.subscribe(this.onTextRendererChange,this),this.onTextRendererChange(),a instanceof J&&a.$on("destroy",this.onScopeDestroy,this)):this.$super(a,b,c)},onInputChange:function(){if(this.lockInput)this.onChange()},onTextRendererChange:function(){this.updateElement(this.textRenderer.getString())},onChange:function(){var a=this.watcher.getLastResult();this.updateElement(a)},
updateElement:function(a){this.isInput?this.input.setValue(a):this.node["string"==typeof this.node.textContent?"textContent":"innerText"]=a},destroy:function(){this.textRenderer&&(this.textRenderer.$destroy(),this.textRenderer=null);this.input&&(this.input.destroy(),this.input=null);this.$super()}}));k.registerAttribute("mjs-bind-html",1E3,x({$extends:"attr.mjs-bind",updateElement:function(a){this.node.innerHTML=a}}));k.registerAttribute("mjs-break-if",500,function(a,b,c){(a=!!N(c)(a))&&b.parentNode.removeChild(b);
return!a});(function(){var a=function(a,c,d,f){if(null!==d){if(d==qa(a,c))return;d=!d}else d=qa(a,c);d?f?E(a,[c+"-remove"],null,!0).done(function(){T(a,c)}):T(a,c):f?E(a,[c+"-add"],null,!0).done(function(){ra(a,c)}):ra(a,c)};k.registerAttribute("mjs-class",1E3,x({$extends:k,initial:!0,onChange:function(){var b=this.node,c=this.watcher.getLastResult(),d=this.watcher.getPrevValue(),f;ja(b);if(I(c))d&&a(b,d,!1,!1),a(b,c,null,!this.initial);else if(C(c))for(f=-1,d=c.length;++f<d;a(b,c[f],!0,!this.initial));
else for(f in c)a(b,f,c[f]?!0:!1,!this.initial);this.initial=!1}}))})();k.registerAttribute("mjs-cmp-prop",200,["$parentCmp","$node","$attrValue",function(a,b,c){a&&(a[c]=b)}]);(function(){var a=function(a,c,d,f){var h,g,l,k,p,t=D(c,a);d=d.split(" ");l=0;for(k=d.length;l<k;l++)p=d[l],""!=p&&"as"!=p&&(h?g=p:h=p);f=s({scope:a,node:c,as:g,parentRenderer:f,destroyScope:!0},t,!1,!1);g=Q(h,!0);Y(h,f,a,c);return!!g.$shadow};a.$breakScope=!0;k.registerAttribute("mjs-cmp",200,a)})();k.registerAttribute("mjs-config",
50,function(a,b,c){D(b,a,c)});k.registerAttribute("mjs-each",100,va);var wa=Ma.createFunc,aa=function(a){if(a instanceof aa)return a;if(!(this instanceof aa))return new aa(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,f=a.button;void 0===this.pageX&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||window.document:window.document,b=d.documentElement,d=d.body,this.pageX=a.clientX+
(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ha:V;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};s(aa.prototype,{isDefaultPrevented:V,isPropagationStopped:V,isImmediatePropagationStopped:V,preventDefault:function(){var a=
this.originalEvent;this.isDefaultPrevented=ha;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ha;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ha;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);(function(){var a="click dblclick mousedown mouseup mouseover mouseout mousemove keydown keyup keypress submit focus blur copy cut paste enter".split(" "),
b,c;b=0;for(c=a.length;b<c;b++)(function(a){var b=a;"enter"==b&&(b="keyup");k.registerAttribute("mjs-"+a,1E3,function(c,g,l){var k=wa(l);ba(g,b,function(b){b=Qa(b||window.event);if("enter"==a&&13!=b.keyCode)return null;c.$event=b;k(c);c.$event=null;c.$root.$check();b.preventDefault();return!1})})})(a[b])})();k.registerAttribute("mjs-show",500,x({$extends:k,initial:!0,display:"",$init:function(a,b,c){this.display=D(b,a).display||"";this.$super(a,b,c)},runAnimation:function(a){var b=this,c=b.node.style,
d=function(){c.display=a?b.display:"none"};b.initial?d():E(b.node,a?"show":"hide",function(){a&&(c.display=b.display)},!0).done(d)},onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(a);this.initial=!1}}));k.registerAttribute("mjs-hide",500,x({$extends:"attr.mjs-show",onChange:function(){var a=this.watcher.getLastResult();this.runAnimation(!a);this.initial=!1}}));k.registerAttribute("mjs-if",500,x({$extends:k,parentEl:null,prevEl:null,el:null,initial:!0,$init:function(a,b,c){this.parentEl=
b.parentNode;this.prevEl=b.previousSibling;this.$super(a,b,c)},onScopeDestroy:function(){this.parentEl=this.prevEl=null;this.$super()},onChange:function(){var a=this,b=a.watcher.getLastResult(),c=a.parentEl,d=a.node,f=function(){a.prevEl?c.insertBefore(d,a.prevEl?a.prevEl.nextSibling:null):c.appendChild(d)},h=function(){c.removeChild(d)};b?ia(d)||(a.initial?f():E(d,"enter",f,!0)):ia(d)&&(a.initial?h():E(d,"leave",null,!0).done(h));a.initial=!1}}));k.registerAttribute("mjs-ignore",0,V);k.registerAttribute("mjs-include-file",
900,function(a,b,c){a=require("fs");b.innerHTML=a.readFileSync(c).toString()});k.registerAttribute("mjs-include",900,function(a,b,c,d){a=new U({scope:a,node:b,url:c,parentRenderer:d});return a.ownRenderer?!1:a.initPromise});k.registerAttribute("mjs-init",250,function(a,b,c){wa(c)(a)});var xa=function(){var a;return function(){if(null===a){var b=navigator.userAgent;a=parseInt((/msie (\d+)/i.exec(b)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/i.exec(b)||[])[1],10)||!1)}return a}}();k.registerAttribute("mjs-model",
1E3,x({$extends:k,inProg:!1,input:null,binding:null,autoOnChange:!1,$init:function(a,b,c){var d=D(b,a);this.node=b;this.input=new la(b,this.onInputChange,this);this.binding=d.binding||"both";this.$super(a,b,c);a=this.input.getValue();b=this.watcher.getLastResult();if(b!=a)if("input"!=this.binding&&void 0!=b)this.onChange(b);else if("scope"!=this.binding&&void 0!=a)this.onInputChange(a)},onInputChange:function(a){var b=this.scope;"scope"!=this.binding&&(a&&I(a)&&-1!=a.indexOf("\\{")&&(a=a.replace(/\\{/g,
"{")),this.watcher.getLastResult()!=a&&(this.watcher.setValue(a),this.inProg=!0,b instanceof J?b.$root.$check():this.watcher.checkAll(),this.inProg=!1))},destroy:function(){this.input.destroy();this.$super()},onChange:function(){var a=this.watcher.getLastResult(),b;"input"==this.binding||this.inProg||((b=xa())&&8>b?na(this.input.setValue,this.input,[a]):this.input.setValue(a))}}));k.registerAttribute("mjs-options",100,x({$extends:k,model:null,getterFn:null,defOption:null,prevGroup:null,groupEl:null,
fragment:null,$init:function(a,b,c){this.parseExpr(c);this.node=b;this.scope=a;for(this.defOption=b.options.length?b.options[0]:null;b.firstChild;)b.removeChild(b.firstChild);this.defOption&&this.defOption.setAttribute("mjs-default-option","");try{this.watcher=M(a,this.model,this.onChange,this,null,p)}catch(d){K(d)}this.render(F(this.watcher.getValue()))},onChange:function(){this.render(F(this.watcher.getValue()))},renderOption:function(a,b,c){var d=this.groupEl||this.fragment,f=xa();c.item=a;c.$index=
b;a=this.getterFn(c);void 0!=a.group&&(a.group=""+a.group);a.group!==this.prevGroup&&(a.group?(this.groupEl=d=window.document.createElement("optgroup"),d.setAttribute("label",a.group),a.disabledGroup&&d.setAttribute("disabled","disabled"),this.fragment.appendChild(d)):(d=this.fragment,this.groupEl=null));this.prevGroup=a.group;b=window.document.createElement("option");b.setAttribute("value",a.value);b.text=a.name;f&&9>f&&(b.innerHTML=a.name);a.disabled&&b.setAttribute("disabled","disabled");d.appendChild(b)},
render:function(a){var b=this.node,c=pb(b),d=this.defOption,f=this.scope.$new(),h=xa(),g,l,k,p;this.fragment=window.document.createDocumentFragment();for(this.groupEl=this.prevGroup=null;b.firstChild;)b.removeChild(b.firstChild);k=0;for(p=a.length;k<p;k++)this.renderOption(a[k],k,f);d&&b.insertBefore(d,b.firstChild);f.$destroy();h&&8>h&&(l=b.nextSibling,g=b.parentNode,g.removeChild(b));b.appendChild(this.fragment);this.fragment=null;h&&8>h&&g.insertBefore(b,l);qb(b,c)},parseExpr:function(a){var b=
a.indexOf(" in "),c;-1==b?(c=a,a="{name: .item, value: .$index}"):(c=a.substr(b+4),a=a.substr(0,b));this.model=c;this.getterFn=N(a)}}));(function(){var a="selected checked disabled readonly open required".split(" "),b,c,d=x({$extends:k,propName:null,$init:function(a,b,c,d){this.propName=d;this.$super(a,b,c)},onChange:function(a){var b=this.propName;a?this.node.setAttribute(b,b):this.node.removeAttribute(b)}});b=0;for(c=a.length;b<c;b++)(function(a){k.registerAttribute("mjs-"+a,1E3,function(b,c,g){return new d(b,
c,g,a)})})(a[b])})();var eb=function(){var a={},b=0;return function(c){if(a[c])return v.resolve(c);1E3<b&&(a={},b=0);var d=window.document,f=d.createElement("img"),h=f.style,g=new v;ba(f,"load",function(){a[c]=!0;b++;d.body.removeChild(f);g.resolve(c)});h.position="absolute";h.visibility="hidden";h.left="-10000px";h.top="0";f.src=c;d.body.appendChild(f);return g}}();k.registerAttribute("mjs-src",1E3,x({$extends:k,queue:null,usePreload:!0,$constructor:function(a,b,c){D(b,a).deferred&&this.$plugins.push("SrcDeferred");
this.$super(a,b,c)},$init:function(a,b,c){D(b,a).noPreload&&(this.usePreload=!1);this.queue=new A({auto:!0,async:!0,mode:A.ONCE,thenable:!0});this.$super(a,b,c)},onChange:function(){this.queue.add(this.doChange,this)},doChange:function(){var a=this,b=a.watcher.getLastResult();if(a.usePreload)return eb(b).done(function(){a&&a.node&&ka(function(){a.node.src=b;a.node.setAttribute("src",b)})});a.node.src=b;a.node.setAttribute("src",b)},destroy:function(){this.queue.destroy();this.$super()}}));k.registerAttribute("mjs-transclude",
1E3,function(a,b){return Ga(b)});k.registerAttribute("mjs-view",200,function(a,b,c){Y(c||"MetaphorJs.View",{scope:a,node:b},a,b);return!1});k.registerTag("mjs-bind-html",function(a,b){var c=u(b,"value"),c=M(a,c,null,null,null,p),d=c.getLastResult(),d=z(d),f=b.nextSibling,h=F(d.childNodes);b.parentNode.insertBefore(d,f);b.parentNode.removeChild(b);c.unsubscribeAndDestroy();return h});k.registerTag("mjs-bind",function(a,b){var c=u(b,"value"),c=N(c)(a),c=window.document.createTextNode(c);b.parentNode.insertBefore(c,
b.nextSibling);b.parentNode.removeChild(b);return[c]});k.registerTag("mjs-each",va);k.registerTag("mjs-if",function(a,b){var c=u(b,"value");if(N(c)(a)){var c=F(b.childNodes),d=z(b.childNodes);b.parentNode.insertBefore(d,b.nextSibling);b.parentNode.removeChild(b);return c}b.parentNode.removeChild(b);return!1});k.registerTag("mjs-include",function(a,b,c,d){return(new U({scope:a,node:b,url:u(b,"src"),parentRenderer:d,replace:!0})).initPromise});k.registerTag("mjs-tag",function(a,b){var c=u(b,"value");
if(c=N(c)(a)){for(var c=window.document.createElement(c),d=b.nextSibling,f=Aa(b),h;b.firstChild;)c.appendChild(b.firstChild);delete f.value;for(h in f)c.setAttribute(h,f[h]);b.parentNode.insertBefore(c,d);b.parentNode.removeChild(b);return[c]}b.parentNode.removeChild(b);return!1});k.registerTag("mjs-transclude",function(a,b){return Ga(b,!0)});t("filter.collect",function(a,b,c){b=[];var d,f,h;d=0;for(f=a.length;d<f;d++)h=a[d][c],void 0!=h&&b.push(h);return b});var fb=function(){var a=function(a,b,
c){if(G(b))return b(a,c);if(""===b||void 0===b)return!0;if(void 0!==a){if(fa(a))return a===b;if(b instanceof RegExp)return b.test(""+a);if("strict"==c)return""+a===""+b;if(!0===c||null===c||void 0===c)return-1!=""+a.indexOf(b);if(!1===c)return-1==""+a.indexOf(b)}return!1},b=function(b,c,h){if(pa(b))return void 0===c.$?!0:a(b,c.$,h);var g,l;for(g in c)if("$"==g)for(l in b){if(a(b[l],c.$,h))return!0}else if(a(b[g],c[g],h))return!0;return!1},c=function(a,c,g){O(c)||(c={$:c});var k=[],l,m;l=-1;for(m=
a.length;++l<m;)b(a[l],c,g)&&k.push(a[l]);return k};c.compare=b;return c}();t("filter.filter",function(a,b,c,d){return fb(a,c,d)});t("filter.get",function(a,b,c){for(b=(""+c).split(".");c=b.shift();)if(a=a[c],void 0==a)return;return a});t("filter.join",function(a,b,c){c=c||", ";return a&&a.length?(C(a)||(a=F(a)),a.join(c)):""});t("filter.l",function(a,b){return b.$app.lang.get(a)});t("filter.limitTo",function(a,b,c){b=I(a);if(!C(a)&&!b)return a;c=Infinity===Math.abs(Number(c))?Number(c):parseInt(c,
10);if(b)return c?0<=c?a.slice(0,c):a.slice(c,a.length):"";b=[];var d;c>a.length?c=a.length:c<-a.length&&(c=-a.length);0<c?d=0:(d=a.length+c,c=a.length);for(;d<c;d++)b.push(a[d]);return b});t("filter.linkify",function(a,b,c){return a?a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>"):""});t("filter.lowercase",function(a){return a.toLowerCase()});t("filter.map",function(a,b,c){var d=Q(c,!0)||window[c]||N(c)(b);
if(d)for(b=0,c=a.length;b<c;b++)a[b]=d(a[b]);return a});var gb={};t("filter.moment",function(a,b,c){c=gb[c]||c;return moment(a).format(c)});var hb={};t("filter.numeral",function(a,b,c){c=hb[c]||c;return numeral(a).format(c)});t("filter.p",function(a,b,c){return b.$app.lang.plural(a,parseInt(c,10)||0)});t("filter.sortBy",function(a,b,c,d){return Sa(a,c,d)});t("filter.split",function(a,b,c,d){d=d||void 0;c=c||"/\\n|,/";if(!a)return[];a=""+a;"/"==c.substr(0,1)&&"/"==c.substr(c.length-1)&&(c=Da(c.substring(1,
c.length-1)));a=a.split(c,d);b=-1;for(c=a.length;++b<c;a[b]=W(a[b]));return a});t("filter.toArray",function(a){if(O(a)){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});return b}return F(a)});t("filter.ucfirst",function(a){return a.substr(0,1).toUpperCase()+a.substr(1)});t("filter.uppercase",function(a){return a.toUpperCase()});var sb=function(){var a="undefined"!=typeof window?window:null,b="undefined"!=typeof global?global:null;return function d(f,g){if(a&&f===a)throw Error("Cannot copy window object");
if(b&&f===b)throw Error("Cannot copy global object");if(g){if(f===g)throw Error("Objects are identical");if(C(f))for(var k=g.length=0,l=f.length;k<l;k++)g.push(d(f[k]));else{for(k in g)delete g[k];for(k in f)f.hasOwnProperty(k)&&("$"==k.charAt(0)||G(f[k])?g[k]=f[k]:g[k]=d(f[k]))}}else(g=f)&&(C(f)?g=d(f,[]):ua(f)?g=new Date(f.getTime()):ta(f)?g=new RegExp(f.source):O(f)&&(g=d(f,{})));return g}}(),tb=function(){return function b(c,d){if(c===d)return!0;if(null===c||null===d)return!1;if(c!==c&&d!==d)return!0;
var f=typeof c,g;if(f==typeof d&&"object"==f)if(C(c)){if(!C(d))return!1;if((f=c.length)==d.length){for(g=0;g<f;g++)if(!b(c[g],d[g]))return!1;return!0}}else{if(ua(c))return ua(d)&&c.getTime()==d.getTime();if(ta(c)&&ta(d))return c.toString()==d.toString();if(Ha(c)||Ha(d)||C(d))return!1;f={};for(g in c)if("$"!=g.charAt(0)&&!G(c[g])){if(!b(c[g],d[g]))return!1;f[g]=!0}for(g in d)if(!f.hasOwnProperty(g)&&"$"!=g.charAt(0)&&void 0!==d[g]&&!G(d[g]))return!1;return!0}return!1}}(),ub=function(){var a=Object.prototype.toString,
b=Function.prototype.toString,c=/^\[object .+?Constructor\]$/,d=RegExp("^"+String(a).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(f){var g=typeof f;return"function"==g?!("prototype"in f)||d.test(b.call(f)):f&&"object"==g&&c.test(a.call(f))||!1}}(),vb=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),ib=va.$extend({store:null,$constructor:function(a,
b,c){var d=D(b,a);d.pullNext&&(d.buffered&&(d.bufferedPullNext=!0,d.buffered=!1),this.$plugins.push("ListPullNext"));this.$super(a,b,c)},afterInit:function(a,b,c){this.store=a=N(this.model)(a);this.watcher=M(a,".current",this.onChange,this,null,p);this.trackByFn=X(a.getRecordId,a);this.griDelegate=X(a.indexOfId,a);this.bindStore(a,"on")},bindStore:function(a,b){a[b]("update",this.onStoreUpdate,this);a[b]("clear",this.onStoreUpdate,this);a[b]("destroy",this.onStoreDestroy,this)},onStoreUpdate:function(){this.watcher.check()},
getListItem:function(a,b){return this.store.getRecordData(a[b])},onStoreDestroy:function(){this.onStoreUpdate();this.watcher.unsubscribeAndDestroy(this.onChange,this);this.watcher=null},destroy:function(){this.bindStore(this.store,"un");this.$super()}},{$stopRenderer:!0,$registerBy:"id"});k.registerAttribute("mjs-each-in-store",100,ib);x({$class:"DialogComponent",$extends:bb,dialog:null,dialogPreset:null,dialogCfg:null,initComponent:function(){this.$super();this._createDialog();this._oldShow=this.show;
this._oldHide=this.hide},_getDialogCfg:function(){return s({},this.dialogCfg,{render:{el:this.node,keepInDOM:!0}},!0,!0)},_createDialog:function(){this.dialog=new nb(this.dialogPreset,this._getDialogCfg());this.dialog.on("show",this._oldShow,this);this.dialog.on("hide",this._oldHide,this);this.dialog.on("destroy",this.onDialogDestroy,this)},show:function(){this.dialog.show()},hide:function(){this.dialog.hide()},onDialogDestroy:function(){this.destroying||(this.dialog=null,this.$destroy())},destroy:function(){this.destroying=
!0;this.dialog&&this.dialog.destroy();this.$super()}});x({$class:"MetaphorJs.ValidatorComponent",node:null,scope:null,validator:null,scopeState:null,$init:function(a,b,c){this.node=a;this.scope=b;this.scopeState={};this.validator=this.createValidator();this.initScope();this.initScopeState();this.initValidatorEvents();c.once("rendered",this.validator.check,this.validator)},createValidator:function(){var a=this.node,b={},c;if(c=D(a).submit)b.callback=b.callback||{},b.callback.submit=function(a,b){return function(){try{return a(b)}catch(c){K(c)}}}(wa(c),
this.scope);return new mb(a,b)},initValidatorEvents:function(){var a=this.validator;a.on("fieldstatechange",this.onFieldStateChange,this);a.on("statechange",this.onFormStateChange,this);a.on("displaystatechange",this.onDisplayStateChange,this);a.on("reset",this.onFormReset,this)},initScope:function(){var a=this.scope,b=this.node,b=u(b,"name")||u(b,"id")||"$form";a[b]=this.scopeState},initScopeState:function(){var a=this.node,b=this.scopeState,c,d,f;a.elements?c=a.elements:(c=[],Ia(a,function(a){Fa(a)&&
c.push(a)}));a=-1;for(f=c.length;++a<f;)d=c[a],(d=u(d,"name")||u(d,"id"))&&!b[d]&&(b[d]={$error:null,$invalid:null,$pristine:!0,$errorMessage:null});b.$invalid=!1;b.$pristine=!0;b.$submit=X(this.validator.onSubmit,this.validator);b.$reset=X(this.validator.reset,this.validator);window.formState=b},onDisplayStateChange:function(a,b){if(b){b=this.scopeState;var c,d;for(c in b)d=b[c],d.$real&&(b[c]=d.$real);b.$invalid=!a.isValid();b.$pristine=!1;this.scope.$check()}else this.onFormReset(a)},onFormReset:function(a){a=
this.scopeState;var b,c;for(b in a)c=a[b],c.$error=null,c.$errorMessage=null,c.$invalid=null,c.$pristine=!0;a.$invalid=!1;a.$pristine=!0;this.scope.$check()},onFormStateChange:function(a,b){var c=this.scopeState;c.$invalid=!1===b&&a.isDisplayStateEnabled();c.$pristine=!1;this.scope.$check()},onFieldStateChange:function(a,b,c){var d=this.scopeState,f=b.getName();a=a.isDisplayStateEnabled();b={$error:b.getErrorRule(),$errorMessage:b.getError(),$invalid:!1===c,$pristine:null===b.getExactValidState()};
a?d[f]=b:d[f].$real=b;this.scope.$check()}});k.registerAttribute("mjs-validate",250,["$scope","$node","$attrValue","$renderer",function(a,b,c,d){c=c||"MetaphorJs.ValidatorComponent";var f=Q(c);f?new f(b,a,d):K(Error("Class '"+c+"' not found"))}]);g.ns=p;g.cs=ca;g.defineClass=x;g.emptyFn=H;g.slice=R;g.getAttr=u;g.undf=void 0;g.varType=P;g.isPlainObject=O;g.isBool=fa;g.extend=s;g.Scope=J;g.nextUid=L;g.isArray=C;g.toArray=F;g.isFunction=G;g.isThenable=S;g.nsGet=Q;g.isString=I;g.trim=W;g.createWatchable=
M;g.nsAdd=t;g.Directive=k;g.bind=X;g.split=Wa;g.isNull=function(a){return null===a};g.TextRenderer=Ja;g.setAttr=function(a,b,c){return a.setAttribute(b,c)};g.removeAttr=function(a,b){return a.removeAttribute(b)};g.getAttrMap=Aa;g.aIndexOf=Ka;g.Renderer=da;g.Text=Xa;g.ObservableMixin=La;g.isObject=Ba;g.instantiate=Ya;g.Provider=Ea;g.ProviderMixin=Za;g.destroy=$a;g.isAttached=ia;g.data=B;g.toFragment=z;g.clone=sa;g.strUndef="undefined";g.Cache=ab;g.Template=U;g.Component=bb;g.getRegExp=Da;g.getClsReg=
Ca;g.removeClass=T;g.stopAnimation=ja;g.async=na;g.isNumber=oa;g.error=K;g.Queue=A;g.isPrimitive=pa;g.raf=ka;g.functionFactory=Ma;g.createGetter=N;g.toCamelCase=Na;g.getNodeData=Oa;g.getNodeConfig=D;g.getAnimationPrefixes=cb;g.ListRenderer=va;g.hasClass=qa;g.addClass=ra;g.resolveComponent=Y;g.currentUrl=db;g.returnFalse=V;g.isField=Fa;g.createFunc=wa;g.returnTrue=ha;g.DomEvent=aa;g.normalizeEvent=Qa;g.addListener=ba;g.isIE=xa;g.preloadImage=eb;g.parentData=Ra;g.transclude=Ga;g.filterArray=fb;g.dateFormats=
gb;g.numberFormats=hb;g.sortArray=Sa;g.compile=function(a,b){var c=window.document.createElement("div");c.innerHTML=a;c=z(c.childNodes);(new da(c,b)).process();return c};g.isRegExp=ta;g.isDate=ua;g.copy=sb;g.isWindow=Ha;g.equals=tb;g.initApp=Ta;g.intercept=function(a,b,c,d,f,g){f=f||"before";return function(){var k,l;if("instead"==f)return b.apply(c||d,arguments);"before"==f?(k=b.apply(c||d,arguments),l=!1!==k?a.apply(d||c,arguments):null):(l=a.apply(d||c,arguments),k=b.apply(c||d,arguments));return g?
k:l}};g.isInjectable=function(a){return a&&(a.length&&G(a[a.length-1])||a.inject)};g.isNative=ub;g.isUndefined=function(a){return"undefined"==typeof a};g.parseJSON=vb;g.parseXML=function(a,b){var c,d;if(!a||!I(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(f){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c};g.removeListener=Ua;g.onReady=Va;g.run=function(a,b){var c=a||window;if(!c)throw"Window object neither defined nor provided";
Va(function(){var a=ya("[mjs-app]",c.document),f,g,k;f=-1;for(g=a.length;++f<g;)k=a[f],Ta(k,u(k,"mjs-app"),b,!0)},c)};g.ucfirst=function(a){return a.substr(0,1).toUpperCase()+a.substr(1)};g.StoreRenderer=ib;g.eachNode=Ia;return g});
