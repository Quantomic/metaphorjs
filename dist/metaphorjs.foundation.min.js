(function(){ 'use strict';(function(){var e={}.undefined,g=function(d,b,f){if(b&&d)for(var a in b)!b.hasOwnProperty(a)||!1===f&&d[a]!=e||(d[a]=b[a])},h={apply:g,emptyFn:function(){}};window.MetaphorJs?g(window.MetaphorJs,h,!0):window.MetaphorJs=h})();(function(){var e=window,g={},h=function(d,b){var f;f=d.split(".");var a,c=f.pop();a=f.join(".");var n=f.length,k,m=e;if(g[a])f=[g[a],c];else{for(a=0;a<n;a++)k=f[a],m[k]||(m[k]={}),m=m[k];f=[m,c]}f[0][f[1]]=b;g[d]=b};h("MetaphorJs.ns",{register:h,exists:function(d){return g[d]?!0:!1},getNs:function(d){if(g[d])return g[d];d=d.split(".");var b,f=d.length,a,c=e;for(b=0;b<f-1;b++){a=d[b];if(!c[a])return null;c=c[a]}return c}})})();(function(){var e={}.undefined,g=function(f){return b(function(){},f)},h=function(b,a,c){return function(){var d=e;this.supr=b.prototype[a]||function(){};d=c.apply(this,arguments);this.supr=null;return d}},d=function(b,a,c){for(var d in a)a.hasOwnProperty(d)&&(b[d]="function"===typeof a[d]&&"function"===typeof c.prototype[d]?h(c,d,a[d]):a[d])},b=function(b,a){var c=function(){};c.prototype=b.prototype;var c=new c,n=function(){this.initialize&&this.initialize.apply(this,arguments)};d(c,a,b);n.prototype=
c;return n.prototype.constructor=n};MetaphorJs.define=function(f,a,c,d){c||(c=a,a=null);c=(a=a&&"string"==typeof a?MetaphorJs.ns.getNs(a):a)?b(a,c):g(c);c.__parent=a;c.__parentClass=a?a.__class:null;c.__class=f;if(d)for(var e in d)d.hasOwnProperty(e)&&(c[e]=d[e]);MetaphorJs.ns.register(f,c);return c};MetaphorJs.create=function(b,a,c,d,e,m,p,q,g,l){b=MetaphorJs.ns.getNs(b);if(!b)throw Error("Class "+b+" not found");a=new b(a,c,d,e,m,p,q,g,l);a.__parent=b.__parent;a.__parentClass=b.__parentClass;a.__class=
b.__class;return a};MetaphorJs.is=function(b,a){var c="string"==typeof a?MetaphorJs.ns.getNs(a):a;return b instanceof c};MetaphorJs.isSubclass=function(b,a){var c=b;"string"!=typeof a&&(a=a.__class);for(;c;){if(c==a)return!0;if(c=MetaphorJs.ns.getNs(c))c=c.__parentClass}return!1}})();(function(){MetaphorJs.define("MetaphorJs.cmp.Base",{initialize:function(e){e=e||{};MetaphorJs.apply(this,e)},destroy:MetaphorJs.emptyFn})})();(function(){var e=function(d){var b,f,a,c;f=1;for(a=arguments.length;f<a;f++)for(b in c=arguments[f],c)d[b]=c[b]},g=function(d,b){var f=[],a=Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10),c=!1,g=0,k=this;b=b||!1;e(k,{destroy:function(){d=k=g=c=a=f=null},on:function(b,c,e){if(b){c=c||b;e=e||{};var k=d+"_"+a;if(!c[k]){var l=++g,h=e.first||!1;c[k]=l;b={fn:b,scope:c,id:l,called:0,limit:e.limit?e.limit:e.once?1:0,start:e.start||1,count:0};h?f.unshift(b):f.push(b);
return l}}},un:function(b,c){var e=-1,g=d+"_"+a,l;l=b==parseInt(b)?b:(c||b)[g];if(!l)return!1;for(var k=0,h=f.length;k<h;k++)if(f[k].id==l){e=k;delete f[k].scope[g];break}if(-1==e)return!1;f.splice(e,1);return!0},hasListener:function(b,c){if(b){c=c||b;var e;e=d+"_"+a;e=b==parseInt(b)?b:c[e];if(!e)return!1;for(var g=0,k=f.length;g<k;g++)if(f[g].id==e)return!0;return!1}return 0<f.length?f.length:!1},removeAllListeners:function(){for(var b=d+"_"+a,c=0,e=f.length;c<e;c++)delete f[c].scope[b];f=[]},suspend:function(){c=
!0},resume:function(){c=!1},trigger:function(){if(!c&&0!=f.length){for(var a="all"==b?[]:null,d,e=0,g=f.length;e<g;e++){var h=f[e];h.count++;if(!(h.count<h.start)){d=h.fn.apply(h.scope,arguments);h.called++;h.called==h.limit&&k.removeListener(h.id);"all"==b&&a.push(d);if("first"==b&&d)return d;"last"==b&&d&&(a=d);if(!1==b&&!1===d)break}}if(b)return a}}})},h=function(){var d=this,b={},f={};e(f,{createEvent:function(a,c){a=a.toLowerCase();b[a]||(b[a]=new g(a,c));return b[a]},getEvent:function(a){a=
a.toLowerCase();return b[a]},on:function(a,c,d,e){a=a.toLowerCase();b[a]||(b[a]=new g(a));return b[a].on(c,d,e)},once:function(a,b,e,f){f=f||{};f.limit=1;return d.on(a,b,e,f)},un:function(a,c,d){a=a.toLowerCase();b[a]&&b[a].un(c,d)},hasListener:function(a,c,d){a=a.toLowerCase();return b[a]?b[a].hasListener(c,d):!1},removeAllListeners:function(a){b[a]&&b[a].removeAllListeners()},trigger:function(){var a=[],c=arguments[0],c=c.toLowerCase();if(b[c]){for(var d=1,e=arguments.length;d<e;d++)a.push(arguments[d]);
c=b[c];return c.trigger.apply(c,a)}},suspendEvent:function(a){a=a.toLowerCase();b[a]&&b[a].suspend()},suspendAllEvents:function(){for(var a in b)b[a].suspend()},resumeEvent:function(a){a=a.toLowerCase();b[a]&&b[a].resume()},resumeAllEvents:function(){for(var a in b)b[a].resume()}});e(d,f,{destroy:function(a){if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();d=b=null}},getApi:function(){return f}});return d};window.MetaphorJs&&MetaphorJs.ns?MetaphorJs.ns.register("MetaphorJs.lib.Observable",
h):(window.MetaphorJs=window.MetaphorJs||{},MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Observable=h)})();(function(){MetaphorJs.define("MetaphorJs.cmp.Observable","MetaphorJs.cmp.Base",{_observable:null,listeners:null,initialize:function(e){this._observable=new MetaphorJs.lib.Observable;MetaphorJs.apply(this,this._observable.getApi());e=e||{};if(e.callback){var g=e.callback,h=g.scope||this;delete g.scope;for(var d in g)if(g.hasOwnProperty(d))this.on(d,g[d],h);delete e.callback}this.supr(e)},destroy:function(){this._observable.destroy();delete this._observable;this.supr()}})})();(function(){var e={},g=-1,h=function(d){return e[d]||null};MetaphorJs.define("MetaphorJs.cmp.Component","MetaphorJs.cmp.Observable",{id:null,tag:"div",el:null,dom:null,cls:null,style:null,renderTo:null,html:null,rendered:!1,hidden:!1,destroyed:!1,destroyEl:!0,initialize:function(d){this.supr(d);this.dom&&!this.el&&(this.el=$(this.dom));this.el&&(this.id=this.el.attr("id"),this.dom||(this.dom=this.el.get(0)));g++;this.id=this.id||"cmp-"+g;e[this.id]=this;this.initComponent();!this.dom&&this.renderTo?
this.render():this.dom&&(this.hidden=this.el.is(":hidden"),this.rendered=!0,this.html&&(this.el.html(this.html),this.html=null),this.onRender())},render:function(d){if(!this.rendered){var b=this.tag,b=$("<"+b+"></"+b+">");d=d||this.renderTo;this.cls&&b.addClass(this.cls);this.style&&b.css(this.style);b.attr("id",this.id);this.html&&(b.html(this.html),this.html=null);this.hidden&&b.hide();b.appendTo(d||"body");this.el=b;this.dom=b.get(0);this.rendered=!0;this.onRender();this.renderTo=null}},onRender:function(){this.el.attr("cmp-id",
this.id);this.trigger("render",this);this.afterRender();this.trigger("afterrender",this)},show:function(){if(this.hidden){if(!1===this.trigger("beforeshow",this))return!1;this.el.show();this.hidden=!1;this.onShow();this.trigger("show",this)}},hide:function(){if(!this.hidden){if(!1===this.trigger("beforehide",this))return!1;this.el.hide();this.hidden=!0;this.onHide();this.trigger("hide",this)}},isHidden:function(){return this.hidden},isRendered:function(){return this.rendered},isDestroyed:function(){return this.destroyed},
getEl:function(){return this.el},getDom:function(){return this.dom},destroy:function(){if(!this.destroyed){if(!1===this.trigger("beforedestroy",this))return!1;this.onDestroy();this.destroyed=!0;this.trigger("destroy",this);this.destroyEl&&(this.el.remove(),this.dom=this.el=null);this.supr();delete e[this.id]}},initComponent:MetaphorJs.emptyFn,afterRender:MetaphorJs.emptyFn,onShow:MetaphorJs.emptyFn,onHide:MetaphorJs.emptyFn,onDestroy:MetaphorJs.emptyFn});MetaphorJs.getCmp=h;$.fn.createCmp=function(d,
b){var e=null;d&&"string"!=typeof d&&(b=d,d=null);d=d||"MetaphorJs.cmp.Component";b=b||{};this.each(function(){var a=$(this),c=a.attr("cmp-id");if(c)return e=h(c),!1;b.el=a;b.dom=this;e=MetaphorJs.create(d,b);return!1});return e};$.fn.getCmp=function(){return h(this.attr("cmp-id"))}})();
}());